<section class="screen-padding screen-lm">
    <div >
      <div class="comp-header">
        <p  routerLink="/proofing/newproffing" class="comp-header-p">
          <i class="fa fa-arrow-left back-button"></i>
          <span>Proofing File Upload</span>
        </p>
      </div>
  
      <div class="filter-aling-2">
      
        <div style="display: flex; gap: 10px; align-items: start;justify-content: space-between;margin-bottom: -10px;">
        <lib-vs-search-cmp
          class="npm-mat-edit"
          [SearchArr]="uploadsearch"
          [Outputtype]="searchvar"
          (dataoutput)="fileuploadsummary($event)"
          [ButtonArr]="filebutton"
        >
        </lib-vs-search-cmp>
  
        <!-- <button
          type="button"
          class="btn btn-outline-success"
          matTooltip="File Upload Create"
          [matTooltipPosition]="'above'"
          matTooltipClass="custom-tooltip"
          (click)="createfileupload()"
          style="border-radius: 40px; cursor: pointer"
        >
          <i class="fa fa-plus"></i>
        </button> -->
        <div style="display: flex; gap: 10px;">
          <button
          class="btn btn-outline-success"
                style="border-radius: 40px"
                (click)="verifyfile()"
          >Verify</button>
          <button
          class="btn btn-outline-success"
          style="border-radius: 40px"
          (click)="movefile(summarylist)"
          >Move</button>
          <button  class="btn btn-outline-success"
   style="border-radius: 40px"
   (click)="status_button()">Status
   </button>
        </div>
        </div>
    
      </div>
  
      <div
      class="modal fade"
      id="exampleModaldata"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header" style="background-color: #DDEFDD;">
            <p class="modal-title mb-0 header_font" id="exampleModalLabel">
              Data Moving...
            </p>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              #closefilepopup
              aria-label="Close"
              (click)="closepopupdata()"
            >
              <i aria-hidden="true">&times;</i>
            </button>
          </div>
    
          <div class="modal-body">
          <div style="display: flex;justify-content: space-between;align-items: center;margin-bottom: 10px;">
           <div>
            GL No(s): <span style="font-weight: bold;">{{fileaccoutnumber}}</span>
           </div>
          <div>
            <button
            type="button"
            (click)="refresh()"
            matTooltip="Refresh"
            class="btn btn-outline-success refresh_status"
            
          >
            <i class="fa fa-refresh" aria-hidden="true"></i>
          </button>
          </div>
          </div>
    <lib-vs-cbox-summary   [SummaryDetails]="filestatusData"
    [SummaryApiObj]="filestatussummary"></lib-vs-cbox-summary>
          </div>
        </div>
      </div>
      </div>
      <!-- <div class="summmary">
        <lib-vs-cbox-summary
          [SummaryDetails]="fileuploadsummaryData"
          [SummaryApiObj]="fileuploadsummaryObjNew"
        ></lib-vs-cbox-summary>
      </div> -->
      <div  class="comp-table t-resposive t-bdr-box">
        <table>
          <thead>
            <tr>
              <th>S.No</th>
              <th class="th-nowrap">File Name</th>
              <th class="th-nowrap">GL Number</th>
              <th class="th-nowrap">Upload On</th>
              <!-- <th><span style="display: block;width: 85px !important;">From</span></th>
              <th><span style="display: block;width: 85px !important;">To</span></th> -->
              <th class="th-nowrap">Data Count</th>
              <!-- style="display: block;width: 238px !important;"  ALREADY APPLIED REMARKS STYLE IN SPAN -->
              <th><span >Remarks</span></th>
              <th>Select</th>
              <th>Status</th>
              <th>Delete</th>
              <th>View</th>
              <th>Mapping</th>
              <th>Report</th>
              <th>Connection file</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let temp of summarylist; index as i">
              <td scope="row">{{ (currentpage - 1) * 10 + i + 1 }}</td>
              <td>{{ temp.filename }}</td>
              <td>{{ temp.acc_num }}</td>
              <td>{{ temp.created_date | date:'dd-MM-yyyy'  }}</td>
              <!-- <td>{{ temp.from_date  | date:'dd-MM-yyyy' }}</td>
              <td>{{ temp.to_date   | date:'dd-MM-yyyy'}}</td> -->
              <td>{{ temp.file_count }}</td>
              <td matTooltip="{{ temp.remarks || '' }}" matTooltipClass="custom-tooltipdark">
                {{ temp.remarks && temp.remarks.trim() ? (temp.remarks | slice: 0 : 30) + '...' : '' }}
              </td>
              <td>
                <input 
                  type="checkbox"  
                  [checked]="checkedFiles[temp.id]" 
                  (change)="onCheckboxChange($event, temp, i)" 
                  [disabled]="temp.status.status !== 'Verification_Success' && temp.status.status !== 'Upload_Success'"
                  class="example-margin"
                />
              </td>
                          <td>
                <p [ngClass]="getStatusClass(temp.status.id)">
                  {{ temp.status.status }}
                  <!-- {{ temp.status.status.replace('_', ' ') }} -->
                </p>              
              </td> 
              <td>
                <i class="fa fa-trash" style="font-size: 19px;cursor: pointer;color: #ff6969;" aria-hidden="true" 
                 (click)="deletefile(temp)"></i>
          </td>           
              <td>
                    <i class="fa fa-eye td-btn" style="font-size: 19px;cursor: pointer;color: #00b1d3;" aria-hidden="true" 
                     (click)="openpopup(temp)"></i>
              </td>
              <td>
                <i class="fa fa-paper-plane" aria-hidden="true" style="font-size: 18px;cursor: pointer;" (click)="routetoproofingmapping()"></i>
                    <!-- <i style="font-size: 20px;" 
                    matTooltipClass="custom-tooltipdark" class="fa fa-download" aria-hidden="true" (click)="genfiledownload(temp.id)"></i> -->
                          </td>
                          <td >
                            <div style="display: flex;gap: 10px;">
                              <span>
                                <i class="fa fa-eye" aria-hidden="true" style="font-size: 19px;cursor: pointer;color: #00b1d3;"
                                (click)="report_view()"></i>
                              </span>
                              <span style="margin-left: 15px;">
                                <i class="fa fa-download" aria-hidden="true" style="font-size: 19px;cursor: pointer;color: #01a85a;"
                                (click)="report_download(temp.acc_num)"></i>
                              </span>
                            </div>
                           
                          
                          </td>
                          <td>
                            <i class="fa fa-file-text" aria-hidden="true" style="font-size: 19px;cursor: pointer;color:blue;"
                              (click)="connecting_file(temp?.acc_num)"></i>
                          </td>
            </tr>
            <tr *ngIf="summarylist?.length==0" class="text-center">
                <td colspan="5"> No Records Found</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div *ngIf="summarylist?.length>0" class="col-sm-12" style="font-size: small;text-align: right;">
        <button mat-icon-button [disabled]="has_previous === false" color="primary"
            (click)="previousClickTemplate()">
            <mat-icon>arrow_back</mat-icon>
        </button>
        {{currentpage}}
        <button mat-icon-button [disabled]="has_next === false" color="primary" (click)="nextClickTemplate()">
            <mat-icon>arrow_forward</mat-icon>
        </button>
    </div>
    </div>
    
  
    <div
      class="modal fade"
      id="exampleModal"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg modal-dialog-centered" style="width: fit-content;">
        <div class="modal-content">
          <div class="modal-header" style="background-color: #DDEFDD;">
            <p class="modal-title mb-0 header_font" id="exampleModalLabel">
              Proofing File Upload
            </p>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              #proofingfileuploadclose
              aria-label="Close"
              (click)="closedpopup()"
            >
              <i aria-hidden="true">&times;</i>
            </button>
          </div>
          <div>
            <form
            [formGroup]="fileuploadForm"
            
            (ngSubmit)="uploadDocument()"
          >
          <div class="modal-body">
            <div>
              <div class="fileuploadinput">
                <lib-vs-dynamicform-cmp
                  class="npm-mat-edit"
                  [InputFields]="fileupoladfield"
                  (dataEvent)="fileuploaddata($event)"
                  [ResetForm]="restformdropfileupload"
                ></lib-vs-dynamicform-cmp>
              </div>
            </div>
            <div style="display: grid; place-items: center">
              <div
              style="
                border: 2px solid #d9d9d9;
                padding: 10px;
                border-radius: 4px;
                height: 52px;
                margin-top: 4px;
              "
            >
            <input
            style="border: none !important"
            type="file"
            id="formFile"
           
            formControlName="images"
            (change)="fileChange($event, 'notbulk')"
          />
            </div>
            </div>
            
          </div>
          <div class="modal-footer"  >
            <button
              type="submit"
              class="btn btn-outline-success"
             style="border-radius: 50px;"
              matTooltip="File Upload"
            >
              Upload
            </button>
          </div>
          </form>
          </div>
        </div>
      </div>
    </div>
    <div
    class="modal fade"
    id="viewscreen"
    tabindex="-1"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header" style="background-color: #DDEFDD;">
          <p class="modal-title mb-0 header_font" id="exampleModalLabel">
            File View
          </p>
          <button
            type="button"
            class="close"
            data-dismiss="modal"
            #closeaddpopup
            aria-label="Close"
            (click)="closedpopup()"
          >
            <i aria-hidden="true">&times;</i>
          </button>
        </div>
        
        <div class="modal-body">
          <div>
            <form [formGroup]="file_view_searchform" class="search-auto-fit">
              <div id="matInput-size">
                  <mat-form-field appearance="outline">
                      <mat-label>File Name</mat-label>
                      <input matInput formControlName="file_name">
                  </mat-form-field>
              </div>
              <div style="margin-top: 5px;">
                  <button class="btn btn-outline-success refresh_status" (click)="getsummary()"><mat-icon
                          style="font-weight: 700;">search</mat-icon></button>
              </div>
              <div style="margin-top: 5px;">
                  <button class="btn btn-outline-success refresh_status" (click)="reset_search()"><mat-icon style="font-weight: 700;"
                          >refresh</mat-icon></button>
              </div>
             
      
          </form>
          </div>
          <div >
            <lib-vs-cbox-summary [SummaryDetails]="consolidate_summary_header"
            [SummaryApiObj]="get_summary_api"></lib-vs-cbox-summary>
          </div>
          
        </div>
        <!-- <div class="modal-footer"  #closeaddpopup >
          <button
            type="submit"
            class="btn btn-outline-success"
           style="border-radius: 50px;"
            matTooltip="File Upload"
          >
            Close
          </button>
        </div> -->
        
      </div>
    </div>
  </div>
  <div
    class="modal fade"
    id="download_view"
    tabindex="-1"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-xl ">
      <div class="modal-content">
        <div class="modal-header" style="background-color: #DDEFDD;">
          <p class="modal-title mb-0 header_font" id="exampleModalLabel">
            Proofing Download View
          </p>
          <button
            type="button"
            class="close"
            data-dismiss="modal"
            #closeaddpopup
            aria-label="Close"
          
          >
            <i aria-hidden="true">&times;</i>
          </button>
        </div>
        
        <div class="modal-body">
       
          <app-proofing-s3-download  [parentData]="conditiondata" ></app-proofing-s3-download>
        </div>
        <!-- <div class="modal-footer"  #closeaddpopup >
          <button
            type="submit"
            class="btn btn-outline-success"
           style="border-radius: 50px;"
            matTooltip="File Upload"
          >
            Close
          </button>
        </div> -->
        
      </div>
    </div>
  </div>
    <!-- <div>
      <app-proofing-s3-download ></app-proofing-s3-download>
    </div> -->
    <!-- <div *ngIf="uploadcreateview">
      <app-file-upload [Id]="this.id" (onCancel)="backtosummary()"></app-file-upload>
    </div> -->
  </section>