<div    style="
display: grid;
grid-template-columns: 16fr 50px -1fr;
gap: 20px;
margin-top: 25px;
"> 
<section class="dif-cards">
  <div class="title-div">
    <h2 *ngIf="!accountid">Account Form</h2>
    <h2 *ngIf="accountid">Account Update Form</h2>
    <span
      ><button
        type="button"
        class="btn btn-outline-success"
        data-toggle="modal"
        style="border-radius: 20px; cursor: pointer"
        (click)="popupbulkopen()"
      >
        <span class="fa fa-plus"></span> Bulk Creation
      </button></span
    >
  </div>

  <div
    class="modal fade bd-example-modal-lg"
    data-backdrop="static"
    data-keyboard="false"
    id="bulkupload"
    tabindex="-1"
    role="dialog"
    aria-labelledby="exampleModalCenterTitle"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title" id="exampleModalLongTitle">
            Bulk Account Creation Upload
          </h3>
          <button
            type="button"
            class="close"
            data-dismiss="modal"
            aria-label="Close"
            #closeaddpopup
            (click)="closedpopup()"
          >
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form [formGroup]="bulkcreation_form">
            <!-- <div class="gridGroup-mFields-2"> -->
              <!-- <lib-vs-dynamicform-cmp
                class="npm-mat-edit"
                [InputFields]="datafetchfield"
                (dataEvent)="datafetchdata($event)"
                [ResetForm]="restformdatafetch"
              ></lib-vs-dynamicform-cmp> -->

              <!-- <mat-label>Data Fetch Template<label
                                        style="color: red;">*</label></mat-label><br>
                                <mat-form-field class="matformfieldstyle" style="width: 250px" appearance="outline">
                                    <input placeholder="Select Template" matInput formControlName="wisefintemplate"
                                        [matAutocomplete]="auto1" class="matformfieldinputstyle">
                                    <mat-autocomplete #auto1="matAutocomplete" [displayWith]="displayFn">
                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                        <ng-container *ngIf="!isLoading">
                                            <mat-option *ngFor="let temp1 of templateList"
                                                [value]="temp1">{{temp1.template}}
                                            </mat-option>
                                        </ng-container>
                                    </mat-autocomplete>
                                </mat-form-field> -->

              <!-- <lib-vs-dynamicform-cmp
                class="npm-mat-edit"
                [InputFields]="exceluploadfield"
                (dataEvent)="exceluploaddata($event)"
                [ResetForm]="restformexcel"
              ></lib-vs-dynamicform-cmp> -->
            <!-- </div> -->
            <!-- <mat-label>Excel upload Template<label style="color: red;">*</label></mat-label><br>
                                <mat-form-field class="matformfieldstyle" style="width: 250px;" appearance="outline">
                                    <input placeholder="Select Template" matInput formControlName="cbstemplate_id"
                                        [matAutocomplete]="auto" class="matformfieldinputstyle">
                                    <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn1">
                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                        <ng-container *ngIf="!isLoading">
                                            <mat-option *ngFor="let temp of templateList"
                                                [value]="temp">{{temp.template}}
                                            </mat-option>
                                        </ng-container>
                                    </mat-autocomplete>
                                </mat-form-field> -->

            <!-- <div class="col-md-4">
                                <button type="button" class="btn btn-outline-success" data-toggle="modal" data-target="#bulkupload" (click)="template_download()"
                                style="border-radius: 20px;cursor: pointer;margin-left: 50px;margin-top: 5px;"><span class="fa fa-download"></span>
                                Template Download</button>
                            </div> -->

            <!-- <div class="col-md-4">
                                 <mat-form-field>
                                    <mat-label>Select Upload Type</mat-label>
                                    <mat-select formControlName="template" >
                                        <mat-option *ngFor="let bulk of bulk_upload" [value]="bulk">{{bulk.name}}</mat-option>
                                    </mat-select>
                                 </mat-form-field>
                            </div> -->

            <div>
              <div class="input-group mb-3">
                <div class="custom-file">
                  <input
                    type="file"
                    class="custom-file-input"
                    id="inputGroupFile02"
                    [accept]="acceptfiles[templateText]"
                    formControlName="excel"
                    (change)="fileChange($event, 'notbulk')"
                  />
                  <label
                    #fileLabel
                    class="custom-file-label"
                    for="inputGroupFile02"
                    aria-describedby="inputGroupFileAddon02"
                  >
                    Choose file
                  </label>
                </div>
                <div class="apend">
                  <span
                    class="input-group-text back-button"
                    id="inputGroupFileAddon02"
                    (click)="upload_acc()"
                    >Upload</span
                  >
                </div>
              </div>

              <!-- <label class="btn btn-default btn-file">
                <input
                  type="file"
                  [accept]="acceptfiles['EXCEL']"
                  formControlName="excel"
                  (change)="fileChange($event)"
                />
              </label>

              <button class="btn btn-success" (click)="upload_acc()">
                Upload
              </button> -->
            </div>
            <div
              style="
                display: flex;
                align-items: center;
                justify-content: flex-start;
                gap: 10px;
              "
            >
              <span>
                Click here to download sample format for Multiple accounts
                upload
              </span>
              <mat-icon (click)="template_download()">download</mat-icon>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-outline-dark text-center"
            style="border-radius: 40px"
            data-dismiss="modal"
            (click)="closedpopup()"
          >
            Close
          </button>
          <!--  <button type="button" class="btn btn-success">Add</button>
                </div> -->
        </div>
      </div>
    </div>
  </div>

  <div>
    <!-- <pre>{{AddForm.value | json}}</pre> -->
    <form [formGroup]="AddForm" (ngSubmit)="submitForm()">
      <div class="form-container">
        <div class="npm-mat-edit">
          <mat-form-field appearance="outline">
            <mat-label>Account Number</mat-label>
            <input
              matInput
              placeholder="Account Number"
              class="matformfieldinputstyle"
              formControlName="account_number"
              autocomplete="off"
              required
            />
          </mat-form-field>
        </div>

        <div class="npm-mat-edit">
          <mat-form-field appearance="outline">
            <mat-label>Name</mat-label>
            <input
              matInput
              placeholder="Name"
              formControlName="name"
              autocomplete="off"
              required
            />
          </mat-form-field>
        </div>
        <div>
          <mat-checkbox
            class="example-margin"
            formControlName="Partially_Mapped_Entries"
            >Validate Partially Mapped Entries</mat-checkbox
          >
        </div>
        <!-- <div>
          <mat-radio-group
            aria-label="Select an option"
            formControlName="templateType"
            class="radioBtn-flex"
          >
            <mat-radio-button value="1" (click)="datafetch()"
              >Data Fetch Template</mat-radio-button
            >
            <mat-radio-button value="2" (click)="exceldatass()"
              >Excel upload Template</mat-radio-button
            >
          </mat-radio-group>
        </div>

        <div *ngIf="datafeth">
          <lib-vs-dynamicform-cmp
            class="npm-mat-edit"
            [InputFields]="datafetchedfield"
            (dataEvent)="datafetcheddata($event)"
          ></lib-vs-dynamicform-cmp> -->
        <!-- </div> -->
        <!-- <mat-label style="margin-left: 60px;">Data Fetch Template<label
                                style="color: red;">*</label></mat-label><br>
                        <mat-form-field class="matformfieldstyle" style="width: 250px;margin-left: 60px;"
                            appearance="outline">
                            <input placeholder="Select Template" matInput formControlName="ctrltemplate1"
                                [matAutocomplete]="auto1" class="matformfieldinputstyle">
                            <mat-autocomplete #auto1="matAutocomplete" [displayWith]="displayFn">
                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                <ng-container *ngIf="!isLoading">
                                    <mat-option *ngFor="let temp1 of templateList" [value]="temp1">{{temp1.template}}
                                    </mat-option>
                                </ng-container>
                            </mat-autocomplete>
                        </mat-form-field> -->

        <!-- <div *ngIf="execeldata">
          <lib-vs-dynamicform-cmp
            class="npm-mat-edit"
            [InputFields]="exceldatafield"
            (dataEvent)="dataexeceldata($event)"
          ></lib-vs-dynamicform-cmp>
        </div> -->
        <!-- <mat-label>Excel upload Template<label style="color: red;">*</label></mat-label><br>
                        <mat-form-field class="matformfieldstyle" style="width: 250px;" appearance="outline">
                            <input placeholder="Select Template" matInput formControlName="ctrltemplate"
                                [matAutocomplete]="auto" class="matformfieldinputstyle">
                            <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn1">
                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                <ng-container *ngIf="!isLoading">
                                    <mat-option *ngFor="let temp of templateList" [value]="temp">{{temp.template}}
                                    </mat-option>
                                </ng-container>
                            </mat-autocomplete>
                        </mat-form-field> -->
        <div class="npm-mat-edit">
          <mat-form-field appearance="outline">
            <mat-label>Unit Code</mat-label>
            <input
              matInput
              placeholder="Unit Code"
              type="number"
              formControlName="unitcode"
              autocomplete="off"
              required
            />
          </mat-form-field>
        </div>
        <div class="npm-mat-edit">
          <mat-form-field appearance="outline">
            <mat-label>Account Owner</mat-label>
            <input
              matInput
              placeholder="Account Owner"
              formControlName="accountowner"
              autocomplete="off"
              required
            />
          </mat-form-field>
        </div>
        <div class="npm-mat-edit">
          <mat-form-field appearance="outline">
            <mat-label>Closing Balance</mat-label>
            <input
              matInput
              placeholder="Closing Balance"
              type="number"
              formControlName="closingbalance"
              autocomplete="off"
            />
          </mat-form-field>
        </div>
        <!-- <td><mat-label>Data Fetch Template<label style="color: red;">*</label></mat-label><br>
                        <mat-form-field class="matformfieldstyle" style="width: 250px;" appearance="outline">
                            <input placeholder="Select Template" matInput formControlName="ctrltemplate1"
                                [matAutocomplete]="auto1" class="matformfieldinputstyle">
                            <mat-autocomplete #auto1="matAutocomplete" [displayWith]="displayFn">
                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                <ng-container *ngIf="!isLoading">
                                    <mat-option *ngFor="let temp1 of templateList" [value]="temp1">{{temp1.template}}
                                    </mat-option>
                                </ng-container>
                            </mat-autocomplete>
                        </mat-form-field>
                    </td>
                    <td>
                        <mat-label  style="
                        margin-left: 60px;">Excel upload Template<label style="color: red;">*</label></mat-label><br>
                        <mat-form-field class="matformfieldstyle" style="width: 250px;margin-left: 60px;" appearance="outline">
                            <input placeholder="Select Template" matInput formControlName="ctrltemplate"
                                [matAutocomplete]="auto" class="matformfieldinputstyle">
                            <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn1">
                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                <ng-container *ngIf="!isLoading">
                                    <mat-option *ngFor="let temp of templateList" [value]="temp">{{temp.template}}
                                    </mat-option>
                                </ng-container>
                            </mat-autocomplete>
                        </mat-form-field>
                    </td> -->

        <!-- <td> -->
        <!-- <mat-label>Unit Code<label style="color: red;">*</label></mat-label><br>
                    <mat-form-field class="matformfieldstyle" style="width: 250px;" appearance="outline">
                        <input matInput placeholder="Account Number" class="matformfieldinputstyle"
                            formControlName="unitcode" autocomplete="off" required>
                    </mat-form-field>
                </td>
                <td>
                    <mat-label style="margin-left: 60px;">Account Owner</mat-label><br>
                    <mat-form-field class="matformfieldstyle" style="width: 250px;margin-left: 60px;" appearance="outline">
                        <input matInput placeholder="Account Owner" class="matformfieldinputstyle"
                            formControlName="accountowner" autocomplete="off" required>
                    </mat-form-field>

                </td> -->

        <!-- <mat-label>Account Risk</mat-label><br> -->
        <div class="npm-mat-edit">
          <mat-form-field appearance="outline">
            <mat-label>Account Risk</mat-label>
            <mat-select
              formControlName="accountrisk"
              class="matformfieldinputstyle"
            >
              <mat-option *ngFor="let risk of account_risk" [value]="risk">{{
                risk.name
              }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <!-- <lib-vs-optiondd-cmp
          [InputFields]="risktype"
          (dataEvent)="risksubmit($event)"
        ></lib-vs-optiondd-cmp> -->

        <!-- <mat-label style="margin-left: 60px;">Account Type</mat-label><br> -->
        <div class="npm-mat-edit">
          <mat-form-field appearance="outline">
            <mat-label>Account Type</mat-label>
            <mat-select formControlName="accounttype">
              <mat-option *ngFor="let type of acounttypepay" [value]="type">{{
                type.name
              }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <!-- <lib-vs-optiondd-cmp
          [InputFields]="acctype"
          (dataEvent)="accsubmit($event)"
        ></lib-vs-optiondd-cmp> -->

        <!-- <mat-label style="margin-left: 60px;">Account Category</mat-label><br> -->
        <div class="npm-mat-edit">
          <mat-form-field class="matformfieldstyle" appearance="outline">
            <mat-label>Account Category</mat-label>
            <mat-select formControlName="accountcat">
              <mat-option *ngFor="let cat of acc_Category" [value]="cat">{{
                cat.name
              }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <!-- <lib-vs-optiondd-cmp
          [InputFields]="acccattype"
          (dataEvent)="acccatsubmit($event)"
        ></lib-vs-optiondd-cmp> -->

        <!-- <tr>
                   
                </tr> -->
        <!-- <tr>
                    <td>
                        <mat-label >Account Risk</mat-label><br>
                    <mat-form-field class="matformfieldstyle" style="width: 250px;" appearance="outline">
                        <mat-select formControlName="accountrisk" class="matformfieldinputstyle">
                            <mat-option *ngFor="let risk of account_risk" [value]="risk">{{risk.name}}</mat-option>
                        </mat-select>
                    </mat-form-field>
                    </td>
                    <td>
                        <mat-label style="margin-left: 60px;">Account Type</mat-label><br>
                    <mat-form-field class="matformfieldstyle" style="width: 250px;margin-left: 60px;" appearance="outline">
                        <mat-select formControlName="accounttype" class="matformfieldinputstyle">
                            <mat-option *ngFor="let type of acounttypepay" [value]="type">{{type.name}}</mat-option>
                        </mat-select>
                    </mat-form-field>
                    </td>
                </tr> -->
                
                  <lib-vs-dynamicform-cmp id="matInput-size" [InputFields]="acc_template_drop"
                  [formGroup]="AddForm" (dataEvent)="chipselect($event)"></lib-vs-dynamicform-cmp>
       
                <div [ngStyle]="{ 
                  'pointer-events': templatedata ? 'auto' : 'none',
                  'opacity': templatedata ? '1' : '0.6'
                }">
  <!-- <lib-vs-chipdd-cmp
    class="npm-matChip-edit"
    [InputFields]="inputaccount"
    (dataEvent)="ruleselected($event)"
  ></lib-vs-chipdd-cmp> -->
<div class="npm-mat-edit">
  <mat-form-field  id="matInput-size"   appearance="outline" (click)="getrules(1)">
    <mat-label>Select rules</mat-label>
    <input type="text"
           matInput
           formControlName="slectrules"
           [matAutocomplete]="auto"
          >
    <mat-autocomplete #auto="matAutocomplete"  [displayWith]="displayRuleName" (optionSelected)="toggleSelection($event.option.value)">
      <mat-option *ngFor="let topping of ruleslist" [value]="topping">
        <mat-checkbox [checked]="isSelected(topping)" (click)="$event.stopPropagation()" (change)="toggleSelection(topping)">
          {{ topping.rule_name }}
        </mat-checkbox>
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>
</div>
</div>


                

          
      </div>

     

      <!-- <lib-vs-cbox-summary
        [SummaryDetails]="SummaryaccountData"
        [SummaryApiObj]="SummaryApiaccountObjNew"
      ></lib-vs-cbox-summary> -->

      <div class="footer-btns">
        <button
          type="submit"
          style="border-radius: 40px"
          class="btn btn-outline-success"
          [disabled]="AddForm.invalid"
        >
          Submit
        </button>
        <button
          (click)="onCancelClick()"
          skipLocationChange
          class="btn btn-outline-dark"
        style="border-radius: 40px"
        >
          Cancel
        </button>
      </div>

      <!-- <button type="button"  class="btn btn-light" (click)="onCancelClick()" skipLocationChange
            style="border-radius: 7px;margin-left: 10px;
            border-color: black;
            background-color: white;">Cancel</button>
            <button type="submit" style="border-radius: 10px;margin-left: 10px;
            border-color: #01A85A;
            background-color: #01A85A;"
                class="btn btn-light" (click)="editVendorForm()" >Submit</button>    -->
    </form>
    <div
      class="modal fade"
      id="preview"
      data-backdrop="static"
      data-keyboard="false"
      tabindex="-1"
      role="dialog"
      style="background-size: cover"
      #closeaddpopup
      (click)="closedpopup()"
    >
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            Rule: <mat-label>{{ rulename }}</mat-label> Delimiter:
            <mat-label>{{ delimiter }}</mat-label>
          </div>

          <div style="padding-left: 5%">
            <br />
            <span *ngFor="let value of finalvalue; index as i">
              {{ value }}
              <mat-label
                *ngIf="finalvalue?.length > 0 && i != finalvalue?.length - 1"
                style="color: red; font-weight: bold"
                >{{ delimiter }}</mat-label
              >
            </span>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-light"
              id="darkbtn"
              data-dismiss="modal"
              (click)="closedpopup()"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
</div>