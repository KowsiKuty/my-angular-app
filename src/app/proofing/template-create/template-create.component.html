<!-- <section class="screen-padding">
  <h2>File Import Template Name</h2>
  <div>
    <div class="component-fltr"> -->
<!-- <form [formGroup]="AddForm">
        <div class="npm-mat-edit">
          <mat-form-field appearance="outline">
            <mat-label>File Type*</mat-label>
            <mat-select
              (selectionChange)="filter($event)"
              formControlName="file_type"
              [disabled]="true"
              class="matformfieldinputstyle"
            >
              <mat-option
                *ngFor="let filetype of filetypeList"
                [value]="filetype.id"
              >
                {{ filetype.text }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </form> -->
<!-- <div class="npm-mat-edit">
        <mat-form-field appearance="outline">
          <mat-label>Template Name </mat-label>
          <input
            matInput
            placeholder="Enter name..."
            class="matformfieldinputstyle"
            [(ngModel)]="template_name"
            autocomplete="off"
            required
          />
        </mat-form-field>
      </div>
    </div>

    <div class="table-matFields">
      <table class="table table-bordered" id="commonstyle">
        <thead class="table_header">
          <tr>
            <th>Template Columns</th>
            <th>
              Input File Columns<mat-label style="color: red">*</mat-label>
            </th>
          </tr>
        </thead>

        <tbody *ngFor="let item of columnlist; index as i">
          <tr name="commonrow">
            <td>
              <mat-label>{{ item.sys_col_name }}</mat-label>
            </td>

            <td>
              <div
                *ngIf="item.sys_col_name == 'Reference No'"
                class="npm-mat-edit"
              >
                <mat-form-field appearance="outline">
                  <input
                    matInput
                    [(ngModel)]="item.column_name"
                    autocomplete="off"
                  />
                </mat-form-field>
              </div> -->
<!-- <div
                *ngIf="item.sys_col_name != 'Reference No'"
                class="npm-mat-edit"
              >
                <mat-form-field appearance="outline">
                  <input
                    matInput
                    [(ngModel)]="item.column_name"
                    autocomplete="off"
                    required
                  />
                </mat-form-field>
              </div>
            </td>
          </tr>
          <tr name="amttyperow" *ngIf="i == 6">
            <td>
              <p>Amount Field Stipulation</p>
            </td>

            <td>
              <mat-radio-group
                color="primary"
                (change)="chooseAmtColumns($event)"
                [(ngModel)]="amtValue"
              >
                <mat-radio-button [value]="'single'" [disabled]="singleref"
                  >Seperate
                </mat-radio-button>
                <mat-radio-button [value]="'multiple'" [disabled]="multipleref"
                  >Same
                </mat-radio-button>
              </mat-radio-group>
            </td>
          </tr> -->
<!-- <tr name="singlerow" *ngIf="i == 7 && amtValue == 'multiple'">
            <td>Enter Identifiers</td>
            <td>
              <div *ngFor="let data of item.split" class="npm-mat-edit">
                <mat-form-field appearance="outline">
                  <input
                    [placeholder]="data.sys_col_name"
                    matInput
                    [(ngModel)]="data.column_name"
                    autocomplete="off"
                    required
                  />
                </mat-form-field>
              </div> -->

<!-- <mat-form-field style="margin-top: -1%;margin-bottom:-4%;margin-left:5px;" class="matformfieldstyle"
                                    appearance="outline">
                                    <input placeholder="Dr" matInput class="matformfieldinputstyle"
                                        [(ngModel)]="item.creditkey" autocomplete="off" required>
                                </mat-form-field> -->
<!-- </td>
          </tr>
        </tbody>
      </table>

      <div class="footer-btns">
        <button
          type="submit"
          style="border-radius: 10px"
          class="btn btn-outline-success"
          (click)="submitForm()"
        >
          Submit
        </button>
        <button
          (click)="onCancelClick()"
          skipLocationChange
          class="btn btn-outline-dark"
          style="border-radius: 7px"
        >
          Cancel
        </button>
      </div>
    </div>
  </div>
</section> -->

<!-- <h2>
                    
                    <mat-form-field style="float:right" class="matformfieldstyle" appearance="outline">
                        <input matInput class="matformfieldinputstyle" placeholder="Enter Rule name" autocomplete="off"
                            required>
                        <button matSuffix mat-icon-button style="font-size:15px" (click)="searchrules()"
                            aria-label="Search">
                            <mat-icon>search</mat-icon>
                        </button>
                    </mat-form-field>
                </h2> -->
<!-- <section>
                    <mat-label>Select Rules</mat-label><br>
                    <mat-form-field style="width:50%" class="matformfieldstyle" appearance="outline">
                        <mat-select class="matformfieldinputstyle" multiple #rulescroll
                            (selectionChange)="ruleselected()" [(ngModel)]="selectedrules">

                            <mat-option *ngFor="let value of ruleslist" [value]="value">
                                {{value.rule_name}}
                                 <label *ngFor="let rule of value.ruletypes">{{rule.name}}--</label> 
                            </mat-option>


                        </mat-select>
                    </mat-form-field>


                </section> -->
<!-- <form [formGroup]="selectRulesform">
                    <section style="margin-left: 75px;">
                        <mat-label>Select Rules</mat-label><br>
                        <mat-form-field style="width:250px" class="matformfieldstyle datewidth" appearance="outline">
                
                            <input matInput class="matformfieldinputstyle" [matAutocomplete]="rulescroll" formControlName="slectrules"
                                  >
                            <mat-autocomplete #rulescroll="matAutocomplete" [displayWith]="displayFnrule">
                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                <ng-container *ngIf="!isLoading" >
                                    <mat-option *ngFor="let value of ruleslist" (click)="ruleselected(value)"  [value]="value"
                                        matTooltip="{{value.rule_name}}">{{value.rule_name}}
                                    </mat-option>
                                </ng-container>
                            </mat-autocomplete>
                        </mat-form-field>
                    </section>
                </form> -->

<!-- <table class="table table-bordered" id='commonstyle'>
                    <thead class="table_header">
                        <tr>
                            <th>Name</th> -->
<!-- <th>Selected Column<mat-label style="color:red">*</mat-label>
                            </th> -->
<!-- <th>Preview</th>

                        </tr>

                    </thead>

                    <tbody *ngFor="let rules of selectedrules;index as i">
                        <td>
                            {{rules.rule_name}}
                        </td> -->
<!-- <td>
                            {{rules?.Field_type}}
                        </td> -->
<!-- <td>
                            <button data-toggle="modal" data-target="#preview" mat-icon-button
                                (click)="previewrules(rules)">
                                <mat-icon>visibility</mat-icon>
                            </button>
                        </td> -->
<!-- <section *ngFor="let type of rules.ruletypes;index as ind">
                        <td>
                            <div>{{type.name}}</div>
                                <div *ngIf="type.id == 1">
                                    <mat-form-field class="matformfieldstyle tableinput" appearance="outline">
                                        <mat-select class="matformfieldinputstyle" [(ngModel)]="rules.column1">
                                            <mat-option *ngFor="let value of inputcolumns" [value]="value">
                                                {{value}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>



                                <div *ngIf="type.id == 2">
                                    <mat-form-field class="matformfieldstyle tableinput" appearance="outline">
                                        <mat-select class="matformfieldinputstyle" [(ngModel)]="rules.column1">
                                            <mat-option *ngFor="let value of inputcolumns" [value]="value">
                                                {{value}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <mat-form-field style="margin-left:10px" class="matformfieldstyle tableinput"
                                        appearance="outline">
                                        <mat-select class="matformfieldinputstyle" [(ngModel)]="rules.column2">
                                            <mat-option *ngFor="let value of inputcolumns" [value]="value">
                                                {{value}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            
                        </td>
                        
                        
                    </section> -->
<!-- </tbody>
                </table> -->

<!-- <tr>

                    <td>
                        <mat-label style="margin-left: 78px;">Enter No of Reference Columns<label style="color: red;">*</label>
                        </mat-label>
                        <br>
                        <mat-form-field class="matformfieldstyle" appearance="outline" 
                            style="width: 250px;margin-left: 78px;">
                            <input matInput placeholder="3" (keypress)="numberOnly($event)" type="number" (change)="refer_references()" class="matformfieldinputstyle"
                                [(ngModel)]="no_of_reference" autocomplete="off" required>
                        </mat-form-field>
                    </td>
                </tr> -->

<!-- Account Statement Template Form -->
<!-- <div class="modal fade" id="preview" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog"
    style="background-size: cover">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                Rule: <mat-label>{{rulename}}</mat-label>
                Delimiter: <mat-label>{{delimiter}}</mat-label>
            </div>

            <div style="padding-left:5%">
                <br>
                <span *ngFor="let value of finalvalue;index as i">
                    {{value}} <mat-label *ngIf="finalvalue?.length > 0 && i != finalvalue?.length-1"
                        style="color:red;font-weight: bold;">{{delimiter}}</mat-label>

                </span>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" id="darkbtn" s data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div> -->

<!-- <pre>
    {{columnlist | json}}
</pre> -->

<div
  style="
    display: grid;
    grid-template-columns: 16fr 50px -1fr;
    gap: 20px;
    margin-top: 25px;
  "
>
  <section class="dif-cards">
    <h2 style="margin-bottom: 20px">File Import Template</h2>
    <form [formGroup]="fileuploadform">
      <!-- <input type="file" class="file-upload" multiple (change)="wisefinfileupload($event)"> -->

      <div class="filter-aling">
        <label class="custom-file-upload-cbs">
          <input
            type="file"
            (change)="template_file($event)"
            formControlName="file_upload"
            style="display: none"
          />
          <i class="fa fa-cloud-upload"></i>Template excel upload
        </label>

        <span *ngIf="upload_file_name" class="custom-chip">
          <span>{{ upload_file_name }}</span>
          <mat-icon type="button" class="delete-file-btn" (click)="deleteFile()"
            >delete</mat-icon
          >
        </span>

        <div>
          <button
            class="btn btn-outline-success"
            style="border-radius: 50px"
            (click)="clicktempupload()"
          >
            Upload
          </button>
        </div>
      </div>
    </form>
  </section>
</div>

<div
*ngIf="showdropdown"
  style="
    display: grid;
    grid-template-columns: 16fr 50px -1fr;
    gap: 20px;
    margin-top: 25px;
  "
>
  <section class="dif-cards">
    <h2 style="margin-bottom: 20px">Template Creation Column</h2>
    <div id="matInput-size" >
      <mat-form-field  appearance="outline">
        <mat-label>Template Name</mat-label>
        <input
          matInput
          placeholder="Enter name..."
          [(ngModel)]="template_name"
          autocomplete="off"
          
        />
      </mat-form-field>
    </div>

    <div class="form-container">
      <ng-container *ngFor="let item of columnlist; index as i">
        <div id="matInput-size">
          <!-- <div class="npm-mat-edit"  style="display: flex; align-items: flex-start; gap: 10px">
            <mat-form-field appearance="outline">
              <mat-label>{{ item.sys_col_name }}</mat-label>
              <mat-select
                [(ngModel)]="item.column_name"
                autocomplete="off"
                class="matformfieldinputstyle"
                [required]="item.sys_col_name !== 'Reference No'"
              >
              <mat-option *ngIf="drop_temp_array?.length" (click)="resetfunction(item)">Clear</mat-option>
                <mat-option *ngFor="let data of drop_temp_array" [value]="data">
                  {{ data }}
                </mat-option>
              </mat-select>
            </mat-form-field>
           
              <button *ngIf="item.column_name" class="btn btn-danger refresh_status" ngbTooltip="Reset Field" placement="right" (click)="resetfunction(item)">x</button>
         
          </div> -->
          <mat-form-field appearance="outline">
            <mat-label>{{ item.sys_col_name }}</mat-label>
          
            <!-- Show input for specific fields -->
            <input
              *ngIf="['Debit', 'Credit', 'Credit_type', 'Debit_type'].includes(item.sys_col_name)"
              matInput
              [(ngModel)]="item.column_name"
              autocomplete="off"
              
            />
          
            <!-- Show dropdown for all other fields -->
            <mat-select
              *ngIf="!['Debit', 'Credit', 'Credit_type', 'Debit_type'].includes(item.sys_col_name)"
              [(ngModel)]="item.column_name"
              autocomplete="off"
              class="matformfieldinputstyle"
              >
              <!-- [required]="item.sys_col_name !== 'Reference No'" -->
              <mat-option *ngFor="let data of drop_temp_array" [value]="data">
                {{ data }}
              </mat-option>
            </mat-select>
            
            <mat-icon matSuffix *ngIf="item.column_name"   (click)="resetfunction(item)">close</mat-icon>
          </mat-form-field>
          
          
        </div>

        <div class="proof_temp_inp" name="amttyperow" *ngIf="i == 6">
          <h2>Amount Field Stipulation</h2>
          <div>
            <mat-radio-group
              color="primary"
              (change)="chooseAmtColumns($event)"
              [(ngModel)]="amtValue"
              style="display: flex; gap: 18px"
            >
              <mat-radio-button [value]="'single'" [disabled]="singleref">
                Seperate
              </mat-radio-button>
              <mat-radio-button [value]="'multiple'" [disabled]="multipleref">
                Same
              </mat-radio-button>
            </mat-radio-group>
          </div>
        </div>

        <div class="proof_temp_inp" name="singlerow" *ngIf="i == 7 && amtValue == 'multiple'">
          <h2>Enter Identifiers</h2>
          <td>
            <div *ngFor="let data of item.split" cid="matInput-size">
              <mat-form-field appearance="outline">
                <input
                  [placeholder]="data.sys_col_name"
                  matInput
                  [(ngModel)]="data.column_name"
                  autocomplete="off"
                  required
                />
              </mat-form-field>
            </div>
          </td>
        </div>
      </ng-container>
    </div>
    <div class="footer-btns">
      <button
        type="submit"
         style="border-radius: 40px"
        class="btn btn-outline-success"
        (click)="submitForm()"
      >
        Submit 
      </button>
      <button
        (click)="onCancelClick()"
        skipLocationChange
        class="btn btn-outline-dark"
         style="border-radius: 40px"
      >
        Cancel
      </button>
    </div>
  </section>
</div>


<div
*ngIf="showinput"
  style="
    display: grid;
    grid-template-columns: 16fr 50px -1fr;
    gap: 20px;
    margin-top: 25px;
  "
>
  <section class="dif-cards">
    <h2 *ngIf="!tempid" style="margin-bottom: 20px">Template Creation Column</h2>
<h2 *ngIf="tempid" style="margin-bottom: 20px">Template Update Column</h2>

    <div id="matInput-size" >
      <mat-form-field  appearance="outline">
        <mat-label>Template Name</mat-label>
        <input
          matInput
          placeholder="Enter name..."
          [(ngModel)]="template_name"
          autocomplete="off"
          required
        />
      </mat-form-field>
    </div>

    <div class="form-container">
      <ng-container *ngFor="let item of columnlist; index as i">
        <div id="matInput-size" >
            <mat-form-field appearance="outline">
              <mat-label>{{ item.sys_col_name }}</mat-label>
              <input
              matInput
              [(ngModel)]="item.column_name"
              autocomplete="off"
            />
            </mat-form-field>
        </div>

        <div class="proof_temp_inp"  name="amttyperow" *ngIf="i == 6">
          <h2>Amount Field Stipulation</h2>
          <div>
            <mat-radio-group
              color="primary"
              (change)="chooseAmtColumns($event)"
              [(ngModel)]="amtValue"
              style="display: flex; gap: 18px"
            >
              <mat-radio-button [value]="'single'" [disabled]="singleref">
                Seperate
              </mat-radio-button>
              <mat-radio-button [value]="'multiple'" [disabled]="multipleref">
                Same
              </mat-radio-button>
            </mat-radio-group>
          </div>
        </div>

        <div  class="proof_temp_inp" name="singlerow" *ngIf="i == 7 && amtValue == 'multiple'">
          <h2>Enter Identifiers</h2>
          <td>
            <div *ngFor="let data of item.split" class="npm-mat-edit">
              <mat-form-field appearance="outline">
                <input
                  [placeholder]="data.sys_col_name"
                  matInput
                  [(ngModel)]="data.column_name"
                  autocomplete="off"
                  required
                />
              </mat-form-field>
            </div>
          </td>
        </div>
      </ng-container>
    </div>
    <div class="footer-btns">
      <button
        type="submit"
         style="border-radius: 40px"
        class="btn btn-outline-success"
        (click)="submitForm()"
      >
        Submit
      </button>
      <button
        (click)="onCancelClick()"
        skipLocationChange
        class="btn btn-outline-dark"
        style="border-radius: 40px"
      >
        Cancel
      </button>
    </div>
  </section>
</div>
<!-- <div
  style="
    display: flex;
    gap: 20px;
    justify-content: space-around;
    margin-top: 20px;
  "
>
  <mat-card style="width: 50%">
    <mat-card-content>
      <div style="display: flex">
        <div id="matInput-size">
          <mat-form-field appearance="outline">
            <mat-label>Template File</mat-label>
            <input matInput />
          </mat-form-field>
        </div>
      </div>
      <form>
        <table class="table">
          <thead>
            <tr style="font-weight: bold">
              <td>Template Columns</td>
              <td>Input Columns</td>
            </tr>
          </thead>
          <tbody *ngFor="let item of columnlist; index as i">
            <tr>
              <td>{{ item.sys_col_name }}</td>
              <td class="temp_td">
                <mat-form-field
                  style="margin-top: -1%; margin-bottom: -4%"
                  class="matformfieldstyle"
                  appearance="outline"
                >
                  <mat-select
                    [value]="item.column_name"
                    class="matformfieldinputstyle"
                  >
                    <mat-option
                      *ngFor="let data of drop_temp_array"
                      [value]="data"
                    >
                      {{ data }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
                <button
                  class="btn btn-danger refresh_status"
                  ngbTooltip="Reset Field"
                  placement="right"
                >
                  x
                </button>
              </td>
            </tr>
          </tbody>
        </table>
        <hr />

        <br />
        <br />
      </form>
    </mat-card-content>
  </mat-card>
</div> -->
