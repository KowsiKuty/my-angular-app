<div class="container" style="max-width: 100%;">
    <!-- <div  *ngIf="showBatchSummary"> 
    <div class="col-md-12">
        <h2 style="margin-left: 8px;font-family:'Times New Roman';font-weight:bold;">Batch Summary </h2>
        <form [formGroup]="batchSearchForm">
            <div class="row col-md-12">
                <div class="col-md-2">
                    <mat-form-field style="width: 11rem;margin-left: 8px; ">
                        <mat-label>Batch No</mat-label>
                        <input matInput formControlName="batchno" autocomplete="off" id="ap-approve-0011">
                    </mat-form-field>
                </div>
                <div class="col-md-2" style="margin-left: 14px;">
                    <mat-form-field style="width: 9rem;">
                        <mat-label>From Date</mat-label>
                        <input matInput [matDatepicker]="picker" formControlName="fromdate" autocomplete="off" id="ap-approve-0012">
                        <mat-datepicker-toggle matSuffix [for]="picker">
                            <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                        </mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>
                </div>
                <div class="col-md-2" style="margin-left: 14px;">
                    <mat-form-field style="width: 9rem; ">
                        <mat-label>To date</mat-label>
                        <input matInput [matDatepicker]="picker1" formControlName="todate" autocomplete="off" id="ap-approve-0013">
                        <mat-datepicker-toggle matSuffix [for]="picker1">
                            <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                        </mat-datepicker-toggle>
                        <mat-datepicker #picker1></mat-datepicker>
                    </mat-form-field>
                </div>
                <div class="col-md-2">
                    <mat-form-field style="width: 11rem;margin-left: 8px; ">
                        <mat-label>ECF Count</mat-label>
                        <input matInput formControlName="batchcount" autocomplete="off" id="ap-approve-0014">
                    </mat-form-field>
                </div>
                <div class="col-md-3">                
                        <button class="btn btn-outline-primary" type="submit"
                        style="border-radius:40px;margin-left: 50px;" color="primary"
                        (click)="batchSummarySearch()" id="ap-approve-0015"><i matTooltip="Search" class="fa fa-search"
                            aria-hidden="true"></i></button>
                        <button class="btn btn-outline-primary" type="button"
                        style="border-radius:40px;margin-left: 10px;"
                       color="primary" (click)="resetbatch()" id="ap-approve-0016">Reset</button>
                </div>
            </div>
        </form> 
    </div>   
    
    <div  style="margin-top: 2%;margin-left: 50px; width: 77%;">
        <table class="table table-bordered  padsize" style="text-align:center;" >	
            
            <thead>
                <tr class="table_header tableset " style="white-space: nowrap;text-align: center;margin-left: 3%;">
        
        
                    <th>S.No</th>
                    <th>Batch No</th>
                    <th>Batch Date</th>
                    <th>Batch Amount</th>
                    <th>ECF Count</th>
                    <th>Lock</th>
                    <th>View</th>
                    <th>Edit</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let lists of batchSummary; index as i" style="white-space: nowrap;text-align: center;">
                    <td> {{(batchpresentpage - 1)*pagesizebatch +i+1 }} </td>
                    <td>{{lists?.batchno}}</td>
                    <td>{{lists?.batch_date | date:'dd/MM/yyyy'}}</td>
                    <td>{{lists?.batchamount|currency:'INR'}}</td>
                    <td>{{lists?.batchcount}}</td>
                    <td><span class="material-icons">lock</span></td>
                    <td>  
                        <span matTooltip="view" class=" fa fa-eye create "
                        style="color: green;cursor: pointer;padding:10px"  (click)="batchView(lists)"></span>
                    </td>
                    <td>
                        <button mat-icon-button matTooltip=" Edit" class="iconbutton" color="primary" id="ap-approve-0017">
                            <mat-icon style="color: grey;" aria-label="Edit" (click)="batchEdit(lists)">edit</mat-icon>
                        </button>
                    </td>
                </tr>
            </tbody>
    </table>
    
    <div *ngIf="batchSummary ?.length == 0" style="margin-left: 42%;">
        <h3 >Sorry data not found!.. </h3>
    </div>
    <div class="row" *ngIf="isbatchsummarypage">
        <div  class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
            <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -220px;">
                Total Count:{{getbatchtotalcount}}
            </p> 
        </div>
        <div  class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left:105px">
            <button mat-icon-button [disabled]="has_batchpageprevious === false" color="primary" (click)="previousClickbatch()" id="ap-approve-0018">
                <mat-icon>arrow_back</mat-icon>
            </button> {{batchpresentpage}}
            <button mat-icon-button [disabled]="has_batchpagenext === false" color="primary" (click)="nextClickbatch()" id="ap-approve-0019">
                <mat-icon>arrow_forward</mat-icon>
            </button>
        </div>
        </div>
    </div>
    </div> -->

    <div *ngIf="showBatchView"> 
        <p style="color:black;font-size: 22px;font-weight: bold;margin-left: 3%;margin-top: 20px;">
        Batch Details
    </p>
    <div  style="margin-top: 2%;margin-left: 3%; width: 85%;">
        <table class="table table-bordered table-responsive padsize" style="text-align:center;display: contents;" >	
            
            <thead>
                <tr class="table_header tableset " style="white-space: nowrap;text-align: center;margin-left: 3%;">
                        <th>S.No</th>
                        <th>Batch No</th>
                        <th>Batch Date</th>
                        <th>Batch Amount</th>
                        <th>ECF Count</th>
                        <th>Raiser Name</th>
                        <th> Branch Name</th>
                        <th>Approver Name</th>
                    
                </tr>
                
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>{{batchno}}</td>
                    <td style="white-space: nowrap;">{{batchdates| date:'dd-MMM-yyyy'}}</td>
                    <td style="text-align: right;">{{batchamount|currency:'INR'}}</td>
                    <td>{{batchcount}}</td>
                    <td>{{ecfraisername}}</td>
                    <td>{{ecfbranchname}}</td>
                    <td>{{ecfapprovername}}</td>
                </tr>
            </tbody>
        </table>
    </div>
            
    <!-- <div>
        <form [formGroup]="batchForm" style="margin-left:4%;" >
            <table style="margin-bottom: 2%;">
            <tr>
            <td>
                <mat-form-field style="width:200px;">
                    <input matInput placeholder="Batch No" formControlName="batchno" 
                        autocomplete="off" readonly id="ap-approve-0020">
                </mat-form-field>
            </td>

            <td>
                <mat-form-field style="width:200px;margin-left: 50px;">
                    <input matInput placeholder="Batch Date" formControlName="batchdate"
                        autocomplete="off" readonly id="ap-approve-0021">
                </mat-form-field>
            </td>
            <td>
                <mat-form-field style="width:200px;margin-left: 50px;">
                    <input matInput placeholder="Batch Amount" formControlName="batchamt"
                        autocomplete="off" readonly id="ap-approve-0022">
                </mat-form-field>
            </td>
            </tr>
            </table>
        </form>
    </div>
     -->
    <p style="color:black;font-size: 22px;font-weight: bold;margin-left: 3%;margin-top: 20px;">
        ECF Summary
    </p>
    <div  style="margin-top: 2%;margin-left: 3%; width: 85%;">
        <table class="table table-bordered table-responsive padsize" style="text-align:center;display: contents;" >	
            
            <thead>
                <tr class="table_header tableset " style="white-space: nowrap;text-align: center;margin-left: 3%;">
    
                    <th>S.No</th>
                    <th>CR No</th>
                    <th>ECF Type</th>
                    <th>Commodity Name</th>
                    <th>ECF Date</th>
                    <th>ECF Amount</th>
                    <th>ECF Status</th>
                    <th>Payment For</th>
                    <th>View</th>
                    <!-- <th>Download</th> -->
                </tr>
            </thead>
            <tbody>
                <tr *ngFor ="let ab of batchviewlist;index as i">
                    <td>{{(bvpresentpage - 1)*pagesizebview +i+1 }}</td>
                    <td>{{(ab?.crno !== null)?(ab?.crno):"-"}}</td>
                    <td>{{ab?.aptype}}</td>
                    <td>{{ab?.commodity_id?.name}}</td>
                    <td style="white-space: nowrap;">{{ (ab?.apdate !== "None") ? (ab?.apdate |  date:'dd-MMM-yyyy') : "-" }}</td>
                    <td style="text-align: right;">{{ab?.apamount|currency:'INR'}}</td>
                    <td>{{ab?.apstatus}}</td>
                    <td>{{ab?.payto}}</td>
                    <td>
                        
                        <span matTooltip="view" class=" fa fa-eye create "
                            style="color: green;cursor: pointer;padding:10px" (click)="headerview(ab,i)"></span>
                   
                </td>
                <!-- <td>
                   
                        <button type="button" class="btn btn-outline-success"
                            style="border-radius: 40px;margin-left: 3%;"  id="ap-approve-0023">
                            <span class="fa fa-download" matTooltip="Download CoverNote">
                            </span>
                        </button>
                    </td> -->
    
                </tr>
            </tbody>
        </table>
        <div *ngIf="batchviewlist ?.length == 0" style="margin-left: 42%;">
            <h3 >Sorry data not found!.. </h3>
        </div>
        <div class="row" *ngIf="isbatchviewpage">
          <div  class="col-sm-12" style="margin-bottom: 5%;font-size: small;text-align:right;">
                <button mat-icon-button [disabled]="has_bviewpageprevious === false" color="primary" (click)="previousClickbview()" id="ap-approve-0024">
                    <mat-icon>arrow_back</mat-icon>
                </button> {{bvpresentpage}}
                <button mat-icon-button [disabled]="has_bviewpagenext === false" color="primary" (click)="nextClickbview()" id="ap-approve-0025">
                    <mat-icon>arrow_forward</mat-icon>
                </button>
            </div>
        </div>
    </div>    
    </div> 
   

    <mat-card style="margin-top: 13px;margin-left: 20px;margin-right: 20px;margin-bottom: 20px;" *ngIf="showheaderform">
        <div style="margin-left: 10px;margin-top: 1%; width: 100%;" >

            <h2 style="font-weight:bold;">ECF Header - ({{viewcrno}})
                <button class="btn btn-outline-success" type="button"
                style="border-radius:40px;text-align: end;margin-left: 370px;"
                color="primary" matTooltip="Previous ECF" (click)="movetoprevious()" [disabled]="viewindex == 0" id="ap-approve-0026"> Move Previous</button>
            <button class="btn btn-outline-success" type="button"
            style="border-radius:40px;text-align: end;margin-left: 20px;"
           
            color="primary" matTooltip="Next ECF" (click)="movetonext()" [disabled]="viewindex+1 == batchviewnewlist?.length" id="ap-approve-0027"> Move Next</button>
            <button *ngIf="apstatusname != 'AP APPROVED' && apstatusname != 'AP REJECTED'"  type="button"   matTooltip="Click to Modify" style="border-radius:40px;margin-left:20px; 
            background-color: white;color:blueviolet;border-color: blueviolet;" (click)="modify()" class="btn btn-outline-info" id="ap-approve-0028">Modification</button> 
           </h2>
            <div>
                <form [formGroup]="ecfheaderviewForm" style="margin-left:2%;" >
                    <table style="margin-bottom: 2%;">
                        <div>
                            <tr>
                                <td>


                                    <mat-form-field style="width:200px;margin-left:-25px">
                                        <input matInput placeholder="ECF Type" formControlName="ecftype" 
                                            autocomplete="off" readonly id="ap-approve-0029">
                                    </mat-form-field>
                                </td>

                                <td *ngIf="this.ecftypeid == 3 || this.ecftypeid == 13">
                                    <mat-form-field style="width:200px;margin-left: 50px;">
                                        <input matInput placeholder="Payment For" formControlName="payto"
                                            autocomplete="off" readonly id="ap-approve-0030">
                                    </mat-form-field>
                                </td>
                                <td *ngIf="this.ecftypeid == 4">
                                    <mat-form-field style="width:200px;margin-left: 50px;">
                                        <input matInput placeholder="Payment For" formControlName="ppx"
                                            autocomplete="off" readonly id="ap-approve-0031">
                                    </mat-form-field>
                                </td>
                                <td>



                                    <mat-form-field style="width:200px;margin-left: 50px;">
                                        <input matInput placeholder="Supplier Type" formControlName="supplier_type"
                                            autocomplete="off" readonly id="ap-approve-0032">
                                    </mat-form-field>


                                </td>
                                <td>


                                    <mat-form-field style="width:200px;margin-left: 50px;">
                                        <input matInput placeholder="Commodity Name" formControlName="commodity_id"
                                            autocomplete="off" readonly id="ap-approve-0033">
                                    </mat-form-field>
                                </td>
                                <td *ngIf="this.ecftypeid != 3 && this.ecftypeid != 4 &&  this.ecftypeid != 13">
                                    <mat-form-field
                                        style="width:200px;margin-left: 50px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="Raiser Branch" formControlName="branch"
                                            autocomplete="off" readonly id="ap-approve-0034">
                                    </mat-form-field>
                                </td>
                            </tr>
                           
                            <tr>
                                
                                <!-- <td>
                                    <mat-form-field
                                        style="width:200px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="Client Name" formControlName="client_code"
                                            autocomplete="off" readonly id="ap-approve-0035"> 
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field
                                        style="width:200px;margin-left: 50px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="RM Name" formControlName="rmcode"
                                            autocomplete="off" readonly id="ap-approve-0036">
                                    </mat-form-field>
                                </td> -->
                                <td >
                                    <mat-form-field
                                        style="width: 200px;margin-left:-25px;font-family: 'Times New Roman', Times, serif;">
                                        <mat-label>ECF Date</mat-label>
                                        <input matInput readonly  placeholder="ECF Date"
                                            formControlName="ecfdate"   id="ap-approve-0037">
                                       
                                    </mat-form-field>
                                </td>
                                <td *ngIf="this.ecftypeid != 7">
                                    <mat-form-field
                                        style="width: 200px;margin-left:50px;font-family: 'Times New Roman', Times, serif;">
                                        <mat-label>ECF Amount</mat-label>
                                        <input matInput formControlName="ecfamount" style="text-align:right"
                                            autocomplete="off" readonly id="ap-approve-0038">
                                    </mat-form-field>
                                </td>
                                <td *ngIf="this.ecftypeid == 7">
                                    <mat-form-field
                                        style="width: 200px;margin-left:50px;font-family: 'Times New Roman', Times, serif;">
                                        <mat-label>CRN Amount</mat-label>
                                        <input matInput  formControlName="ecfamount" style="text-align:right"
                                            autocomplete="off" readonly id="ap-approve-0039">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field
                                        style="width: 200px;margin-left:50px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="Purpose" formControlName="remark"
                                            autocomplete="off" readonly id="ap-approve-0040">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field
                                    style="width: 200px;margin-left:50px;font-family: 'Times New Roman', Times, serif;">
                                    <input matInput placeholder="Is Original Invoice" formControlName="is_originalinvoice"
                                        autocomplete="off" readonly id="ap-approve-0041">
                                </mat-form-field>
                                </td>
                                
                            </tr>

                            <tr>
                               
                                <td *ngIf="this.ecftypeid == 3 || this.ecftypeid == 4 || this.ecftypeid == 13">
                                    <mat-form-field
                                    style="width:200px;margin-left: -25px;font-family: 'Times New Roman', Times, serif;">
                                    <input matInput placeholder="Raiser Branch" formControlName="branch"
                                        autocomplete="off" readonly id="ap-approve-0042">
                                </mat-form-field>
                                </td>
                               
                                <td style="white-space:nowrap;" *ngIf="this.ecftypeid == 3 && this.checkhr == true">

                                    <mat-radio-group formControlName="is_raisedby_self" readonly class="inputformatradiobutton">
                                        <mat-label style="margin-left:50px">Behalf of Self</mat-label>
                                        <mat-radio-button *ngFor="let n of behalfyesorno" [value]="n.value"
                                          style="margin-left:10px"  [disabled]="showgst">
                                            {{n.display}}
                                        </mat-radio-button>
                                    </mat-radio-group>
    
    
                                </td>
                                
                                <td *ngIf="this.ecftypeid == 3 && ecfheaderviewForm.value.is_raisedby_self == false">
                                    <mat-form-field
                                        style="width:200px;margin-left: 50px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="Raised For" formControlName="raised_for"
                                            autocomplete="off" readonly id="ap-approve-0043">
                                    </mat-form-field>
                                </td>
                                <td *ngIf="this.ecftypeid == 3 && ecfheaderviewForm.value.is_raisedby_self == false">
                                    <mat-form-field
                                        style="width:200px;font-family: 'Times New Roman', Times, serif;margin-left: 50px;">
                                        <input matInput placeholder="Raised By" formControlName="raised_by"
                                            autocomplete="off" readonly id="ap-approve-0044">
                                    </mat-form-field>
                                </td>
    
                                </tr>
                                <tr *ngIf="this.ecfheaderviewForm?.value?.location != '' && this.ecfheaderviewForm?.value?.location != null">
                                  <td>
                                      <mat-form-field
                                        style="width:200px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="Location" formControlName="location"
                                            autocomplete="off" readonly id="ap-approve-0045">
                                       </mat-form-field> 
                                </td>
                            </tr>
                                <tr>
                                <td>
                                    
                                    
                                        <h3   data-toggle="modal"
                                        data-target=".bd-example-modal-xl" style="cursor: pointer;color:blue;font-family: 'Montserrat';margin-left:-35px" class="btn btn-link" matTooltip="View Notes">View Notes</h3>
                                    
                                </td>
                                <!-- <td>
                                    <h3  (click)="gettrandata()" data-toggle="modal"
                                     data-target="#showtrandetails" style="cursor: pointer;color:blue;font-family: 'Montserrat';" class="btn btn-link" matTooltip="Transaction View">View Transaction Details</h3>
                                </td> -->

                                     <!-- -------notepad------ -->

                                     <div class="modal fade bd-example-modal-xl" tabindex="-1" role="dialog"
                                     aria-labelledby="myExtraLargeModalLabel" aria-hidden="true">
                                     <div class="modal-dialog modal-xl">
                                         <div class="modal-content">
                                             <div class="modal-header">
                                                 <h2 class="modal-title" id="ap-approve-0001">
                                                     Note Pad
                                                 </h2>
                                             </div>
                                             <br>
                                             <div style="margin-left: 50px;width:90%;height: 70%;">
                                                 <div>

                                                     <div [ngxSummernote]="config"
                                                         [ngxSummernoteDisabled]="editorDisabled" (blur)="onBlur()"
                                                         (mediaDelete)="onDelete($event)"
                                                         (summernoteInit)="summernoteInit($event)"
                                                         formControlName="notename">
                                                     </div>

                                                 </div>
                                             </div>
                                             <br>
                                             <div class="modal-footer">
                                                 <!-- <button type="button" style="border-radius: 40px;margin-left: 10px;"
                                                     class="btn btn-outline-primary"
                                                     data-dismiss="modal" id="ap-approve-0046">Close</button> -->

                                                 <button type="button" style="border-radius:10px;margin-left: 10px; border-color: black; 
                                                     background-color: white;" class="btn btn-light"
                                                     data-dismiss="modal" id="ap-approve-0047">
                                                     Close</button>

                                             </div>
                                         </div>
                                     </div>
                                 </div>

                                <!-- <td>
                            <span class="material-icons" type="button" data-toggle="modal"
                                style="margin-left: 50px;" data-target=".bd-example-modal-xl"
                                formControlName="notename">description</span>Add Note
                        </td> -->
                            </tr>

                        </div>
                    </table>
                </form>
            </div>

            
            <h2 *ngIf="this.ecftypeid != 7" style="margin-left: 1px;font-weight: bold;">Invoice Header</h2>
            <h2 *ngIf="this.ecftypeid == 7" style="margin-left: 1px;font-weight: bold;">Credit Note Header</h2>
            <div>
                <form [formGroup]="InvoiceHeaderForm">
                <table>
                    <tr>
                        <mat-radio-group formControlName="invoicegst" readonly class="inputformatradiobutton">
                            <mat-label > GST Applicable</mat-label>
                            <mat-radio-button *ngFor="let n of yesorno" [value]="n.value"
                                style="margin-left: 10px;" [disabled]="showgst">
                                {{n.display}}
                            </mat-radio-button>
                        </mat-radio-group>
                    </tr>
                </table>
                </form>
            </div>
            <div>

                <div class="table-responsive" style="width:100%;margin-top: 1%;">
                    <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                        <thead class="table_header" style="text-align: center;">
                            <tr>

                                <th>S.No</th>
                                <th  style="width:20%;">Invoice CR.No</th>
                                <th *ngIf="this.ecftypeid == 3 && this.InvoiceHeaderForm.value.invoicegst == 'Y'">Supplier GST</th>
                                <th *ngIf="this.ecftypeid == 3 && this.InvoiceHeaderForm.value.invoicegst == 'Y'">Supplier Name</th>
                                <th *ngIf="this.ecftypeid == 2 || this.ppxid == 'S' || this.ecftypeid == 14">Supplier Name</th>
                                <th *ngIf="this.ecftypeid == 2 || this.ppxid == 'S' || this.ecftypeid == 14">Supplier GST No</th>
                                <th *ngIf="this.ecftypeid == 2 || this.ppxid == 'S'  || this.ecftypeid == 14">Supplier State</th>
                                <th>Place Of Supply</th>
                                <th *ngIf="this.ppxid != 'E'">Invoice No</th>
                                <th *ngIf="this.ecftypeid == 7">Credit Ref No</th>
                                <th *ngIf="this.ppxid != 'E'">Invoice Date</th>
                                <th>Taxable Amount</th>
                                <th *ngIf="(this.ecftypeid == 2 || this.ecftypeid == 7 ||this.ecftypeid == 14 ||this.ecftypeid == 3) && this.InvoiceHeaderForm.value.invoicegst == 'Y'">Tax Amount</th>
                                <!-- <th>Roundoff Amount</th>
                                <th>Other Adjustment</th> -->
                                <th>Total Amount</th>
                                <th>Invoice Status</th>
                                <th>Attached PDF</th>
                                <th *ngIf="apstatusid == 1 || apstatusid == 3 || apstatusid == 12">Audit Checklist</th>
                                <th *ngIf="apstatusid == 1 || apstatusid == 3 || apstatusid == 12">Dedupe Check</th>
                                <th>View Transaction</th>
                                <th *ngIf="apstatusid == 1 || apstatusid == 3 || apstatusid == 12">Select</th>
                                <th>Action</th>

                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let dtl of invheaderdata; index as i">
                                <!-- <td> {{(ecfpresentpage - 1)*pagesizeecf +i+1 }} </td>  -->
                                <td>{{i+1}}</td>
                                <td  style="width:20%;">{{dtl?.apinvoiceheader_crno}}</td>
                                <td *ngIf="this.ecftypeid == 3 && this.InvoiceHeaderForm.value.invoicegst == 'Y'">{{dtl?.manual_gstno}}</td>
                                <td *ngIf="this.ecftypeid == 3 && this.InvoiceHeaderForm.value.invoicegst == 'Y'">{{dtl?.manualsupp_name}}</td>
                                <td *ngIf="this.ecftypeid == 2 || this.ppxid == 'S' || this.ecftypeid == 14">{{dtl?.supplier_id?.name}}</td>
                                <td *ngIf="this.ecftypeid == 2 || this.ppxid == 'S' || this.ecftypeid == 14">{{dtl?.supplier_id?.gstno}}</td>
                                <td *ngIf="this.ecftypeid == 2 || this.ppxid == 'S'  || this.ecftypeid == 14">{{dtl?.supplierstate_id?.name}}
                                </td>
                                <td>{{dtl?.place_of_supply?.code}}-{{dtl?.place_of_supply?.name}}</td>
                                <td *ngIf="this.ppxid != 'E'">{{dtl?.invoiceno}}</td>
                                <td *ngIf="this.ecftypeid == 7">{{dtl?.credit_refno}}</td>
                                <td  style="white-space: nowrap;"*ngIf="this.ppxid != 'E'">{{dtl?.invoicedate| date:'dd-MMM-yyyy'}}</td>
                                <td style="text-align: right;">{{dtl?.invoiceamount| currency:'INR'}}</td>
                                <td  style="text-align: right;" *ngIf="(this.ecftypeid == 2 || this.ecftypeid == 7 ||this.ecftypeid == 14 ||this.ecftypeid == 3) && this.InvoiceHeaderForm.value.invoicegst == 'Y'">{{dtl?.taxamount| currency:'INR'}}</td>
                                <!-- <td>{{dtl.roundoffamt}}</td>
                                <td>{{dtl.otheramount}}</td> -->
                                <td style="text-align: right;">{{dtl?.totalamount| currency:'INR'}}</td>
                                <td>{{ (dtl?.apinvoiceheaderstatus_id !== null) ? (dtl?.apinvoiceheaderstatus) : (dtl?.invoice_status)}}</td>
                                <td>
                            <tr *ngFor="let file of dtl.file_data; index as j">
                                <td>
                                    {{j+1}}
                                </td>
                                <td>
                                   
                                    <a  (click)="data(file)"  class="btn btn-link" style="cursor: pointer;color:blue;"
                                        matTooltip="View File"  data-target="#ap-approve-0002" data-toggle="modal">{{ file.file_name}}</a>
                                </td>
                                <td>
                                   
                                    <i class="material-icons"  (click)="getfiles(file)">
                                        get_app
                                    </i>
                                </td>
                            </tr>
                            </td>

                                <!-- <td style="text-align: center;">
                                    <span matTooltip="view File" class=" fa fa-file-image-o "
                                        style="color: hsl(0, 0%, 0%);cursor: pointer;" data-toggle="modal"
                                        (click)="getfiledetails()" data-target="#showattachmentpopup"></span>

                                </td> -->
                                <td *ngIf="apstatusid == 1 || apstatusid == 3|| apstatusid == 12">
                                    <button type="button" class="btn btn-outline-primary" style="border-radius:50px;height: 53px; margin-top: 12px;font-size:medium;"
                                    data-toggle="modal" data-target="#ap-approve-0005" (click)="getquestion(i, dtl.id, dtl.invoicedate)"  >Audit Checklist
                                                                  </button> 
                                </td>
                                <td *ngIf="apstatusid == 1 || apstatusid == 3 || apstatusid == 12">
                                    <button type="button" class="btn btn-outline-primary" style="border-radius:50px;height: 53px; margin-top: 12px;font-size: medium;"
                                    data-toggle="modal" data-target="#ap-approve-0004" (click)="getdedup(i, dtl.id)">Dedupe Check
                                    </button> 
                                </td>
                                <td>
                                    <button type="button" class="btn btn-outline-primary" style="border-radius:40px;height: 70px; margin-top: 12px;font-size: medium;"
                                    data-toggle="modal" data-target="#ap-approve-0010" (click)="viewtrn(i, dtl.id)">View Transaction
                                    </button> 
                                </td>

                                <td *ngIf="apstatusid == 1 || apstatusid == 3 || apstatusid == 12">
                                    <section class="example-section">
                                        <mat-checkbox class="example-margin"  (change)="hdrselect($event,i)"  style="margin-top: 15px;margin-left: 6px;" [disabled]="! hdrSelectable[i]">
                                        </mat-checkbox>
                                    </section>
                                </td>
                                <td style="text-align: center;" >
                                    <span matTooltip="view" class=" fa fa-eye create "
                                        style="color: black;cursor: pointer;"  (click)="Movetodetail(i,dtl)"></span>
                                       

                                </td>
                                <!-- <td *ngIf="hdrSelectable[i]"></td> -->
                            </tr>
                            <tr *ngIf = "this.ecftypeid == 2  && this.InvoiceHeaderForm?.value?.invoicegst == 'Y'">
                                <td class="totaldisplay" colspan="10"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                            <tr *ngIf = "this.ecftypeid == 2  && this.InvoiceHeaderForm?.value?.invoicegst == 'N'">
                                <td class="totaldisplay" colspan="9"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                            <tr *ngIf = "this.ecftypeid == 7 && this.InvoiceHeaderForm?.value?.invoicegst == 'Y'">
                                <td class="totaldisplay" colspan="8"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                            <tr *ngIf = "this.ecftypeid == 7 && this.InvoiceHeaderForm?.value?.invoicegst == 'N'">
                                <td class="totaldisplay" colspan="7"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                            
                            <tr *ngIf = "this.ecftypeid == 14  && this.InvoiceHeaderForm?.value?.invoicegst == 'N'">
                                <td class="totaldisplay" colspan="9"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                            <tr *ngIf = "this.ecftypeid == 14  && this.InvoiceHeaderForm?.value?.invoicegst == 'Y'">
                                <td class="totaldisplay" colspan="10"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                            <tr *ngIf = "this.ecftypeid == 13">
                                <td class="totaldisplay" colspan="6"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                            <tr *ngIf = "this.ecftypeid == 4 && this.ppxid == 'S'">
                                <td class="totaldisplay" colspan="9"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>
    
                            </tr>
                            <tr *ngIf = "this.ecftypeid == 4 && this.ppxid == 'E'" >
                                <td class="totaldisplay" colspan="4"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                            <tr *ngIf = "this.ecftypeid == 3 && this.InvoiceHeaderForm?.value?.invoicegst == 'N'">
                                <td class="totaldisplay" colspan="6"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                            <tr *ngIf = "this.ecftypeid == 3 && this.InvoiceHeaderForm?.value?.invoicegst == 'Y'">
                                <td class="totaldisplay" colspan="9"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                        </tbody>
                    </table>
                    <div *ngIf="invheaderdata ?.length == 0" style="margin-left: 42%;">
                        <h3>Sorry data not found!.. </h3>
                    </div>
                   
                </div><br>
              
                <div *ngIf="(apstatusid == 1 || apstatusid == 3 || apstatusid == 12)">
                    <form [formGroup]="SubmitAPApproverForm">
      
                        <mat-form-field style="width: 250px;font-family: 'Times New Roman', Times, serif;margin-left: 350px;">
                            <input matInput placeholder="Remarks" formControlName="remarks" autocomplete="off" required id="ap-approve-0048">
                        </mat-form-field>
                
                   <button type="button"    class="btn btn-outline-success" style="border-radius:40px;margin-left:50px;
                    margin-bottom: 0px; 
                    background-color: white;" (click)="hdrApprove()" id="ap-approve-0049">Approve</button> 
                     <!-- <button type="button"    class="btn btn-outline-danger" style="border-radius:40px;margin-left:10px;
                     margin-bottom: 0px; 
                     background-color: white;" (click)="hdrReject()" [disabled]="!hdrApproveEnabled" id="ap-approve-0050">Reject</button>  -->
                     <!-- <button type="button"    class="btn btn-outline-success" style="border-radius:40px;margin-left:10px;
                     margin-bottom: 0px; 
                     background-color: white;" (click)="modify()" id="ap-approve-0051">Modification</button>  -->
                    <button type="button"    class="btn btn-outline-primary" style="border-radius:40px;margin-left:10px;
                     margin-bottom: 0px;
                    background-color: white;" (click)="back()" id="ap-approve-0052">Back</button>
                </form>
                </div>
                <div *ngIf="!(apstatusid == 1 || apstatusid == 3 || apstatusid == 12)">
                    <button type="button"    class="btn btn-outline-primary" style="border-radius:40px;margin-left:550px;
                     margin-bottom: 0px;
                    background-color: white;" (click)="back()" id="ap-approve-0053">Back</button>
                </div>
               


            </div>
        </div>
    </mat-card>


</div>
    
    
<div *ngIf="showimageHeaderAPI" id="ap-approve-0002" class="modal fade" aria-labelledby="my-modalLabel" aria-hidden="true"
tabindex="-1" role="dialog">
<div class="modal-dialog modal-xl" data-dismiss="modal" style="width: 60%;height: 80%;">
    <div class="modal-content">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ap-approve-0054">
            <span aria-hidden="true">&times;</span>
        </button>
        <div class="modal-body">
            <img src="{{jpgUrlsAPI}}" class="img-responsive" style="width: 100%;">

        </div>
    </div>
</div>
</div>

<div *ngIf="showimagepdf" id="ap-approve-0003" class="modal fade" aria-labelledby="my-modalLabel" aria-hidden="true" 
tabindex="-1" role="dialog">
<div class="modal-dialog modal-xl">
    <div class="modal-content">
        <div class="modal-header" style="background: rgba(23, 204, 23, 0.288);">
            <h2 class="modal-title">Attachments</h2>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ap-approve-0055">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <pdf-viewer [src]="pdfurl" [original-size]="false" [render-text]='false' [show-borders]="true"
            [fit-to-page]="true" [show-all]="true" style="display: block; height: 600px;" [fit-to-page]="true">
        </pdf-viewer>
    </div>
</div>

</div>



<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true" id="ap-approve-0004">
    <div class="modal-dialog modal-xl" style="width:80%;height:200%;">
        <div class="modal-content">
            <div class="modal-header">
            <h2 class="modal-title" style="text-align:center;margin-left:45%">Dedupe</h2>
            <button class="close" type="button" data-dismiss="modal" id="ap-approve-0056">x</button>                
            </div>
            <div class="modal-body">
                <pre>EXACT_MATCH</pre>
                <div class="table-responsive" class="tablescroll" style="margin-top: 10px;width: 100%;margin-left: 10px;">
                    <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                        <thead class="table_header " fixed-header>
                            <tr>
                                <th>S.No</th> 
                                <th>Invoice Number</th>                             
                                <th>Invoice Header Amount</th>
                                <th>Status</th>          
                                <th>CR Number</th>                
                                <th>Supplier Name</th>
                                <th>Branch Name</th>             
                                <th>Employee Name</th>                                      
                            </tr>
                        </thead>
                        <tbody>                    
                            <tr *ngFor="let value of exactList; index as i;">
                                <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                <td>{{value.invoiceno}}</td>
                                <td style="text-align: right;">{{value.invoiceamount}}</td>     
                                <td>{{value['status'].text}}</td>
                                <td>{{value.crno}}</td>                         
                                <td>{{value['supplier'].name}}</td>
                                <td>{{value['branch'].name}}</td>
                                <td>{{value.raised_empname}}</td>    
                            </tr>
                        </tbody>
                    </table>
                    <div *ngIf="exactList ?.length == 0" style="margin-left: 42%;">
                        <h3 style="font-family: 'Times New Roman', Times, serif;">No Records found!..</h3>
                    </div>
                </div>
                <br>

                <pre>WITHOUT_SUPPLIER</pre>
                <div class="table-responsive" class="tablescroll" style="margin-top: 10px;width: 100%;margin-left: 10px;">
                    <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                        <thead class="table_header " fixed-header>
                            <tr>
                                <th>S.No</th> 
                                <th>Invoice Number</th>                             
                                <th>Invoice Header Amount</th>
                                <th>Status</th>          
                                <th>CR Number</th>                
                                <th>Supplier Name</th>
                                <th>Branch Name</th>             
                                <th>Employee Name</th>                                      
                            </tr>
                        </thead>
                        <tbody>                    
                            <tr *ngFor="let value of withoutSuppList; index as i;">
                                <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                <td>{{value.invoiceno}}</td>
                                <td style="text-align: right;">{{value.invoiceamount}}</td>     
                                <td>{{value['status'].text}}</td>
                                <td>{{value.crno}}</td>                         
                                <td>{{value['supplier'].name}}</td>
                                <td>{{value['branch'].name}}</td>
                                <td>{{value.raised_empname}}</td>    
                            </tr>
                        </tbody>
                    </table>
                    <div *ngIf="withoutSuppList ?.length == 0" style="margin-left: 42%;">
                        <h3 style="font-family: 'Times New Roman', Times, serif;">No Records found!..</h3>
                    </div>
                </div>
                <br>

                <pre>WITHOUT_INVOICE_AMOUNT</pre>
                <div class="table-responsive" class="tablescroll" style="margin-top: 10px;width: 100%;margin-left: 10px;">
                    <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                        <thead class="table_header " fixed-header>
                            <tr>
                                <th>S.No</th> 
                                <th>Invoice Number</th>                             
                                <th>Invoice Header Amount</th>
                                <th>Status</th>          
                                <th>CR Number</th>                
                                <th>Supplier Name</th>
                                <th>Branch Name</th>             
                                <th>Employee Name</th>                                      
                            </tr>
                        </thead>
                        <tbody>                    
                            <tr *ngFor="let value of withoutInvAmtList; index as i;">
                                <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                <td>{{value.invoiceno}}</td>
                                <td style="text-align: right;">{{value.invoiceamount}}</td>     
                                <td>{{value['status'].text}}</td>
                                <td>{{value.crno}}</td>                         
                                <td>{{value['supplier'].name}}</td>
                                <td>{{value['branch'].name}}</td>
                                <td>{{value.raised_empname}}</td>    
                            </tr>
                        </tbody>
                    </table>
                    <div *ngIf="withoutInvAmtList ?.length == 0" style="margin-left: 42%;">
                        <h3 style="font-family: 'Times New Roman', Times, serif;">No Records found!..</h3>
                    </div>
                </div>
                <br>

                <pre>WITHOUT_INVOICE_NUMBER</pre>
                <div class="table-responsive" class="tablescroll" style="margin-top: 10px;width: 100%;margin-left: 10px;">
                    <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                        <thead class="table_header " fixed-header>
                            <tr>
                                <th>S.No</th> 
                                <th>Invoice Number</th>                             
                                <th>Invoice Header Amount</th>
                                <th>Status</th>          
                                <th>CR Number</th>                
                                <th>Supplier Name</th>
                                <th>Branch Name</th>             
                                <th>Employee Name</th>                                      
                            </tr>
                        </thead>
                        <tbody>                    
                            <tr *ngFor="let value of withoutInvNoList; index as i;">
                                <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                <td>{{value.invoiceno}}</td>
                                <td style="text-align: right;">{{value.invoiceamount}}</td>     
                                <td>{{value['status'].text}}</td>
                                <td>{{value.crno}}</td>                         
                                <td>{{value['supplier'].name}}</td>
                                <td>{{value['branch'].name}}</td>
                                <td>{{value.raised_empname}}</td>    
                            </tr>
                        </tbody>
                    </table>
                    <div *ngIf="withoutInvNoList ?.length == 0" style="margin-left: 42%;">
                        <h3 style="font-family: 'Times New Roman', Times, serif;">No Records found!..</h3>
                    </div>
                </div>
                <br>

                <pre>WITHOUT_INVOICE_DATE</pre>
                <div class="table-responsive" class="tablescroll" style="margin-top: 10px;width: 100%;margin-left: 10px;">
                    <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                        <thead class="table_header " fixed-header>
                            <tr>
                                <th>S.No</th> 
                                <th>Invoice Number</th>                             
                                <th>Invoice Header Amount</th>
                                <th>Status</th>          
                                <th>CR Number</th>                
                                <th>Supplier Name</th>
                                <th>Branch Name</th>             
                                <th>Employee Name</th>                                      
                            </tr>
                        </thead>
                        <tbody>                    
                            <tr *ngFor="let value of withoutInvDtList; index as i;">
                                <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                <td>{{value.invoiceno}}</td>
                                <td style="text-align: right;">{{value.invoiceamount}}</td>     
                                <td>{{value['status'].text}}</td>
                                <td>{{value.crno}}</td>                         
                                <td>{{value['supplier'].name}}</td>
                                <td>{{value['branch'].name}}</td>
                                <td>{{value.raised_empname}}</td>    
                            </tr>
                        </tbody>
                    </table>
                    <div *ngIf="withoutInvDtList ?.length == 0" style="margin-left: 42%;">
                        <h3 style="font-family: 'Times New Roman', Times, serif;">No Records found!..</h3>
                    </div>
                </div>
            </div>
            <div class="modal-footer"  class="col-md-12 text-center" style="margin-bottom: 2%;">
                <button type="button" class="btn btn-outline-primary" style="border-radius:40px;height: 44px; margin-top: 12px;text-align:center ;" data-dismiss="modal"  id="ap-approve-0057">Back</button>
            </div>

        </div>
    </div>

</div>
<!-- Auditchecklist -->
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true" 
     id="ap-approve-0005">
     <div class="modal-dialog modal-xl " style="width: 85%;">
         <div class="modal-content">
             <div class="modal-header" style="text-align:center">
                 <h2 class="modal-title" style="text-align:center;margin-left:36%">Audit Checklist</h2>
                 <button type="button" class="close" #auditclose data-dismiss="modal" aria-label="Close" id="ap-approve-0058">
                     <span aria-hidden="true">&times;</span>
                 </button>
             </div>
             <div>
                 <table class="table table-bordered" style="width: 100%;text-align: center;">
                     <thead class="table_header">
                     <tr>
                         <th>S.NO</th>
                         <th>Question</th>
                         <th>Ok/Not.Ok</th>
                     </tr>
                     </thead>
                     <tr *ngFor="let dt of checklist;let i=index">
                     <td>{{i+1}}</td>
                     <td>{{dt.question}}</td>
                     <td>  <div class="btn-group btn-group-toggle" data-toggle="buttons"  >
                         <label class="btn btn-outline-success" [ngClass]="(dt.value==1)? 'active': ''">
                           <input type="radio" name="options" id="option1" autocomplete="off"   (click)="ok(i,dt)" > Ok
                           </label>
                         <label class="btn btn-outline-danger ">
                           <input type="radio" name="options" id="option2" autocomplete="off" checked   (click)="notok(i,dt)"> Not-OK
                         </label>
                         <label class="btn btn-outline-secondary">
                           <input type="radio" name="options" id="option3"  autocomplete="off"  (click)="nap(i,dt)"> N/A
                         </label>
                       </div> </td>
                 </tr>
                 </table>
             </div>
             <div>
            <div>
             <mat-form-field style="width: 20rem;margin-left: 30px; ">
                 <mat-label>Remarks</mat-label>
                 <input matInput [formControl]="rem" autocomplete="off" required id="ap-approve-0059">
             </mat-form-field>
             <button type="submit" data-dismiss="modal" [disabled]="((rem.invalid==true) || (cli==true))" class="btn btn-outline-danger"  style="border-radius:35px;height: 40px;margin-left: 10px;" (click)="bounce()" id="ap-approve-0060">Bounce</button> 
            
             <button  class="btn btn-outline-primary" style="border-radius:35px;height: 40px;margin-left: 100px;" [disabled] = "disables()" (click)="submitted()" id="ap-approve-0061">Submit</button>
             <button  data-dismiss="modal" class="btn btn-outline-primary" style="border-radius:35px;height: 40px;margin-left: 10px;" id="ap-approve-0062">Back</button> 
            </div>
     </div>
     </div>
     </div>
</div>

<!-- View Trancation -->
<!-- <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
    id="ap-approve-0009">
    <div class="modal-dialog modal-xl" style="width:80%;height:200%;">
        <div class="modal-content">
            <div class="modal-header" style="text-align:center">
                <h2 class="modal-title" style="text-align:center;margin-left:42%">View Transaction</h2>
            <button class="close" type="button" data-dismiss="modal" id="ap-approve-0063">x</button>      
            </div>
            <div>
                <table class="table table-bordered" style="width: 100%;text-align: center;">
                    <thead class="table_header">
                    <tr>
                        <th>S.NO</th>
                        <th>Type</th>
                        <th>Status</th>
                        <th>From Date</th>
                        <th>Remarks</th>
                        <th>Employee Name</th>
                        <th>Approver Name</th>
                        <th>Approved By</th>
                    </tr>
                    </thead>
                    <tr *ngFor="let dt of viewtrnlist;let i=index">
                        <td>{{i+1}}</td>
                        <td>{{dt.type}}</td>
                        <td>{{dt.status.text}}</td>
                        <td>{{dt.created_date}}</td>
                        <td>{{dt.remarks}}</td>
                        <td>{{dt.from_user.name}}
                        <br>
                        <div *ngIf="dt.from_user_id==-1; else deta"></div>
                            <ng-template #deta>
                                <a style="color: green;cursor: pointer;"  (click)="view(dt)">View Details</a>
                            </ng-template>
                        </td>
                        <td>{{dt.to_user.name}}
                        <br>
                        <div *ngIf="dt.to_user_id==-1; else det"></div>
                        <ng-template #det>
                        <a style="color: green;cursor: pointer;"  (click)="viewto(dt)">View Details</a>
                        </ng-template></td>
                        <td></td>
                    </tr>
                </table>
            </div>
            <div class="modal-footer" >
                <table  style="width: 100%;text-align: center;">
                    <tr>
                        <td>Employee Name: &nbsp;{{this.name}}</td>
                        <td>Branch Name : &nbsp;{{this.branch}}</td>
                     </tr>
                     <tr><td colspan="3"><button type="button" class="btn btn-outline-primary" style="border-radius:40px;height: 44px; margin-top: 12px;" data-dismiss="modal"  id="ap-approve-0064">Back</button></td></tr>
                </table>
            </div>
             
        </div>   
        
    </div>
     </div> -->

   <!-- View Trancation -->
   <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
   id="ap-approve-0010">
   <div class="modal-dialog modal-xl" style="width:80%;height:200%;">
       <div class="modal-content">
           <div class="modal-header" style="text-align:center">
               <h2 class="modal-title" style="text-align:center;margin-left:42%">View Transaction</h2>
           <button class="close" type="button" data-dismiss="modal" id="ap-approve-0065">x</button>      
           </div>
           <div>
               <table class="table table-bordered" style="width: 100%;text-align: center;">
                   <thead class="table_header">
                   <tr>
                       <th>S.NO</th>
                       <th>Type</th>
                       <th>Status</th>
                       <th>From Date</th>
                       <th>Remarks</th>
                       <th>Employee Name</th>
                       <th>Approver Name</th>
                   </tr>
                   </thead>
                   <tr *ngFor="let dt of viewtrnlist;let i=index">
                       <td>{{i+1}}</td>
                       <td>{{dt.Type}}</td>
                       <td>{{dt?.comments}}</td>
                       <td>{{dt.created_date}}</td>
                       <td>{{dt.remarks}}</td>
                       <td>{{dt.from_user.name}}
                       <br>
                       <div *ngIf="dt.from_user_id==-1; else deta"></div>
                           <ng-template #deta>
                               <a style="color: green;cursor: pointer;"  (click)="view(dt)">View Details</a>
                           </ng-template>
                       </td>
                       <td>{{dt.to_user.name}}
                       <br>
                       <div *ngIf="dt.to_user_id==-1; else deta1"></div>
                           <ng-template #deta1>
                               <a style="color: green;cursor: pointer;"  (click)="viewto(dt)">View Details</a>
                           </ng-template>
                       </td>
                   </tr>
               </table>
           </div>
           <div class="modal-footer" >
               <table  style="width: 100%;text-align: center;">
                   <tr>
                       <td>Employee Name: &nbsp;{{this.name}}</td>
                       <td>Branch Name : &nbsp;{{this.branch}}</td>
                    </tr>
                    <tr><td colspan="3"><button type="button" class="btn btn-outline-primary" style="border-radius:40px;height: 44px; margin-top: 12px;" data-dismiss="modal"  id="ap-approve-0066">Back</button></td></tr>
               </table>
           </div>
            
       </div>   
       
   </div>
</div>
