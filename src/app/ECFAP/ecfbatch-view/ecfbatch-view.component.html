<div style="width:100%" >
    <div *ngIf="showbatchfrm">
      <!-- <p style="color:black;font-size: 22px;font-weight: bold;margin-left: 1%;margin-top: 20px;">
          Batch Details
      </p> -->
      <header class="header-adjust">
        <div class="headingalign">
            <h3>
                <i
                  class="fa fa-arrow-left"
                  aria-hidden="true"
                  (click)="backform()">
                </i>&nbsp; Batch Details & ECF Summary
            </h3>
     </div>
     <div  class="button-div">
        <button 
        style="border-radius:40px;"
        class="btn btn-outline-success" 
        (click)="ecfApprovePopup('approve')" 
        id="ecfbatch-view-0016">
        Approve</button>
        <button
        style="border-radius:40px;margin-left:10px"
        class="btn btn-outline-success" 
        (click)="ecfApprovePopup('approve and forward')" 
        id="ecfbatch-view-0017">
        Approve and Forward</button>
       <button type="submit"
        style="border-radius:40px;margin-left:10px"
        class="btn btn-outline-danger"
         (click)="ecfApprovePopup('reject')" 
         id="ecfbatch-view-0018">
        Reject</button>
        <button type="submit"
        style="border-radius:40px;margin-left:10px"
        class="btn btn-outline-success" 
        (click)="ecfApprovePopup('return')"
         id="ecfbatch-view-0019">
        Return</button>
            <!-- <button *ngIf="!ECF_Approver && !returnedCompletedFlag" type="button" style="border-radius:40px;margin-left:10px"
            class="btn btn-outline-primary" (click)="backform()" id="ecfbatch-view-0023">
            Back</button> -->
          <div *ngIf="!ECF_Approver && returnedCompletedFlag" style="margin-bottom: 5%;margin-top: 10px;">  
            <button type="button" style="border-radius:40px;margin-left:10px"
            class="btn btn-outline-primary" *ngIf="returnedCompletedFlag"
            (click)="batch_list()"
            id="ecfbatch-view-0024">
            <!-- data-toggle="modal" 
            data-target="#ecfbatch-view-0006"   -->
            Update Batch</button>
            <!-- <button type="button"style="border-radius:40px;margin-left:10px"
            class="btn btn-outline-primary" (click)="backform()" id="ecfbatch-view-0025">
            Back</button> -->
          </div>
    </div>
    </header>
    
    <div style="margin: 10px 0;">
        <h3>
        Batch Details
        </h3>
    </div>
    
    <lib-vs-cbox-summary
    [SummaryDetails]="ECFSummarydata"
    [SummaryApiObj]="ECFSummarydataapi">
   </lib-vs-cbox-summary>
   
      <div>

          <!-- <table class="table table-bordered table-responsive padsize" style="text-align:center;display: contents;" >	
              
              <thead>
                  <tr class="table_header tableset " style="white-space: nowrap;text-align: center;margin-left: 3%;">
                          <th>S.No</th>
                          <th>Batch No</th>
                          <th>Batch Date</th>
                          <th>Batch Amount</th>
                          <th>ECF Count</th>
                          <th>Raiser Name</th>
                          <th> Branch Name</th>
                          <th>Approver Name</th>
                      
                  </tr>
                  
              </thead>
              <tbody>
                  <tr>
                      
                      <td>1</td>
                      <td>{{batchviewdatas?.batchno}}</td>
                      <td style="white-space: nowrap;">{{batchviewdatas?.batch_date| date:'dd-MMM-yyyy'}}</td>
                      <td style="text-align: right;">{{batchviewdatas?.batchamount|currency:'INR'}}</td>
                      <td>{{batchviewdatas?.batchcount}}</td>
                      <td>{{batchviewdatas?.raisername}}</td>
                      <td>{{batchviewdatas?.branchname}}</td>
                      <td>{{batchviewdatas?.approvername}}</td>
                  </tr>
              </tbody>
          </table> -->
      </div>
      <!-- <div>
          <form [formGroup]="batchForm" style="margin-left:4%;" >
              <table style="margin-bottom: 2%;">
              <tr>
              <td>
                  <mat-form-field style="width:200px;">
                      <input matInput placeholder="Batch No" formControlName="batchno" 
                          autocomplete="off" readonly id="ecfbatch-view-0007">
                  </mat-form-field>
              </td>
  
              <td>
                  <mat-form-field style="width:200px;margin-left: 50px;">
                      <input matInput placeholder="Batch Count" formControlName="batchcount"
                          autocomplete="off" readonly id="ecfbatch-view-0008">
                  </mat-form-field>
              </td>
              <td>
                  <mat-form-field style="width:200px;margin-left: 50px;">
                      <input matInput placeholder="Batch Amount" formControlName="batchamt"
                          autocomplete="off" readonly id="ecfbatch-view-0009">
                  </mat-form-field>
              </td>
              </tr>
              </table>
          </form>
      </div> -->
      
      <div style="margin: 10px 0;">
          <h3>
              ECF Summary
          </h3>
      </div>

      <lib-vs-cbox-summary
      [SummaryDetails]="ECFSummary_data"
      [SummaryApiObj]="ecf_data_summary_api_obj"
      [FirstLastbtn]="true">
     </lib-vs-cbox-summary>

      <lib-vs-cbox-summary *ngIf="ECF_Approver"
      [SummaryDetails]="ECFSummary_data_ecf_approver"
      [SummaryApiObj]="ECFSummarydataapi"
      [FirstLastbtn]="true">
     </lib-vs-cbox-summary>

      <!-- <div class="table-responsive" style="width:100%;">
        <table class="table table-bordered" fixed-header style="width: 99%;">
              
            <thead class="table_header normal_table" style="text-align: center;">
                <tr>
      
                      <th>S.No</th>
                      <th>CR NO</th>
                      <th>ECF Type</th>
                      <th>Commodity Name</th>
                      <th>ECF Date</th>
                      <th>ECF Amount</th>
                      <th>ECF Status</th>
                      <th>Payment For</th>
                      <th *ngIf="ECF_Approver">Remarks</th>
                      <th *ngIf="ECF_Approver">Select</th>
                      <th>View</th>
                      <th *ngIf="ecf_editflag">Edit</th> -->
                      <!-- <th>Download</th> -->
                  <!-- </tr>
              </thead>
              <tbody>
                  <tr *ngFor ="let ab of batchSummary;index as i">
                      <td>{{(bvpresentpage - 1)*pagesizebview +i+1 }}</td>
                      <td>{{(ab?.crno !== null)?(ab?.crno):"-"}}</td>
                      <td>{{ab?.aptype}}</td>
                      <td>{{ab?.commodity_id?.name}}</td>
                      <td style="white-space: nowrap;">{{ (ab?.apdate !== "None") ? (ab?.apdate | date:'dd-MMM-yyyy') : "-" }}</td>
                      <td style="text-align: right;">{{ab?.apamount|currency:'INR'}}</td>
                      <td>{{ab?.ecfstatus?.text}}</td>
                      <td>{{ab?.payto}}</td>
                      <td *ngIf="ECF_Approver">
                        <div style="overflow: hidden;" id="matInput-size">
                            <mat-form-field appearance="outline">
                                <mat-label>Remarks</mat-label>
                                <input type="text" matInput  [value]="ab.remarks"
                                [ngModel]="ab.remarks" matTooltip={{ab.remarks}} matTooltipClass="custom-tooltipnew" 
                                (ngModelChange)="ab.remarks = $event" id="ecfbatch-view-0010">
                            </mat-form-field> 

                        </div>
                      </td>
                      <td style="text-align: center;" *ngIf="ECF_Approver">                                             
                         <section class="example-section">
                             <mat-checkbox class="example-margin" matTooltip="Select" matTooltipClass="custom-tooltipnew" 
                             (change)="onselectionchange($event,i)" [checked]="ab?.select"></mat-checkbox>
                         </section>
                      </td>
                      <td>
                          
                          <i matTooltip="view" class=" fa fa-eye create "
                              style="color: green;cursor: pointer;padding:10px" (click)="headerview(ab,i)"></i>
                     
                      </td>
                      <td *ngIf="ecf_editflag && !(ab?.ecfstatus?.text == 'BATCH ECF RETURNED' || ab?.ecfstatus?.text == 'DRAFT')">
                        -
                      </td>
                      <td *ngIf="ecf_editflag && (ab?.ecfstatus?.text == 'BATCH ECF RETURNED' || ab?.ecfstatus?.text == 'DRAFT')">
                        <button mat-icon-button matTooltip=" Edit" matTooltipClass="custom-tooltipnew" class="iconbutton" color="primary" 
                        style ="margin-top: 10px;" (click)="showECFedit(ab)"  id="ecfbatch-view-0011">
                        <i style="color: green;" aria-label="Edit">edit</i>
                        </button>
                      </td> -->
                  <!-- <td>
                     
                          <button type="button" class="btn btn-outline-success"
                              (click)="coverNotedownload(ab?.id,ab?.aptype_id)"
                              style="border-radius: 40px;margin-left: 3%;" >
                              <span class="fa fa-download" matTooltip="Download CoverNote">
                              </span>
                          </button>
                      </td> -->
      
                  <!-- </tr>
              </tbody>
          </table> -->
          <!-- <div *ngIf="batchSummary ?.length == 0" style="margin-left: 42%;">
              <h3 >Sorry data not found!.. </h3>
          </div> -->
          <!-- <div class="row" *ngIf="isbatchviewpage">
            <div  class="col-sm-12" style="margin-bottom: 5%;font-size: small;text-align:right;">
                  <button mat-icon-button [disabled]="has_bviewpageprevious === false" color="primary" (click)="previousClickbview()" id="ecfbatch-view-0012">
                      <mat-icon>arrow_back</mat-icon>
                  </button> {{bvpresentpage}}
                  <button mat-icon-button [disabled]="has_bviewpagenext === false" color="primary" (click)="nextClickbview()" id="ecfbatch-view-0013">
                      <mat-icon>arrow_forward</mat-icon>
                  </button>
              </div>
          </div> -->
         <!-- </div> -->
         <!-- <tr> -->
          <!-- <div *ngIf="ECF_Approver" style="margin-top: -70px;">
              <form [formGroup]="SubmitBatchForm">
                  <tr>
                    <div>
                   <lib-vs-dynamicform-cmp
                    id="matInput-size" 
                     [InputFields]="approvename" 
                     [formGroup]="SubmitBatchForm"
                     ></lib-vs-dynamicform-cmp>
                   </div> -->
                  <!-- <td>
                      <mat-form-field style="width: 250px;margin-left:40px;font-family: 'Times New Roman', Times, serif;" (click)="approvername()">
                          <mat-label>Approver Name</mat-label>
                          <input #appInput  placeholder="Choose Approver" matInput 
                          formControlName="approvedby" [matAutocomplete]="approver"  id="ecfbatch-view-0014">
                          <mat-autocomplete [panelWidth]="400" #approver="matAutocomplete" (opened)="autocompleteapproverScroll()"
                          [displayWith]="displayFnApprover">
                          <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                          <ng-container *ngIf="!isLoading">
                          <mat-option *ngFor="let app of approverList"
                          [value]="app" matTooltip="{{app?.name}}- {{app?.code}} ({{app?.designation}})- {{app?.limit}}" matTooltipClass="custom-tooltipnew">
                                                {{app?.name}} - {{app?.code}} ({{app?.designation}})- {{app?.limit}}
                      </mat-option>
                   </ng-container>
                       </mat-autocomplete>
                      </mat-form-field>
                  </td> -->
              <!-- <td id="matInput-size">
              <mat-form-field appearance="outline" style="width:230px;margin-left:10px">
                  <input matInput placeholder="Remarks" formControlName="remark" autocomplete="off" required id="ecfbatch-view-0015">
              </mat-form-field>
            </td> -->
              <!-- <button 
                  style="border-radius:40px;margin-left: 5px;margin-bottom: 10px;"
                  class="btn btn-outline-success" (click)="batchApprove()" [disabled]="SubmitBatchForm?.value?.remark == ''|| SubmitBatchForm?.value?.approvedby != ''" id="ecfbatch-view-0016">
                  Approve</button> -->
                  <!-- <button
                  style="border-radius:40px;margin-left: 5px;margin-bottom: 10px;"
                  class="btn btn-outline-success" (click)="forward()" [disabled]="SubmitBatchForm?.value?.remark == '' || SubmitBatchForm?.value?.approvedby == ''" id="ecfbatch-view-0017">
                  Approve and Forward</button> -->
              <!-- <button type="submit"
                  style="border-radius:40px;margin-left: 5px;margin-bottom: 10px;"
                  class="btn btn-outline-danger" (click)="batchReject()" [disabled]="SubmitBatchForm?.value?.remark == ''|| SubmitBatchForm?.value?.approvedby != ''" id="ecfbatch-view-0018">
                  Reject</button> -->
                  <!-- <button type="submit"
                  style="border-radius:40px;margin-left: 5px;margin-bottom: 10px;"
                  class="btn btn-outline-success" (click)="batchReturn()" id="ecfbatch-view-0019">
                  Return</button> -->
<!--   
              <button type="button" style="border-radius:40px;margin-left:5px;margin-bottom: 10px;"
                  class="btn btn-outline-primary" (click)="backform()" id="ecfbatch-view-0020">
                  Back</button> -->
              <!-- </tr>
              </form> -->
              <!-- 
              <button type="submit" style="border-radius:10px;margin-left: 1651px;margin-bottom:2%;
          border-color: #f5c68b;
          background-color: #f5c68b;" (click)="submitinvoiceheader()" class="btn btn-light"
                  [disabled]="invheadersave" id="ecfbatch-view-0021">Save</button> -->
  
              <!-- <button type="button" class="btn btn-light" style="border-radius:7px;margin-left:1723px;margin-bottom: -18px;
              margin-top :-151px;
              border-color: black; 
              background-color: white;" (click)="backform()" id="ecfbatch-view-0022">Back</button> -->
  
          <!-- </div> -->
          <!-- <div *ngIf="!ECF_Approver && !returnedCompletedFlag" style="margin-bottom: 5%;margin-top: 10px;">  
            <button type="button" style="border-radius:40px;margin-left:500px;margin-bottom: 10px;"
            class="btn btn-outline-primary" (click)="backform()" id="ecfbatch-view-0023">
            Back</button>
          </div>
          <div *ngIf="!ECF_Approver && returnedCompletedFlag" style="margin-bottom: 5%;margin-top: 10px;">  
            <button type="button" style="border-radius:40px;margin-left:400px;margin-bottom: 10px;"
            class="btn btn-outline-primary" *ngIf="returnedCompletedFlag"
            (click)="batch_list()"
            id="ecfbatch-view-0024"> -->
            <!-- data-toggle="modal" 
            data-target="#ecfbatch-view-0006"   -->
            <!-- Update Batch</button>
            <button type="button" style="border-radius:40px;margin-left:10px;margin-bottom: 10px;"
            class="btn btn-outline-primary" (click)="backform()" id="ecfbatch-view-0025">
            Back</button>
          </div> -->
  
    </div>
      
      <div *ngIf="showheaderform">
          <div style="width: 100%;" >
  
            <header class="header-adjust">
                <div class="headingalign">
                    <h3>
                        <i
                          class="fa fa-arrow-left"
                          aria-hidden="true"
                          (click)="back()">
                        </i>&nbsp; ECF Header
                    </h3>
             </div>
             <div  class="button-div">
                <button
                class="btn btn-outline-success"
                 type="button"
                style="border-radius:40px;"
                color="primary" 
                matTooltip="Previous ECF"
                matTooltipClass="custom-tooltipnew" 
                (click)="movetoprevious()" 
                [disabled]="viewindex == 0"
                 id="ecfbatch-view-0026">
                  Move Previous
                 </button>
           <button
            class="btn btn-outline-success"
             type="button"
             style="border-radius:40px;margin-left:10px"
              color="primary" 
              matTooltip="Next ECF"
              matTooltipClass="custom-tooltipnew"
             (click)="movetonext()" 
             [disabled]="viewindex+1 == batchviewnewlist?.length"
              id="ecfbatch-view-0027"> 
              Move Next
             </button>
                <!-- <button type="button"
                #debitclosebtn
                style="border-radius:40px;margin-left:10px"
                class="btn btn-outline-primary"
                (click)="back()"
                id="ecfap-0220">Back</button> -->
            </div>
            </header>

              <!-- <h2 style="font-weight:bold;">ECF Header:({{viewcrno}})
                  <button
                   class="btn btn-outline-success"
                    type="button"
                   style="border-radius:40px;"
                   color="primary" 
                   matTooltip="Previous ECF"
                   matTooltipClass="custom-tooltipnew" 
                   (click)="movetoprevious()" 
                   [disabled]="viewindex == 0"
                    id="ecfbatch-view-0026">
                     Move Previous
                    </button>
              <button
               class="btn btn-outline-success"
                type="button"
                style="border-radius:40px;"
                 color="primary" 
                 matTooltip="Next ECF"
                 matTooltipClass="custom-tooltipnew"
                (click)="movetonext()" 
                [disabled]="viewindex+1 == batchviewnewlist?.length"
                 id="ecfbatch-view-0027"> 
                 Move Next
                </button>
            </h2> -->
              <div>
                <div class="header-container">
                    <h3>ECF Header:({{viewcrno}})</h3>
                    <div>
                        <i
                          class="fa fa-clock-o"
                          matTooltip="View Transaction"
                          style="font-size: 28px; cursor: pointer"
                          aria-hidden="true"
                          (click)="viewtrn(ecfheaderid)">
                        </i>
                      </div>
                    </div>

                  <form [formGroup]="ecfheaderviewForm">


                    <div class="expansition-div">
                        <mat-accordion>
                        <mat-expansion-panel [expanded]="true" class="expansion-conatiner">
                          <mat-expansion-panel-header>
                            <h3 class="expansion-title mb-0">Invoice Details</h3>
                          </mat-expansion-panel-header>
                
                          <div class="card-container">
                            <div class="card-view">
                              <div class="card-point">
                                <h4>ECF Type</h4>
                                <p>{{ this.Ecftypepanel }}</p>
                              </div>
                              
                               <div class="card-point"  *ngIf="this.ecftypeid == 3 || this.ecftypeid == 13" class="card-point">
                                <h4>Payment For</h4>
                                <p>{{ this.Paytopanel }}</p>
                              </div>
                
                              <div class="card-point" *ngIf="this.ecftypeid == 4">
                                <h4>Payment For</h4>
                                <p>{{ this.Ppxpanel }}</p>
                              </div>
    
                              <div class="card-point">
                                <h4>Supplier Type</h4>
                                <p>{{ this.Supplier_typepanel }}</p>
                              </div>
    
                              <div class="card-point">
                                <h4>Commodity Name</h4>
                                <p>{{ this.Commodity_idpanel }}</p>
                              </div>
    
                              <div class="card-point" *ngIf="this.ecftypeid != 3 && this.ecftypeid != 4 &&  this.ecftypeid != 13">
                                <h4>Raiser Branch</h4>
                                <p>{{ this.Branchpanel }}</p>
                              </div>
    
                              <div class="card-point">
                                <h4>ECF Date</h4>
                                <p>{{ this.Ecfdatepanel }}</p>
                              </div>
                            </div>
                          </div>
                        </mat-expansion-panel>
                    </mat-accordion>


                    <mat-accordion>
                        <mat-expansion-panel [expanded]="true" class="expansion-conatiner">
                          <mat-expansion-panel-header>
                            <h3 class="expansion-title mb-0">Supplier Details</h3>
                          </mat-expansion-panel-header>
                          <div class="card-container">
                            <div class="card-view">
                                <div class="card-point" *ngIf="this.ecftypeid != 7">
                                    <h4>ECF Amount</h4>
                                    <p>{{ this.Ecfamountpanel }}</p>
                                  </div>
                                <div class="card-point" *ngIf="this.ecftypeid == 7">
                                    <h4>CRN Amount</h4>
                                    <p>{{ this.Ecfamountpanel }}</p>
                                  </div>
                                  <div class="card-point">
                                    <h4>Is Original Invoice</h4>
                                    <p>{{ this.Is_originalinvoicepanel }}</p>
                                  </div>
                                  <div class="card-point">
                                    <h4>Remarks</h4>
                                    <p>{{ this.Remarkpanel }}</p>
                                  </div>
                                  <div class="card-point"  *ngIf="this.ecftypeid == 3 || this.ecftypeid == 4 || this.ecftypeid == 13">
                                    <h4>Raiser Branch</h4>
                                    <p>{{ this.Branchpanel }}</p>
                                  </div>
                                  <div class="card-point" *ngIf="this.ecftypeid == 3 && this.checkhr == true">
                                    <h4>Behalf of Self</h4>
                                    <p>{{ this.Is_raisedby_selfpanel }}</p>
                                  </div>

                                  <div class="card-point" *ngIf="this.ecftypeid == 3 && ecfheaderviewForm.value.is_raisedby_self == false">
                                    <h4>Raised For</h4>
                                    <p>{{ this.Raised_forpanel }}</p>
                                  </div>
                                  <div class="card-point" *ngIf="this.ecftypeid == 3 && ecfheaderviewForm.value.is_raisedby_self == false">
                                    <h4>Raised By</h4>
                                    <p>{{ this.Raised_bypanel }}</p>
                                  </div>
                                  <div class="card-point" *ngIf="this.ecfheaderviewForm?.value?.location != '' && this.ecfheaderviewForm?.value?.location != null">
                                    <h4>Location</h4>
                                    <p>{{ this.Locationpanel }}</p>
                                  </div>
                                  <div class="card-point">
                                    <h4>View File</h4>
                                        <i class="fa fa-sticky-note create"  matTooltip="View Notes"
                                        matTooltipClass="custom-tooltipnew"  (click)="ecfap_list()"
                                        style="color: blue;cursor: pointer"data-toggle="modal"
                                        data-target=".bd-example-modal-xl" 
                                       >
                                  </i>
                                  </div>
                            </div>
                        </div>
                      </mat-expansion-panel>
                  </mat-accordion>
              </div>





                      <!-- <table style="margin-bottom: 2%;">
                          <div>
                              <tr>
                                  <td>
  
  
                                      <mat-form-field style="width:200px;margin-left: -25px;">
                                          <input matInput placeholder="ECF Type" formControlName="ecftype" 
                                              autocomplete="off" readonly id="ecfbatch-view-0028">
                                      </mat-form-field>
                                  </td>
  
                                  <td *ngIf="this.ecftypeid == 3 || this.ecftypeid == 13">
                                      <mat-form-field style="width:200px;margin-left: 50px;">
                                          <input matInput placeholder="Payment For" formControlName="payto"
                                              autocomplete="off" readonly id="ecfbatch-view-0029">
                                      </mat-form-field>
                                  </td>
                                  <td *ngIf="this.ecftypeid == 4">
                                      <mat-form-field style="width:200px;margin-left: 50px;">
                                          <input matInput placeholder="Payment For" formControlName="ppx"
                                              autocomplete="off" readonly id="ecfbatch-view-0030">
                                      </mat-form-field>
                                  </td>
                                  <td>
  
  
  
                                      <mat-form-field style="width:200px;margin-left: 50px;">
                                          <input matInput placeholder="Supplier Type" formControlName="supplier_type"
                                              autocomplete="off" readonly id="ecfbatch-view-0031">
                                      </mat-form-field>
  
  
                                  </td>
                                  <td>
  
  
                                      <mat-form-field style="width:200px;margin-left: 50px;">
                                          <input matInput placeholder="Commodity Name" formControlName="commodity_id" 
                                          matTooltip="{{ecfheaderviewForm?.value?.commodity_id}}" matTooltipClass="custom-tooltipnew"
                                              autocomplete="off" readonly id="ecfbatch-view-0032">
                                      </mat-form-field>
                                  </td>
                                  <td *ngIf="this.ecftypeid != 3 && this.ecftypeid != 4 &&  this.ecftypeid != 13">
                                      <mat-form-field
                                          style="width:300px;margin-left: 50px;font-family: 'Times New Roman', Times, serif;">
                                          <input matInput placeholder="Raiser Branch" formControlName="branch"
                                              autocomplete="off" readonly id="ecfbatch-view-0033">
                                      </mat-form-field>
                                  </td>
                              </tr>
                             
                              <tr> -->
                                  
                                  <!-- <td>
                                      <mat-form-field
                                          style="width:200px;font-family: 'Times New Roman', Times, serif;">
                                          <input matInput placeholder="Client Name" formControlName="client_code"
                                              autocomplete="off" readonly id="ecfbatch-view-0034"> 
                                      </mat-form-field>
                                  </td>
                                  <td>
                                      <mat-form-field
                                          style="width:200px;margin-left: 50px;font-family: 'Times New Roman', Times, serif;">
                                          <input matInput placeholder="RM Name" formControlName="rmcode"
                                              autocomplete="off" readonly id="ecfbatch-view-0035">
                                      </mat-form-field>
                                  </td> -->
                                  <!-- <td>
                                      <mat-form-field
                                          style="width: 200px;margin-left:-25px;font-family: 'Times New Roman', Times, serif;">
                                          <mat-label>ECF Date</mat-label>
                                          <input matInput readonly  placeholder="ECF Date"
                                              formControlName="ecfdate"   id="ecfbatch-view-0036">
                                         
                                      </mat-form-field>
                                  </td>
                                  <td *ngIf="this.ecftypeid != 7">
                                      <mat-form-field
                                          style="width: 200px;margin-left:50px;font-family: 'Times New Roman', Times, serif;">
                                          <mat-label>ECF Amount</mat-label>
                                          <input matInput formControlName="ecfamount" style="text-align: right;"
                                              autocomplete="off" readonly id="ecfbatch-view-0037">
                                      </mat-form-field>
                                  </td>
                                  <td *ngIf="this.ecftypeid == 7">
                                      <mat-form-field
                                          style="width: 200px;margin-left:50px;font-family: 'Times New Roman', Times, serif;">
                                          <mat-label>CRN Amount</mat-label>
                                          <input matInput  formControlName="ecfamount" style="text-align: right;"
                                              autocomplete="off" readonly id="ecfbatch-view-0038">
                                      </mat-form-field>
                                  </td>
                                  <td>
                                      <mat-form-field
                                      style="width: 200px;margin-left:50px;font-family: 'Times New Roman', Times, serif;">
                                      <input matInput placeholder="Is Original Invoice" formControlName="is_originalinvoice"
                                          autocomplete="off" readonly id="ecfbatch-view-0039">
                                  </mat-form-field>
                                  </td>
                                  <td>
                                      <mat-form-field
                                          style="width: 300px;margin-left:50px;font-family: 'Times New Roman', Times, serif;">
                                          <input matInput placeholder="Remarks" formControlName="remark"
                                              autocomplete="off" readonly id="ecfbatch-view-0040">
                                      </mat-form-field>
                                  </td>
                                 
                              </tr>
  
                              <tr>
                                  <td *ngIf="this.ecftypeid == 3 || this.ecftypeid == 4 || this.ecftypeid == 13">
                                      <mat-form-field
                                      style="width:200px;margin-left: -25px;font-family: 'Times New Roman', Times, serif;">
                                      <input matInput placeholder="Raiser Branch" formControlName="branch"
                                          autocomplete="off" readonly id="ecfbatch-view-0041">
                                  </mat-form-field>
                                  </td>
                                 
                                 
                                  <td style="white-space:nowrap;" *ngIf="this.ecftypeid == 3 && this.checkhr == true">
  
                                      <mat-radio-group formControlName="is_raisedby_self" readonly class="inputformatradiobutton">
                                          <mat-label style="margin-left:50px">Behalf of Self</mat-label>
                                          <mat-radio-button *ngFor="let n of behalfyesorno" [value]="n.value"
                                            style="margin-left:10px"  [disabled]="showgst">
                                              {{n.display}}
                                          </mat-radio-button>
                                      </mat-radio-group>
      
      
                                  </td>
                                  
                                  <td *ngIf="this.ecftypeid == 3 && ecfheaderviewForm.value.is_raisedby_self == false">
                                      <mat-form-field
                                          style="width:200px;margin-left: 50px;font-family: 'Times New Roman', Times, serif;">
                                          <input matInput placeholder="Raised For" formControlName="raised_for"
                                              autocomplete="off" readonly id="ecfbatch-view-0042">
                                      </mat-form-field>
                                  </td>
                                  <td *ngIf="this.ecftypeid == 3 && ecfheaderviewForm.value.is_raisedby_self == false">
                                      <mat-form-field
                                          style="width:200px;font-family: 'Times New Roman', Times, serif;margin-left: 50px;">
                                          <input matInput placeholder="Raised By" formControlName="raised_by"
                                              autocomplete="off" readonly id="ecfbatch-view-0043">
                                      </mat-form-field>
                                  </td>
      
                                  </tr>
                                  <tr *ngIf="this.ecfheaderviewForm?.value?.location != '' && this.ecfheaderviewForm?.value?.location != null">
                                    <td>
                                        <mat-form-field
                                          style="width:200px;font-family: 'Times New Roman', Times, serif;">
                                          <input matInput placeholder="Location" formControlName="location"
                                              autocomplete="off" readonly id="ecfbatch-view-0044">
                                         </mat-form-field> 
                                  </td>
                              </tr> -->
                                  <!-- <tr> -->
                                  <!-- <td>
                                      
                                      
                                          <h3  
                                          (click)="ecfap_list()"
                                          style="cursor: pointer;color:blue;font-family: 'Montserrat';margin-left: -36px;" class="btn btn-link" 
                                         >View Notes</h3> -->
                                         <!-- data-toggle="modal"
                                         data-target=".bd-example-modal-xl"  -->
                                      
                                  <!-- </td> -->
                                  <!-- <td>
                                      <h3  (click)="viewtrn(ecfheaderid)"
                                       style="cursor: pointer;color:blue;font-family: 'Montserrat';" class="btn btn-link" matTooltip="Transaction View">View Transaction</h3>
                                  </td> -->
                                  <!-- data-toggle="modal"
                                  data-target="#ecfbatch-view-0001"  -->
                                  <!-- View Trancation -->
<div 
class="modal fade" 
tabindex="-1"
role="dialog"
aria-labelledby="exampleModalLabels"
aria-hidden="true"
id="ecfbatch-view-0001"
>
<div class="modal-dialog modal-xl" style="width:70%">
    <div class="modal-content">
        <div class="modal-header">
            <h3>View Transaction</h3>
        <button
         class="close"
         type="button" 
         data-dismiss="modal"
         id="ecfbatch-view-0045"
         >
         x
        </button>      
        </div>
        <div class="modal-body">
            <div class="container">
            <div class="row">
            <div class="table-responsive" style="width: 100%;margin-top:1%">
                <div class="table-responsive">
                    <lib-vs-cbox-summary
                      [SummaryDetails]="SummarybatchData"
                      [SummaryApiObj]="SummaryApibatchObjNew"
                    ></lib-vs-cbox-summary>
                  </div>
                  <br />
                  <table style="width: 100%; text-align: center">
                    <tr>
                    <td>Employee Name: &nbsp;{{this.name}}</td>
                    <td>Designation: &nbsp;{{this.designation}}</td>
                    <td>Branch Name : &nbsp;{{this.branch}}</td>
                    </tr>
                  </table>

                <!-- <thead class="table_header">
                <tr>
                    <th>S.NO</th>
                    <th>Type</th>
                    <th>Status</th>
                    <th>From Date</th>
                    <th>Remarks</th>
                    <th>Employee Name</th>
                    <th>Approver Name</th>
                </tr>
                </thead>
                <tr *ngFor="let dt of viewtrnlist;let i=index">
                    <td>{{i+1}}</td>
                    <td>{{dt.Type}}</td>
                    <td>{{dt?.comments}}</td>
                    <td>{{dt.created_date}}</td>
                    <td>{{dt.remarks}}</td>
                    <td>{{dt.from_user.name}}
                    <br>
                    <div *ngIf="dt.from_user_id==-1; else deta"></div>
                        <ng-template #deta>
                            <a style="color: green;cursor: pointer;"  (click)="view(dt)">View Details</a>
                        </ng-template>
                    </td>
                    <td>{{dt.to_user.name}}
                    <br>
                    <div *ngIf="dt.to_user_id==-1; else deta1"></div>
                        <ng-template #deta1>
                            <a style="color: green;cursor: pointer;"  (click)="viewto(dt)">View Details</a>
                        </ng-template>
                    </td>
                </tr> -->
            </div>
        <!-- <div class="modal-footer" >
            <table  style="width: 100%;text-align: center;">
                <tr>
                    <td>Employee Name: &nbsp;{{this.name}}</td>
                    <td>Designation: &nbsp;{{this.designation}}</td>
                    <td>Branch Name : &nbsp;{{this.branch}}</td>
                 </tr>
                 <tr><td colspan="3"><button type="button" class="btn btn-outline-primary" style="border-radius:40px;height: 44px; margin-top: 12px;" data-dismiss="modal"  id="ecfbatch-view-0046">Back</button></td></tr>
            </table>
        </div> -->
        <div style="margin-left: 940px; margin-top: 10px">
            <button
              type="button"
              class="btn btn-outline-primary"
              style="border-radius: 40px"
              data-dismiss="modal"
              id="ecfbatch-view-0046"            >
              Back
            </button>
          </div>
    </div> 
</div>
</div>  
</div>
</div>
</div>



                                       <!-- -------notepad------ -->
  
                                       <div class="modal fade bd-example-modal-xl" tabindex="-1" role="dialog"
                                       aria-labelledby="myExtraLargeModalLabel" aria-hidden="true">
                                       <div class="modal-dialog modal-xl">
                                           <div class="modal-content">
                                               <div class="modal-header">
                                                   <h3 id="ecfbatch-view-0002">
                                                       Note Pad
                                                    </h3>
                                                       <!-- <button 
                                                       type="button"
                                                        style="border-radius:40px;margin-left: 980px; border-color: black; 
                                                       background-color: white;color:black" 
                                                       class="btn btn-light"
                                                           data-dismiss="modal" id="ecfbatch-view-0047">
                                                           X</button> -->
                                                           
                                                           <button
                                                           type="button"
                                                           class="close"
                                                           data-dismiss="modal"
                                                           aria-label="Close"
                                                           id="ecfbatch-view-0047"
                                                         >
                                                           <span aria-hidden="true">&times;</span>
                                                         </button>
                                               </div>
                                               <br>
                                               <div style="margin-left: 50px;width:90%;height: 70%;">
                                                   <div>
  
                                                       <div [ngxSummernote]="config" 
                                                           [ngxSummernoteDisabled]="editorDisabled" (blur)="onBlur()"
                                                           (mediaDelete)="onDelete($event)"
                                                           (summernoteInit)="summernoteInit($event)"
                                                           formControlName="notename">
                                                       </div>
  
                                                   </div>
                                               </div>
                                               <br>
                                               <div class="modal-footer">
                                                   <!-- <button type="button" style="border-radius: 40px;margin-left: 10px;"
                                                       class="btn btn-outline-primary"
                                                       data-dismiss="modal" id="ecfbatch-view-0048">Close</button> -->
  
                                                   <!-- <button type="button" style="border-radius:10px;margin-left: 10px; border-color: blue; 
                                                       background-color: white;color:blue" class="btn btn-light"
                                                       data-dismiss="modal" (click)="notessave()" id="ecfbatch-view-0049">
                                                       Submit</button> -->
                                                       <button
                                                       type="button"
                                                       style="border-radius: 40px"
                                                       class="btn btn-outline-success"
                                                       data-dismiss="modal"
                                                       (click)="notessave()"
                                                       id="ecfbatch-view-0049"
                                                     >
                                                       Submit
                                                     </button>
                                               </div>
                                           </div>
                                       </div>
                                   </div>
  
                                  <!-- <td>
                              <span class="material-icons" type="button" data-toggle="modal"
                                  style="margin-left: 50px;" data-target=".bd-example-modal-xl"
                                  formControlName="notename">description</span>Add Note
                          </td> -->
                              <!-- </tr> -->
  
                          <!-- </div>
                      </table> -->
                  </form>
              </div>
  
              
              <h3 *ngIf="this.ecftypeid != 7">Invoice Header</h3>
              <h3 *ngIf="this.ecftypeid == 7">Credit Note Header</h3>
              <!-- <div>
                  <form [formGroup]="InvoiceHeaderForm">
                  <table>
                      <tr>
                          <mat-radio-group formControlName="invoicegst" readonly class="inputformatradiobutton">
                              <mat-label > GST Applicable</mat-label>
                              <mat-radio-button *ngFor="let n of yesorno" [value]="n.value"
                                  style="margin-left: 10px;" [disabled]="showgst">
                                  {{n.display}}
                              </mat-radio-button>
                          </mat-radio-group>
                      </tr>
                  </table>
                  </form>
              </div> -->
              <div>
  
                  <div class="table-responsive" style="width:100%;">
                      <table class="table table-bordered" fixed-header style="width: 99%;">
                          <thead class="table_header" style="text-align: center;">
                              <tr>
  
                                  <th>S.No</th>
                                  <th  style="width:20%;">Invoice CR.No</th>
                                <th>GST Applicable</th>
                                <th *ngIf="this.ecftypeid == 3 && this.InvoiceHeaderForm.value.invoicegst == 'Y'">Supplier GST</th>
                                  <th *ngIf="this.ecftypeid == 3 && this.InvoiceHeaderForm.value.invoicegst == 'Y'">Supplier Name</th>
                                  <th *ngIf="this.ecftypeid == 2 || this.ppxid == 'S' || this.ecftypeid == 14">Supplier Name</th>
                                  <th *ngIf="this.ecftypeid == 2 || this.ppxid == 'S' || this.ecftypeid == 14">Supplier GST No</th>
                                  <th *ngIf="this.ecftypeid == 2 || this.ppxid == 'S'  || this.ecftypeid == 14">Supplier State</th>
                                  <th>Place Of Supply</th>
                                <th>Branch</th>
                                <th *ngIf="this.ppxid != 'E' && this.ecftypeid != 13">Invoice No</th>
                                  <th *ngIf="this.ecftypeid == 7">Credit Ref No</th>
                                  <th *ngIf="this.ppxid != 'E' && this.ecftypeid != 13">Invoice Date</th>
                                  <th>Taxable Amount</th>
                                  <th *ngIf="(this.ecftypeid == 2 || this.ecftypeid == 7 ||this.ecftypeid == 14 ||this.ecftypeid == 3) && this.InvoiceHeaderForm.value.invoicegst == 'Y'">Tax Amount</th>
                                  <!-- <th>Roundoff Amount</th>
                                  <th>Other Adjustment</th> -->
                                  <th>Total Amount</th>
                                  <th>Purpose</th>
                                  <th>Invoice Status</th>
                                  <th *ngIf="ap_statusflag == true">AP Status</th>
                                  <th>Attachments</th>
                                  <th>Action</th>
  
                              </tr>
                          </thead>
                          <tbody>
                              <tr *ngFor="let dtl of invheaderdata; index as i">
                                  <!-- <td> {{(ecfpresentpage - 1)*pagesizeecf +i+1 }} </td>  -->
                                  <td>{{i+1}}</td>
                                  <td  style="width:20%;">{{dtl?.apinvoiceheader_crno}}</td>
                                    <td style="text-align: center;">{{dtl?.invoicegst}}</td>
                                    <td *ngIf="this.ecftypeid == 3 && this.InvoiceHeaderForm.value.invoicegst == 'Y'">{{dtl?.manual_gstno}}</td>
                                  <td *ngIf="this.ecftypeid == 3 && this.InvoiceHeaderForm.value.invoicegst == 'Y'">{{dtl?.manualsupp_name}}</td>
                                  <td *ngIf="this.ecftypeid == 2 || this.ppxid == 'S' || this.ecftypeid == 14">{{dtl?.supplier_id?.name}}</td>
                                  <td *ngIf="this.ecftypeid == 2 || this.ppxid == 'S' || this.ecftypeid == 14">{{dtl?.supplier_id?.gstno}}</td>
                                  <td *ngIf="this.ecftypeid == 2 || this.ppxid == 'S'  || this.ecftypeid == 14">{{dtl?.supplierstate_id?.name}}
                                  </td>
                                  <td>{{dtl?.place_of_supply?.code}}-{{dtl?.place_of_supply?.name}}</td>
                                <td>{{dtl?.branchdetails_id?.code}}-{{dtl?.branchdetails_id?.name}}</td>
                                <td *ngIf="this.ppxid != 'E' && this.ecftypeid != 13">{{dtl?.invoiceno}}</td>
                                  <td *ngIf="this.ecftypeid == 7">{{dtl?.credit_refno}}</td>
                                  <td *ngIf="this.ppxid != 'E' && this.ecftypeid != 13">{{dtl?.invoicedate|date:'dd-MMM-yyyy '}}</td>
                                  <td style="text-align: right;">{{dtl?.invoiceamount| currency:'INR'}}</td>
                                  <td style="text-align: right;" *ngIf="(this.ecftypeid == 2 || this.ecftypeid == 7 ||this.ecftypeid == 14 ||this.ecftypeid == 3) && this.InvoiceHeaderForm.value.invoicegst == 'Y'">{{dtl?.taxamount| currency:'INR'}}</td>
                                  <!-- <td>{{dtl.roundoffamt}}</td>
                                  <td>{{dtl.otheramount}}</td> -->
                                  <td style="text-align: right;">{{dtl?.totalamount| currency:'INR'}}</td>
                                  <td  matTooltip="{{dtl?.remarks}}" matTooltipClass="custom-tooltipnew">
                                    <div style="width: 200px;overflow: hidden;">
                                        {{dtl?.remarks}}
                                    </div>
                                </td>
                                  <td>{{dtl?.invoice_status}}</td>
                                  
                                <td *ngIf="ap_statusflag == true && invheaderdata[0]?.apinvoiceheader_status != null && invheaderdata[0]?.apinvoiceheader_status != undefined && invheaderdata[0]?.apinvoiceheader_status != ''">{{dtl?.apinvoiceheader_status}}</td>
                                <td style="text-align:center" *ngIf="ap_statusflag == true && (invheaderdata[0]?.apinvoiceheader_status == null || invheaderdata[0]?.apinvoiceheader_status == undefined || invheaderdata[0]?.apinvoiceheader_status == '')">-</td><td style="text-align:center">
                              <!-- <tr *ngFor="let file of dtl.file_data; index as j">
                                  <td>
                                      {{j+1}}
                                  </td>
                                  <td>
                                      <a (click)="data(file)" class="btn btn-link" style="cursor: pointer;color:blue;"
                                          matTooltip="View File"  data-target="#my-modal" data-toggle="modal">{{ file.file_name}}</a>
                                  </td>
                                  <td>
                                      <i class="material-icons" (click)="getfiles(file)">
                                          get_app
                                      </i>
                                  </td>
                              </tr> -->
                              <i
                               class=" fa fa-eye create "
                                matTooltip="View File"
                                 matTooltipClass="custom-tooltipnew"
                                style="color: blue;cursor: pointer;" 
                                (click)="attachment_view(dtl)"
                                  >
                                  <!-- data-toggle="modal"
                                  data-target="#ecfbatch-view-0005" -->
                                </i>
                              </td>
  
                                  <!-- <td style="text-align: center;">
                                      <span matTooltip="view File" class=" fa fa-file-image-o "
                                          style="color: hsl(0, 0%, 0%);cursor: pointer;" data-toggle="modal"
                                          (click)="getfiledetails()" data-target="#showattachmentpopup"></span>
  
                                  </td> -->
  
                                  <td style="text-align: center;">
                                      <i matTooltip="view" matTooltipClass="custom-tooltipnew" class=" fa fa-eye create "
                                          style="color: black;cursor: pointer;"   (click)="Movetodetail(dtl.id)"></i>
                                        
  
                                  </td>
                              </tr>
                              <tr *ngIf = "this.ecftypeid == 2  && this.InvoiceHeaderForm?.value?.invoicegst == 'Y'">
                                  <td class="totaldisplay" colspan="12"  style="text-align: end;">
                                      Net Amount:</td>
                                      <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>
  
                              </tr>
                              <tr *ngIf = "this.ecftypeid == 2  && this.InvoiceHeaderForm?.value?.invoicegst == 'N'">
                                  <td class="totaldisplay" colspan="11"  style="text-align: end;">
                                      Net Amount:</td>
                                      <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>
  
                              </tr>
                              <tr *ngIf = "this.ecftypeid == 7 && this.InvoiceHeaderForm?.value?.invoicegst == 'Y'">
                                  <td class="totaldisplay" colspan="10"  style="text-align: end;">
                                      Net Amount:</td>
                                      <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>
  
                              </tr>
                              <tr *ngIf = "this.ecftypeid == 7 && this.InvoiceHeaderForm?.value?.invoicegst == 'N'">
                                  <td class="totaldisplay" colspan="9"  style="text-align: end;">
                                      Net Amount:</td>
                                      <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>
  
                              </tr>
                              
                              <tr *ngIf = "this.ecftypeid == 14  && this.InvoiceHeaderForm?.value?.invoicegst == 'N'">
                                  <td class="totaldisplay" colspan="11"  style="text-align: end;">
                                      Net Amount:</td>
                                      <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>
  
                              </tr>
                              <tr *ngIf = "this.ecftypeid == 14  && this.InvoiceHeaderForm?.value?.invoicegst == 'Y'">
                                  <td class="totaldisplay" colspan="12"  style="text-align: end;">
                                      Net Amount:</td>
                                      <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>
  
                              </tr>
                              <tr *ngIf = "this.ecftypeid == 13">
                                  <td class="totaldisplay" colspan="5"  style="text-align: end;">
                                      Net Amount:</td>
                                      <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>
  
                              </tr>
                              <tr *ngIf = "this.ecftypeid == 4 && this.ppxid == 'S'">
                                  <td class="totaldisplay" colspan="11"  style="text-align: end;">
                                      Net Amount:</td>
                                      <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>
      
                              </tr>
                              <tr *ngIf = "this.ecftypeid == 4 && this.ppxid == 'E'" >
                                  <td class="totaldisplay" colspan="6"  style="text-align: end;">
                                      Net Amount:</td>
                                      <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>
  
                              </tr>
                              <tr *ngIf = "this.ecftypeid == 3 && this.InvoiceHeaderForm?.value?.invoicegst == 'N'">
                                  <td class="totaldisplay" colspan="8"  style="text-align: end;">
                                      Net Amount:</td>
                                      <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>
  
                              </tr>
                              <tr *ngIf = "this.ecftypeid == 3 && this.InvoiceHeaderForm?.value?.invoicegst == 'Y'">
                                  <td class="totaldisplay" colspan="11"  style="text-align: end;">
                                      Net Amount:</td>
                                      <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>
  
                              </tr>
                          </tbody>
                      </table>
                      <div *ngIf="invheaderdata ?.length == 0" style="margin-left: 42%;">
                          <h3>Sorry data not found!.. </h3>
                      </div>
                      <!-- <div class="row" *ngIf="issummarypage">
              <div class="col-sm-12" style="font-size: small;text-align: right; margin-bottom: 50px;">
                  <button mat-icon-button [disabled]="has_pageprevious === false" color="primary"
                      (click)="previousClickPayment()" id="ecfbatch-view-0050">
                      <mat-icon>arrow_back</mat-icon>
                  </button>
                  {{ecfpresentpage}}
                  <button mat-icon-button [disabled]="has_pagenext === false" color="primary" (click)="nextClickPayment()" id="ecfbatch-view-0051">
                      <mat-icon>arrow_forward</mat-icon>
                  </button>
              </div>
          </div>  -->
                  </div><br>
  
  
              <!-- <button type="button" class="btn btn-outline-primary" style="border-radius:40px;margin-left:550px;
               margin-bottom: 50px;" (click)="back()" id="ecfbatch-view-0052">Back</button> -->
  
  
              </div>
          </div>
        </div>
  
  </div>
  
  
  <div *ngIf="showimageHeaderAPI" id="ecfbatch-view-0003" class="modal fade" aria-labelledby="my-modalLabel" aria-hidden="true"
      tabindex="-1" role="dialog">
      <div class="modal-dialog modal-xl" data-dismiss="modal" style="width: 60%;height: 80%;">
          <div class="modal-content">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ecfbatch-view-0053">
                  <span aria-hidden="true">&times;</span>
              </button>
              <div class="modal-body">
                  <img src="{{jpgUrlsAPI}}" class="img-responsive" style="width: 100%;">
  
              </div>
          </div>
      </div>
  </div>
  
  <div *ngIf="showimagepdf" id="ecfbatch-view-0004" class="modal fade" aria-labelledby="my-modalLabel" aria-hidden="true"
      tabindex="-1" role="dialog">
      <div class="modal-dialog modal-xl">
          <div class="modal-content">
              <div class="modal-header" style="background: rgba(23, 204, 23, 0.288);">
                  <h2 class="modal-title">Attachments</h2>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ecfbatch-view-0054">
                      <span aria-hidden="true">&times;</span>
                  </button>
              </div>
              <pdf-viewer [src]="pdfurl" [original-size]="false" [render-text]='false' [show-borders]="true"
                  [fit-to-page]="true" [show-all]="true" style="display: block; height: 600px;" [fit-to-page]="true">
              </pdf-viewer>
          </div>
      </div>
  
  </div>
  <!-- <pre>{{SubmitBatchForm.value|json}}</pre> -->

  <div>
    <div
    class="modal fade"
    id="ecfbatch-view-0005"
    tabindex="-1"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <p class="modal-title mb-0" id="exampleModalLabel">
            Attachments
          </p>
          <button
            type="button"
            class="close"
            data-dismiss="modal"
            #closedbuttons
            aria-label="Close"
            (click)="fileback()"
          >
            <i aria-hidden="true">&times;</i>
          </button>
        </div>
  
        <div class="modal-body">
            <lib-vs-cbox-summary
                                [SummaryDetails]="SummaryFiles"
                                [SummaryApiObj]="SummaryApifileObjNew"
                              ></lib-vs-cbox-summary>
            <!-- <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                <thead class="table_header" style="text-align: left;">

                    <tr>
                        <th style="text-align: center;">S.No</th>
                        <th style="text-align: center;">File Name</th>
                        <th style="text-align: center;">View</th>
                        <th style="text-align: center;">Download</th>
                        

                    </tr>
                </thead>
                <tbody *ngFor="let dtl of invheaderdata; index as i">
                    <tr *ngFor="let attach of dtl.file_data; index as i">
                        <td style="text-align: center;">{{i+1}}</td>
                        <td>{{attach.file_name}}</td>
                        <td style="text-align: center;" >
                            <i class="fa fa-external-link" aria-hidden="true" style="color:blue;font-size: 24px;margin-left: 20px;" (click)="data1(attach)"></i>
                            </td>
                     

                        <td style="text-align: center;">
                            <i class="material-icons" (click)="getfiles(attach)">
                                get_app
                            </i>
                        </td>
                        
                    </tr>
                </tbody>
            </table> -->

        </div>
        <div class="modal-footer">
    

                <button
                type="button"
                style="border-radius: 40px"
                class="btn btn-outline-primary"
                data-dismiss="modal"
                id="ecfbatch-view-0056"
                (click)="fileback()"
              >
                Back
              </button>

        </div>
        </div>
      </div>
    </div>
    <!-- </div>
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true" 
        id="ecfbatch-view-0005">
        <div class="modal-dialog modal-lg " style="width: 70%;">
            <div class="modal-content">
                <div class="modal-header" style="background: rgba(23, 204, 23, 0.288);">
                    <h2 class="modal-title" style="color:black ;text-align: center;font-weight: bold;">Attachments
                    </h2>
                    <button type="button" class="close" data-dismiss="modal" #closedbuttons aria-label="Close" id="ecfbatch-view-0055">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div style="margin-left: 50px;margin-right: 80%;margin-top: 2%; width: 80%;">
                
                                <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                                    <thead class="table_header" style="text-align: left;">

                                        <tr>
                                            <th style="text-align: center;">S.No</th>
                                            <th style="text-align: center;">File Name</th>
                                            <th style="text-align: center;">View</th>
                                            <th style="text-align: center;">Download</th>
                                            

                                        </tr>
                                    </thead>
                                    <tbody *ngFor="let dtl of invheaderdata; index as i">
                                        <tr *ngFor="let attach of dtl.file_data; index as i">
                                            <td style="text-align: center;">{{i+1}}</td>
                                            <td>{{attach.file_name}}</td>
                                            <td style="text-align: center;" >
                                                <i class="fa fa-external-link" aria-hidden="true" style="color:blue;font-size: 24px;margin-left: 20px;" (click)="data1(attach)"></i>
                                                </td>
                                         

                                            <td style="text-align: center;">
                                                <i class="material-icons" (click)="getfiles(attach)">
                                                    get_app
                                                </i>
                                            </td>
                                            
                                        </tr>
                                    </tbody>
                                </table>

                            </div>
                            <tr>
                                <td>

                                    <button type="button" class="btn btn-light" style="border-radius:7px;margin-left:300px;
                        border-color: black; margin-bottom: 20px;" (click)="fileback()" id="ecfbatch-view-0056">Back</button>

                                </td>
                            </tr>
                        </div>
                    </div>


                </div> -->
            </div>


            <div *ngIf="ecfEditForm">
                <app-create-ecf (onCancel)="ecfEditBack()" (onView)="invdtlview()">
                </app-create-ecf>
            </div>
            <div *ngIf="showinvdtlForm">
                 <app-invoice-detail (onSubmit)="ecfEditBack()" (onCancel)="showECFedit()"></app-invoice-detail>
            </div>
            <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true" aria-hidden="true" data-backdrop = "static" data-keyboard="false"
            id="ecfbatch-view-0006">
            <div class="modal-dialog modal-xl " style="width: 40%;">
                <div class="modal-content">
                    <div class="modal-header text-center" style="background: rgba(23, 204, 23, 0.288);">
                        <h2 class="modal-title w-100 font-weight-bold" style="color:black ;height:2px;font-family: 'Times New Roman', Times, serif;">Approver Details
                        </h2>
                        <button type="button" class="close" data-dismiss="modal" #closedbutton aria-label="Close" id="ecfbatch-view-0057">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
    
                    <div style="margin-left: 70px;margin-right: 80%;margin-top: 2%; width: 80%;">
    
                        <span style="margin-left:10px" >Commodity Name : <p [ngStyle]="{'color': 'blue'}" style="margin-left:155px;margin-top:-24px">{{commodity}}</p></span>
                        <form [formGroup]="BatchUpdateForm">
                            <table>
                                <div>
    
                                    <tr>
                                        <td>
                                            <mat-form-field style="width: 200px;margin-left: 10px;" (click)="branchname()">
                                                <mat-label> Branch</mat-label>
                                                <input #brInput placeholder="Branch" matInput formControlName="approvedbranch"
                                                    [matAutocomplete]="branchmatAuto" id="ecfbatch-view-0058">
                                                <mat-autocomplete [panelWidth]="200" #branchmatAuto="matAutocomplete" (opened)="approverbranchScroll()"
                                                    [displayWith]="displayFnBranch">
                                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                                    <ng-container *ngIf="!isLoading">
                                                        <mat-option *ngFor="let br of Branchlist" matTooltip="{{br.code}}-{{br.name}}" matTooltipClass="custom-tooltipnew" [value]="br">
                                                            {{br.code}}-{{br.name}}
                                                        </mat-option>
                                                    </ng-container>
                                                </mat-autocomplete>
                                            </mat-form-field>
                                        </td>
                                        <td>
                                            <td>
                                                <mat-form-field style="width: 250px;margin-left: 15px;" (click)="approvername2()">
                                                    <mat-label>Approver Name</mat-label>
                                                    <input #appInput  placeholder="Choose Approver" matInput 
                                                    formControlName="approvedby" [matAutocomplete]="approver"  id="ecfbatch-view-0059">
                                                    <mat-autocomplete [panelWidth]="400" #approver="matAutocomplete" (opened)="autocompleteapproverScroll()"
                                                    [displayWith]="displayFnApprover">
                                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                                    <ng-container *ngIf="!isLoading">
                                                        <mat-option *ngFor="let app of approverList" matTooltip="{{app.name}} -{{app.code}}-{{app.limit}}-{{app.designation}}" matTooltipClass="custom-tooltipnew" [value]="app">
                                                            {{app.name}}-{{app.code}} - {{app.limit}} - {{app.designation}}
                                                </mat-option>
                                             </ng-container>
                                                 </mat-autocomplete>
                                                </mat-form-field>
                                            </td>
                                        
                                    </tr>
                                </div>
                            </table>
                            <br>
                            <tr>
                                <div style="margin-bottom: 5%;">
                                    <td>
                                        <button type="submit"
                                        style="border-radius:40px;margin-left: 175px;font-family: 'Times New Roman', Times, serif;"
                                        class="btn btn-outline-primary" (click)="update_batch()" id="ecfbatch-view-0060">
                                        Save</button>
    
                                </td>
    
                                <td>
                                    <button type="button"
                                    style="border-radius:40px;margin-left:10px;font-family: 'Times New Roman', Times, serif;"
                                    class="btn btn-outline-primary" (click)="appback()" data-dismiss id="ecfbatch-view-0061">
                                    Back</button>
    
                            </td>
                            </div>
                        </tr>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div>
            <div
              class="modal fade"
              tabindex="-1"
              role="dialog"
              aria-labelledby="exampleModalLongTitle"
              aria-hidden="true"
              id="approver_popup"
            >
              <div class="modal-dialog modal-md" >
                <div class="modal-content" style="width:550px" >
                  <div class="modal-header">
                    <h3 class="modal-title mb-0">{{popup_heading}} Submit</h3>
                    <button
                      type="button"
                      class="close"
                      data-dismiss="modal"
                      #popupclose
                      aria-label="Close"
                    >
                      <span aria-hidden="true" >&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <form [formGroup]="SubmitBatchForm">
                    <div *ngIf="ECF_Approver">
                            <div class="searchs-expand">
                              <div>
                             <lib-vs-dynamicform-cmp
                              id="matInput-size" 
                               [InputFields]="approvename" 
                               [formGroup]="SubmitBatchForm"
                               ></lib-vs-dynamicform-cmp>
                             </div>
                            <!-- <td>
                                <mat-form-field style="width: 250px;margin-left:40px;font-family: 'Times New Roman', Times, serif;" (click)="approvername()">
                                    <mat-label>Approver Name</mat-label>
                                    <input #appInput  placeholder="Choose Approver" matInput 
                                    formControlName="approvedby" [matAutocomplete]="approver"  id="ecfbatch-view-0014">
                                    <mat-autocomplete [panelWidth]="400" #approver="matAutocomplete" (opened)="autocompleteapproverScroll()"
                                    [displayWith]="displayFnApprover">
                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                    <mat-option *ngFor="let app of approverList"
                                    [value]="app" matTooltip="{{app?.name}}- {{app?.code}} ({{app?.designation}})- {{app?.limit}}" matTooltipClass="custom-tooltipnew">
                                                          {{app?.name}} - {{app?.code}} ({{app?.designation}})- {{app?.limit}}
                                </mat-option>
                             </ng-container>
                                 </mat-autocomplete>
                                </mat-form-field>
                            </td> -->
                        <div id="matInput-size">
                        <mat-form-field appearance="outline" style="margin-left:10px;width:250px">
                            <mat-label>Remarks</mat-label>
                            <input matInput placeholder="Remarks" formControlName="remark" autocomplete="off" required>
                        </mat-form-field>
                    </div>
                    </div>
                        <!-- <button 
                            style="border-radius:40px;margin-left: 5px;margin-bottom: 10px;"
                            class="btn btn-outline-success" (click)="batchApprove()" [disabled]="SubmitBatchForm?.value?.remark == ''|| SubmitBatchForm?.value?.approvedby != ''" id="ecfbatch-view-0016">
                            Approve</button> -->
                            <!-- <button
                            style="border-radius:40px;margin-left: 5px;margin-bottom: 10px;"
                            class="btn btn-outline-success" (click)="forward()" [disabled]="SubmitBatchForm?.value?.remark == '' || SubmitBatchForm?.value?.approvedby == ''" id="ecfbatch-view-0017">
                            Approve and Forward</button> -->
                        <!-- <button type="submit"
                            style="border-radius:40px;margin-left: 5px;margin-bottom: 10px;"
                            class="btn btn-outline-danger" (click)="batchReject()" [disabled]="SubmitBatchForm?.value?.remark == ''|| SubmitBatchForm?.value?.approvedby != ''" id="ecfbatch-view-0018">
                            Reject</button> -->
                            <!-- <button type="submit"
                            style="border-radius:40px;margin-left: 5px;margin-bottom: 10px;"
                            class="btn btn-outline-success" (click)="batchReturn()" id="ecfbatch-view-0019">
                            Return</button> -->
          <!--   
                        <button type="button" style="border-radius:40px;margin-left:5px;margin-bottom: 10px;"
                            class="btn btn-outline-primary" (click)="backform()" id="ecfbatch-view-0020">
                            Back</button> -->
                        <!-- 
                        <button type="submit" style="border-radius:10px;margin-left: 1651px;margin-bottom:2%;
                    border-color: #f5c68b;
                    background-color: #f5c68b;" (click)="submitinvoiceheader()" class="btn btn-light"
                            [disabled]="invheadersave" id="ecfbatch-view-0021">Save</button> -->
            
                        <!-- <button type="button" class="btn btn-light" style="border-radius:7px;margin-left:1723px;margin-bottom: -18px;
                        margin-top :-151px;
                        border-color: black; 
                        background-color: white;" (click)="backform()" id="ecfbatch-view-0022">Back</button> -->
            
                    </div>
                </form>

                      
                  </div>
                 
        
                  <div class="modal-footer">
        
                           <button *ngIf="submit_btn == 1"
                            style="border-radius:40px;margin-left: 5px;margin-bottom: 10px;"
                            class="btn btn-outline-success" (click)="batchApprove()" [disabled]="SubmitBatchForm?.value?.remark == ''|| SubmitBatchForm?.value?.approvedby != ''" id="ecfbatch-view-0016">
                            Submit</button> 
                           <button *ngIf="submit_btn == 2"
                            style="border-radius:40px;margin-left: 5px;margin-bottom: 10px;"
                            class="btn btn-outline-success" (click)="forward()" [disabled]="SubmitBatchForm?.value?.remark == '' || SubmitBatchForm?.value?.approvedby == ''" id="ecfbatch-view-0017">
                            Submit</button>
                           <button type="submit" *ngIf="submit_btn == 3"
                            style="border-radius:40px;margin-left: 5px;margin-bottom: 10px;"
                            class="btn btn-outline-success" (click)="batchReject()" [disabled]="SubmitBatchForm?.value?.remark == ''|| SubmitBatchForm?.value?.approvedby != ''" id="ecfbatch-view-0018">
                            Submit</button> 
                           <button type="submit" *ngIf="submit_btn == 4"
                            style="border-radius:40px;margin-left: 5px;margin-bottom: 10px;"
                            class="btn btn-outline-success" (click)="batchReturn()" id="ecfbatch-view-0019">
                            Submit</button> 
       
                           <button type="button" style="border-radius:40px;margin-left:5px;margin-bottom: 10px;"
                            class="btn btn-outline-primary" (click)="popupback()" data-dismiss="modal">
                            Back</button>
        
                  </div>
                </div>
              </div>
            </div>
        </div>