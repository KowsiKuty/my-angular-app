<div class="container" style="max-width: 100%;">
    <div style="margin-left: 10px;margin-top: 1%; width: 100%;" *ngIf="ShowHeader">

        <h2 style="font-weight:bold;">ECF Header</h2>
        <div>
            <form [formGroup]="ecfheaderviewForm"  >
                <table style="margin-bottom: 2%;">
                    <div>
                        <tr>
                            <td>


                                <mat-form-field style="width:200px;">
                                    <input matInput placeholder="ECF Type" formControlName="ecftype" 
                                        autocomplete="off" readonly id="bounce-detail-0008">
                                </mat-form-field>
                            </td>

                            <td *ngIf="aptypeid == 3 || aptypeid == 13">
                                <mat-form-field style="width:200px;margin-left: 50px;">
                                    <input matInput placeholder="Payment For" formControlName="payto"
                                        autocomplete="off" readonly id="bounce-detail-0009">
                                </mat-form-field>
                            </td>
                            <td *ngIf="aptypeid == 4">
                                <mat-form-field style="width:200px;margin-left: 50px;">
                                    <input matInput placeholder="Payment For" formControlName="ppx"
                                        autocomplete="off" readonly id="bounce-detail-0010">
                                </mat-form-field>
                            </td>
                            <td>



                                <mat-form-field style="width:200px;margin-left: 50px;">
                                    <input matInput placeholder="Supplier Type" formControlName="supplier_type"
                                        autocomplete="off" readonly id="bounce-detail-0011">
                                </mat-form-field>


                            </td>
                            <td>


                                <mat-form-field style="width:200px;margin-left: 50px;">
                                    <input matInput placeholder="Commodity Name" formControlName="commodity_id"
                                        autocomplete="off" readonly id="bounce-detail-0012">
                                </mat-form-field>
                            </td>
                            <td *ngIf="aptypeid != 3 && aptypeid != 4 &&  aptypeid != 13">
                                <mat-form-field
                                    style="width:300px;margin-left: 50px;font-family: 'Times New Roman', Times, serif;">
                                    <input matInput placeholder="Raiser Branch" formControlName="branch"
                                        autocomplete="off" readonly id="bounce-detail-0013">
                                </mat-form-field>
                            </td>
                        </tr>
                       
                        <tr>
                            
                            <!-- <td>
                                <mat-form-field
                                    style="width:200px;font-family: 'Times New Roman', Times, serif;">
                                    <input matInput placeholder="Client Name" formControlName="client_code"
                                        autocomplete="off" readonly id="bounce-detail-0014"> 
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field 
                                    style="width:200px;margin-left: 50px;font-family: 'Times New Roman', Times, serif;">
                                    <input matInput placeholder="RM Name" formControlName="rmcode"
                                        autocomplete="off" readonly id="bounce-detail-0015">
                                </mat-form-field>
                            </td> -->
                            <td>
                                <mat-form-field
                                    style="width: 200px;font-family: 'Times New Roman', Times, serif;">
                                    <mat-label>ECF Date</mat-label>
                                    <input matInput readonly  placeholder="ECF Date"
                                        formControlName="ecfdate"   id="bounce-detail-0016">
                                   
                                </mat-form-field>
                            </td>
                            <td *ngIf="aptypeid != 7">
                                <mat-form-field
                                    style="width: 200px;margin-left:50px;font-family: 'Times New Roman', Times, serif;">
                                    <input matInput placeholder="ECF Amount" formControlName="ecfamount"
                                        autocomplete="off" readonly style="text-align: right;" id="bounce-detail-0017">
                                </mat-form-field>
                            </td>
                            <td *ngIf="aptypeid == 7">
                                <mat-form-field
                                    style="width: 200px;margin-left:50px;font-family: 'Times New Roman', Times, serif;">
                                    <input matInput placeholder="CRN Amount" formControlName="ecfamount" style="text-align: right;"
                                        autocomplete="off" readonly id="bounce-detail-0018">
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field
                                    style="width: 200px;margin-left:50px;font-family: 'Times New Roman', Times, serif;">
                                    <input matInput placeholder="Purpose" formControlName="remark"
                                        autocomplete="off" readonly id="bounce-detail-0019">
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field
                                style="width: 200px;margin-left:50px;font-family: 'Times New Roman', Times, serif;">
                                <input matInput placeholder="Is Original Invoice" formControlName="is_originalinvoice"
                                    autocomplete="off" readonly id="bounce-detail-0020">
                            </mat-form-field>
                            </td>
                            <td *ngIf="aptypeid == 3 || aptypeid == 4 || aptypeid == 13">
                                <mat-form-field
                                style="width:200px;margin-left: 50px;font-family: 'Times New Roman', Times, serif;">
                                <input matInput placeholder="Raiser Branch" formControlName="branch"
                                    autocomplete="off" readonly id="bounce-detail-0021">
                            </mat-form-field>
                            </td>
                        </tr>

                        <tr>
                           
                           
                           
                            <td style="white-space:nowrap;" *ngIf="aptypeid == 3 && this.checkhr == true">

                                <mat-radio-group formControlName="is_raisedby_self" readonly class="inputformatradiobutton">
                                    <mat-label >Behalf of Self</mat-label>
                                    <mat-radio-button *ngFor="let n of behalfyesorno" [value]="n.value"
                                      style="margin-left:10px"  [disabled]="showgst">
                                        {{n.display}}
                                    </mat-radio-button>
                                </mat-radio-group>


                            </td>
                            
                            <td *ngIf="aptypeid == 3 && ecfheaderviewForm.value.is_raisedby_self == false">
                                <mat-form-field
                                    style="width:200px;margin-left: 50px;font-family: 'Times New Roman', Times, serif;">
                                    <input matInput placeholder="Raised For" formControlName="raised_for"
                                        autocomplete="off" readonly id="bounce-detail-0022">
                                </mat-form-field>
                            </td>
                            <td *ngIf="aptypeid == 3 && ecfheaderviewForm.value.is_raisedby_self == false">
                                <mat-form-field
                                    style="width:200px;font-family: 'Times New Roman', Times, serif;margin-left: 50px;">
                                    <input matInput placeholder="Raised By" formControlName="raised_by"
                                        autocomplete="off" readonly id="bounce-detail-0023">
                                </mat-form-field>
                            </td>

                            </tr>
                            <tr *ngIf="this.ecfheaderviewForm?.value?.location != '' && this.ecfheaderviewForm?.value?.location != null">
                              <td>
                                  <mat-form-field
                                    style="width:200px;font-family: 'Times New Roman', Times, serif;">
                                    <input matInput placeholder="Location" formControlName="location"
                                        autocomplete="off" readonly id="bounce-detail-0024">
                                   </mat-form-field> 
                            </td>
                        </tr>
                            <tr>
                            <td>
                                
                                
                                    <h3   data-toggle="modal"
                                    data-target=".bd-example-modal-xl" style="cursor: pointer;color:blue;font-family: 'Montserrat';" class="btn btn-link" matTooltip="View Notes">View Notes</h3>
                                
                            </td>
                            <!-- <td>
                                <h3  (click)="gettrandata()" data-toggle="modal"
                                 data-target="#showtrandetails" style="cursor: pointer;color:blue;font-family: 'Montserrat';" class="btn btn-link" matTooltip="Transaction View">View Transaction Details</h3>
                            </td> -->

                                 <!-- -------notepad------ -->

                                 <div class="modal fade bd-example-modal-xl" tabindex="-1" role="dialog"
                                 aria-labelledby="myExtraLargeModalLabel" aria-hidden="true">
                                 <div class="modal-dialog modal-xl">
                                     <div class="modal-content">
                                         <div class="modal-header">
                                             <h2 class="modal-title" id="bounce-detail-0001">
                                                 Note Pad
                                             </h2>
                                         </div>
                                         <br>
                                         <div style="margin-left: 50px;width:90%;height: 70%;">
                                             <div>

                                                 <div [ngxSummernote]="config"
                                                     [ngxSummernoteDisabled]="editorDisabled" (blur)="onBlur()"
                                                     (mediaDelete)="onDelete($event)"
                                                     (summernoteInit)="summernoteInit($event)"
                                                     formControlName="notename">
                                                 </div>

                                             </div>
                                         </div>
                                         <br>
                                         <div class="modal-footer">
                                             <!-- <button type="button" style="border-radius: 40px;margin-left: 10px;"
                                                 class="btn btn-outline-primary"
                                                 data-dismiss="modal" id="bounce-detail-0025">Close</button> -->

                                             <button type="button" style="border-radius:10px;margin-left: 10px; border-color: black; 
                                                 background-color: white;" class="btn btn-light"
                                                 data-dismiss="modal" id="bounce-detail-0026">
                                                 Close</button>

                                         </div>
                                     </div>
                                 </div>
                             </div>

                            <!-- <td>
                        <span class="material-icons" type="button" data-toggle="modal"
                            style="margin-left: 50px;" data-target=".bd-example-modal-xl"
                            formControlName="notename">description</span>Add Note
                    </td> -->
                        </tr>

                    </div>
                </table>
            </form>
        </div>

        
        <h2 *ngIf="aptypeid != 7" style="margin-left: 1px;font-weight:bold;">Invoice Header</h2>
        <h2 *ngIf="aptypeid == 7" style="margin-left: 1px;font-weight:bold;">Credit Note Header</h2>
        <div>
            <form [formGroup]="InvoiceHeaderForm">
            <table>
                <tr>
                    <mat-radio-group formControlName="invoicegst" readonly class="inputformatradiobutton">
                        <mat-label > GST Applicable</mat-label>
                        <mat-radio-button *ngFor="let n of yesorno" [value]="n.value"
                            style="margin-left: 10px;" [disabled]="showgst">
                            {{n.display}}
                        </mat-radio-button>
                    </mat-radio-group>
                </tr>
            </table>
            </form>
        </div>
        <div>

            <div class="table-responsive" style="width:100%;margin-top: 1%;">
                <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                    <thead class="table_header" style="text-align: center;">
                        <tr>

                            <th>S.No</th>
                            <!-- <th  style="width:20%;">Invoice CR.No</th> -->
                            <th *ngIf="aptypeid == 2 || this.ppxid == 'S' || aptypeid == 14">Supplier Name</th>
                            <th *ngIf="aptypeid == 2 || this.ppxid == 'S' || aptypeid == 14">Supplier GST No</th>
                            <th *ngIf="aptypeid == 2 || this.ppxid == 'S'  || aptypeid == 14">Supplier State</th>
                            <th>Place Of Supply</th>
                            <th *ngIf="this.ppxid != 'E'">Invoice No</th>
                            <th *ngIf="aptypeid == 7">Credit Ref No</th>
                            <th *ngIf="this.ppxid != 'E'">Invoice Date</th>
                            <th>Taxable Amount</th>
                            <th *ngIf="aptypeid == 2 ">Tax Amount</th>
                            <!-- <th>Roundoff Amount</th>
                            <th>Other Adjustment</th> -->
                            <th>Total Amount</th>
                            <th>Invoice Status</th>
                            <th>Attached PDF</th>
                            <th>Audit Checklist</th>
                            <th>Dedupe Check</th>
                            <th>Select</th>
                            <th>Action</th>

                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let dtl of invheaderdata; index as i">
                            <!-- <td> {{(ecfpresentpage - 1)*pagesizeecf +i+1 }} </td>  -->
                            <td>{{i+1}}</td>
                            <!-- <td  style="width:20%;">{{dtl?.inv_crno}}</td> -->
                            <td *ngIf="aptypeid == 2 || this.ppxid == 'S' || aptypeid == 14">{{dtl?.supplier_id?.name}}</td>
                            <td *ngIf="aptypeid == 2 || this.ppxid == 'S' || aptypeid == 14">{{dtl?.supplier_id?.gstno}}</td>
                            <td *ngIf="aptypeid == 2 || this.ppxid == 'S'  || aptypeid == 14">{{dtl?.supplierstate_id?.name}}
                            </td>
                            <td>{{dtl?.place_of_supply?.code}}-{{dtl?.place_of_supply?.name}}</td>
                            <td *ngIf="this.ppxid != 'E'">{{dtl?.invoiceno}}</td>
                            <td *ngIf="aptypeid == 7">{{dtl?.credit_refno}}</td>
                            <td *ngIf="this.ppxid != 'E'">{{dtl?.invoicedate|date:'dd/MM/yyyy'}}</td>
                            <td style="text-align: right;">{{dtl?.invoiceamount| currency:'INR'}}</td>
                            <td  *ngIf="aptypeid == 2 " style="text-align: right;">{{dtl?.taxamount| currency:'INR'}}</td>
                            <!-- <td>{{dtl.roundoffamt}}</td>
                            <td>{{dtl.otheramount}}</td> -->
                            <td style="text-align: right;">{{dtl?.totalamount| currency:'INR'}}</td>
                            <td>{{ (dtl?.apinvoiceheaderstatus_id !== null) ? (dtl?.apinvoiceheaderstatus) : (dtl?.invoice_status)}}</td>
                            <td>
                        <tr *ngFor="let file of dtl.file_data; index as j">
                            <td>
                                {{j+1}}
                            </td>
                            <td>
                               
                                <a  (click)="data(file)"  class="btn btn-link" style="cursor: pointer;color:blue;"
                                    matTooltip="View File"  data-target="#my-modal" data-toggle="modal">{{ file.file_name}}</a>
                            </td>
                            <td>
                               
                                <i class="material-icons"  (click)="getfiles(file)">
                                    get_app
                                </i>
                            </td>
                        </tr>
                        </td>

                            <!-- <td style="text-align: center;">
                                <span matTooltip="view File" class=" fa fa-file-image-o "
                                    style="color: hsl(0, 0%, 0%);cursor: pointer;" data-toggle="modal"
                                    (click)="getfiledetails()" data-target="#showattachmentpopup"></span>

                            </td> -->
                            <td>
                                <button type="button" class="btn btn-outline-primary" style="border-radius:50px;height: 53px; margin-top: 12px;font-size:medium;"
                                data-toggle="modal" data-target="#bounce-detail-0003" (click)="getbouncedchecklist(i, dtl.id, dtl.invoicedate)"  >Audit Checklist
                                                              </button> 
                            </td>
                            <td>
                                <button type="button" class="btn btn-outline-primary" style="border-radius:50px;height: 53px; margin-top: 12px;font-size: medium;"
                                data-toggle="modal" data-target="#bounce-detail-0002" (click)="getdedup(i, dtl.id)">Dedupe Check
                                </button> 
                            </td>

                            <td>
                                <section class="example-section">
                                    <mat-checkbox class="example-margin"  (change)="hdrselect($event,i)" [disabled]="hdrDisable[i]" style="margin-top: 15px;margin-left: 6px;"
                                    ></mat-checkbox>
                                </section>
                            </td>
                            <td style="text-align: center;">
                                <span matTooltip="view" class=" fa fa-eye create "
                                    style="color: black;cursor: pointer;"  (click)="Movetodetail(i,dtl)"></span>
                                   

                            </td>
                        </tr>
                        <tr *ngIf = "aptypeid == 2 ">
                            <td class="totaldisplay" colspan="9"  style="text-align: end;">
                                Net Amount:</td>
                                <td>{{headertotalamt| currency:'INR'}}</td>

                        </tr>
                        <tr *ngIf = "this.ppxid == 'S'">
                            <td class="totaldisplay" colspan="8"  style="text-align: end;">
                                Net Amount:</td>
                                <td>{{headertotalamt| currency:'INR'}}</td>

                        </tr>
                        <tr *ngIf = "aptypeid == 4 && this.ppxid == 'E'" >
                            <td class="totaldisplay" colspan="3"  style="text-align: end;">
                                Net Amount:</td>
                                <td>{{headertotalamt| currency:'INR'}}</td>

                        </tr>
                        <tr *ngIf = "aptypeid == 3" >
                            <td class="totaldisplay" colspan="5"  style="text-align: end;">
                                Net Amount:</td>
                                <td>{{headertotalamt| currency:'INR'}}</td>

                        </tr>
                    </tbody>
                </table>
                <div *ngIf="invheaderdata ?.length == 0" style="margin-left: 42%;">
                    <h3>Sorry data not found!.. </h3>
                </div>
               
            </div><br>
                
        <div style="margin-bottom: 3%;">
            <form [formGroup]="SubmitAPReauditForm">
          
                <mat-form-field style="width: 250px;font-family: 'Times New Roman', Times, serif;margin-left: 350px;">
                    <input matInput placeholder="Remarks" formControlName="remarks" autocomplete="off" required id="bounce-detail-0027">
                </mat-form-field>
            <button type="button"
                                    style="border-radius:40px;margin-left:25px;font-family: 'Times New Roman', Times, serif;margin-bottom: 0px;"
                                    class="btn btn-outline-success" (click)="reaudit(true)" id="bounce-detail-0028">
                                    Re-Audit</button>
                                    <button type="button"
                                    style="border-radius:40px;margin-left:10px;font-family: 'Times New Roman', Times, serif;margin-bottom: 0px;"
                                    class="btn btn-outline-danger" (click)="reject(true)" id="bounce-detail-0029">
                                    Reject</button>
                                    <button type="button" style="border-radius:40px;margin-left: 10px;margin-bottom: 0px;"
            class="btn btn-outline-primary" (click)="overallback()" id="bounce-detail-0030">
            Back</button>
            </form>
        </div>   

        


        </div>
    </div>

    <div style="width: 100%;" *ngIf="ShowInvoice">
        <h2 style="font-weight:bold;">Invoice Header ({{crno}})  </h2>
        <div *ngIf="showinvoicediv">
        <div class="col-md-12">
            <form [formGroup]="frmInvHdr">  
                <table>
                <div>
                <tr>
                <td>
                    <mat-form-field>
                        <input type="text" matInput formControlName="rsrEmp" readonly placeholder="Raisor Employee" id="bounce-detail-0031">
                        <mat-label>Employee</mat-label>
                    </mat-form-field>
                </td>
                
                <td>
                    <mat-form-field style="margin-left: 50px;">
                        <input type="text" matInput formControlName="invNo" readonly placeholder="Invoice No" id="bounce-detail-0032">
                        <mat-label>Invoice No</mat-label>
                    </mat-form-field>
                </td> 
                <td>
                    <mat-form-field style="margin-left: 50px;">
                        <input type="text" matInput formControlName="branchGST" readonly placeholder="Branch GST" id="bounce-detail-0033">
                        <mat-label>Branch GST</mat-label>
                    </mat-form-field>
                </td>
                <td *ngIf="aptypeid != 4">
                    <mat-form-field style="margin-left: 50px;">
                        <input type="text" matInput formControlName="gst" readonly placeholder="GST Applicable" id="bounce-detail-0034">
                        <mat-label>GST Applicable</mat-label>
                    </mat-form-field>
                </td>    
            </tr>    
            <tr>
                <td>
                    <mat-form-field>
                        <input type="text" matInput formControlName="supCode" readonly placeholder="Supplier Code" id="bounce-detail-0035">
                        <mat-label>Supplier Code</mat-label>
                    </mat-form-field>
                </td>
                <td>
                    <mat-form-field style="margin-left: 50px;">
                        <input type="text" matInput formControlName="supName" readonly placeholder="Supplier Name" id="bounce-detail-0036">
                        <mat-label>Supplier Name</mat-label>
                    </mat-form-field>
                </td>
               
                <td>
                    <mat-form-field style="margin-left: 50px;">
                        <input type="text" matInput formControlName="supGST" readonly placeholder="Supplier GST" id="bounce-detail-0037">
                        <mat-label>Supplier GST</mat-label>
                    </mat-form-field>
                </td>
                <td>
                    <mat-form-field style="margin-left: 50px;">
                        <input type="text" matInput formControlName="status" readonly placeholder="Status" id="bounce-detail-0038">
                        <mat-label>Status</mat-label>
                    </mat-form-field>
                </td>  
            </tr>
            <tr >
                <td>
                    <mat-form-field >
                        <input type="text" matInput formControlName="invDate" readonly placeholder="Invoice Date" id="bounce-detail-0039">
                        <mat-label>Invoice Date</mat-label>
                    </mat-form-field>
                </td>
                <td>
                    <mat-form-field style="margin-left: 50px;">
                        <input type="text" matInput formControlName="taxableAmt" readonly placeholder="Taxable Amount" style="text-align: right;" id="bounce-detail-0040">
                        <mat-label>Taxable Amount</mat-label>
                    </mat-form-field>
                </td>
                <td>
                    <mat-form-field style="margin-left: 50px;">
                        <input type="text" matInput formControlName="invAmt" readonly placeholder="Invoice Amount" style="text-align: right;" id="bounce-detail-0041">
                        <mat-label>Invoice Amount</mat-label>
                    </mat-form-field>
                </td>     
            </tr>     
            </div>  
        </table>
        </form>  
        </div>
         <!-- ----------Debit detail if aptype is advance--------- -->
    
         <div *ngIf="this.aptypeid == 4">
            <h2 style="margin-left: 4px;font-family:'Times New Roman';font-weight:bold;">Debit Details</h2>
            
            <div>
                <form [formGroup]="DebitDetailForm">
                    <div class="table-responsive" style="width:100%;margin-top: 1%;">
                        <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                            <thead class="table_header" style="text-align: center;">
                            <tr>
                                   <th>S.No</th>
                                    <th>Category</th>
                                    <th>Sub Category </th>
                                    <th>GL Number</th>
                                    <th>BS </th>
                                    <th>CC</th>
                                    <th>CCBS Percentage</th>
                                    <th>Amount</th>
                                    <th>Adjust Amount</th>
                                    <th>Debit Amount</th> 
    
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let dbt of debitdata;index as i">
                                 <td>{{i+1}}</td>
                                 <td>{{dbt?.category_code?.name}}</td>
                                 <td>{{dbt?.subcategory_code?.name}}</td>
                                 <td>{{dbt?.glno}}</td>
                                 <td>{{dbt?.bs_code?.name}}</td>
                                 <td>{{dbt?.cc_code?.name}}</td>
                                 <td style="text-align:center">{{dbt?.ccbspercentage}}</td>
                                 <td style="text-align:right">{{dbt?.amount | currency:'INR'}}</td>
                                 <td style="text-align:right">{{dbt?.deductionamount}}</td>
                                 <td style="text-align:right">{{dbt?.amount | currency:'INR'}}</td>
                                </tr>
                            </tbody>
                            <tr>
                                <td class="totaldisplay" colspan="9"
                                    style="font-family: 'Times New Roman', Times, serif;text-align: right;font-size:15px">Net Amount:
                                </td>
                                <td>{{debitsum | currency:'INR'}}</td>
                            </tr>
                        </table>
                    </div>                    
                </form>
            </div>
        </div>
         <!-- -------------- -->
        
         <form [formGroup]="InvoiceDetailForm">
            <!-- ----------Invoice detail if aptype other than advance--------- -->
    
            <div *ngIf="this.aptypeid !=4">
               <h2 style="font-weight:bold;">Invoice Details</h2>
                                <div class="table-responsive" style="width:100%;margin-top: 1%;">
                                    <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                                        <thead class="table_header" style="text-align: center;">
                                        <tr>
                                <th>S.No</th> 
                                <th>Particulars</th>                           
                                <th>Product Name</th>
                                <th>Is RCM</th>
                                <th>UOM</th>
                                <th *ngIf="this.aptypeid !== 3 && this.aptypeid !== 4 && this.aptypeid !== 8">HSN Code</th>  
                                <th *ngIf="this.aptypeid !== 3 && this.aptypeid !== 4 && this.aptypeid !== 8">HSN %</th>          
                                <th>Unit Price</th>                
                                <th>Quantity</th>
                                <th>Amount</th>             
                                <th *ngIf="this.aptypeid !== 3 && this.aptypeid !== 4 && this.aptypeid !== 8">CGST</th>
                                <th *ngIf="this.aptypeid !== 3 && this.aptypeid !== 4 && this.aptypeid !== 8">SGST</th>                
                                <th *ngIf="this.aptypeid !== 3 && this.aptypeid !== 4 && this.aptypeid !== 8">IGST</th>
                                <th *ngIf="this.aptypeid !== 3 && this.aptypeid !== 4 && this.aptypeid !== 8">Tax Amount</th>
                                <th *ngIf="this.aptypeid !== 3 && this.aptypeid !== 4 && this.aptypeid !== 8">Discount</th>                
                                <th>Total Amount</th> 
                            <th>Is Capitalized</th>  
                            <th>View Debit</th>      
                            </tr>
                        </thead>      
    
                        <tbody>
                            <tr *ngFor = "let dtl of invDetailList;index as i">
                               <td>{{i+1}}</td>
                               <td>{{dtl?.description}}</td> 
                               <td>{{dtl?.productname}}</td>
                               <td>{{dtl?.is_rcmproduct}}</td>
                               <td>{{dtl?.uom}}</td>
                               <td  *ngIf="this.aptypeid !== 3 && this.aptypeid !== 4 && this.aptypeid !== 8">{{dtl?.hsn?.code}}</td>
                               <td  *ngIf="this.aptypeid !== 3 && this.aptypeid !== 4 && this.aptypeid !== 8">{{dtl?.hsn_percentage}}</td>
                               <td style="text-align:right">{{dtl?.unitprice | currency:'INR'}}</td>
                               <td style="text-align: center;">{{dtl?.quantity}}</td>
                               <td style="text-align:right">{{dtl?.amount | currency:'INR'}}</td>
                               <td *ngIf="this.aptypeid !== 3 && this.aptypeid !== 4 && this.aptypeid !== 8" style="text-align:right">{{dtl?.cgst | currency:'INR'}}</td>
                                <td *ngIf="this.aptypeid !== 3 && this.aptypeid !== 4 && this.aptypeid !== 8" style="text-align:right">{{dtl?.sgst | currency:'INR'}}</td>                
                                <td *ngIf="this.aptypeid !== 3 && this.aptypeid !== 4 && this.aptypeid !== 8" style="text-align:right">{{dtl?.igst | currency:'INR'}}</td>
                                <td *ngIf="this.aptypeid !== 3 && this.aptypeid !== 4 && this.aptypeid !== 8" style="text-align:right">{{dtl?.taxamount | currency:'INR'}}</td>
                                <td *ngIf="this.aptypeid !== 3 && this.aptypeid !== 4 && this.aptypeid !== 8" style="text-align:right">{{dtl?.discount | currency:'INR'}}</td> 
                                <td style="text-align:right">{{dtl?.totalamount | currency:'INR'}}</td>  
                                <td *ngIf="dtl?.is_capitalized == true || dtl?.is_capitalized == 1" style="text-align: center;">Yes</td>
                                <td *ngIf="dtl?.is_capitalized == false || dtl?.is_capitalized ==0" style="text-align: center;">No</td>
                               <td style="text-align:center">
    
                                    <span matTooltip="view" class=" fa fa-eye create "
                                        style="color: black;cursor: pointer;" (click)="adddebits(dtl)"></span>
                                        
                                   
    
                                </td>        
                            </tr>
                            <tr>
                                    
                                <th class="totaldisplay" colspan="15"   *ngIf="this.aptypeid != 3 && this.aptypeid !=4 && this.aptypeid != 8"
                                style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                    Rounding Off:</th>
                                <th class="totaldisplay" colspan="7"   *ngIf="this.aptypeid == 3 || this.aptypeid ==4 || this.aptypeid == 8"
                                style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                    Rounding Off:</th>
                                <td style="text-align:right">{{Roundoffamount| currency:'INR'}}</td>
                            </tr>
                            <tr >
                                <td class="totaldisplay" colspan="15"  *ngIf="this.aptypeid != 3 && this.aptypeid !=4 && this.aptypeid != 8"
                                    style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                    Net Amount:</td>
                                <td class="totaldisplay" colspan="7"  *ngIf="this.aptypeid == 3 || this.aptypeid ==4 || this.aptypeid == 8"
                                    style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                    Net Amount:</td>
                                <td style="text-align:right">{{INVsum | currency:'INR'}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </form>
    
        <!-- ----------credit detail --------- -->
    
        <br><br>
        <h2 style="font-weight:bold;">Credit Details</h2>
        <!-- <form [formGroup]="creditdetForm">            
        </form> -->
      
                        <div class="table-responsive" style="width:100%;margin-top: 1%;">
                            <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                                <thead class="table_header" style="text-align: center;">
                                <tr>
                                <th>S.No</th>
                                <th>Paymode</th>
                                <th>Account Detail/GL</th>
                                <th>Transaction Branch</th>
                                <th>Ref No</th>
                                <th>Bank Name</th>
                                <th>Branch Name</th>
                                <th>IFSC Code</th>
                                <th>Beneficiary Name</th>
                                <th>Tax Type</th>
                                <th>Tax Rate</th>
                                <th>TDS Excempt</th>
                                <th>Taxable Amount</th>
                                <th>GL No</th>
                                <th>Amount</th>
                            </tr>
                        </thead>        
                       <tbody>
                        <tr *ngFor="let cdt of invCreditList;index as i">
                            <td>{{i+1}}</td>
                            <td>{{cdt?.paymode?.name}}</td>
                            <td>{{cdt?.refno}}</td>
                            <td style="text-align: center;">-</td>
                            <td>{{cdt?.refno}}</td>
                            
                            <td *ngIf="this.paytoid == 'S'"><ng-container *ngFor="let cdtdtl of cdt?.supplierpayment_details?.data">{{cdtdtl?.bank_id?.name}}</ng-container></td>
                            <td *ngIf="this.paytoid == 'S'"><ng-container *ngFor="let cdtdtl of cdt?.supplierpayment_details?.data">{{cdtdtl?.branch_id?.name}}</ng-container></td>
                            <td *ngIf="this.paytoid == 'S'"><ng-container *ngFor="let cdtdtl of cdt?.supplierpayment_details?.data">{{cdtdtl?.branch_id?.ifsccode}}</ng-container></td>
                            <td *ngIf="this.paytoid == 'S'"><ng-container *ngFor="let cdtdtl of cdt?.supplierpayment_details?.data">{{cdtdtl?.beneficiary}}</ng-container></td>
    
                            <td *ngIf="this.paytoid == 'E'"><ng-container *ngFor="let cdtdtl of cdt?.employeeaccount_details?.data">{{cdtdtl?.bank_name}}</ng-container></td>
                            <td *ngIf="this.paytoid == 'E'"><ng-container *ngFor="let cdtdtl of cdt?.employeeaccount_details?.data">{{cdtdtl?.bankbranch?.name}}</ng-container></td>
                            <td *ngIf="this.paytoid == 'E'"><ng-container *ngFor="let cdtdtl of cdt?.employeeaccount_details?.data">{{cdtdtl?.bankbranch?.ifsccode}}</ng-container></td>
                            <td *ngIf="this.paytoid == 'E'"><ng-container *ngFor="let cdtdtl of cdt?.employeeaccount_details?.data">{{cdtdtl?.beneficiary_name}}</ng-container></td>
                            <td>{{cdt?.suppliertaxtype}}</td>
                            <td>{{cdt?.suppliertaxrate}}</td>
                            <td>{{cdt?.taxexcempted}}</td>
                            <td style="text-align:right">{{cdt?.taxableamount | currency:'INR'}}</td>
                            <td>{{cdt?.glno}}</td>
                            <td style="text-align:right">{{cdt?.amount | currency:'INR'}}</td>
                            
                        </tr>
                       </tbody>
                            <tr>
                                <td class="totaldisplay" colspan="14"
                                    style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                    Net Amount:</td>
                                <td style="text-align:right">{{cdtsum | currency:'INR'}}</td>
                            </tr>
             </table>
        </div>
        <br>
        <div style="margin-bottom: 3%;">
            <form [formGroup]="SubmitAPReauditForm">
          
                <mat-form-field style="width: 250px;font-family: 'Times New Roman', Times, serif;margin-left: 350px;">
                    <input matInput placeholder="Remarks" formControlName="remarks" autocomplete="off" required id="bounce-detail-0042">
                </mat-form-field>
            <button type="button"
                                    style="border-radius:40px;margin-left:25px;font-family: 'Times New Roman', Times, serif;margin-bottom: 0px;"
                                    class="btn btn-outline-success" (click)="reaudit()" id="bounce-detail-0043">
                                    Re-Audit</button>
                                    <button type="button"
                                    style="border-radius:40px;margin-left:10px;font-family: 'Times New Roman', Times, serif;margin-bottom: 0px;"
                                    class="btn btn-outline-danger" (click)="reject()" id="bounce-detail-0044">
                                    Reject</button>
                                    <button type="button" style="border-radius:40px;margin-left: 10px;margin-bottom: 0px;"
            class="btn btn-outline-primary" (click)="bouncedetback()" id="bounce-detail-0045">
            Back</button>
            </form>
        </div>     
        </div>
        <!-- Debit Div starts---- -->
        <div *ngIf="showdebitdiv">
               
            <br>
            <h2 style="font-weight:bold ;">Debit Details (Total Amount :
                {{invtotamount | currency:'INR'}})</h2>
    
            <!-- &nbsp;&nbsp;&nbsp;&nbsp; -->
    
            <div>
                <form [formGroup]="DebitDetailForm">
                                    <div class="table-responsive" style="width:100%;margin-top: 1%;">
                                        <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                                            <thead class="table_header" style="text-align: center;">
                                            <tr>
                                    <th>S.No</th>
                                    <th>Category</th>
                                    <th>Sub Category </th>
                                    <th>GL Number</th>
                                    <th>BS </th>
                                    <th>CC</th>
                                    <th>CCBS Percentage</th>
                                    <th>Amount</th>
                                    <th>Adjust Amount</th>
                                    <th>Debit Amount</th>  
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let dbt of debitdata;index as i">
                                 <td>{{i+1}}</td>
                                 <td>{{dbt?.category_code?.name}}</td>
                                 <td>{{dbt?.subcategory_code?.name}}</td>
                                 <td>{{dbt?.glno}}</td>
                                 <td>{{dbt?.bs_code?.name}}</td>
                                 <td>{{dbt?.cc_code?.name}}</td>
                                 <td style="text-align:center">{{dbt?.ccbspercentage}}</td>
                                 <td style="text-align:right">{{dbt?.amount | currency:'INR'}}</td>
                                 <td style="text-align:right">{{dbt?.deductionamount}}</td>
                                 <td style="text-align:right">{{dbt?.amount | currency:'INR'}}</td>
                                </tr>
                            </tbody>
                            <tr>
                                <td class="totaldisplay" colspan="9"
                                    style="font-family: 'Times New Roman', Times, serif;;font-size:15px;text-align: end;">Net Amount:
                                </td>
                                <td style="text-align:right">{{debitsum | currency:'INR'}}</td>
                            </tr>
                            <tr>
                                <td colspan="10">
                                    <button type="button" #debitclosebtn
                                        style="border-radius:40px;margin-left:625px;font-family: 'Times New Roman', Times, serif;"
                                        class="btn btn-outline-primary" (click)="debitbacks()" id="bounce-detail-0046">
                                        Back</button>
                                </td>
                            </tr>
                        </table>
                    </div>
                </form>
            </div>
        </div> 
        
        
        <!-- Debit div ends -->
    </div>
    
</div>
    
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true" id="bounce-detail-0002">
    <div class="modal-dialog modal-xl" style="width:80%;height:200%;">
        <div class="modal-content">
            <div class="modal-header">
            <h2 class="modal-title" style="text-align:center;margin-left:45%">Dedupe</h2>
            <button class="close" type="button" data-dismiss="modal" id="bounce-detail-0047">x</button>                
            </div>
            <div class="modal-body">
                <pre>EXACT_MATCH</pre>
                <div class="table-responsive" class="tablescroll" style="margin-top: 10px;width: 100%;margin-left: 10px;">
                    <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                        <thead class="table_header " fixed-header>
                            <tr>
                                <th>S.No</th> 
                                <th>Invoice Number</th>                             
                                <th>Invoice Header Amount</th>
                                <th>Status</th>          
                                <th>CR Number</th>                
                                <th>Supplier Name</th>
                                <th>Branch Name</th>             
                                <th>Employee Name</th>                                      
                            </tr>
                        </thead>
                        <tbody>                    
                            <tr *ngFor="let value of exactList; index as i;">
                                <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                <td>{{value.invoiceno}}</td>
                                <td style="text-align: right;">{{value.invoiceamount | currency:'INR'}}</td>     
                                <td>{{value['status'].text}}</td>
                                <td>{{value.crno}}</td>                         
                                <td>{{value['supplier'].name}}</td>
                                <td>{{value['branch'].name}}</td>
                                <td>{{value.raised_empname}}</td>    
                            </tr>
                        </tbody>
                    </table>
                    <div *ngIf="exactList ?.length == 0" style="margin-left: 42%;">
                        <h3 style="font-family: 'Times New Roman', Times, serif;">No Records found!..</h3>
                    </div>
                </div>
                <br>

                <pre>WITHOUT_SUPPLIER</pre>
                <div class="table-responsive" class="tablescroll" style="margin-top: 10px;width: 100%;margin-left: 10px;">
                    <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                        <thead class="table_header " fixed-header>
                            <tr>
                                <th>S.No</th> 
                                <th>Invoice Number</th>                             
                                <th>Invoice Header Amount</th>
                                <th>Status</th>          
                                <th>CR Number</th>                
                                <th>Supplier Name</th>
                                <th>Branch Name</th>             
                                <th>Employee Name</th>                                      
                            </tr>
                        </thead>
                        <tbody>                    
                            <tr *ngFor="let value of withoutSuppList; index as i;">
                                <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                <td>{{value.invoiceno}}</td>
                                <td style="text-align: right;">{{value.invoiceamount | currency:'INR'}}</td>     
                                <td>{{value['status'].text}}</td>
                                <td>{{value.crno}}</td>                         
                                <td>{{value['supplier'].name}}</td>
                                <td>{{value['branch'].name}}</td>
                                <td>{{value.raised_empname}}</td>    
                            </tr>
                        </tbody>
                    </table>
                    <div *ngIf="withoutSuppList ?.length == 0" style="margin-left: 42%;">
                        <h3 style="font-family: 'Times New Roman', Times, serif;">No Records found!..</h3>
                    </div>
                </div>
                <br>

                <pre>WITHOUT_INVOICE_AMOUNT</pre>
                <div class="table-responsive" class="tablescroll" style="margin-top: 10px;width: 100%;margin-left: 10px;">
                    <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                        <thead class="table_header " fixed-header>
                            <tr>
                                <th>S.No</th> 
                                <th>Invoice Number</th>                             
                                <th>Invoice Header Amount</th>
                                <th>Status</th>          
                                <th>CR Number</th>                
                                <th>Supplier Name</th>
                                <th>Branch Name</th>             
                                <th>Employee Name</th>                                      
                            </tr>
                        </thead>
                        <tbody>                    
                            <tr *ngFor="let value of withoutInvAmtList; index as i;">
                                <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                <td>{{value.invoiceno}}</td>
                                <td style="text-align: right;">{{value.invoiceamount | currency:'INR'}}</td>     
                                <td>{{value['status'].text}}</td>
                                <td>{{value.crno}}</td>                         
                                <td>{{value['supplier'].name}}</td>
                                <td>{{value['branch'].name}}</td>
                                <td>{{value.raised_empname}}</td>    
                            </tr>
                        </tbody>
                    </table>
                    <div *ngIf="withoutInvAmtList ?.length == 0" style="margin-left: 42%;">
                        <h3 style="font-family: 'Times New Roman', Times, serif;">No Records found!..</h3>
                    </div>
                </div>
                <br>

                <pre>WITHOUT_INVOICE_NUMBER</pre>
                <div class="table-responsive" class="tablescroll" style="margin-top: 10px;width: 100%;margin-left: 10px;">
                    <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                        <thead class="table_header " fixed-header>
                            <tr>
                                <th>S.No</th> 
                                <th>Invoice Number</th>                             
                                <th>Invoice Header Amount</th>
                                <th>Status</th>          
                                <th>CR Number</th>                
                                <th>Supplier Name</th>
                                <th>Branch Name</th>             
                                <th>Employee Name</th>                                      
                            </tr>
                        </thead>
                        <tbody>                    
                            <tr *ngFor="let value of withoutInvNoList; index as i;">
                                <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                <td>{{value.invoiceno}}</td>
                                <td style="text-align: right;">{{value.invoiceamount | currency:'INR'}}</td>     
                                <td>{{value['status'].text}}</td>
                                <td>{{value.crno}}</td>                         
                                <td>{{value['supplier'].name}}</td>
                                <td>{{value['branch'].name}}</td>
                                <td>{{value.raised_empname}}</td>    
                            </tr>
                        </tbody>
                    </table>
                    <div *ngIf="withoutInvNoList ?.length == 0" style="margin-left: 42%;">
                        <h3 style="font-family: 'Times New Roman', Times, serif;">No Records found!..</h3>
                    </div>
                </div>
                <br>

                <pre>WITHOUT_INVOICE_DATE</pre>
                <div class="table-responsive" class="tablescroll" style="margin-top: 10px;width: 100%;margin-left: 10px;">
                    <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                        <thead class="table_header " fixed-header>
                            <tr>
                                <th>S.No</th> 
                                <th>Invoice Number</th>                             
                                <th>Invoice Header Amount</th>
                                <th>Status</th>          
                                <th>CR Number</th>                
                                <th>Supplier Name</th>
                                <th>Branch Name</th>             
                                <th>Employee Name</th>                                      
                            </tr>
                        </thead>
                        <tbody>                    
                            <tr *ngFor="let value of withoutInvDtList; index as i;">
                                <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                <td>{{value.invoiceno}}</td>
                                <td style="text-align: right;"  >{{value.invoiceamount | currency:'INR'}}</td>     
                                <td>{{value['status'].text}}</td>
                                <td>{{value.crno}}</td>                         
                                <td>{{value['supplier'].name}}</td>
                                <td>{{value['branch'].name}}</td>
                                <td>{{value.raised_empname}}</td>    
                            </tr>
                        </tbody>
                    </table>
                    <div *ngIf="withoutInvDtList ?.length == 0" style="margin-left: 42%;">
                        <h3 style="font-family: 'Times New Roman', Times, serif;">No Records found!..</h3>
                    </div>
                </div>
            </div>
            <div class="modal-footer"  class="col-md-12 text-center" style="margin-bottom: 2%;">
                <button type="button" class="btn btn-outline-primary" style="border-radius:40px;height: 44px; margin-top: 12px;text-align:center ;" data-dismiss="modal"  id="bounce-detail-0048">Back</button>
            </div>

        </div>
    </div>

</div>
<!-- Auditchecklist -->
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
     id="bounce-detail-0003">
     <div class="modal-dialog modal-xl " style="width: 85%;">
         <div class="modal-content">
             <div class="modal-header" style="text-align:center">
                 <h2 class="modal-title" style="text-align:center;margin-left:36%">Audit Checklist</h2>
                 <button type="button" class="close" #auditclose data-dismiss="modal" aria-label="Close" id="bounce-detail-0049">
                     <span aria-hidden="true">&times;</span>
                 </button>
             </div>
             <div>
                 <table class="table table-bordered" style="width: 100%;text-align: center;">
                     <thead class="table_header">
                     <tr>
                         <th>S.NO</th>
                         <th>Question</th>
                         <th>Ok/Not.Ok</th>
                     </tr>
                     </thead>
                     <tr *ngFor="let dt of checklist;let i=index">
                     <td>{{i+1}}</td>
                     <td>{{dt.question}}</td>
                     <td>  <div class="btn-group btn-group-toggle" data-toggle="buttons"  >
                         <label class="btn btn-outline-success" [ngClass]="(dt.value==1)? 'active': ''">
                           <input type="radio" name="options" id="option1" autocomplete="off"   (click)="ok(i,dt)" > Ok
                           </label>
                         <label class="btn btn-outline-danger ">
                           <input type="radio" name="options" id="option2" autocomplete="off" checked   (click)="notok(i,dt)"> Not-OK
                         </label>
                         <label class="btn btn-outline-secondary">
                           <input type="radio" name="options" id="option3"  autocomplete="off"  (click)="nap(i,dt)"> N/A
                         </label>
                       </div> </td>
                 </tr>
                 </table>
             </div>
             <div>
            <div>
             <button  data-dismiss="modal" class="btn btn-outline-primary" style="border-radius:35px;height: 40px;margin-left: 500px;" id="bounce-detail-0050">Back</button> 
            </div>
     </div>
     </div>
     </div>
</div>

<!-- View Trancation -->
<!-- <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
    id="bounce-detail-0007">
    <div class="modal-dialog modal-xl" style="width:80%;height:200%;">
        <div class="modal-content">
            <div class="modal-header" style="text-align:center">
                <h2 class="modal-title" style="text-align:center;margin-left:42%">View Transaction</h2>
            <button class="close" type="button" data-dismiss="modal" id="bounce-detail-0051">x</button>      
            </div>
            <div>
                <table class="table table-bordered" style="width: 100%;text-align: center;">
                    <thead class="table_header">
                    <tr>
                        <th>S.NO</th>
                        <th>Type</th>
                        <th>Status</th>
                        <th>From Date</th>
                        <th>Remarks</th>
                        <th>Employee Name</th>
                        <th>Approver Name</th>
                        <th>Approved By</th>
                    </tr>
                    </thead>
                    <tr *ngFor="let dt of viewtrnlist;let i=index">
                        <td>{{i+1}}</td>
                        <td>{{dt.type}}</td>
                        <td>{{dt.status.text}}</td>
                        <td>{{dt.created_date}}</td>
                        <td>{{dt.remarks}}</td>
                        <td>{{dt.from_user.name}}
                        <br>
                        <div *ngIf="dt.from_user_id==-1; else deta"></div>
                            <ng-template #deta>
                                <a style="color: green;cursor: pointer;"  (click)="view(dt)">View Details</a>
                            </ng-template>
                        </td>
                        <td>{{dt.to_user.name}}
                        <br>
                        <div *ngIf="dt.to_user_id==-1; else det"></div>
                        <ng-template #det>
                        <a style="color: green;cursor: pointer;"  (click)="viewto(dt)">View Details</a>
                        </ng-template></td>
                        <td></td>
                    </tr>
                </table>
            </div>
            <div class="modal-footer" >
                <table  style="width: 100%;text-align: center;">
                    <tr>
                        <td>Employee Name: &nbsp;{{this.name}}</td>
                        <td>Branch Name : &nbsp;{{this.branch}}</td>
                     </tr>
                     <tr><td colspan="3"><button type="button" class="btn btn-outline-primary" style="border-radius:40px;height: 44px; margin-top: 12px;" data-dismiss="modal"  id="bounce-detail-0052">Back</button></td></tr>
                </table>
            </div>
             
        </div>   
        
    </div>
     </div> -->