<div class="p-4">
    <!-- class="table-newcontainer" -->
    <!-- style="background-color: #F6F6F6;" -->
    <!-- height:92vh;overflow:auto" (scroll)="listenScroll($event)" -->
    <!-- <mat-card style="margin:20px 12px 20px 20px;" class="mat-elevation-z0"> -->
    <!-- <nav>
        <div class="nav nav-tabs" style="margin-top: 20px;">
            <span class="nav-item nav-link" data-toggle="tab" (click)="ECFAPSubModule(sub)" role="tab"
                *ngFor="let sub of ECF_Sub_Menu_List">
                {{sub.name}}
            </span>
        </div>
    </nav> -->
    <div class="nav-container mb-2">
        <button class="scroll-button left" (click)="scrollLeft()">
            <mat-icon>arrow_left</mat-icon>
        </button>
        <nav class="nav-tabs" #navTabs>
            <p class="nav-item nav-link" [ngClass]="{ active: sub.active }" (click)="setActiveTab(sub)" role="tab"
                *ngFor="let sub of ECF_Sub_Menu_List">
                {{ sub.name }}
            </p>
        </nav>
        <button class="scroll-button right" (click)="scrollRight()">
            <mat-icon>arrow_right</mat-icon>
        </button>
    </div>

    <div *ngIf="ecfsummaryForm">
        <!-- <form [formGroup]="ecfradioForm">
    <mat-radio-group formControlName="type" class="ecfap">
        <mat-radio-button *ngFor="let n of typelist" [value]="n.id"style="margin-left: 3%;margin-top: 10px" 
       (click)="getradio(n)"> {{n.name}} </mat-radio-button>
    </mat-radio-group>
    </form> -->

      <div *ngIf="ecfsummarytype == 1">
            <!-- <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;"> -->

            <form [formGroup]="ecfSearchForm">
                <!-- <tr>
                    <td style="width: 300px;">
                        <h3>
                            ECF Inventory
                        </h3>
                    </td> -->
                   
                    <!-- <td style="width: 900px;">
                        <div style="margin-left: 400px;">
                            <mat-radio-group formControlName="type" class="ecfap">
                                <mat-radio-button *ngFor="let n of typelist" [value]="n.id"
                                    style="margin-left: 3%;margin-top: 10px" (click)="getradio(n.id)"> {{n.name}}
                                </mat-radio-button>
                            </mat-radio-group> -->
                            <!-- <mat-slide-toggle  formControlName="type" (change)="getradio(1)" matTooltip="Slide here for Batch Wise"
                matTooltipClass="custom-tooltipnew" color="primary">
                    ECF Wise
                </mat-slide-toggle>  -->
                        <!-- </div>
                    </td> -->
                <!-- </tr> -->

                <!-- <div class="search-auto-fit"> -->

                           <div class="ecf-summary-header">
                                 <h3 class="summary-title">ECF Inventory Summary</h3>

                            <div class="summary-actions">
                                      <button class="circle-icon-btn-md" matTooltip="Reset" (click)="overallreset()">
                                    <mat-icon aria-hidden="true">refresh</mat-icon>
                                    </button>
  
                                    <button class="circle-icon-btn-md" matTooltip="Report Download" [disabled]="create_btn_disable" (click)="downloadpopupinventory()">
                                      <mat-icon aria-hidden="true">download</mat-icon>
                                     </button>

                                      <button class="circle-icon-btn-md" matTooltip="Create ECF" [disabled]="create_btn_disable" (click)="showadd()">
                                      <mat-icon aria-hidden="true">add</mat-icon>
                                     </button>
                        
                              </div>
                                </div>
                    <!-- <lib-vs-search-cmp id="matInput-size" [SearchArr]="ecfsearch" Tooltip="true"
                        (dataoutput)="ecfwisesearch($event)" [ButtonArr]="templatebutton">
                    </lib-vs-search-cmp>

                    <table>
                        <div *ngIf="expand_invent" class="cus-filterSearchContainers">
                            <div class="cus-filterSearch">
                                <lib-vs-optiondd-cmp  id="matInput-size" [InputFields]="ecfstatuss"
                                [formGroup]="ecfSearchForm"></lib-vs-optiondd-cmp>
                                <lib-vs-dynamicform-cmp id="matInput-size" [InputFields]="branchs"
                                    [formGroup]="ecfSearchForm"></lib-vs-dynamicform-cmp>
                                <lib-vs-dynamicform-cmp id="matInput-size" [InputFields]="commodity"
                                    [formGroup]="ecfSearchForm"></lib-vs-dynamicform-cmp>
                                <div class="cus-filterSearch-btnDiv">
                                    <button class="btn btn-outline-danger" style="border-radius:40px" color="primary"
                                        (click)=" ecf_inventory_reset()">
                                        Reset
                                    </button>
                                    <div class="btn-align">
                                        <button class="btn btn-outline-success" style="border-radius:40px" type="submit"
                                            (click)=" summarysearch($event)" color="primary">
                                            Apply
                                        </button>
                                        <button class="btn btn-outline-primary" style="border-radius:40px"
                                            (click)=" ecf_inventory_close()">
                                            Cancel
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </table> -->
                <!-- </div> -->


                <!-- <table>
                        <tr>
                            <td>
                                <mat-form-field style="margin-left: 10px;width:150px;">
                                    <input class="toolbar-search" type="text" matInput autocomplete="off"
                                        formControlName="crno" id="ecfap-0018">
                                    <mat-placeholder>CR NO</mat-placeholder>
                                </mat-form-field>
                            </td>
                            <td>
                                <button type="button" class="btn btn-outline-primary" matTooltip="Select Supplier"
                                    matTooltipClass="custom-tooltipnew"
                                    style="border-radius:40px;" id="ecfap-0019"><i class="fa fa-arrow-up"></i> -->
                <!-- data-toggle="modal" data-target="#ecfap-0016" -->
                <!-- </button>
                                <mat-form-field style="margin-left: 5px;width:150px; ">

                                    <mat-label>Supplier Name</mat-label>
                                    <input #supplierInput placeholder="Choose Supplier" matInput
                                        formControlName="supplier_id" [matAutocomplete]="supp" readonly id="ecfap-0020">
                                    <mat-autocomplete [panelWidth]="400" #supp="matAutocomplete"
                                        [displayWith]="displayFnSupplier">
                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                        <ng-container *ngIf="!isLoading">
                                            <mat-option *ngFor="let supplier of supplierList" [value]="supplier"
                                                matTooltip="{{supplier.name}} - {{supplier.code}}"
                                                matTooltipClass="custom-tooltipnew">{{supplier.name}} -
                                                {{supplier.code}}
                                            </mat-option>
                                        </ng-container>
                                    </mat-autocomplete>

                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field style="margin-left: 10px;width:150px;">
                                    <input class="toolbar-search" type="text" matInput autocomplete="off"
                                        formControlName="invoice_no" id="ecfap-0021">
                                    <mat-placeholder>Invoice No</mat-placeholder>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field style="margin-left: 10px;width:150px;">
                                    <mat-label>ECF Type</mat-label>
                                    <mat-select formControlName="aptype" id="ecfap-0022">
                                        <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                            {{type.text}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </td>

                            <td>

                                <mat-form-field style="margin-left: 10px;width:150px;">
                                    <mat-label>ECF Status</mat-label>
                                    <mat-select formControlName="ecfstatus" id="ecfap-0023">
                                        <mat-option *ngFor="let status of StatusList" [value]="status.id">
                                            {{status.text}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </td> -->
                <!-- <td>
                    <mat-form-field style="margin-left: 10px;width:150px;">
                        <input  class="toolbar-search"  type="text" matInput autocomplete="off"  formControlName="minamt"
                        (keypress)="numberOnlyandDot($event)" style="text-align: right;" id="ecfap-0024">
                        <mat-placeholder>Min Amount</mat-placeholder>
                    </mat-form-field>
                </td>
               
                <td>
                 
                    <mat-form-field style="margin-left: 10px;width:150px;">
                        <input  class="toolbar-search" type="text" matInput autocomplete="off"  formControlName="maxamt"
                        (keypress)="numberOnlyandDot($event)" style="text-align:right" id="ecfap-0025">
                        <mat-placeholder>Max Amount</mat-placeholder>
                    </mat-form-field>
                </td> -->

                <!-- </tr>
                        <tr> -->
                <!-- <td style="width:120px;">
                <mat-form-field style="margin-left: 10px;width:110px;">
                    <input class="toolbar-search" type="text" matInput autocomplete="off" formControlName="batchno" id="ecfap-0026">
                    <mat-placeholder>Batch No</mat-placeholder>
                </mat-form-field>
              
            </td> -->


                <!-- <td>
                                <mat-form-field style="margin-left: 10px;width:150px; " (click)="getSearchbranch()">

                                    <input #raiserbrInput matInput formControlName="branch"
                                        [matAutocomplete]="matraiserAutocomplete" placeholder="Branch" id="ecfap-0027">
                                    <mat-autocomplete [panelWidth]="250" #matraiserAutocomplete="matAutocomplete"
                                        [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                        <ng-container *ngIf="!isLoading">
                                            <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                                matTooltip="{{branch.code}}-{{branch.name}}"
                                                matTooltipClass="custom-tooltipnew">
                                                {{branch.code}}-{{branch.name}}
                                            </mat-option>
                                        </ng-container>
                                    </mat-autocomplete>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field style="margin-left: 45px;width:150px;" (click)="getcommodityECFSumm()">

                                    <input #commodityInput placeholder="Commodity Name" matInput
                                        formControlName="commodity_id" [matAutocomplete]="commoditytype"
                                        [matTooltip]="ecfSearchForm.value.commodity_id.name"
                                        matTooltipClass="custom-tooltipnew" id="ecfap-0028"> -->
                <!-- <mat-icon matSuffix class="maticonsize">unfold_more</mat-icon> -->
                <!-- <mat-autocomplete [panelWidth]="300" #commoditytype="matAutocomplete"
                                        [displayWith]="displayFncommodity" (opened)="commodityScroll()">
                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                        <ng-container *ngIf="!isLoading">
                                            <mat-option *ngFor="let commodity of commodityList" [value]="commodity"
                                                matTooltip="{{commodity.name}}" matTooltipClass="custom-tooltipnew">
                                                {{commodity.name}}
                                            </mat-option>
                                        </ng-container>
                                    </mat-autocomplete>
                                </mat-form-field>
                            </td>
                            <td></td>
                            <td colspan="2" style="text-align: right;"> -->
                <!-- <button *ngIf="!expand_invent" type="button" matTooltip="Show More" matTooltipClass="custom-tooltipnew" class="btn btn-outline-primary"
                style="border-radius:30px;margin-left: 10px;"
                (click)="expand_invent = true;" id="ecfap-0029"><mat-icon style="margin-top: 0px;margin-bottom: 0px;">keyboard_arrow_down</mat-icon> More</button>
                <button *ngIf="expand_invent" type="button" matTooltip="Show Less" matTooltipClass="custom-tooltipnew" class="btn btn-outline-primary"
                style="border-radius:40px;margin-left: 10px;"
                (click)="expand_invent = false;" id="ecfap-0030"><mat-icon>keyboard_arrow_up</mat-icon> Less</button> -->
                <!-- <button class="btn btn-outline-primary" type="submit"
                    style="border-radius:40px;margin-left: 10px;" color="primary"
                    (click)="summarysearch()" id="ecfap-0031"><i matTooltip="Search"  matTooltipClass="custom-tooltipnew"
                    class="fa fa-search"
                        aria-hidden="true"></i></button> -->
                <!-- <button class="btn btn-outline-primary" type="button"
                                    style="border-radius:40px;margin-left: 10px;" color="primary"
                                    (click)="Resetecfinventory()" id="ecfap-0032">Reset</button>
                                <button class="btn btn-outline-primary" type="button"
                                    style="border-radius:40px;margin-left: 10px;" color="primary"
                                    (click)="getRptDownload(1)" id="ecfap-0033">Report Download</button>
                            </td>
                        </tr> -->
                <!-- <tr *ngIf="expand_invent">
            <td style="width:120px;">
                <mat-form-field style="margin-left: 10px;width:110px;">
                    <mat-label>Transaction From</mat-label>
                    <input matInput [matDatepicker]="picker" formControlName="start_date" autocomplete="off" id="ecfap-0034">
                    <mat-datepicker-toggle matSuffix [for]="picker">
                        <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                    </mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
            </td>
            <td>
                <mat-form-field style="margin-left: 35px;width:150px;">
                    <mat-label>Transaction To</mat-label>
                    <input matInput [matDatepicker]="picker1" formControlName="end_date" autocomplete="off" id="ecfap-0035">
                    <mat-datepicker-toggle matSuffix [for]="picker1">
                        <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                    </mat-datepicker-toggle>
                    <mat-datepicker #picker1></mat-datepicker>
                </mat-form-field>
            </td>

            </tr>
         -->
                <!-- </table> -->
            </form>


            <!-- </div> -->
            <!-- <tr> -->
            <!-- <td> -->
            <!-- <div style="display: flex; gap: 10px; margin-bottom:20px"> -->
                <!-- <h3 style="margin-top:5px;">
                    ECF Inventory Summary
                </h3> -->
                <!-- <button type="button" class="btn btn-outline-success" style="border-radius:40px;" (click)="showadd()"
                    id="ecfap-0036"><i class="fa fa-plus"></i> &nbsp;&nbsp;Create ECF</button>
            </div> -->
            <!-- </td> -->
            <!-- <td> -->
            <!-- <div>
            <button type="button" class="btn btn-outline-success"
            style="border-radius:40px;margin-left:20px;margin-bottom:15px" (click)="showadd()" id="ecfap-0036"><i
                class="fa fa-plus"></i> &nbsp;&nbsp;Create ECF</button>
        </div> -->
            <!-- <td> 
        <button class="btn btn-outline-success" type="button"
        style="border-radius:40px;margin-left: 15px;" color="primary"
        data-toggle="modal" data-target="#approvedetails" (click)="checkbatch()" id="ecfap-0037">Create Batch
    </button>
    </td> -->
            <!-- </td> -->
            <!-- </tr> -->
            <lib-vs-cbox-summary [SummaryDetails]="Summaryecfwisedata" [SummaryApiObj]="SummaryApiecfwiseObjNew"
                [FirstLastbtn]="true" #cboxSummary (dataEvent)="ecfinventorysummarydata($event)"></lib-vs-cbox-summary>


            <!-- <div class="table-responsive" id="ecfap-0001" style="width:100%;margin-top: -1%;"> -->
            <!-- <table class="table scrolltable table-bordered"  style="text-align:center;" >	        
                        <thead fixed-header>
                         <tr class="table_header " fixed-header> -->
            <!-- <div class="table-responsive" style="height:400px;
                        width:100%;
                        overflow:auto;">
                            <table class="table table-bordered scrolltable" fixed-header>
                              <thead class="table_header" style="text-align: left;"> -->

            <!-- <tr  class="table_header " fixed-header> -->


            <!-- <th style="width: 50px;">S.No</th>
                            <th>ECF Type</th>
                            <th>CR NO</th>
                            <th>Batch No</th>
                            <th>Supplier</th>
                            <th>Commodity Name</th>
                            <th>Branch</th>
                            <th>ECF Date</th> -->
            <!-- <th>Invoice No</th> -->
            <!-- <th>ECF Amount</th> -->
            <!-- <th>ECF Raiser</th>
                            <th>Supplier Name</th>
                            <th>Approver Name</th> -->
            <!-- <th style="width: 200px;">ECF Status</th> -->
            <!-- <th>AP Status</th> -->
            <!-- <th>Payment Status</th> -->
            <!-- <th>Payment For</th> -->
            <!-- <th>UTR Number</th>
                            <th>Payment Date</th> -->
            <!-- <th style="width: 200px;" colspan="6">Action</th>
                        </tr>
                    </thead> -->

            <!-- <tbody> -->
            <!-- <tr *ngFor="let list of ecf_summary_data; index as i" style="text-align: center;">
                            <td style="width: 50px;"> {{(ecfpresentpage - 1)*pagesizeecf +i+1 }} </td>
                            <td *ngIf="list?.aptype_id != 8" style="white-space: nowrap;">{{list?.aptype}}</td>
                            <td *ngIf="list?.aptype_id == 8" style="white-space: nowrap;">TCF</td>
                            <td *ngIf="list?.crno!=null">{{list?.crno}}</td>
                            <td *ngIf="list?.crno === null">-</td>
                            <td *ngIf="list?.batch_no != undefined && list?.batch_no != null && list?.batch_no != ''">{{list?.batch_no}}</td>
                            <td *ngIf="list?.batch_no == undefined || list?.batch_no == null || list?.batch_no == ''">-</td>
                            <td>
                                <div style="width: 200px;overflow: hidden" matTooltip="{{list?.supplier_data?.name}} - {{list?.supplier_data?.code}}" matTooltipClass="custom-tooltipnew">
                                    {{list?.supplier_data?.name}} - {{list?.supplier_data?.code}}
                                </div>
                            </td>
                            <td>{{list?.commodity_id?.name}}</td>
                            <td>{{list?.branch[0]?.name}}-{{list?.branch[0]?.code}}</td>
                           <td style="white-space: nowrap;"> {{ (list?.apdate !== "None") ? (list?.apdate | date:'dd-MMM-yyyy') : "-" }}</td> -->

            <!-- <td *ngIf="list?.invoiceheader != undefined && list?.invoiceheader != null ">{{list.invoiceheader.invoiceno}}</td>
                            <td *ngIf="list?.invoiceheader == undefined && list?.invoiceheader == null">-</td> -->


            <!-- <td style="text-align: right;">{{list?.apamount|currency:'INR'}}</td> -->
            <!-- <td *ngIf="list?.raisername != null">{{list?.raisername}}</td>
                            <td *ngIf="list?.raisername == null">-</td>
                            <td *ngIf="list?.invoiceheader?.supplier_id != null">{{list?.invoiceheader?.supplier_id?.name}}</td>
                            <td *ngIf="list?.invoiceheader?.supplier_id == null">-</td>
                            <td *ngIf="list?.approvername != null">{{list?.approvername}}</td>
                            <td *ngIf="list?.approvername == null">-</td> -->
            <!-- <td style="width: 200px;">{{list?.ecfstatus?.text}}</td> -->
            <!-- <td *ngIf="list?.apstatus != null">{{list?.apstatus?.text}}</td> -->
            <!-- <td *ngIf="list?.apstatus == null">-</td> -->
            <!-- <td *ngIf ="list?.apstatus != 'PENDING_FOR_APPROVAL' && list.apstatus_id != 5" >{{ list?.apstatus }}</td>
                            <td *ngIf ="list?.apstatus == 'PENDING_FOR_APPROVAL'">PENDING FOR APPROVAL</td>
                            <td *ngIf="list?.apstatus_id == 5">PENDING FOR APPROVAL MODIFICATION</td> -->
            <!-- <td *ngIf="list?.ap_status != null">{{list?.ap_status}}</td>
                            <td *ngIf="list?.ap_status == null">-</td>
                            <td *ngIf="list?.ap_status == 'PAID'">
                                <span matTooltip="view Payment Details" class=" fa fa-eye create " style="color: green;cursor: pointer;"
                               (click)="getpaystatus(list?.crno)" data-toggle="modal"  data-target="#showpaymentdetails"></span>
                            </td>
                            <td *ngIf="list?.ap_status != 'PAID'">-</td> -->
            <!-- <td *ngIf="list?.aptype_id != 3 && list?.aptype_id != 4 && list?.aptype_id != 13">SUPPLIER</td>
                            <td *ngIf="list?.aptype_id == 3 || list?.aptype_id == 13">{{list?.payto}}</td>
                            <td *ngIf="list?.aptype_id== 4">{{list?.ppx}}</td> -->

            <!-- <td> {{ (list?.invoiceheader?.utrno != null) ? list?.invoiceheader?.utrno : "-" }}</td>
                            <td> {{ (list?.invoiceheader?.paymentdate !== "None") ? (list?.invoiceheader?.paymentdate | date: 'dd/MM/yyyy') : "-" }}</td> -->

            <!-- <td style="width : 300px;">
                                <div style="width : 300px">
                                    <tr> -->
            <!-- <td style="width: 20px;">
                                 <i matTooltip="View"  matTooltipClass="custom-tooltipnew" class=" fa fa-eye create "
                                    style="color: green;cursor: pointer;padding:10px;margin-top: 10px;" (click)="showview(list)"></i>
                                </td>
                                <td style="width: 20px;" *ngIf="list?.ecfstatus?.text == 'DRAFT' || list?.ecfstatus?.text == 'READY FOR BATCH' || list?.ecfstatus?.text == 'RETURNED'
                                || list?.ecfstatus?.text == 'PENDING IN ECF APPROVAL'">
                                <button mat-icon-button matTooltip=" Edit" matTooltipClass="custom-tooltipnew" class="iconbutton" color="primary" style ="margin-top: 10px;"
                                (click)="showedit(list)"  id="ecfap-0038">
                                <mat-icon style="color: green;" aria-label="Edit">edit</mat-icon>
                                </button>
                                </td>
                                <td style="width: 20px;" *ngIf="list?.ecfstatus?.text != 'DRAFT' && list?.ecfstatus?.text != 'READY FOR BATCH' 
                                && list?.ecfstatus?.text != 'RETURNED' && list?.ecfstatus?.text != 'PENDING IN ECF APPROVAL'">
                                    <button mat-icon-button class="iconbutton" color="primary" style ="margin-top: 10px;"
                                     id="ecfap-0039">
                                    <mat-icon style="color: grey;" aria-label="Edit">edit</mat-icon>
                                    </button>
                                    </td>
                                <td style="width: 20px;" *ngIf="list?.ecfstatus?.text == 'ECF APPROVED'" >
                                    <button type="button" class="btn btn-outline-success"
                                    (click)="coverNotedownloads(list.id,list.ecftype_id)"
                                    style="border-radius: 40px;margin-left: 5px;;margin-top: 15px" >
                                    <i class="fa fa-download" matTooltip="Download CoverNote" matTooltipClass="custom-tooltipnew">
                                    </i>
                                    </button>
                                    </td>
                                <td style="width: 20px;"  *ngIf="list?.ecfstatus?.text!== 'ECF APPROVED'">
                                <button type="button" class="btn btn-outline-success" disabled
                                style="border-radius: 40px;margin-left: 5px;;margin-top: 15px"  id="ecfap-0040">
                                <i class="fa fa-download" matTooltip="Download CoverNote" matTooltipClass="custom-tooltipnew">
                                </i>
                                </button>
                                </td> -->
            <!-- <td  *ngIf="list?.apstatus != 'ECF APPROVED'">-</td> -->
            <!-- <ng-template #shownext>-</ng-template> -->
            <!-- <td style="width: 20px;" *ngIf="list?.ecfstatus?.text =='READY FOR BATCH'">
                                    <section class="example-section" style ="margin-top:    25px;">
                                        <mat-checkbox matTooltip="Select" matTooltipClass="custom-tooltipnew" 
                                        (change)="onselectionchange($event,list)" [checked]="list?.select" style="margin-left: 5px;margin-right: 5px;margin-bottom: 15px"
                                        [disabled]="((commcheck=='' || commcheck==null || ecftypecheck == ''||ecftypecheck == null )&& list.batch_no == null)  ? false:(list.commodity_id.id == commcheck && list.aptype_id == ecftypecheck && list.batch_no == null?false:true)">
                                        </mat-checkbox>
                                    </section>
                                </td>
                                <td style="width: 20px;" *ngIf="list?.ecfstatus?.text !='READY FOR BATCH'">
                                    <section class="example-section" style ="margin-top:    25px;">
                                        <mat-checkbox matTooltip="Select" matTooltipClass="custom-tooltipnew" 
                                        (change)="onselectionchange($event,list)" [checked]="list?.select" style="margin-left: 5px;margin-right: 5px;margin-bottom: 15px"
                                        disabled>
                                        </mat-checkbox>
                                    </section>
                                </td>
                                <td style="width: 60px;" *ngIf="list?.ecfstatus?.text == 'DRAFT' || list?.ecfstatus?.text == 'READY FOR BATCH' || list?.ecfstatus?.text == 'PENDING IN ECF APPROVAL' || list?.ecfstatus?.text == 'RETURNED'">
                                <button mat-icon-button type="button" matTooltip="InActive" matTooltipClass="custom-tooltipnew"
                                  style="margin-left: 3px;;margin-top: 10px" id="ecfap-0041">                    
                                    <mat-icon  style="color: green;" (click)="delete(list.id)" >wb_sunny</mat-icon>
                                </button>
                              </td>
                              <td style="width: 60px;" *ngIf="list?.ecfstatus?.text != 'DRAFT' && list?.ecfstatus?.text != 'READY FOR BATCH' && list?.ecfstatus?.text != 'PENDING IN ECF APPROVAL' && list?.ecfstatus?.text != 'RETURNED'">
                                <button mat-icon-button type="button"  style="margin-left: 3px;;margin-top: 10px" id="ecfap-0042">                    
                                    <mat-icon  style="color: grey;" >wb_sunny</mat-icon>
                                </button>
                              </td> -->
            <!-- <td> -->
            <!-- *ngIf="invoicestatus == 'INVOICE COMPLETED' || invoicestatus == 'INVOICE APPROVED' 
                                || invoicestatus == 'PENDING IN ECF APPROVAL' " -->
            <!-- <button mat-fab matTooltip="Create Template" matTooltipClass="custom-tooltipnew" *ngIf="list.aptype_id !=4"
                                  style="font-size:smaller;background-color: white;"
                                   id="ecfap-0285"
                                  (click)="createTemp(list)"> -->
            <!-- data-toggle="modal" data-target="#ecfap-0284" -->
            <!-- <i class="fa fa-plus"> </i>
                                  </button>
                              </td> -->
            <!-- </tr>
                                </div>                
                            </td> -->


            <!-- </tr>
                    </tbody>
                    </table> -->

            <!-- <div *ngIf="ecf_summary_data ?.length == 0" style="margin-left: 42%;">
                        <h3 >Sorry data not found!.. </h3>
                    </div> -->
            <!-- </div> -->

            <!-- <div class="row" *ngIf="issummarypage" style="width: 85%;"> -->
            <!-- <div  class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
                        <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -190px;">
                            Total Count:{{gettotalcount}}
                        </p> 
                    </div> -->

            <!-- <div  class="col-sm-9" style="margin-bottom: 5%;margin-top: 0px;font-size: small;text-align: right;left: 40%;"> -->

            <!-- <button mat-icon-button [disabled]="has_pageprevious === false" color="primary" (click)="previousClickPayment()" id="ecfap-0043">
                            <mat-icon>arrow_back</mat-icon>
                        </button> {{ecfpresentpage}}
                        <button mat-icon-button [disabled]="has_pagenext === false" color="primary" (click)="nextClickPayment()" id="ecfap-0044">
                            <mat-icon>arrow_forward</mat-icon>
                        </button> -->


            <!-- <mat-paginator  style="margin-top: 0%;"
                                                    (page)="handlePageEvent($event)"
                                                    [length]="length_ecf"
                                                    [pageSize]="pageSize_ecf"
                                                    [showFirstLastButtons]="showFirstLastButtons"
                                                    [pageSizeOptions]="pageSizeOptions"
                                                    [pageIndex]="pageIndexECF"
                                                    [hidePageSize]="true"
                                                    aria-label="Select page"> -->
            <!-- <ng-template matPaginatorIntl let-paginator>
                                                        <div class="mat-paginator-range-label">
                                                          {{ ecfpresentpage }}
                                                        </div>
                                                      </ng-template> -->

            <!-- <ng-template matPaginatorIntl let-paginator>
                                                        <div class="mat-paginator-range-label">
                                                          Showing page {{ pageIndex + 1 }} containing {{ pageSize_ecf }} records
                                                        </div>
                                                        <div class="mat-paginator-range-actions">
                                                          <button
                                                            mat-icon-button
                                                            [disabled]="!paginator.hasPreviousPage()"
                                                            (click)="paginator.previousPage()"
                                                            matTooltip="Previous Page"
                                                           id="ecfap-0045">
                                                            <mat-icon>navigate_before</mat-icon>
                                                          </button>
                                                          <button
                                                            mat-icon-button
                                                            [disabled]="!paginator.hasNextPage()"
                                                            (click)="paginator.nextPage()"
                                                            matTooltip="Next Page"
                                                           id="ecfap-0046">
                                                            <mat-icon>navigate_next</mat-icon>
                                                          </button>
                                                        </div>
                                                      </ng-template> -->

            <!-- </mat-paginator> -->

            <!-- </div> -->

            <!-- <div class="col-sm-3" style="margin-bottom: 0%;font-size: small;text-align: right;margin-top: 18px;left: -12%;font-weight:bold">
                        Page: {{ecfpresentpage}}
                    </div> -->

            <!-- </div> -->
            <!-- <table class="table table-bordered" fixed-header >
                        <thead class="table_header" style="text-align: center;">
                            <tr> -->
            <!-- <div class="table-responsive" style="height:400px;
        width:100%;
        overflow:auto;">
            <table class="table table-bordered scrolltable" fixed-header>
              <thead class="table_header" style="text-align: left;"> -->

            <!-- <tr  class="table_header " fixed-header> -->


            <!-- <th style="width: 50px;">S.No</th>
                                <th>ECF Type</th>
                                <th>CR NO</th>
                                <th>Batch No</th>
                                <th>Supplier</th>
                                <th>Commodity Name</th>
                                <th>Branch</th>
                                <th>ECF Date</th> -->
            <!-- <th>Invoice No</th> -->
            <!-- <th>ECF Amount</th> -->
            <!-- <th>ECF Raiser</th>
            <th>Supplier Name</th>
            <th>Approver Name</th> -->
            <!-- <th style="width: 200px;">ECF Status</th> -->
            <!-- <th>AP Status</th> -->
            <!-- <th>Payment Status</th> -->
            <!-- <th>Payment For</th> -->
            <!-- <th>UTR Number</th>
            <th>Payment Date</th> -->
            <!-- <th style="width: 200px;" colspan="6">Action</th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr *ngFor="let list of ecf_summary_data; index as i" style="text-align: center;">
                                <td style="width: 50px;"> {{(ecfpresentpage - 1)*pagesizeecf +i+1 }} </td>
                                <td *ngIf="list?.aptype_id != 8" style="white-space: nowrap;">{{list?.aptype}}</td>
                                <td *ngIf="list?.aptype_id == 8" style="white-space: nowrap;">TCF</td>
                                <td *ngIf="list?.crno!=null">{{list?.crno}}</td>
                                <td *ngIf="list?.crno === null">-</td>
                                <td
                                    *ngIf="list?.batch_no != undefined && list?.batch_no != null && list?.batch_no != ''">
                                    {{list?.batch_no}}</td>
                                <td
                                    *ngIf="list?.batch_no == undefined || list?.batch_no == null || list?.batch_no == ''">
                                    -</td>
                                <td>
                                    <div style="width: 200px;overflow: hidden"
                                        matTooltip="{{list?.supplier_data?.name}} - {{list?.supplier_data?.code}}"
                                        matTooltipClass="custom-tooltipnew">
                                        {{list?.supplier_data?.name}} - {{list?.supplier_data?.code}}
                                    </div>
                                </td>
                                <td>{{list?.commodity_id?.name}}</td>
                                <td>{{list?.branch[0]?.name}}-{{list?.branch[0]?.code}}</td>
                                <td style="white-space: nowrap;"> {{ (list?.apdate !== "None") ? (list?.apdate |
                                    date:'dd-MMM-yyyy') : "-" }}</td> -->

            <!-- <td *ngIf="list?.invoiceheader != undefined && list?.invoiceheader != null ">{{list.invoiceheader.invoiceno}}</td>
            <td *ngIf="list?.invoiceheader == undefined && list?.invoiceheader == null">-</td> -->


            <!-- <td style="text-align: right;">{{list?.apamount|currency:'INR'}}</td> -->
            <!-- <td *ngIf="list?.raisername != null">{{list?.raisername}}</td>
            <td *ngIf="list?.raisername == null">-</td>
            <td *ngIf="list?.invoiceheader?.supplier_id != null">{{list?.invoiceheader?.supplier_id?.name}}</td>
            <td *ngIf="list?.invoiceheader?.supplier_id == null">-</td>
            <td *ngIf="list?.approvername != null">{{list?.approvername}}</td>
            <td *ngIf="list?.approvername == null">-</td> -->
            <!-- <td style="width: 200px;">{{list?.ecfstatus?.text}}</td> -->
            <!-- <td *ngIf="list?.apstatus != null">{{list?.apstatus?.text}}</td> -->
            <!-- <td *ngIf="list?.apstatus == null">-</td> -->
            <!-- <td *ngIf ="list?.apstatus != 'PENDING_FOR_APPROVAL' && list.apstatus_id != 5" >{{ list?.apstatus }}</td>
            <td *ngIf ="list?.apstatus == 'PENDING_FOR_APPROVAL'">PENDING FOR APPROVAL</td>
            <td *ngIf="list?.apstatus_id == 5">PENDING FOR APPROVAL MODIFICATION</td> -->
            <!-- <td *ngIf="list?.ap_status != null">{{list?.ap_status}}</td>
            <td *ngIf="list?.ap_status == null">-</td>
            <td *ngIf="list?.ap_status == 'PAID'">
                <span matTooltip="view Payment Details" class=" fa fa-eye create " style="color: green;cursor: pointer;"
               (click)="getpaystatus(list?.crno)" data-toggle="modal"  data-target="#showpaymentdetails"></span>
            </td>
            <td *ngIf="list?.ap_status != 'PAID'">-</td> -->
            <!-- <td *ngIf="list?.aptype_id != 3 && list?.aptype_id != 4 && list?.aptype_id != 13">SUPPLIER</td>
            <td *ngIf="list?.aptype_id == 3 || list?.aptype_id == 13">{{list?.payto}}</td>
            <td *ngIf="list?.aptype_id== 4">{{list?.ppx}}</td> -->

            <!-- <td> {{ (list?.invoiceheader?.utrno != null) ? list?.invoiceheader?.utrno : "-" }}</td>
            <td> {{ (list?.invoiceheader?.paymentdate !== "None") ? (list?.invoiceheader?.paymentdate | date: 'dd/MM/yyyy') : "-" }}</td> -->

            <!-- <td style="width : 300px;">
                <div style="width : 300px">
                    <tr> -->
            <!-- <td style="width: 20px;">
                                    <i matTooltip="View" matTooltipClass="custom-tooltipnew" class=" fa fa-eye create "
                                        style="color: green;cursor: pointer;padding:10px;margin-top: 10px;"
                                        (click)="showview(list)"></i>
                                </td>
                                <td style="width: 20px;" *ngIf="list?.ecfstatus?.text == 'DRAFT' || list?.ecfstatus?.text == 'READY FOR BATCH' || list?.ecfstatus?.text == 'RETURNED'
                                || list?.ecfstatus?.text == 'PENDING IN ECF APPROVAL'">
                                    <button mat-icon-button matTooltip=" Edit" matTooltipClass="custom-tooltipnew"
                                        class="iconbutton" color="primary" style="margin-top: 10px;"
                                        (click)="showedit(list)" id="ecfap-0038">
                                        <mat-icon style="color: green;" aria-label="Edit">edit</mat-icon>
                                    </button>
                                </td>
                                <td style="width: 20px;" *ngIf="list?.ecfstatus?.text != 'DRAFT' && list?.ecfstatus?.text != 'READY FOR BATCH' 
                                && list?.ecfstatus?.text != 'RETURNED' && list?.ecfstatus?.text != 'PENDING IN ECF APPROVAL'">
                                    <button mat-icon-button class="iconbutton" color="primary" style="margin-top: 10px;"
                                        id="ecfap-0039">
                                        <mat-icon style="color: grey;" aria-label="Edit">edit</mat-icon>
                                    </button>
                                </td>
                                <td style="width: 20px;" *ngIf="list?.ecfstatus?.text == 'ECF APPROVED'">
                                    <button type="button" class="btn btn-outline-success"
                                    (click)="coverNotedownload(list.id,list.ecftype_id)"
                                        style="border-radius: 40px;margin-left: 5px;;margin-top: 15px">
                                        <i class="fa fa-download" matTooltip="Download CoverNote"
                                            matTooltipClass="custom-tooltipnew">
                                        </i>
                                    </button>
                                </td>
                                <td style="width: 20px;" *ngIf="list?.ecfstatus?.text!== 'ECF APPROVED'">
                                    <button type="button" class="btn btn-outline-success" disabled
                                        style="border-radius: 40px;margin-left: 5px;;margin-top: 15px" id="ecfap-0040">
                                        <i class="fa fa-download" matTooltip="Download CoverNote"
                                            matTooltipClass="custom-tooltipnew">
                                        </i>
                                    </button>
                                </td> -->
            <!-- <td  *ngIf="list?.apstatus != 'ECF APPROVED'">-</td> -->
            <!-- <ng-template #shownext>-</ng-template> -->
            <!-- <td style="width: 20px;" *ngIf="list?.ecfstatus?.text =='READY FOR BATCH'">
                                    <section class="example-section" style="margin-top:    25px;">
                                        <mat-checkbox matTooltip="Select" matTooltipClass="custom-tooltipnew"
                                            (change)="onselectionchange($event,list)" [checked]="list?.select"
                                            style="margin-left: 5px;margin-right: 5px;margin-bottom: 15px"
                                            [disabled]="((commcheck=='' || commcheck==null || ecftypecheck == ''||ecftypecheck == null )&& list.batch_no == null)  ? false:(list.commodity_id.id == commcheck && list.aptype_id == ecftypecheck && list.batch_no == null?false:true)">
                                        </mat-checkbox>
                                    </section>
                                </td>
                                <td style="width: 20px;" *ngIf="list?.ecfstatus?.text !='READY FOR BATCH'">
                                    <section class="example-section" style="margin-top:    25px;">
                                        <mat-checkbox matTooltip="Select" matTooltipClass="custom-tooltipnew"
                                            (change)="onselectionchange($event,list)" [checked]="list?.select"
                                            style="margin-left: 5px;margin-right: 5px;margin-bottom: 15px" disabled>
                                        </mat-checkbox>
                                    </section>
                                </td>
                                <td style="width: 60px;"
                                    *ngIf="list?.ecfstatus?.text == 'DRAFT' || list?.ecfstatus?.text == 'READY FOR BATCH' || list?.ecfstatus?.text == 'PENDING IN ECF APPROVAL' || list?.ecfstatus?.text == 'RETURNED'">
                                    <button mat-icon-button type="button" matTooltip="InActive"
                                        matTooltipClass="custom-tooltipnew" style="margin-left: 3px;;margin-top: 10px"
                                        id="ecfap-0041">
                                        <mat-icon style="color: green;" (click)="delete(list.id)">wb_sunny</mat-icon>
                                    </button>
                                </td>
                                <td style="width: 60px;"
                                    *ngIf="list?.ecfstatus?.text != 'DRAFT' && list?.ecfstatus?.text != 'READY FOR BATCH' && list?.ecfstatus?.text != 'PENDING IN ECF APPROVAL' && list?.ecfstatus?.text != 'RETURNED'">
                                    <button mat-icon-button type="button" style="margin-left: 3px;;margin-top: 10px"
                                        id="ecfap-0042">
                                        <mat-icon style="color: grey;">wb_sunny</mat-icon>
                                    </button>
                                </td> -->

            <!-- <td> -->
            <!-- *ngIf="invoicestatus == 'INVOICE COMPLETED' || invoicestatus == 'INVOICE APPROVED' 
                                    || invoicestatus == 'PENDING IN ECF APPROVAL' " -->
            <!-- <button mat-fab matTooltip="Create Template" matTooltipClass="custom-tooltipnew" *ngIf="list.aptype_id !=4"
                                      style="font-size:smaller;background-color: white;"
                                       id="ecfap-0285"
                                      (click)="getEcfData(list)"> -->
            <!-- data-toggle="modal" data-target="#create-ecf-0152" -->
            <!-- <i class="fa fa-plus"> </i>
                                      </button>
                                </td> -->
            <!-- </tr>
                </div>                
            </td> -->


            <!-- </tr>
                        </tbody>
                    </table>

                    <div *ngIf="ecf_summary_data ?.length == 0" style="margin-left: 42%;">
                        <h3>Sorry data not found!.. </h3>
                    </div>
                </div> -->

            <!-- <div class="row" *ngIf="issummarypage" style="width: 85%;"> -->
            <!-- <div  class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
    <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -190px;">
        Total Count:{{gettotalcount}}
    </p> 
</div> -->

            <!-- <div class="col-sm-9"
                        style="margin-bottom: 5%;margin-top: 0px;font-size: small;text-align: right;left: 40%;"> -->

            <!-- <button mat-icon-button [disabled]="has_pageprevious === false" color="primary" (click)="previousClickPayment()" id="ecfap-0043">
        <mat-icon>arrow_back</mat-icon>
    </button> {{ecfpresentpage}}
    <button mat-icon-button [disabled]="has_pagenext === false" color="primary" (click)="nextClickPayment()" id="ecfap-0044">
        <mat-icon>arrow_forward</mat-icon>
    </button> -->


            <!-- <mat-paginator style="margin-top: 0%;" (page)="handlePageEvent($event)" [length]="length_ecf"
                            [pageSize]="pageSize_ecf" [showFirstLastButtons]="showFirstLastButtons"
                            [pageSizeOptions]="pageSizeOptions" [pageIndex]="pageIndexECF" [hidePageSize]="true"
                            aria-label="Select page"> -->
            <!-- <ng-template matPaginatorIntl let-paginator>
                                    <div class="mat-paginator-range-label">
                                      {{ ecfpresentpage }}
                                    </div>
                                  </ng-template> -->

            <!-- <ng-template matPaginatorIntl let-paginator>
                                    <div class="mat-paginator-range-label">
                                      Showing page {{ pageIndex + 1 }} containing {{ pageSize_ecf }} records
                                    </div>
                                    <div class="mat-paginator-range-actions">
                                      <button
                                        mat-icon-button
                                        [disabled]="!paginator.hasPreviousPage()"
                                        (click)="paginator.previousPage()"
                                        matTooltip="Previous Page"
                                       id="ecfap-0045">
                                        <mat-icon>navigate_before</mat-icon>
                                      </button>
                                      <button
                                        mat-icon-button
                                        [disabled]="!paginator.hasNextPage()"
                                        (click)="paginator.nextPage()"
                                        matTooltip="Next Page"
                                       id="ecfap-0046">
                                        <mat-icon>navigate_next</mat-icon>
                                      </button>
                                    </div>
                                  </ng-template> -->

            <!-- </mat-paginator>

                    </div>
                    <div class="col-sm-3"
                        style="margin-bottom: 0%;font-size: small;text-align: right;margin-top: 18px;left: -12%;font-weight:bold">
                        Page: {{ecfpresentpage}}
                    </div> -->
            <!-- </div> -->


            <!-- </mat-card> -->
        </div>

        <div *ngIf="ecfsummarytype == 2">
            <!-- <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;"> -->
            <form [formGroup]="batchSearchForm">
                <!-- <pre>{{batchSearchForm?.value|json}}</pre> -->
                <tr>
                    <td style="width: 300px;">
                        <h3>
                            Batch Search
                        </h3>
                    </td>


                    <td style="width: 900px;">



                        <div style="margin-left: 400px;">
                            <mat-radio-group formControlName="type" class="ecfap">
                                <mat-radio-button *ngFor="let n of typelist" [value]="n.id"
                                    style="margin-left: 3%;margin-top: 10px" (click)="getradio(n.id)"> {{n.name}}
                                </mat-radio-button>
                            </mat-radio-group><!-- <mat-slide-toggle  formControlName="type" (change)="getradio(2)" matTooltip="Slide here for ECF Wise"
                matTooltipClass="custom-tooltipnew" color="primary">
                    Batch Wise
                </mat-slide-toggle>  -->
                        </div>
                    </td>
                </tr>

                <div class="search-auto-fit">
                    <lib-vs-search-cmp id="matInput-size" [SearchArr]="branchwisesearch" [Outputtype]="searchvar"
                        Tooltip="true" (dataoutput)="batchsummary($event)">
                    </lib-vs-search-cmp>
                </div>
                <!-- <table>
            <tr>
              <td>
                <mat-form-field class="example-full-width" style="margin-left: 10px;">
                    <input class="toolbar-search" type="text" matInput autocomplete="off" formControlName="batchno" id="ecfap-0047">
                    <mat-placeholder>Batch NO</mat-placeholder>
                </mat-form-field>
              
            </td>
            <td>
               
                <mat-form-field class="example-full-width" style="margin-left: 50px;">
                    <mat-label>Batch Status</mat-label>
                    <mat-select  formControlName="batchstatus" id="ecfap-0048">
                        <mat-option *ngFor="let status of batchStatusList" [value]="status.id" >
                            {{status.text}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </td>

            <td>
                <mat-form-field class="example-full-width" style="margin-left: 50px;">
                    <input class="toolbar-search" type="text" matInput autocomplete="off" formControlName="batchcount" id="ecfap-0049">
                    <mat-placeholder>ECF Count</mat-placeholder>
                </mat-form-field>
              
            </td>
            <td>
                <mat-form-field style="width: 200px; margin-left: 50px; " (click)="getbatchSearchbranch()">

                    <input #raiserbrInput matInput formControlName="branch"
                        [matAutocomplete]="matraiserAutocomplete" placeholder="Branch" id="ecfap-0050">
                    <mat-autocomplete [panelWidth]="400" #matraiserAutocomplete="matAutocomplete"
                        [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                        <ng-container *ngIf="!isLoading">
                            <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                matTooltip="{{branch.code}}-{{branch.name}}" matTooltipClass="custom-tooltipnew">
                                {{branch.code}}-{{branch.name}}
                            </mat-option>
                        </ng-container>
                    </mat-autocomplete>
                </mat-form-field>
            </td>

            <td>
            

                    <button class="btn btn-outline-primary" type="submit"
                    style="border-radius:40px;margin-left: 50px;" color="primary"
                    (click)="batchsummarysearch()" id="ecfap-0051"><i matTooltip="Search"  matTooltipClass="custom-tooltipnew" class="fa fa-search"
                        aria-hidden="true"></i></button>
            </td>
            <td>
             
                    <button class="btn btn-outline-primary" type="button"
                    style="border-radius:40px;margin-left: 15px;"
                   color="primary" (click)="resetbatch()" id="ecfap-0052">Reset</button>
                </td>
              

            </tr>
        
        </table> -->
            </form>


            <!-- </div> -->

            <!-- <tr> -->
            <!-- <td style="width: 300px;"> -->
            <h3>
                Batch Summary
            </h3>
            <!-- </td> -->
            <!-- </tr> -->

            <lib-vs-cbox-summary [SummaryDetails]="SummarybatchwiseData" [SummaryApiObj]="SummaryApibatchwiseObjNew"
                [FirstLastbtn]="true"></lib-vs-cbox-summary>

            <!-- <div style="margin-top: 2%; width: 95%;">
                    <table class="table table-bordered scrolltable" fixed-header style="text-align:center;">

                        <thead>
                            <tr class="table_header " fixed-header style="text-align: center;margin-left: 3%;">


                                <th>S.No</th>
                                <th>Batch No</th>
                                <th>Batch Date</th>
                                <th>Batch Amount</th>
                                <th>ECF Count</th>
                                <th>ECF Processed Count</th>
                                <th>ECF Pending Count</th>
                                <th>Raiser Name</th>
                                <th>Branch</th>
                                <th>Approver Name</th>
                                <th>Batch Status</th>
                                <th>View</th>
                                <th>Download</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let lists of batch_summary_data; index as i" style="text-align: center;">
                                <td> {{(batchpresentpage - 1)*pagesizebatch +i+1 }} </td>
                                <td>{{lists?.batchno}}</td>
                                <td style="white-space:nowrap;">{{lists?.batch_date | date:'dd-MMM-yyyy'}}</td>
                                <td style="text-align: right;">{{lists?.batchamount|currency:'INR'}}</td>
                                <td>{{lists?.batchcount}}</td>
                                <td>-</td>
                                <td>-</td>
                                <td>{{lists?.raisername}}</td>
                                <td>{{lists?.branchname}}</td>
                                <td>{{lists?.approvername}}</td>
                                <td>{{lists?.batchstatus}}</td>
                                <td>

                                    <i matTooltip="View" matTooltipClass="custom-tooltipnew" class=" fa fa-eye create "
                                        style="color: green;cursor: pointer;padding:10px"
                                        (click)="showecfview(lists,'Makerview','batch')"></i> -->
            <!-- (click)="showbatchviewview(lists?.id)" data-toggle="modal" data-target="#batchdetails" -->

            <!-- </td>
                                <td *ngIf="lists?.batchstatus == 'APPROVED';else showdown">

                                    <button type="button" class="btn btn-outline-success"
                                        (click)="batchcovernotedownload(lists.id)"
                                        style="border-radius: 40px;margin-left: 3%;">
                                        <i class="fa fa-download" matTooltip="Download CoverNote"
                                            matTooltipClass="custom-tooltipnew">
                                        </i>
                                    </button>
                                </td>
                                <ng-template #showdown>
                                    <td>-</td>
                                </ng-template> -->
            <!-- <td *ngIf="list.ecfstatus != 'APPROVED'">-</td>
                </td> -->
            <!-- </tr>
                        </tbody>
                    </table>

                    <div *ngIf="batch_summary_data ?.length == 0" style="margin-left: 42%;">
                        <h3>Sorry data not found!.. </h3>
                    </div>
                    <div class="row" *ngIf="isbatchsummarypage"> -->
            <!-- <div  class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
        <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -223px;">
            Total Count:{{getbatchtotalcount}}
        </p> 
    </div> -->
            <!-- <div class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align: right;left: 26%;"> -->
            <!-- <button mat-icon-button [disabled]="has_batchpageprevious === false" color="primary" (click)="previousClickbatch()" id="ecfap-0053">
            <mat-icon>arrow_back</mat-icon>
        </button> {{batchpresentpage}}
        <button mat-icon-button [disabled]="has_batchpagenext === false" color="primary" (click)="nextClickbatch()" id="ecfap-0054">
            <mat-icon>arrow_forward</mat-icon>
        </button> -->
            <!-- <mat-paginator (page)="handlebatchPageEvent($event)" [length]="length_batch"
                                [pageSize]="pageSize_batch" [showFirstLastButtons]="showFirstLastButtons"
                                [pageSizeOptions]="pageSizeOptions" [pageIndex]="pageIndexBatch" [hidePageSize]="true"
                                aria-label="Select page">

                            </mat-paginator>
                        </div>

                        <div class="col-sm-3"
                            style="margin-bottom: 0%;font-size: small;text-align: right;margin-top: 18px;left: -22%;font-weight:bold">
                            Page: {{batchpresentpage}}
                        </div>


                    </div>
                </div> -->


            <!-- Batch View -->
            <!-- <div *ngIf="showbatchview" >
<p style="color:black;font-size: 22px;font-weight: 500;margin-left: 3%;margin-top: 20px;">
    Batch View
    </p>
<div  style="margin-top: 2%;margin-left: 50px; width: 85%;">
    <table class="table table-bordered table-responsive padsize" style="text-align:center;" >	
        
        <thead>
            <tr class="table_header tableset " style="white-space: nowrap;text-align: center;margin-left: 3%;">

                <th>S.No</th>
                <th>CR NO</th>
                <th>ECF Type</th>
                <th>Commodity Name</th>
                <th>ECF Date</th>
                <th>ECF Amount</th>
                <th>ECF Status</th>
                <th>Payment For</th>
                <th>View</th>
                <th>Download</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor ="let ab of batchviewlist;index as i">
                <td>{{(bvpresentpage - 1)*pagesizebview +i+1 }}</td>
                <td>{{(ab?.crno !== null)?(ab?.crno):"-"}}</td>
                <td>{{ab?.aptype}}</td>
                <td>{{ab?.commodity_id?.name}}</td>
                <td>{{ (ab?.apdate !== "None") ? (ab?.apdate | date: 'dd/MM/yyyy') : "-" }}</td>
                <td>{{ab?.apamount|currency:'INR'}}</td>
                <td>{{ab?.apstatus}}</td>
                <td>{{ab?.payto}}</td>
                <td>
                    
                    <span matTooltip="view" class=" fa fa-eye create "
                        style="color: green;cursor: pointer;padding:10px" ></span>
               
            </td>
            <td>
               
                    <button type="button" class="btn btn-outline-success"
                        (click)="coverNotedownload(ab?.id,ab?.aptype_id)"
                        style="border-radius: 40px;margin-left: 3%;" >
                        <span class="fa fa-download" matTooltip="Download CoverNote">
                        </span>
                    </button>
                </td>

            </tr>
        </tbody>
    </table>
    <div *ngIf="batchviewlist ?.length == 0" style="margin-left: 42%;">
        <h3 >Sorry data not found!.. </h3>
    </div>
    <div class="row" *ngIf="isbatchviewpage">
      <div  class="col-sm-12" style="margin-bottom: 5%;font-size: small;text-align:right;">
            <button mat-icon-button [disabled]="has_bviewpageprevious === false" color="primary" (click)="previousClickbview()" id="ecfap-0055">
                <mat-icon>arrow_back</mat-icon>
            </button> {{bvpresentpage}}
            <button mat-icon-button [disabled]="has_bviewpagenext === false" color="primary" (click)="nextClickbview()" id="ecfap-0056">
                <mat-icon>arrow_forward</mat-icon>
            </button>
        </div>
    </div>
   </div>
</div> -->



            <!-- <div  style="margin-top: 2%;margin-left: 50px; width: 95%;">
<table class="table table-bordered table-responsive padsize" style="text-align:center;" >	
    
    <thead>
        <tr class="table_header tableset " style="white-space: nowrap;text-align: center;margin-left: 3%;">


            <th>S.No</th>
            <th>ECF Type</th>
            <th>CR NO</th>
            <th>ECF Date</th>
            <th>Invoice No</th>
            <th>ECF Amount</th>
            <th>ECF Raiser</th>
            <th>Supplier Name</th>
            <th>Approver Name</th>
            <th>ECF Status</th>
            <th>AP Status</th>
            <th>Payment Status</th>
            <th>Payment For</th>
            <th>UTR Number</th>
            <th>Payment Date</th>
            <th>View</th>
            <th>Edit</th>
            <th>Delete</th>
            <th>Download</th>
        </tr>
    </thead>

    <tbody>
        <tr *ngFor="let list of ecf_summary_data; index as i" style="white-space: nowrap;text-align: center;">
            <td> {{(ecfpresentpage - 1)*pagesizeecf +i+1 }} </td>
            <td *ngIf="list?.ecftype_id != 8">{{list?.ecftype}}</td>
            <td *ngIf="list?.ecftype_id == 8">TCF</td>
            <td *ngIf="list?.crno!=null">{{list?.crno}}</td>
            <td *ngIf="list?.crno === null">-</td>
           
           <td> {{ (list?.ecfdate !== "None") ? (list?.ecfdate | date: 'dd/MM/yyyy') : "-" }}</td>
            
            <td *ngIf="list?.invoiceheader != undefined && list?.invoiceheader != null ">{{list.invoiceheader.invoiceno}}</td>
            <td *ngIf="list?.invoiceheader == undefined && list?.invoiceheader == null">-</td>
          
           
            <td>{{list?.ecfamount|currency:'INR'}}</td>
            <td *ngIf="list?.raisername != null">{{list?.raisername}}</td>
            <td *ngIf="list?.raisername == null">-</td>
            <td *ngIf="list?.invoiceheader?.supplier_id != null">{{list?.invoiceheader?.supplier_id?.name}}</td>
            <td *ngIf="list?.invoiceheader?.supplier_id == null">-</td>
            <td *ngIf="list?.approvername != null">{{list?.approvername}}</td>
            <td *ngIf="list?.approvername == null">-</td>
            <td *ngIf ="list?.ecfstatus != 'PENDING_FOR_APPROVAL' && list.ecfstatus_id != 5" >{{ list?.ecfstatus }}</td>
            <td *ngIf ="list?.ecfstatus == 'PENDING_FOR_APPROVAL'">PENDING FOR APPROVAL</td>
            <td *ngIf="list?.ecfstatus_id == 5">PENDING FOR APPROVAL MODIFICATION</td>
            <td *ngIf="list?.ap_status != null">{{list?.ap_status}}</td>
            <td *ngIf="list?.ap_status == null">-</td>
            <td *ngIf="list?.ap_status == 'PAID'">
                <span matTooltip="view Payment Details" class=" fa fa-eye create " style="color: green;cursor: pointer;"
               (click)="getpaystatus(list?.crno)" data-toggle="modal"  data-target="#showpaymentdetails"></span>
            </td>
            <td *ngIf="list?.ap_status != 'PAID'">-</td>
            <td *ngIf="list?.ecftype_id != 3 && list?.ecftype_id != 4 && list?.ecftype_id != 13">SUPPLIER</td>
            <td *ngIf="list?.ecftype_id == 3 || list?.ecftype_id == 13">{{list?.payto}}</td>
            <td *ngIf="list?.ecftype_id== 4">{{list?.ppx}}</td>
           
            <td> {{ (list?.invoiceheader?.utrno != null) ? list?.invoiceheader?.utrno : "-" }}</td>
            <td> {{ (list?.invoiceheader?.paymentdate !== "None") ? (list?.invoiceheader?.paymentdate | date: 'dd/MM/yyyy') : "-" }}</td>
            <td>
                <span matTooltip="view" class=" fa fa-eye create "
                    style="color: green;cursor: pointer;padding:10px" (click)="showview(list)"></span>
            </td>
            <td *ngIf="list.ecfstatus === 'APPROVED' || list.ecfstatus === 'REJECT' || list.can_edit != true">
                <button mat-icon-button matTooltip=" Edit" class="iconbutton" color="primary"
                    [disabled]="true" id="ecfap-0057">
                    <mat-icon style="color: grey;" aria-label="Edit">edit</mat-icon>
                </button>
            </td>
            <td *ngIf="list.ecfstatus != 'APPROVED' && list.ecfstatus != 'REJECT' && list.can_edit == true">
                <button mat-icon-button matTooltip=" Edit" class="iconbutton" color="primary"
                    (click)="showedit(list)" id="ecfap-0058">
                    <mat-icon style="color: green;" aria-label="Edit">edit</mat-icon>
                </button>
            </td>
            
            <td  *ngIf="list.ecfstatus != 'APPROVED' && list.ecfstatus != 'REJECT'&& list.ecfstatus != 'PENDING_FOR_APPROVAL' && list.ecfstatus_id != 5 && list.can_edit == true">
                <button mat-icon-button type="button" matTooltip="Delete" id="ecfap-0059">
                    <mat-icon style="color: green;" aria-label="Edit" (click)="delete(list.id)">
                        delete</mat-icon>
                </button>
            </td>
            <td  *ngIf="list.ecfstatus == 'APPROVED' || list.ecfstatus == 'REJECT' || list.ecfstatus == 'PENDING_FOR_APPROVAL'|| list.ecfstatus_id == 5 || list.can_edit != true">
                <button mat-icon-button type="button" matTooltip="Delete" [disabled]="true" id="ecfap-0060">
                    <mat-icon style="color: grey;" aria-label="Edit" >
                        delete</mat-icon>
                </button>
            </td>

            <td *ngIf="list.ecfstatus == 'APPROVED'">
                <button type="button" class="btn btn-outline-success"
                    (click)="coverNotedownload(list.id,list.ecftype_id)"
                    style="border-radius: 40px;margin-left: 3%;" >
                    <span class="fa fa-download" matTooltip="Download CoverNote">
                    </span>
                </button>
            </td>
            <td *ngIf="list.ecfstatus != 'APPROVED'">-</td>
           
          

        </tr>
    </tbody>
</table>

<div *ngIf="ecf_summary_data ?.length == 0" style="margin-left: 42%;">
    <h3 >Sorry data not found!.. </h3>
</div>


<div class="row" *ngIf="issummarypage">
<div  class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
    <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -220px;">
        Total Count:{{gettotalcount}}
    </p> 
</div>
<div  class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;">
    <button mat-icon-button [disabled]="has_pageprevious === false" color="primary" (click)="previousClickPayment()" id="ecfap-0061">
        <mat-icon>arrow_back</mat-icon>
    </button> {{ecfpresentpage}}
    <button mat-icon-button [disabled]="has_pagenext === false" color="primary" (click)="nextClickPayment()" id="ecfap-0062">
        <mat-icon>arrow_forward</mat-icon>
    </button>
</div>
</div>

</div> -->
            <!-- </mat-card> -->
        </div>

        <div *ngIf="ecfsummarytype == 3">
            <!-- <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;"> -->
            <form [formGroup]="SupplierWiseECFForm">
                <tr>
                    <td style="width: 300px;">
                        <h3>
                            VOW Summary Search
                        </h3>
                    </td>
                    <td style="width: 900px;">
                        <div style="margin-left: 400px;">
                            <mat-radio-group formControlName="type" class="ecfap">
                                <mat-radio-button *ngFor="let n of typelist" [value]="n.id"
                                    style="margin-left: 3%;margin-top: 10px" (click)="getradio(n.id)"> {{n.name}}
                                </mat-radio-button>
                            </mat-radio-group>
                            <!-- <mat-slide-toggle  formControlName="type" (change)="getradio(1)" matTooltip="Slide here for Batch Wise"
                    matTooltipClass="custom-tooltipnew" color="primary">
                        ECF Wise
                    </mat-slide-toggle>  -->
                        </div>
                    </td>
                </tr>

                <div class="search-auto-fit">
                    <lib-vs-search-cmp id="matInput-size" [SearchArr]="ecfsearches"
                        (dataoutput)="supplierwiseSearch($event)" [ButtonArr]="suppliertemplatebutton" Tooltip="true">
                    </lib-vs-search-cmp>
                </div>

                <!-- <table>
                <tr>
                    <td>
                    <mat-form-field style="margin-left: 10px;width:150px;">
                        <input class="toolbar-search" type="text" matInput autocomplete="off" formControlName="crno" id="ecfap-0063">
                        <mat-placeholder>CR NO</mat-placeholder>
                    </mat-form-field>
                    </td>
                    <td>                    
                        <button type="button" class="btn btn-outline-primary" matTooltip="Select Supplier" 
                        matTooltipClass="custom-tooltipnew" data-toggle="modal" data-target="#ecfap-0016"
                        style="border-radius:40px;" id="ecfap-0064"><i class="fa fa-arrow-up"></i></button>     
                        <mat-form-field style="margin-left: 5px;width:150px; ">
            
                            <mat-label>Supplier Name</mat-label>
                            <input #supplierInput  placeholder="Choose Supplier" matInput 
                            formControlName="supplier_id" [matAutocomplete]="supp" readonly id="ecfap-0065">
                            <mat-autocomplete [panelWidth]="400" #supp="matAutocomplete"
                            [displayWith]="displayFnSupplier">
                            <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                            <ng-container *ngIf="!isLoading">
                                <mat-option *ngFor="let supplier of supplierList"
                                [value]="supplier" matTooltip="{{supplier.name}} - {{supplier.code}}" matTooltipClass="custom-tooltipnew">{{supplier.name}} - {{supplier.code}}
                                </mat-option>
                            </ng-container>
                        </mat-autocomplete>
                    
                        </mat-form-field>
                    </td>
                    <td>
                        <mat-form-field style="margin-left: 10px;width:150px;">
                            <input class="toolbar-search" type="text" matInput autocomplete="off" formControlName="invoice_no" id="ecfap-0066">
                            <mat-placeholder>Invoice No</mat-placeholder>
                        </mat-form-field>                  
                    </td>
                    <td>          
                        <mat-form-field style="margin-left: 10px;width:150px;">
                            <mat-label>ECF Type</mat-label>
                            <mat-select  formControlName="aptype"  id="ecfap-0067">
                                <mat-option *ngFor="let type of TypeList" [value]="type.id" >
                                    {{type.text}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </td>
            
                    <td>
                    
                        <mat-form-field style="margin-left: 10px;width:150px;">
                            <mat-label>ECF Status</mat-label>
                            <mat-select  formControlName="ecfstatus" id="ecfap-0068">
                                <mat-option *ngFor="let status of StatusList" [value]="status.id" >
                                    {{status.text}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </td>
            </tr>
            <tr>
                <td>
                    <mat-form-field  style="margin-left: 10px;width:150px; " (click)="getSupplierWiseECFbranch()">

                        <input #raiserbrInput matInput formControlName="branch"
                            [matAutocomplete]="matraiserAutocomplete" placeholder="Branch" id="ecfap-0069">
                        <mat-autocomplete [panelWidth]="250" #matraiserAutocomplete="matAutocomplete"
                            [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                            <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                            <ng-container *ngIf="!isLoading">
                                <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                    matTooltip="{{branch.code}}-{{branch.name}}" matTooltipClass="custom-tooltipnew">
                                    {{branch.code}}-{{branch.name}}
                                </mat-option>
                            </ng-container>
                        </mat-autocomplete>
                    </mat-form-field>
                </td>
                <td>
                    <mat-form-field   style="margin-left: 45px;width:150px;"
                                            (click)="getSupplierWisecommodity()">

                                            <input #commodityInput placeholder="Commodity Name" matInput
                                                formControlName="commodity_id" [matAutocomplete]="commoditytype"
                                                [matTooltip]="ecfSearchForm.value.commodity_id.name" matTooltipClass="custom-tooltipnew" id="ecfap-0070"> -->
                <!-- <mat-icon matSuffix class="maticonsize">unfold_more</mat-icon> -->
                <!-- <mat-autocomplete [panelWidth]="300" #commoditytype="matAutocomplete"
                                                [displayWith]="displayFncommodity" (opened)="commodityScroll()">
                                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                                <ng-container *ngIf="!isLoading">
                                                    <mat-option *ngFor="let commodity of commodityList"
                                                        [value]="commodity"
                                                        matTooltip="{{commodity.name}}" matTooltipClass="custom-tooltipnew">
                                                        {{commodity.name}}
                                                    </mat-option>
                                                </ng-container>
                                            </mat-autocomplete>
                                        </mat-form-field>
                </td>
                <td></td>
                <td  colspan="2" style="text-align: right;">
                        <button class="btn btn-outline-primary" type="submit"
                        style="border-radius:40px;margin-left: 10px;" color="primary"
                        (click)="SupplierECFsearch()" id="ecfap-0071"><i matTooltip="Search"  matTooltipClass="custom-tooltipnew"
                        class="fa fa-search"
                            aria-hidden="true"></i></button>
                        <button class="btn btn-outline-primary" type="button"
                        style="border-radius:40px;margin-left: 10px;"
                    color="primary" (click)="ResetSupplierECF()" id="ecfap-0072">Reset</button> -->
                <!-- <button class="btn btn-outline-primary" type="button"
                    style="border-radius:40px;margin-left: 10px;" 
                    color="primary" (click)="getRptDownload(1)" id="ecfap-0073">Report Download</button> -->
                <!-- </td>
            </tr>
        </table> -->
            </form>


            <!-- <tr>
                        <td style="width: 300px;"> -->
            <h3>
                VOW Summary
            </h3>
            <!-- </td>
                    </tr> -->
            <lib-vs-cbox-summary [SummaryDetails]="SummarysupplierwiseData"
                [SummaryApiObj]="SummaryApisupplierwiseObjNew" [FirstLastbtn]="true"></lib-vs-cbox-summary>

            <!-- <div style="margin-top: 1%;">
                        <table class="table table-bordered scrolltable" style="text-align:center;">
                            <thead fixed-header>
                                <tr class="table_header " fixed-header>
                                    <th style="width: 50px;">S.No</th>
                                    <th>ECF Type</th>
                                    <th>CR NO</th>
                                    <th>Batch No</th>
                                    <th>Supplier</th>
                                    <th>Commodity Name</th>
                                    <th>Branch</th>
                                    <th>ECF Date</th>
                                    <th>ECF Amount</th>
                                    <th style="width: 200px;">ECF Status</th>
                                    <th colspan="3">Action</th>
                                </tr>
                            </thead>

                            <tbody>
                                <tr *ngFor="let list of Supp_ecf_summary; index as i" style="text-align: center;">
                                    <td style="width: 50px;"> {{(SuppWiseCurrPage - 1)*pagesizeecf +i+1 }} </td>
                                    <td *ngIf="list?.aptype_id != 8" style="white-space: nowrap;">{{list?.aptype}}</td>
                                    <td *ngIf="list?.aptype_id == 8" style="white-space: nowrap;">TCF</td>
                                    <td *ngIf="list?.crno!=null">{{list?.crno}}</td>
                                    <td *ngIf="list?.crno === null">-</td>
                                    <td
                                        *ngIf="list?.batch_no != undefined && list?.batch_no != null && list?.batch_no != ''">
                                        {{list?.batch_no}}</td>
                                    <td
                                        *ngIf="list?.batch_no == undefined || list?.batch_no == null || list?.batch_no == ''">
                                        -</td>
                                    <td>
                                        <div style="width: 200px;overflow: hidden"
                                            matTooltip="{{list?.supplier_data?.name}} - {{list?.supplier_data?.code}}"
                                            matTooltipClass="custom-tooltipnew">
                                            {{list?.supplier_data?.name}} - {{list?.supplier_data?.code}}
                                        </div>
                                    </td>
                                    <td>{{list?.commodity_id?.name}}</td>
                                    <td>{{list?.branch[0]?.name}}-{{list?.branch[0]?.code}}</td>
                                    <td style="white-space: nowrap;"> {{ (list?.apdate !== "None") ? (list?.apdate |
                                        date:'dd-MMM-yyyy') : "-" }}</td>
                                    <td style="text-align: right;">{{list?.apamount|currency:'INR'}}</td>
                                    <td style="width: 200px;">{{list?.ecfstatus?.text}}</td>
                                    <td style="width: 20px;">
                                        <i matTooltip="View" matTooltipClass="custom-tooltipnew" class=" fa fa-eye create "
                                            style="color: green;cursor: pointer;padding:10px;margin-top: 10px;"
                                            (click)="showview(list)"></i>
                                    </td>
                                    <td style="width: 20px;"
                                        *ngIf="list?.ecfstatus?.text == 'DRAFT' || list?.ecfstatus?.text == 'READY FOR BATCH' || list?.ecfstatus?.text == 'RETURNED'">
                                        <button mat-icon-button matTooltip=" Edit" matTooltipClass="custom-tooltipnew"
                                            class="iconbutton" color="primary" style="margin-top: 10px;"
                                            (click)="showedit(list)" id="ecfap-0074">
                                            <mat-icon style="color: green;" aria-label="Edit">edit</mat-icon>
                                        </button>
                                    </td>
                                    <td style="width: 20px;"
                                        *ngIf="list?.ecfstatus?.text != 'DRAFT' && list?.ecfstatus?.text != 'READY FOR BATCH' && list?.ecfstatus?.text != 'RETURNED'">
                                        <button mat-icon-button class="iconbutton" color="primary" style="margin-top: 10px;"
                                            id="ecfap-0075">
                                            <mat-icon style="color: grey;" aria-label="Edit">edit</mat-icon>
                                        </button>
                                    </td>
                                    <td>
                                        <button mat-icon-button class="btn btn-outline-success" style="margin-left: 1px;"
                                            matTooltip="Click to Unlock" (click)="ECFunlock(list.id)">
                                            <mat-icon>lock_open</mat-icon>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <div *ngIf="Supp_ecf_summary ?.length == 0" style="margin-left: 42%;">
                            <h3>Sorry data not found!.. </h3>
                        </div>
                    </div>

                    <div class="row" *ngIf="isSuppWiseSumm" style="width: 85%;">
                        <div class="col-sm-9"
                            style="margin-bottom: 5%;margin-top: 0px;font-size: small;text-align: right;left: 40%;">
                            <mat-paginator style="margin-top: 0%;" (page)="handleSuppWisePageEvent($event)"
                                [length]="SuppWiseDataLen" [pageSize]="pageSize_ecf"
                                [showFirstLastButtons]="showFirstLastButtons" [pageSizeOptions]="pageSizeOptions"
                                [pageIndex]="pageIndexSuppWise" [hidePageSize]="true" aria-label="Select page">
                            </mat-paginator>

                        </div>
                        <div class="col-sm-3"
                            style="margin-bottom: 0%;font-size: small;text-align: right;margin-top: 18px;left: -12%;font-weight:bold">
                            Page: {{SuppWiseCurrPage}}
                        </div>
                    </div>  -->


            <!-- </mat-card> -->
        </div>



    </div>

    <div *ngIf="ecfapprovalsummaryForm">
        <!-- <form [formGroup]="ecfradioForm">
    <mat-radio-group formControlName="type" class="ecfap">
        <mat-radio-button *ngFor="let n of apptypelist" [value]="n.id"style="margin-left: 3%;margin-top: 10px" 
       (click)="getradio(n)"> {{n.name}} </mat-radio-button>
    </mat-radio-group>
    </form>

  <div *ngIf="ecfradioForm?.value?.type == 2">
    <form [formGroup]="ecfapprovalform">
        <p style="color:black;font-size:18px;font-family:'Times New Roman';font-weight:bold;margin-left: 3%;">
            ECF Approval Search
        </p> -->
       <div *ngIf="approvaltype == 2">
            <!-- <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;"> -->
            <form [formGroup]="ecfapprovalform">
                <!-- <tr>
                    <td style="width: 300px;">
                        <h3>
                            ECF Approval
                        </h3>
                    </td> -->
                    <!-- <td>
                            <div style="margin-left: 500px;">
                                <mat-slide-toggle formControlName="type" (change)="getradioold(1)"
                                    matTooltip="Slide here for Batch Wise" matTooltipClass="custom-tooltipnew"
                                    color="primary">
                                    ECF Wise Approval
                                </mat-slide-toggle>
                            </div>
                        </td> -->
                <!-- </tr> -->
<!-- 
                <div class="summary-actions">
                                    <button class="circle-icon-btn-md" matTooltip="Reset" (click)="overallreset()">
                                    <mat-icon aria-hidden="true">refresh</mat-icon>
                                    </button>
  
                                    <button class="circle-icon-btn-md" matTooltip="Report Download" (click)="downloadpopupapproval()">
                                      <mat-icon aria-hidden="true">download</mat-icon>
                                     </button>
                                     
                              </div> -->

                              
                           <div class="ecf-summary-header">
                                 <h3 class="summary-title">ECF Approval Summary</h3>

                            <div class="summary-actions">
                                     <button class="circle-icon-btn-md" matTooltip="Reset" (click)="overallreset()">
                                    <mat-icon aria-hidden="true">refresh</mat-icon>
                                    </button>
  
                                    <button class="circle-icon-btn-md" matTooltip="Report Download" (click)="downloadpopupapproval()">
                                      <mat-icon aria-hidden="true">download</mat-icon>
                                     </button>
                              </div>
                                </div>
                <!-- <lib-vs-search-cmp id="matInput-size" [SearchArr]="ECF_Wise_Approval"
                    (dataoutput)="ecfsummarysearch($event)" [Outputtype]="searchvar"
                    [ButtonArr]="ECF_Wise_Approvalsumbutton" [SeparateReset]="true" Tooltip="true"
                    (ResetOutput)="Resetecfappinventory($event)">
                </lib-vs-search-cmp> -->
                <table>
                    <!-- <div *ngIf="expand_approval" class="cus-filterSearchContainers">

                        <div class="cus-filterSearch">
                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Remarks</mat-label>
                                    <input type="text" matInput autocomplete="off" formControlName="purpose"
                                        id="ecfap-0089">
                                </mat-form-field>

                            </div>
                            <div id="matInput-size">
                                <lib-vs-optiondd-cmp [InputFields]="approval_report"
                                    [formGroup]="ecfapprovalform">
                                </lib-vs-optiondd-cmp>
                            </div>

                            <lib-vs-dynamicform-cmp id="matInput-size" [InputFields]="ecf_approval_commodity"
                            [formGroup]="ecfapprovalform"></lib-vs-dynamicform-cmp>

                            <div class="npm-mat-edit-expand">
                                <lib-vs-sep-dates-cmp id="matInput-size" [DateInput]="approval_frtodate"
                                    [formGroup]="ecfapprovalform">
                                </lib-vs-sep-dates-cmp>
                            </div> -->


                            
                            <!-- <mat-form-field style="margin-left: 50px; width:150px;">
                                            <mat-label>Transaction From</mat-label>
                                            <input matInput readonly [matDatepicker]="picker1" placeholder="Transaction From "
                                                formControlName="start_date" id="ecfap-0090">
                                            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                            <mat-datepicker #picker1></mat-datepicker>
                                        </mat-form-field> -->
                            <!-- <div>
                                        <mat-form-field style="margin-left: 10px; width:150px;">
                                            <mat-label>Transaction To</mat-label>
                                            <input matInput readonly [matDatepicker]="picker2" placeholder="Transaction To"
                                                formControlName="end_date" id="ecfap-0091">
                                            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                            <mat-datepicker #picker2></mat-datepicker>
                                        </mat-form-field>
                                    </div> -->



                            <!-- <mat-form-field style="margin-left: 10px; width:150px;">
                                            <mat-label>Report Status</mat-label>
                                            <mat-select formControlName="apstatus" id="ecfap-0092">
                                                <mat-option *ngFor="let status of ApprovalStatusList" [value]="status.id">
                                                    {{status.text}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field> -->


                            <!-- <div class="cus-filterSearch-btnDiv">
                                <button class="btn btn-outline-danger" style="border-radius:40px" color="primary"
                                    (click)="approval_reset()">
                                    Reset
                                </button>

                                <div class="btn-align">
                                    <button class="btn btn-outline-success" style="border-radius:40px" type="submit"
                                        (click)="ecfapprovalsummarysearch($event)" color="primary">
                                        Apply
                                    </button>
                                    <button class="btn btn-outline-primary" style="border-radius:40px"
                                        (click)="approval_close()">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div> -->
                    <!-- <tr>
                            <td>
                                <mat-form-field style="margin-left: 10px; width:150px;">
                                    <input class="toolbar-search" type="text" matInput autocomplete="off"
                                        formControlName="crno" id="ecfap-0076">
                                    <mat-placeholder>CR NO</mat-placeholder>
                                </mat-form-field>

                            </td>
                            <td>
                                <button type="button" class="btn btn-outline-primary" matTooltip="Select Supplier"
                                    matTooltipClass="custom-tooltipnew" 
                                    style="border-radius:40px;margin-left: 5px;" id="ecfap-0077"><i
                                        class="fa fa-arrow-up"></i> -->
                    <!-- data-toggle="modal" data-target="#ecfap-0016" -->
                    <!-- </button>
                                <mat-form-field style="margin-left: 5px;; width:150px; ">

                                    <mat-label>Supplier Name</mat-label>
                                    <input #supplierInput placeholder="Choose Supplier" matInput
                                        formControlName="supplier_id" readonly [matAutocomplete]="supp" id="ecfap-0078">
                                    <mat-autocomplete [panelWidth]="400" #supp="matAutocomplete"
                                        (opened)="supplierScroll()" [displayWith]="displayFnSupplier">
                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                        <ng-container *ngIf="!isLoading">
                                            <mat-option *ngFor="let supplier of supplierList" [value]="supplier"
                                                matTooltip="{{supplier.name}}"
                                                matTooltipClass="custom-tooltipnew">{{supplier.name}}
                                            </mat-option>
                                        </ng-container>
                                    </mat-autocomplete>

                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field style="margin-left: 10px;; width:150px; " (click)="getApprovalbranch()">

                                    <input #raiserbrInput matInput formControlName="branch"
                                        [matAutocomplete]="matraiserAutocomplete" placeholder="Branch" id="ecfap-0079">
                                    <mat-autocomplete [panelWidth]="400" #matraiserAutocomplete="matAutocomplete"
                                        [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                        <ng-container *ngIf="!isLoading">
                                            <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                                matTooltip="{{branch.code}}-{{branch.name}}"
                                                matTooltipClass="custom-tooltipnew">
                                                {{branch.code}}-{{branch.name}}
                                            </mat-option>
                                        </ng-container>
                                    </mat-autocomplete>
                                </mat-form-field>
                            </td> -->
                    <!-- <td>
                <mat-form-field style="margin-left: 10px;; width:150px;">
                    <input  class="toolbar-search"  type="text" matInput autocomplete="off"  formControlName="minamt"
                    (keypress)="numberOnlyandDot($event)" style="text-align: right;" id="ecfap-0080">
                    <mat-placeholder>Min Amount</mat-placeholder>
                </mat-form-field>
            </td>
            <td>
             
                <mat-form-field style="margin-left: 10px;; width:150px;">
                    <input  class="toolbar-search" type="text" matInput autocomplete="off"  formControlName="maxamt"
                    (keypress)="numberOnlyandDot($event)" style="text-align:right" id="ecfap-0081">
                    <mat-placeholder>Max Amount</mat-placeholder>
                </mat-form-field>
            </td> -->
                    <!-- <td style="width: 110px;">

                                <mat-form-field style="margin-left: 10px; width:150px;">
                                    <mat-label>ECF Type</mat-label>
                                    <mat-select formControlName="aptype" id="ecfap-0082">
                                        <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                            {{type.text}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field style="margin-left: 10px; width:150px;">

                                    <input #commodityInput placeholder="Commodity" matInput
                                        formControlName="commodity_id" [matAutocomplete]="commoditytype"
                                        [matTooltip]="ecfapprovalform.value.commodity_id.name"
                                        matTooltipClass="custom-tooltipnew" id="ecfap-0083"> -->
                    <!-- <mat-icon matSuffix class="maticonsize">unfold_more</mat-icon> -->
                    <!-- <mat-autocomplete [panelWidth]="300" #commoditytype="matAutocomplete"
                                        [displayWith]="displayFncommodity" (opened)="commodityScroll()">
                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                        <ng-container *ngIf="!isLoading">
                                            <mat-option *ngFor="let commodity of commodityList" [value]="commodity"
                                                matTooltip="{{commodity.name}}" matTooltipClass="custom-tooltipnew">
                                                {{commodity.name}}
                                            </mat-option>
                                        </ng-container>
                                    </mat-autocomplete>
                                </mat-form-field>
                            </td> -->



                    <!-- <td>
                                <button *ngIf="!expand_approval" type="button" matTooltip="Show More"
                                    matTooltipClass="custom-tooltipnew" class="btn btn-outline-primary"
                                    style="border-radius:30px;margin-left: 10px;" (click)="expand_approval = true;"
                                    id="ecfap-0084"><mat-icon
                                        style="margin-top: 0px;margin-bottom: 0px;">keyboard_arrow_down</mat-icon>
                                    More</button>
                                <button *ngIf="expand_approval" type="button" matTooltip="Show Less"
                                    matTooltipClass="custom-tooltipnew" class="btn btn-outline-primary"
                                    style="border-radius:40px;margin-left: 10px;" (click)="expand_approval = false;"
                                    id="ecfap-0085"><mat-icon>keyboard_arrow_up</mat-icon> Less</button>

                                <button class="btn btn-outline-primary" type="submit"
                                    style="border-radius:40px;margin-left: 10px;" color="primary"
                                    (click)="ecfapprovalsummarysearch('')" id="ecfap-0086"><i matTooltip="Search"
                                        matTooltipClass="custom-tooltipnew" class="fa fa-search"
                                        aria-hidden="true"></i></button>
                                <button class="btn btn-outline-primary" type="button"
                                    style="border-radius:40px;margin-left: 10px;" color="primary"
                                    (click)="Resetecfappinventory('')" id="ecfap-0087">Reset</button>
                                <button class="btn btn-outline-primary" type="button"
                                    style="border-radius:40px;margin-left: 10px;" color="primary"
                                    (click)="getRptDownload(2)" id="ecfap-0088">Report Download</button>
                            </td> -->

                    <!-- </tr> -->


                    <!-- <tr *ngIf="expand_approval">
                            <td>
                                <mat-form-field style="margin-left: 10px; width:150px;">
                                    <input class="toolbar-search" type="text" matInput autocomplete="off"
                                        formControlName="purpose" id="ecfap-0089">
                                    <mat-placeholder>Purpose</mat-placeholder>
                                </mat-form-field>

                            </td>
                            <td>
                                <mat-form-field style="margin-left: 50px; width:150px;">
                                    <mat-label>Transaction From</mat-label>
                                    <input matInput readonly [matDatepicker]="picker1" placeholder="Transaction From "
                                        formControlName="start_date" id="ecfap-0090">
                                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                    <mat-datepicker #picker1></mat-datepicker>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field style="margin-left: 10px; width:150px;">
                                    <mat-label>Transaction To</mat-label>
                                    <input matInput readonly [matDatepicker]="picker2" placeholder="Transaction To"
                                        formControlName="end_date" id="ecfap-0091">
                                    <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                    <mat-datepicker #picker2></mat-datepicker>
                                </mat-form-field>
                            </td>

                            <td>

                                <mat-form-field style="margin-left: 10px; width:150px;">
                                    <mat-label>Report Status</mat-label>
                                    <mat-select formControlName="apstatus" id="ecfap-0092">
                                        <mat-option *ngFor="let status of ApprovalStatusList" [value]="status.id">
                                            {{status.text}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </td> -->
                    <!-- <td>
                    

                    <button type="button" class="btn btn-outline-success" matTooltip="Raise ECF"
                                style="border-radius:40px;margin-left:-255px;" (click)="showadd()" id="ecfap-0093"><span
                                    class="fa fa-plus"></span></button>
                </td>
                <td>
             
                    <button class="btn btn-outline-success" type="button"
                    style="border-radius:40px;margin-left: -418px;"
                   color="primary" matTooltip="Create Batch"  data-toggle="modal" data-target="#approvedetails" (click)="checkbatch()" id="ecfap-0094">Create Batch
                  
                </button>
                </td> -->
                    <!-- (click)="batchsubmit()" -->

                    <!-- </tr> -->

                </table>
            </form>


            <!-- </div> -->

            <!-- <tr>
                <td style="width: 300px;"> -->
                    <!-- <h3>
                        ECF Approval Summary
                    </h3> -->
                <!-- </td>
            </tr> -->
            <!-- <div class="table-responsive" id="ecfap-0002"  style="margin-top: 1%;margin-left: 10px; width: 95%;">
    <table class="table scrolltable table-bordered"  style="text-align:center;" >	        
        <thead fixed-header>                
        <tr  class="table_header " fixed-header>
            <th>S.No</th>
            <th>ECF Type</th>
            <th>Raiser Branch</th>
            <th>Supplier</th>
            <th>CR NO</th>
            <th>Commodity</th>
            <th>Purpose</th>
            <th>ECF Raising Date</th>
            <th>ECF Amount</th>
            <th>Transaction Details</th>
            <th>ECF Status</th>
            <th>Action</th>
            <th>Covernote</th>
        </tr>
    </thead>

    <tbody>
        <tr *ngFor="let list of ecf_approval_data; index as i" style="text-align: center;">
            <td> {{(ecfapppresentpage - 1)*pagesizeappecf +i+1 }} </td>
            <td *ngIf="list?.aptype_id != 8" style="white-space: nowrap;">{{list?.aptype}}</td>
            <td *ngIf="list?.aptype_id == 8" style="white-space: nowrap;">TCF</td>
            <td>{{list?.branch[0]?.code}} - {{list?.branch[0]?.name}}</td>
            <td>
                <div style="width: 200px;overflow: hidden" matTooltip="{{list?.supplier_data?.name}} - {{list?.supplier_data?.code}}" matTooltipClass="custom-tooltipnew">
                    {{list?.supplier_data?.name}} - {{list?.supplier_data?.code}}
                </div>
            </td>
            <td *ngIf="list?.crno!=null">{{list?.crno}}</td>
            <td>{{list?.commodity_id.name}}</td>
            <td *ngIf="list?.crno === null">-</td>
            <td matTooltip={{list?.remark}} matTooltipClass="custom-tooltipnew">{{list?.remark}}</td>
            <td style="white-space: nowrap;"> {{ (list?.apdate !== "None") ? (list?.apdate | date:'dd-MMM-yyyy') : "-" }}</td>
            <td style="text-align: right;">{{list?.apamount|currency:'INR'}}</td>
            <td>
                <button type="button" class="btn btn-outline-success" style="border-radius:40px;" matTooltip="View Transaction" data-toggle="modal" data-target="#ecfap-0008"
                (click)="gettran(list)" id="ecfap-0095">
                <i class="fa fa-exchange" aria-hidden="true"  ></i>
                </button>
            </td>
            <td>{{list?.ecfstatus?.text}}</td>
            <td> 
                <div  style="width: 150px;vertical-align: center;" > 
                    <button type="button" class="btn btn-outline-primary"
                    style="border-radius:40px;margin-left:5px;color: mediumblue;padding-top:10px;" id="ecfap-0096">             
                    <i matTooltip="Action" matTooltipClass="custom-tooltipnew" style="color: mediumblue;cursor: pointer;padding:10px;"
                    class="fa fa-arrow-right" (click)="showappview(list, false)"></i>
                    </button>

                </div> 
            </td>
            <td *ngIf="list?.ecfstatus?.text != 'DRAFT' &&  list?.ecfstatus?.text != 'PENDING IN ECF APPROVAL'&&  list?.ecfstatus?.text !='READY FOR BATCH' &&  list?.ecfstatus?.text !='DELETE' && list?.ecfstatus?.text =='ECF REJECTED';else tpl">
                <button type="button" class="btn btn-outline-success"   
                    (click)="coverNotedownload(list.id,list.ecftype_id)"
                    style="border-radius: 40px;margin-left: 3%;" >
                    <i class="fa fa-download" matTooltip="Download CoverNote" matTooltipClass="custom-tooltipnew">
                    </i>
                </button>
            </td>
            <ng-template #tpl><td>-</td></ng-template>

        </tr>
    </tbody>
</table>

<div *ngIf="ecf_approval_data ?.length == 0" style="margin-left: 42%;">
    <h3 >Sorry data not found!.. </h3>
</div>
</div> -->

            <lib-vs-cbox-summary [SummaryDetails]="ecpappsumdata" [SummaryApiObj]="ecpappsumdataapi"
                [FirstLastbtn]="true" #cboxSummary (dataEvent)="ecfapprovalsummarydata($event)">
            </lib-vs-cbox-summary>
            <!-- <div class="row" *ngIf="isappsummarypage" style="width: 85%;"> -->
            <!-- <div  class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
    <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -190px;">
        Total Count:{{getapptotalcount}}
    </p> 
</div> -->
            <!-- <div class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left:40%"> -->
            <!-- <button mat-icon-button [disabled]="has_apppageprevious === false" color="primary" (click)="previousClickappPayment()" id="ecfap-0101">
        <mat-icon>arrow_back</mat-icon>
    </button> {{ecfapppresentpage}}
    <button mat-icon-button [disabled]="has_apppagenext === false" color="primary" (click)="nextClickappPayment()" id="ecfap-0102">
        <mat-icon>arrow_forward</mat-icon>
    </button> -->
            <!-- <mat-paginator (page)="handleappecfPageEvent($event)" [length]="length_approverecf"
                            [pageSize]="pageSize_approverecf" [showFirstLastButtons]="showFirstLastButtons"
                            [pageSizeOptions]="pageSizeOptions" [pageIndex]="pageIndexApprove" [hidePageSize]="true"
                            aria-label="Select page">

                        </mat-paginator>
                    </div> -->

            <!-- <div class="col-sm-3"
                        style="margin-bottom: 0%;font-size: small;text-align: right;margin-top: 18px;left: -12%;font-weight:bold">
                        Page: {{ecfapppresentpage}}
                    </div>
                </div> -->


            <!-- </mat-card> -->
        </div>

        <div *ngIf="approvaltype == 1">
            <!-- <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;"> -->
            <form [formGroup]="batchapprovalform">

                <!-- <tr>
                    <td style="width: 300px;">
                        <h3>
                            Batch Approval Search
                        </h3>
                    </td>
                    <td>
                        <div style="margin-left: 500px;">
                            <mat-slide-toggle formControlName="type" (change)="getradioold(2)"
                                matTooltip="Slide here for ECF Wise" matTooltipClass="custom-tooltipnew"
                                color="primary">
                                Batch Wise Approval
                            </mat-slide-toggle>
                        </div>
                    </td>
                </tr>
                <div class="search-auto-fit">
                    <lib-vs-search-cmp id="matInput-size" [SearchArr]="Batch_Wise_Approval" Tooltip="true"
                        (dataoutput)="batchappsumsearch($event)">
                    </lib-vs-search-cmp>
                </div> -->
                <!-- <table> -->


                <!-- <tr>
                            <td>
                                <mat-form-field class="example-full-width" style="margin-left: 10px;">
                                    <input class="toolbar-search" type="text" matInput autocomplete="off"
                                        formControlName="batchno" id="ecfap-0103">
                                    <mat-placeholder>Batch NO</mat-placeholder>
                                </mat-form-field>

                            </td>
                            <td>

                                <mat-form-field class="example-full-width" style="margin-left: 50px;">
                                    <mat-label>Batch Status</mat-label>
                                    <mat-select formControlName="batchstatus" id="ecfap-0104">
                                        <mat-option *ngFor="let status of batchStatusList" [value]="status.id">
                                            {{status.text}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </td>

                            <td>
                                <mat-form-field class="example-full-width" style="margin-left: 50px;">
                                    <input class="toolbar-search" type="text" matInput autocomplete="off"
                                        formControlName="batchcount" id="ecfap-0105">
                                    <mat-placeholder>ECF Count</mat-placeholder>
                                </mat-form-field>

                            </td>
                            <td>
                                <mat-form-field style="width: 200px; margin-left: 50px; "
                                    (click)="getbatchApprovalbranch()">

                                    <input #raiserbrInput matInput formControlName="branch"
                                        [matAutocomplete]="matraiserAutocomplete" placeholder="Branch" id="ecfap-0106">
                                    <mat-autocomplete [panelWidth]="400" #matraiserAutocomplete="matAutocomplete"
                                        [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                        <ng-container *ngIf="!isLoading">
                                            <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                                matTooltip="{{branch.code}}-{{branch.name}}"
                                                matTooltipClass="custom-tooltipnew">
                                                {{branch.code}}-{{branch.name}}
                                            </mat-option>
                                        </ng-container>
                                    </mat-autocomplete>
                                </mat-form-field>
                            </td>

                            <td>


                                <button class="btn btn-outline-primary" type="submit"
                                    style="border-radius:40px;margin-left: 50px;" color="primary"
                                    (click)="batchappsummarysearch()" id="ecfap-0107"><i matTooltip="Search"
                                        matTooltipClass="custom-tooltipnew" class="fa fa-search"
                                        aria-hidden="true"></i></button>
                            </td>
                            <td>

                                <button class="btn btn-outline-primary" type="button"
                                    style="border-radius:40px;margin-left: 15px;" color="primary"
                                    (click)="resetbatchapp()" id="ecfap-0108">Reset</button>
                            </td>


                        </tr>

                    </table> -->
            </form>


            <!-- </div> -->

            <tr>
                <td style="width: 300px;">
                    <h3>
                        Batch Approval Summary
                    </h3>
                </td>
            </tr>

            <!-- <div style="margin-top: 2%;margin-left: 15px; width: 95%;">
                    <table class="table table-bordered scrolltable" fixed-header style="text-align:center;">

                        <thead>
                            <tr class="table_header " fixed-header style="text-align: center;margin-left: 3%;">


                                <th>S.No</th>
                                <th>Batch No</th>
                                <th>Batch Date</th>
                                <th>Batch Amount</th>
                                <th>ECF Count</th>
                                <th>ECF Processed Count</th>
                                <th>ECF Pending Count</th>
                                <th>Raiser Name</th>
                                <th>Branch</th>
                                <th>Batch Status</th>
                                <th>View</th>
                                <th>Download</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let lists of batch_approval_data; index as i" style="text-align: center;">
                                <td> {{(batchapppresentpage - 1)*pagesizeappbatch +i+1 }} </td>
                                <td>{{lists?.batchno}}</td>
                                <td style="white-space:nowrap;">{{lists?.batch_date | date:'dd-MMM-yyyy'}}</td>
                                <td style="text-align: right;">{{lists?.batchamount|currency:'INR'}}</td>
                                <td>{{lists?.batchcount}}</td>
                                <td>-</td>
                                <td>-</td>
                                <td>{{lists?.raisername}}</td>
                                <td>{{lists?.branchname}}</td>
                                <td>{{lists?.batchstatus}}</td>
                                <td>

                                    <i matTooltip="View" matTooltipClass="custom-tooltipnew" class=" fa fa-eye create "
                                        style="color: green;cursor: pointer;padding:10px"
                                        (click)="showecfview(lists,'Approvalview','batch')"></i>

                                </td>
                                <td *ngIf="lists?.batchstatus == 'APPROVED';else showdown">

                                    <button type="button" class="btn btn-outline-success"
                                        (click)="batchcovernotedownload(lists.id)"
                                        style="border-radius: 40px;margin-left: 3%;">
                                        <i class="fa fa-download" matTooltip="Download CoverNote"
                                            matTooltipClass="custom-tooltipnew">
                                        </i>
                                    </button>
                                </td>
                                <ng-template #showdown>
                                    <td>-</td>
                                </ng-template>

                            </tr>
                        </tbody>
                    </table>

                    <div *ngIf="batch_approval_data ?.length == 0" style="margin-left: 42%;">
                        <h3>Sorry data not found!.. </h3>
                    </div>
                    <div class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left:26%">
                        <mat-paginator (page)="handleappbatchPageEvent($event)" [length]="length_approverbatchecf"
                            [pageSize]="pageSize_approverbatchecf" [showFirstLastButtons]="showFirstLastButtons"
                            [pageSizeOptions]="pageSizeOptions" [pageIndex]="pageIndexBatchApprove"
                            [hidePageSize]="true" aria-label="Select page">

                        </mat-paginator>
                    </div>
                    <div class="col-sm-3"
                        style="margin-bottom: 0%;font-size: small;text-align: right;margin-top: 18px;left: -22%;font-weight:bold">
                        Page: {{batchapppresentpage}}
                    </div>
                </div> -->
            <lib-vs-cbox-summary [SummaryDetails]="batchappsum" [SummaryApiObj]="batchappsumdataapi" [unnecessary]="[]">
            </lib-vs-cbox-summary>
            <div class="row" *ngIf="isbatchappsummarypage">
            </div>


            <!-- </mat-card> -->
        </div>




    </div>



    <div *ngIf="ecfcreateForm">
        <app-create-ecf [submoduleName]="selectedSubmoduleName" (onCancel)="ecfcreateCancel()" (onView)="invdtlview()">
        </app-create-ecf>
    </div>
    <div *ngIf="ecfviewForm">
        <app-ecfap-view (onCancel)="backview()" (onSubmit)="detailview()" (onView)="gotoinvdtlview()"></app-ecfap-view>
    </div>
    <div *ngIf="ecfapprovalviewForm">
        <app-ecf-approval-view (onCancel)="appbackview()" (onSubmit)="appbackview()"
            (onView)="gotoappinvdtlview()"></app-ecf-approval-view>
    </div>
    <div *ngIf="batchviewForm">
        <app-ecfbatch-view (onBack)="appbackview()" (onSubmit)="gotoheader()"></app-ecfbatch-view>
    </div>
    <div *ngIf="InvoiceDetailForm">
        <app-invoice-detail (onSubmit)="invsubmit()" (onCancel)="invcancel()"></app-invoice-detail>
    </div>

    <div *ngIf="APApprovalForms">
        <app-ap-approve (onCancel)="backviews()" (onSubmit)="submitmodify()" (onView)="movtodtl()"> </app-ap-approve>
    </div>

    <div *ngIf="InvoiceDetailApprovalForm">
        <app-inv-detail-approve (onSubmit)="gotoapapproval()"></app-inv-detail-approve>
    </div>
    <div *ngIf="InvoiceDetailViewForm">
        <app-inv-detail-view (onSubmit)="movetodetails()"></app-inv-detail-view>
    </div>
    <div *ngIf="AppInvoiceDetailViewForm">
        <app-approver-inv-detail-view (batchview)="showecfview('','Approvalview','ecf')"
            (ecfview)="showappview('', true)"></app-approver-inv-detail-view>
    </div>


    <div *ngIf="preparePaymentForm">
        <app-prepare-payment (onCancel)="ppbackviews()"></app-prepare-payment>
    </div>
    <div *ngIf="APApprovalForm">
        <form [formGroup]="approveTypeForm">
            <div style="margin-top: 20px;">
                <mat-radio-group formControlName="type" class="ecfap">
                    <mat-radio-button *ngFor="let n of typelist" [value]="n.id" style="margin-left: 20px;"
                        (click)="getApproveType(n.id)"> {{n.name}} </mat-radio-button>
                </mat-radio-group>
            </div>
        </form>

        <div *ngIf="approveTypeForm?.value?.type == 2">
            <form [formGroup]="apECFSearchForm">
                <p style="color:black;font-size:18px;font-family:'Times New Roman';font-weight:bold;margin-left: 20px;">
                    ECF Search
                </p>

                <table>
                    <tr>
                        <td>
                            <mat-form-field class="example-full-width" style="margin-left: 20px;">
                                <input class="toolbar-search" type="text" matInput autocomplete="off"
                                    formControlName="crno" id="ecfap-0112">
                                <mat-placeholder>CR No</mat-placeholder>
                            </mat-form-field>

                        </td>

                        <td>

                            <mat-form-field class="example-full-width" style="margin-left: 50px;">
                                <mat-label>ECF Type</mat-label>
                                <mat-select formControlName="aptype" id="ecfap-0113">
                                    <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                        {{type.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>

                        <td>

                            <mat-form-field class="example-full-width" style="margin-left: 50px;">
                                <mat-label>ECF Status</mat-label>
                                <mat-select formControlName="apstatus" id="ecfap-0114">
                                    <mat-option *ngFor="let status of ApprovalStatusList" [value]="status.id">
                                        {{status.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>

                        <td>
                            <!-- <mat-label>Min Amount</mat-label><br> -->
                            <mat-form-field class="example-full-width" style="margin-left: 50px;">
                                <input class="toolbar-search" type="text" matInput autocomplete="off"
                                    formControlName="minamt" (keypress)="numberOnlyandDot($event,0)"
                                    style="text-align: right;" id="ecfap-0115">
                                <mat-placeholder>Min Amount</mat-placeholder>
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>

                            <mat-form-field class="example-full-width" style="margin-left: 20px;">
                                <input class="toolbar-search" type="text" matInput autocomplete="off"
                                    formControlName="maxamt" (keypress)="numberOnlyandDot($event,0)"
                                    style="text-align:right" id="ecfap-0116">
                                <mat-placeholder>Max Amount</mat-placeholder>
                            </mat-form-field>
                        </td>

                        <td>


                            <button class="btn btn-outline-primary" type="submit"
                                style="border-radius:40px;margin-left: 50px;" color="primary"
                                (click)="approvalECFSearch()" id="ecfap-0117"><i matTooltip="Search"
                                    class="fa fa-search" matTooltipClass="custom-tooltipnew"
                                    aria-hidden="true"></i></button>
                        </td>
                        <td>

                            <button class="btn btn-outline-primary" type="button"
                                style="border-radius:40px;margin-left: -115px;" color="primary" (click)="resetapECF()"
                                id="ecfap-0118">Reset</button>
                        </td>
                    </tr>

                </table>
            </form>



            <!-- </div> -->

            <h3>
                ECF Summary
            </h3>
            <div class="table-responsive ccbstable"
                style="margin-top: 1%;margin-left: 20px;overflow: auto;height:300px;margin-bottom: 1%;width:1200px">
                <table class="table table-bordered scrolltable" fixed-header>
                    <!-- [style.height]="defaultHeight+'vh'"  -->
                    <!-- table-responsive padsize -->

                    <thead style="text-align: center;margin-left: 3%;">
                        <tr class="table_header " fixed-header>
                            <th>S.No</th>
                            <th>ECF Type</th>
                            <th>CR No</th>
                            <th>Commodity Name</th>
                            <th>Batch No</th>
                            <th>ECF Date</th>
                            <th>ECF Amount</th>
                            <th>AP Status</th>
                            <th>Payment For</th>
                            <th>View</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr *ngFor="let list of approvalECFSummary; index as i" style="text-align: center;">
                            <td> {{(ecfpresentpage - 1)*pagesizeecf +i+1 }} </td>
                            <td *ngIf="list?.aptype_id != 8" style="white-space: nowrap;">{{list?.aptype}}</td>
                            <td *ngIf="list?.aptype_id == 8" style="white-space: nowrap;">TCF</td>
                            <td *ngIf="list?.crno!=null">{{list?.crno}}</td>
                            <td *ngIf="list?.crno === null">-</td>
                            <td>{{list?.commodity_id?.name}}</td>
                            <td>{{ (list?.batch_no !== null) ? list?.batch_no : "-" }}</td>

                            <td style="white-space: nowrap;"> {{ (list?.apdate !== "None") ? (list?.apdate |
                                date:'dd-MMM-yyyy') : "-" }}</td>
                            <td style="text-align: right;">{{list?.apamount|currency:'INR'}}</td>
                            <td>{{list?.apstatus?.text}}</td>
                            <!-- <td *ngIf ="list?.apstatus != 'PENDING_FOR_APPROVAL' && list.apstatus_id != 5" >{{ list?.apstatus }}</td>
                <td *ngIf ="list?.apstatus == 'PENDING_FOR_APPROVAL'">PENDING FOR APPROVAL</td>
                <td *ngIf="list?.apstatus_id == 5">PENDING FOR APPROVAL MODIFICATION</td> -->
                            <td *ngIf="list?.aptype_id != 3 && list?.aptype_id != 4 && list?.aptype_id != 13">SUPPLIER
                            </td>
                            <td *ngIf="list?.aptype_id == 3 || list?.aptype_id == 13">{{list?.payto}}</td>
                            <td *ngIf="list?.aptype_id== 4">{{list?.ppx}}</td>
                            <td>
                                <i matTooltip="View" matTooltipClass="custom-tooltipnew" class=" fa fa-eye create "
                                    style="color: green;cursor: pointer;padding:10px"
                                    (click)="ecfwiseAPapprove(list)"></i>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div *ngIf="approvalECFSummary ?.length == 0" style="margin-left: 42%;">
                    <h3>Sorry data not found!.. </h3>
                </div>
            </div>

            <div class="row" *ngIf="isapECFsummarypage" style="width: 85%;">
                <div class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
                    <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -190px;">
                        Total Count:{{ecfApprovalCount}}
                    </p>
                </div>
                <div class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left:15%">
                    <button mat-icon-button [disabled]="has_apbatchpageprevious === false" color="primary"
                        (click)="previousClickapECF()" id="ecfap-0119">
                        <mat-icon>arrow_back</mat-icon>
                    </button> {{apECFpresentpage}}
                    <button mat-icon-button [disabled]="has_apbatchpagenext === false" color="primary"
                        (click)="nextClickapECF()" id="ecfap-0120">
                        <mat-icon>arrow_forward</mat-icon>
                    </button>
                    <!-- <mat-paginator
                                (page)="handlePageEvent($event)"
                                [length]="length_ecf"
                                [pageSize]="pageSize_ecf"
                                [showFirstLastButtons]="showFirstLastButtons"
                                [pageSizeOptions]="pageSizeOptions"
                                [pageIndex]="pageIndex"
                                [hidePageSize]="true"
                                aria-label="Select page">
                            </mat-paginator> -->
                </div>
            </div>



        </div>

        <div *ngIf="approveTypeForm?.value?.type == 1">
            <div class="col-md-12">
                <h3>Batch Search </h3>
                <form [formGroup]="apbatchSearchForm">

                    <lib-vs-search-cmp id="matInput-size" [SearchArr]="branchwisesearch" [Outputtype]="searchvar"
                        (dataoutput)="summarysearch($event)" [ButtonArr]="templatebutton" Tooltip="true">
                    </lib-vs-search-cmp>

                    <div class="row col-md-12">
                        <div class="col-md-2">
                            <mat-form-field style="width: 11rem;margin-left: -6px; ">
                                <mat-label>Batch No</mat-label>
                                <input matInput formControlName="batchno" autocomplete="off" id="ecfap-0121">
                            </mat-form-field>
                        </div>
                        <div class="col-md-2" style="margin-left: 35px;">
                            <mat-form-field style="width: 9rem;">
                                <mat-label>From Date</mat-label>
                                <input matInput [matDatepicker]="picker" formControlName="fromdate" autocomplete="off"
                                    id="ecfap-0122">
                                <mat-datepicker-toggle matSuffix [for]="picker">
                                    <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                                </mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                            </mat-form-field>
                        </div>
                        <div class="col-md-2" style="margin-left: 14px;">
                            <mat-form-field style="width: 9rem; ">
                                <mat-label>To date</mat-label>
                                <input matInput [matDatepicker]="picker1" formControlName="todate" autocomplete="off"
                                    id="ecfap-0123">
                                <mat-datepicker-toggle matSuffix [for]="picker1">
                                    <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                                </mat-datepicker-toggle>
                                <mat-datepicker #picker1></mat-datepicker>
                            </mat-form-field>
                        </div>
                        <div class="col-md-2">
                            <mat-form-field style="width: 11rem;margin-left: 8px; ">
                                <mat-label>ECF Count</mat-label>
                                <input matInput formControlName="batchcount" autocomplete="off" id="ecfap-0124">
                            </mat-form-field>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-outline-primary" type="submit"
                                style="border-radius:40px;margin-left: 50px;" color="primary"
                                (click)="batchSummarySearch()" id="ecfap-0125"><i matTooltip="Search"
                                    matTooltipClass="custom-tooltipnew" class="fa fa-search"
                                    aria-hidden="true"></i></button>
                            <button class="btn btn-outline-primary" type="button"
                                style="border-radius:40px;margin-left: 10px;" color="primary" (click)="resetapbatch()"
                                id="ecfap-0126">Reset</button>
                        </div>
                    </div>
                </form>
            </div>
            <h3>Batch Summary </h3>
            <div style="margin-top: 2%;margin-left: 22px; width: 95%;">
                <table class="table table-bordered scrolltable" fixed-header style="text-align:center;">

                    <thead>
                        <tr class="table_header " fixed-header style="text-align: center;margin-left: 3%;">


                            <th>S.No</th>
                            <th>Batch No</th>
                            <th>Batch Date</th>
                            <th>Batch Amount</th>
                            <th>ECF Count</th>
                            <th>Raiser Branch</th>
                            <th>Raiser Name</th>
                            <th>Approver Name</th>
                            <th>Lock</th>
                            <th>View</th>
                            <!-- <th>Edit</th> -->
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let lists of batchSummary; index as i" style="text-align: center;">
                            <td> {{(apbatchpresentpage - 1)*appagesizebatch +i+1 }} </td>
                            <td>{{lists?.batchno}}</td>
                            <td style="white-space:nowrap">{{lists?.batch_date | date:'dd-MMM-yyyy'}}</td>
                            <td style="text-align: right;">{{lists?.batchamount|currency:'INR'}}</td>
                            <td>{{lists?.batchcount}}</td>
                            <td style="text-align: left">{{lists?.branchname}}</td>
                            <td>{{lists?.raisername}}</td>
                            <td>{{lists?.approvername}}</td>
                            <td><i class="material-icons">lock</i></td>
                            <td>
                                <i matTooltip="View" matTooltipClass="custom-tooltipnew" class=" fa fa-eye create "
                                    style="color: green;cursor: pointer;padding:10px" (click)="batchView(lists)"></i>
                            </td>
                            <!-- <td>
                        <button mat-icon-button matTooltip=" Edit" class="iconbutton" color="primary" id="ecfap-0127">
                            <mat-icon style="color: grey;" aria-label="Edit" (click)="batchEdit(lists)">edit</mat-icon>
                        </button>
                    </td> -->
                        </tr>
                    </tbody>
                </table>

                <div *ngIf="batchSummary ?.length == 0" style="margin-left: 42%;">
                    <h3>Sorry data not found!.. </h3>
                </div>
                <div class="row" *ngIf="isapbatchsummarypage">
                    <div class="col-sm-2" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
                        <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -223px;">
                            Total Count:{{getapbatchtotalcount}}
                        </p>
                    </div>
                    <div class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left:105px">
                        <button mat-icon-button [disabled]="has_apbatchpageprevious === false" color="primary"
                            (click)="previousClickapbatch()" id="ecfap-0128">
                            <mat-icon>arrow_back</mat-icon>
                        </button> {{apbatchpresentpage}}
                        <button mat-icon-button [disabled]="has_apbatchpagenext === false" color="primary"
                            (click)="nextClickapbatch()" id="ecfap-0129">
                            <mat-icon>arrow_forward</mat-icon>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div *ngIf="BounceSummaryForm">
        <div class="col-md-12">
            <p style="color:black;font-size: 18px;margin-top: 20px;margin-left: 6px;">
                AP Bounce Search
            </p>
            <form [formGroup]="bounceForm">
                <div class="row col-md-12">
                    <div class="col-md-2">
                        <mat-form-field style="width:200px;margin-left:-10px">
                            <mat-label>CR No</mat-label>
                            <input matInput formControlName="crno" autocomplete="off" id="ecfap-0130">
                        </mat-form-field>
                    </div>
                    <div class="col-md-2" style="width: 200px; margin-left: 10px;">
                        <mat-form-field style="width:200px">
                            <mat-select placeholder="ECF Type" formControlName="aptype" id="ecfap-0131">
                                <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                    {{type.text}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="col-md-2" style="width: 200px; margin-left: 10px;">
                        <mat-form-field style="width: 11rem;margin-left: 8px; ">
                            <mat-label>Raiser Name</mat-label>
                            <input matInput formControlName="raiser_name" autocomplete="off" type="number"
                                id="ecfap-0132">
                        </mat-form-field>
                    </div>
                    <div class="col-md-2">
                        <mat-form-field style="width: 200px; margin-left: 10px; " (click)="getheaderbranch()">

                            <input #branchInput matInput formControlName="branch_id"
                                [matAutocomplete]="matbranchAutocomplete" placeholder="Branch" id="ecfap-0133">
                            <mat-autocomplete [panelWidth]="400" #matbranchAutocomplete="matAutocomplete"
                                [displayWith]="displayFnbranchrole" (opened)="branchScroll()">
                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                <ng-container *ngIf="!isLoading">
                                    <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                        matTooltip="{{branch.code}}-{{branch.name}}"
                                        matTooltipClass="custom-tooltipnew">
                                        {{branch.code}}-{{branch.name}}
                                    </mat-option>
                                </ng-container>
                            </mat-autocomplete>
                        </mat-form-field>
                    </div>
                </div>

                <div class="row col-md-12">
                    <div class="col-md-2">
                        <mat-form-field style="width: 200px;margin-left: -10px; ">
                            <mat-label>Invoice No</mat-label>
                            <input matInput formControlName="invoice_no" autocomplete="off" id="ecfap-0134">
                        </mat-form-field>
                    </div>
                    <div class="col-md-2">
                        <mat-form-field style="width: 200px; margin-left: 10px; ">
                            <mat-label>Invoice Amount</mat-label>
                            <input matInput formControlName="invoice_amount1" autocomplete="off" id="ecfap-0135">
                        </mat-form-field>
                    </div>
                    <div class="col-md-2">
                        <mat-form-field style="width: 200px; margin-left: 10px; ">
                            <mat-label>Minimum Amount</mat-label>
                            <input matInput formControlName="minamt" autocomplete="off" type="number" id="ecfap-0136">
                        </mat-form-field>
                    </div>
                    <div class="col-md-2">
                        <mat-form-field style="width: 200px; margin-left: 10px; ">
                            <mat-label>Maximum Amount</mat-label>
                            <input matInput formControlName="maxamt" autocomplete="off" type="number" id="ecfap-0137">
                        </mat-form-field>
                    </div>
                    <div class="col-md-3">
                        <button class="btn btn-outline-primary" type="submit"
                            style="border-radius:40px;margin-left: 50px;" color="primary"
                            (click)="bounceSummarySearch()" id="ecfap-0138"><i matTooltip="Search"
                                matTooltipClass="custom-tooltipnew" class="fa fa-search"
                                aria-hidden="true"></i></button>
                        <button class="btn btn-outline-primary" type="button"
                            style="border-radius:40px;margin-left: 10px;" color="primary" (click)="resetbounce()"
                            id="ecfap-0139">Reset</button>
                    </div>
                </div>
            </form>
        </div>

        <p style="color:black;font-size: 18px;margin-top: 20px;margin-left: 20px;">
            AP Bounce Summary
        </p>
        <div style="margin-top: 2%;margin-left: 15px; width: 77%;">
            <table class="table table-bordered  padsize" fixed-header style="text-align:center;">

                <thead>
                    <tr class="table_header" fixed-header
                        style="white-space: nowrap;text-align: center;margin-left: 3%;">


                        <th>S.No</th>
                        <th>CR No</th>
                        <th>ECF Type</th>
                        <th>Batch No</th>
                        <th>Supplier Name</th>
                        <th>Employee</th>
                        <th>Employee Branch</th>
                        <th>AP Date</th>
                        <th>AP Amount</th>
                        <th>Invoice Status</th>
                        <th>View</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let lists of bounceSummary; index as i" style="white-space: nowrap;text-align: center;">
                        <td> {{(bouncepresentpage - 1)*pagesizebounce +i+1 }} </td>
                        <td>{{lists?.crno}}</td>
                        <td>{{lists?.aptype.text}}</td>
                        <td>{{lists?.batch_no}}</td>
                        <td>{{lists?.supplier_data.name}}</td>
                        <td>{{lists?.raisername}}</td>
                        <td>{{lists?.raiserbranch_branch?.name_code }}</td>
                        <td>{{lists?.apdate | date:'dd/MM/yyyy'}}</td>
                        <td>{{lists?.apamount|currency:'INR'}}</td>
                        <td>{{lists?.apinvoicehdr_status.text}}</td>
                        <td>
                            <i matTooltip="View" matTooltipClass="custom-tooltipnew" class=" fa fa-eye create "
                                style="color: green;cursor: pointer;padding:10px" (click)="bounceView(lists)"></i>
                        </td>
                    </tr>
                </tbody>
            </table>

            <div *ngIf="bounceSummary ?.length == 0" style="margin-left: 42%;">
                <h3>Sorry data not found!.. </h3>
            </div>
            <div class="row" *ngIf="isbouncesummarypage">
                <div class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
                    <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -220px;">
                        Total Count:{{getbouncetotalcount}}
                    </p>
                </div>
                <div class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left:105px">
                    <button mat-icon-button [disabled]="has_bouncepageprevious === false" color="primary"
                        (click)="previousClickbounce()" id="ecfap-0140">
                        <mat-icon>arrow_back</mat-icon>
                    </button> {{bouncepresentpage}}
                    <button mat-icon-button [disabled]="has_bouncepagenext === false" color="primary"
                        (click)="nextClickbounce()" id="ecfap-0141">
                        <mat-icon>arrow_forward</mat-icon>
                    </button>
                </div>
            </div>
        </div>
    </div>


    <div *ngIf="BounceDetailForm">
        <app-bounce-detail (onCancel)="bouncebackviews()"></app-bounce-detail>
    </div>



    <div *ngIf="PreparepaymentForms">
        <div class="col-md-12">
            <h3 style="margin-left: 8px;margin-top: 5px;">Prepare Payment
                Search </h3>
            <form [formGroup]="PPSearchForm">
                <div class="row col-md-12">
                    <div class="col-md-2">
                        <mat-form-field style="width: 11rem;margin-left: -5px; " (click)="ppsuppliername()">
                            <mat-label>Supplier Name</mat-label>
                            <input #supplierInputs placeholder="Choose Supplier" matInput formControlName="supplier_id"
                                [matAutocomplete]="supps" id="ecfap-0142">
                            <mat-autocomplete [panelWidth]="400" #supps="matAutocomplete" (opened)="PPsupplierScroll()"
                                [displayWith]="displayFnppSupplier">
                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                <ng-container *ngIf="!isLoading">
                                    <mat-option *ngFor="let supplier of ppsupplierList" [value]="supplier"
                                        matTooltip="{{supplier.name}}"
                                        matTooltipClass="custom-tooltipnew">{{supplier.name}}
                                    </mat-option>
                                </ng-container>
                            </mat-autocomplete>
                        </mat-form-field>
                    </div>
                    <div class="col-md-2" style="margin-left: 30px;">
                        <mat-form-field style="width: 11rem;margin-left: 8px; ">
                            <mat-label>CR No</mat-label>
                            <input matInput formControlName="crno" autocomplete="off" id="ecfap-0143">
                        </mat-form-field>
                        <!-- <mat-form-field style="width: 9rem;">
                            <mat-label>From Date</mat-label>
                            <input matInput [matDatepicker]="picker" formControlName="fromdate" autocomplete="off" id="ecfap-0144">
                            <mat-datepicker-toggle matSuffix [for]="picker">
                                <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                            </mat-datepicker-toggle>
                            <mat-datepicker #picker></mat-datepicker>
                        </mat-form-field> -->
                    </div>
                    <div class="col-md-2" style="margin-left: 35px;">
                        <!-- <mat-form-field style="width: 9rem; ">
                            <mat-label>To date</mat-label>
                            <input matInput [matDatepicker]="picker1" formControlName="todate" autocomplete="off" id="ecfap-0145">
                            <mat-datepicker-toggle matSuffix [for]="picker1">
                                <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                            </mat-datepicker-toggle>
                            <mat-datepicker #picker1></mat-datepicker>
                        </mat-form-field> -->
                        <mat-form-field style="width: 11rem;margin-left: 8px; ">
                            <mat-label>Invoice CR No</mat-label>
                            <input matInput formControlName="apinvoiceheader_crno" autocomplete="off" id="ecfap-0146">
                        </mat-form-field>
                    </div>
                    <div class="col-md-2">
                        <mat-form-field style="width: 11rem;margin-left: 35px; ">
                            <mat-label>ECF Type</mat-label>
                            <mat-select formControlName="ecftype" id="ecfap-0147">
                                <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                    {{type.text}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="col-md-3">
                        <button class="btn btn-outline-primary" type="submit"
                            style="border-radius:40px;margin-left: 70px;margin-bottom: -30px;" color="primary"
                            (click)="ppSummarySearch()" id="ecfap-0148"><i matTooltip="Search"
                                matTooltipClass="custom-tooltipnew" class="fa fa-search"
                                aria-hidden="true"></i></button>
                        <button class="btn btn-outline-primary" type="button"
                            style="border-radius:40px;margin-left: 10px;margin-bottom: -30px;" color="primary"
                            (click)="resetpp()" id="ecfap-0149">Reset</button>
                    </div>
                </div>
            </form>
        </div>
        <h3 style="margin-left: 20px;">Prepare Payment Summary </h3>
        <!-- <div style="margin-top: 2%;margin-left: 20px; width: 98%;"> -->


        <!-- <table class="table table-bordered scrolltable" fixed-header style="text-align:center;" >	
                
                <thead>
                    <tr class="table_header" fixed-header> -->
        <div class="table-responsive ccbstable"
            style="margin-top: 2%;margin-left: 18px;overflow: auto;height:300px;margin-bottom: 1%;width:1250px">
            <table class="table table-bordered scrolltable" fixed-header>


                <thead style="text-align: center;margin-left: 3%;">
                    <tr class="table_header " fixed-header>

                        <th>S.No</th>
                        <th>Batch No</th>
                        <th>CR No</th>
                        <th>Invoice CR No</th>
                        <th>ECF Type</th>
                        <th>ECF Date</th>
                        <th>ECF Amount</th>
                        <th>Invoice No</th>
                        <th>Supplier Name</th>
                        <th>Invoice Date</th>
                        <th>Invoice Amount</th>
                        <th>Invoice Status</th>
                        <th>Select</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let lists of ppSummary; index as i">
                        <td> {{(pppresentpage - 1)*pagesizepp +i+1 }} </td>
                        <td>{{lists?.batchno}}</td>
                        <td>{{lists?.crno}}</td>
                        <td>{{lists?.apinvoiceheader_crno}}</td>
                        <td style="white-space:nowrap">{{lists?.ecftype}}</td>
                        <td style="white-space:nowrap">{{lists?.ecfdate | date:'dd-MMM-yyyy'}}</td>
                        <td style="text-align: right;">{{lists?.ecfamount|currency:'INR'}}</td>
                        <td>{{lists?.invoiceno}}</td>
                        <td>{{lists?.supplier_id?.name}}</td>
                        <td style="white-space:nowrap"> {{lists?.invoicedate | date:'dd-MMM-yyyy'}}</td>
                        <td style="text-align: right;white-space:nowrap">{{lists?.totalamount|currency:'INR'}}</td>
                        <td>{{lists?.apinvoiceheaderstatus}}</td>
                        <td>
                            <section class="example-section ecfapcheck">
                                <mat-checkbox class="example-margin" (change)="hdrselect($event,i)"> </mat-checkbox>
                            </section>
                        </td>
                    </tr>

                </tbody>
            </table>

            <div *ngIf="ppSummary ?.length == 0" style="margin-left: 42%;">
                <h3>Sorry data not found!.. </h3>
            </div>
        </div>
        <div class="row" *ngIf="isppsummarypage" style="width: 85%;">
            <div class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
                <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -84%;">
                    Total Count:{{getpptotalcount}}
                </p>
            </div>
            <div class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left:18%">
                <button mat-icon-button [disabled]="has_pppageprevious === false" color="primary"
                    (click)="previousClickpp()" id="ecfap-0150">
                    <mat-icon>arrow_back</mat-icon>
                </button> {{pppresentpage}}
                <button mat-icon-button [disabled]="has_pppagenext === false" color="primary" (click)="nextClickpp()"
                    id="ecfap-0151">
                    <mat-icon>arrow_forward</mat-icon>
                </button>
            </div>
        </div>
        <div style="margin-bottom: 3%;margin-top:-80px">
            <form [formGroup]="SubmitPreparepayForm">

                <mat-form-field style="width: 250px;font-family: 'Times New Roman', Times, serif;margin-left: 350px;">
                    <input matInput placeholder="Remarks" formControlName="remarks" autocomplete="off" id="ecfap-0152">
                </mat-form-field>
                <button type="button"
                    style="border-radius:40px;margin-left:25px;font-family: 'Times New Roman', Times, serif;margin-bottom: 0px;"
                    class="btn btn-outline-primary" (click)="preparePay()" id="ecfap-0153">
                    Prepare Payment</button>
            </form>
        </div>

    </div>

    <div *ngIf="paymentfileForm">
        <div class="col-md-12">
            <h3 style="margin-left: 8px;margin-top: 5px;">Payment File
                Search </h3>
            <form [formGroup]="PFSearchForm">
                <div class="row col-md-12">
                    <div class="col-md-2">
                        <mat-form-field style="width: 11rem;margin-left: -7px; " (click)="suppliername()">

                            <mat-label>Supplier Name</mat-label>
                            <input #supplierInput placeholder="Choose Supplier" matInput formControlName="supplier_id"
                                [matAutocomplete]="supp" id="ecfap-0154">
                            <mat-autocomplete [panelWidth]="400" #supp="matAutocomplete" (opened)="supplierScroll()"
                                [displayWith]="displayFnSupplier">
                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                <ng-container *ngIf="!isLoading">
                                    <mat-option *ngFor="let supplier of supplierList" [value]="supplier"
                                        matTooltip="{{supplier.name}}"
                                        matTooltipClass="custom-tooltipnew">{{supplier.name}}
                                    </mat-option>
                                </ng-container>
                            </mat-autocomplete>

                        </mat-form-field>
                    </div>
                    <div class="col-md-2" style="margin-left: 14px;">
                        <mat-form-field style="width: 11rem;margin-left: 8px; ">
                            <mat-label>CR No</mat-label>
                            <input matInput formControlName="crno" autocomplete="off" id="ecfap-0155">
                        </mat-form-field>
                        <!-- <mat-form-field style="width: 9rem;">
                                <mat-label>From Date</mat-label>
                                <input matInput [matDatepicker]="picker" formControlName="fromdate" autocomplete="off" id="ecfap-0156">
                                <mat-datepicker-toggle matSuffix [for]="picker">
                                    <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                                </mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                            </mat-form-field> -->
                    </div>
                    <div class="col-md-2" style="margin-left: 14px;">
                        <!-- <mat-form-field style="width: 9rem; ">
                                <mat-label>To date</mat-label>
                                <input matInput [matDatepicker]="picker1" formControlName="todate" autocomplete="off" id="ecfap-0157">
                                <mat-datepicker-toggle matSuffix [for]="picker1">
                                    <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                                </mat-datepicker-toggle>
                                <mat-datepicker #picker1></mat-datepicker>
                            </mat-form-field> -->
                        <mat-form-field style="width: 11rem;margin-left: 25px; ">
                            <mat-label>Invoice CR No</mat-label>
                            <input matInput formControlName="apinvoiceheader_crno" autocomplete="off" id="ecfap-0158">
                        </mat-form-field>
                    </div>
                    <div class="col-md-2">
                        <mat-form-field style="width: 11rem;margin-left: 55px; ">
                            <mat-label>ECF Type</mat-label>
                            <mat-select formControlName="ecftype" id="ecfap-0159">
                                <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                    {{type.text}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="col-md-3">
                        <button class="btn btn-outline-primary" type="submit"
                            style="border-radius:40px;margin-left: 90px;margin-bottom: -30px;" color="primary"
                            (click)="PFSummarySearch()" id="ecfap-0160"><i matTooltip="Search"
                                matTooltipClass="custom-tooltipnew" class="fa fa-search"
                                aria-hidden="true"></i></button>
                        <button class="btn btn-outline-primary" type="button"
                            style="border-radius:40px;margin-left: 10px;margin-bottom: -30px;" color="primary"
                            (click)="resetpf()" id="ecfap-0161">Reset</button>
                    </div>
                </div>
            </form>
        </div>
        <h3 style="margin-left: 21px;">Payment File Summary </h3>
        <!-- <div  style="margin-top: 2%;margin-left: 21px; width: 98%;">
               
                <table class="table table-bordered scrolltable" fixed-header style="text-align:center;" >	
                    
                    <thead>
                        <tr class="table_header" fixed-header style="text-align: center;margin-left: 3%;"> -->
        <div class="table-responsive ccbstable"
            style="margin-top: 2%;margin-left: 20px;overflow: auto;height:300px;margin-bottom: 1%;width:1250px">
            <table class="table table-bordered scrolltable" fixed-header>


                <thead style="text-align: center;margin-left: 3%;">
                    <tr class="table_header " fixed-header>


                        <th>S.No</th>
                        <th>Batch No</th>
                        <th>CR No</th>
                        <th>Invoice CR No</th>
                        <th>ECF Type</th>
                        <th>ECF Date</th>
                        <th>ECF Amount</th>
                        <th>Invoice No</th>
                        <th>Supplier Name</th>
                        <th>Invoice Date</th>
                        <th>Invoice Amount</th>
                        <th>Invoice Status</th>
                        <th>Select</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let lists of pfSummary; index as i" style="text-align: center;">
                        <td> {{(pfpresentpage - 1)*pfpagesize +i+1 }} </td>
                        <td>{{lists?.batchno}}</td>
                        <td>{{lists?.crno}}</td>
                        <td>{{lists?.apinvoiceheader_crno}}</td>
                        <td style="white-space:nowrap;">{{lists?.ecftype}}</td>
                        <td style="white-space:nowrap;">{{lists?.ecfdate | date:'dd-MMM-yyyy'}}</td>
                        <td style="text-align: right;">{{lists?.ecfamount|currency:'INR'}}</td>
                        <td>{{lists?.invoiceno}}</td>
                        <td>{{lists?.supplier_id?.name}}</td>
                        <td style="white-space:nowrap;">{{lists?.invoicedate | date:'dd-MMM-yyyy'}}</td>
                        <td style="text-align: right;white-space:nowrap;">{{lists?.totalamount|currency:'INR'}}</td>
                        <td>{{lists?.apinvoiceheaderstatus}}</td>
                        <td>
                            <button mat-icon-button class="btn btn-outline-primary" style="margin-left: 1px;"
                                matTooltip="Click to Pay" matTooltipClass="custom-tooltipnew" data-toggle="modal"
                                data-target="#ecfap-0005" (click)="pvnoget(lists)" id="ecfap-0162">
                                <mat-icon>paid</mat-icon>
                            </button>
                        </td>
                    </tr>

                </tbody>
            </table>

            <div *ngIf="pfSummary ?.length == 0" style="margin-left: 42%;">
                <h3>Sorry data not found!.. </h3>
            </div>
        </div>
        <div class="row" *ngIf="ispfsummarypage" style="width: 85%;">
            <div class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-220px;">
                <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -82%;">
                    Total Count:{{getpftotalcount}}
                </p>
            </div>
            <div class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left:18%">
                <button mat-icon-button [disabled]="has_pfpageprevious === false" color="primary"
                    (click)="previousClickpf()" id="ecfap-0163">
                    <mat-icon>arrow_back</mat-icon>
                </button> {{pfpresentpage}}
                <button mat-icon-button [disabled]="has_pfpagenext === false" color="primary" (click)="nextClickpf()"
                    id="ecfap-0164">
                    <mat-icon>arrow_forward</mat-icon>
                </button>
            </div>
        </div>

    </div>

    <div *ngIf="CommonSummaryForm">
        <!-- <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;"> -->
        <!-- <h3>
            Common ECF Summary
        </h3> -->

        <!-- <div class="search-auto-fit">
            <lib-vs-search-cmp id="matInput-size" [SearchArr]="commonsearchsearch" [Outputtype]="searchvar"
                (dataoutput)="commonsumSearch($event)" [ButtonArr]="commonsumbutton" [SeparateReset]="true"
                Tooltip="true" (ResetOutput)="resetcommon($event)">
            </lib-vs-search-cmp>
        </div> -->
                        <!-- <div>
                      <button class="btn btn-outline-primary" type="button"
                                        style="border-radius:40px;margin-left: 10px;;width: 50px" matTooltip="Reset"
                                        matTooltipClass="custom-tooltipnew" (click)="resetcommon($event)" id="ecfap-0177">
                                       <mat-icon  style="margin-top: 3px;margin-bottom: 0px;" aria-hidden="true">refresh</mat-icon></button>
                                       <button class="btn btn-outline-primary" type="button" matTooltip="Report Download"
                                        matTooltipClass="custom-tooltipnew" data-toggle="modal" data-target="#ecfap-0286"
                                       style="border-radius:40px;margin-left: 10px;;width: 50px" 
                                      color="primary" id="ecfap-0178">
                                      <mat-icon style="margin-top: 3px;margin-bottom: 0px;"
                                       aria-hidden="true">download</mat-icon></button>
                        </div> -->

                           <div class="ecf-summary-header">
                                 <h3 class="summary-title">Common ECF Summary</h3>

                            <div class="summary-actions">
                                    <button class="circle-icon-btn-md" matTooltip="Reset" (click)="overallreset()">
                                    <mat-icon aria-hidden="true">refresh</mat-icon>
                                    </button>
  
                                    <button class="circle-icon-btn-md" matTooltip="Report Download" data-toggle="modal" data-target="#ecfap-0286">
                                      <mat-icon aria-hidden="true">download</mat-icon>
                                     </button>
                              </div>
                                </div>




        <!----------------------------->
        <div>
            <form [formGroup]="commonForm">
                <table>
                    <div>
                        <tr>
                            <!-- <td>
                                        <mat-form-field style="width:130px;margin-left: 10px;">
                                            <mat-label>Invoice CR No</mat-label>
                                            <input matInput formControlName="invoiceheader_crno" autocomplete="off"
                                                id="ecfap-0165">
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <button type="button" class="btn btn-outline-primary" matTooltip="Select Supplier"
                                            matTooltipClass="custom-tooltipnew"  style="border-radius:40px;margin-left: 5px;"
                                            id="ecfap-0166"><i class="fa fa-arrow-up"></i> -->
                            <!-- data-toggle="modal" data-target="#ecfap-0016" -->
                            <!-- </button>
                                        <mat-form-field style="width: 150px;margin-left: 5px; ">
    
                                            <mat-label>Supplier Name</mat-label>
                                            <input #supplierInput placeholder="Choose Supplier" matInput readonly
                                                formControlName="supplier_id" [matAutocomplete]="supp" id="ecfap-0167">
                                            <mat-autocomplete [panelWidth]="400" #supp="matAutocomplete"
                                                (opened)="supplierScroll()" [displayWith]="displayFnSupplier">
                                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                                <ng-container *ngIf="!isLoading">
                                                    <mat-option *ngFor="let supplier of supplierList" [value]="supplier"
                                                        matTooltip="{{supplier.name}}"
                                                        matTooltipClass="custom-tooltipnew">{{supplier.name}}
                                                    </mat-option>
                                                </ng-container>
                                            </mat-autocomplete>
                                        </mat-form-field>
                                    </td> -->
                            <!-- <td>
                                            <mat-form-field style="width: 150px; margin-left: 15px;">
                                                <mat-label>Minimum Amount</mat-label>
                                                <input matInput formControlName="minamt" autocomplete="off" type="number" id="ecfap-0168">
                                            </mat-form-field>
                                        </td>
                                        <td>
                                            <mat-form-field style="width: 150px; margin-left: 15px; ">
                                                <mat-label>Maximum Amount</mat-label>
                                                <input matInput formControlName="maxamt" autocomplete="off" type="number" id="ecfap-0169">
                                            </mat-form-field>
                                        </td> -->
                            <!-- <td>
                                        <mat-form-field style="width: 150px; margin-left: 15px; "
                                            (click)="getRaiserbranch()">
    
                                            <input #raiserbrInput matInput formControlName="raiserbranch_id"
                                                [readonly]="MakerPermFlg" [matAutocomplete]="matraiserAutocomplete"
                                                placeholder="Raiser Branch" id="ecfap-0170">
                                            <mat-autocomplete [panelWidth]="400" #matraiserAutocomplete="matAutocomplete"
                                                [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                                <ng-container *ngIf="!isLoading">
                                                    <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                                        matTooltip="{{branch.code}}-{{branch.name}}"
                                                        matTooltipClass="custom-tooltipnew">
                                                        {{branch.code}}-{{branch.name}}
                                                    </mat-option>
                                                </ng-container>
                                            </mat-autocomplete>
                                        </mat-form-field>
                                    </td>
                                    <td> -->
                            <!-- <mat-form-field style="width:200px;margin-left: 50px;">
                                                <mat-label>Employee</mat-label>
                                                <input matInput formControlName="raiser_name" autocomplete="off"  id="ecfap-0171">
                                            </mat-form-field> -->

                            <!-- <mat-form-field style="width:150px;margin-left: 15px;"
                                            (click)="getraiserdropdown()">
                                            <mat-label>Raiser</mat-label>
                                            <input #raiserInput matInput formControlName="raiser_name"
                                                [matAutocomplete]="raisertyperole" placeholder="Choose Employee"
                                                id="ecfap-0172">
                                            <mat-autocomplete [panelWidth]="400" #raisertyperole="matAutocomplete"
                                                [displayWith]="displayFnraiserrole" (opened)="raiserScroll()">
                                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                                <ng-container *ngIf="!isLoading">
                                                    <mat-option *ngFor="let data of Raiserlist" [value]="data"
                                                        matTooltip="{{data.full_name}}" matTooltipClass="custom-tooltipnew">
                                                        {{data.full_name}}
                                                    </mat-option>
                                                </ng-container>
                                            </mat-autocomplete>
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field style="width:150px;margin-left: 15px;">
                                            <mat-select placeholder="ECF Type" formControlName="aptype" id="ecfap-0173">
                                                <mat-option *ngFor="let type of TypeList" [value]="type.id"
                                                    matTooltip="{{type.text}}" matTooltipClass="custom-tooltipnew">
                                                    {{type.text}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </td> -->
                            <!-- <td>
                                        <button *ngIf="!expanded" type="button" matTooltip="Show More"
                                            matTooltipClass="custom-tooltipnew" class="btn btn-outline-primary"
                                            style="border-radius:30px;margin-left: 10px;" (click)="expanded = true;"
                                            id="ecfap-0174"><mat-icon
                                                style="margin-top: 0px;margin-bottom: 0px;">keyboard_arrow_down</mat-icon>
                                            More</button>
                                        <button *ngIf="expanded" type="button" matTooltip="Show Less"
                                            matTooltipClass="custom-tooltipnew" class="btn btn-outline-primary"
                                            style="border-radius:40px;margin-left: 10px;" (click)="expanded = false;"
                                            id="ecfap-0175"><mat-icon>keyboard_arrow_up</mat-icon> Less</button>
                                        <button class="btn btn-outline-primary" type="submit"
                                            style="border-radius:40px;margin-left: 10px;" color="primary"
                                            (click)="commonSummarySearch('')" id="ecfap-0176"><i matTooltip="Search"
                                                matTooltipClass="custom-tooltipnew" class="fa fa-search"
                                                aria-hidden="true"></i></button>
                                        <button class="btn btn-outline-primary" type="button"
                                            style="border-radius:40px;margin-left: 10px;" color="primary"
                                            (click)="resetcommon()" id="ecfap-0177">Reset</button>
                                        <button class="btn btn-outline-primary" type="button"
                                            style="border-radius:40px;margin-left: 10px;" color="primary"
                                            (click)="getRptDownload(3)" id="ecfap-0178">Report Download</button>
                                    </td> -->

                        </tr>
                        <!-- Popup Filter -->
                        <div *ngIf="expanded" class="cus-filterSearchContainer">

                            <div class="cus-filterSearch">

                                <!-- <div id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Batch No</mat-label>
                                        <input matInput formControlName="batch_no" autocomplete="off" id="ecfap-0179">
                                    </mat-form-field>
                                </div> -->

                                <div id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Invoice No</mat-label>
                                        <input matInput formControlName="invoice_no" autocomplete="off" type="text"
                                            id="ecfap-0180">
                                    </mat-form-field>
                                </div>
                                <div id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Invoice Amount</mat-label>
                                        <input matInput formControlName="invoice_amount" autocomplete="off"
                                            type="number" id="ecfap-0181">
                                    </mat-form-field>
                                </div>
                                <!-- <div id="matInput-size"> 
                                <mat-form-field appearance="outline">
                                    <mat-label>Transaction From</mat-label>
                                    <input matInput [matDatepicker]="picker" formControlName="start_date"
                                        autocomplete="off" id="ecfap-0182">
                                    <mat-datepicker-toggle matSuffix [for]="picker">
                                        <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #picker></mat-datepicker>
                                </mat-form-field>
                               </div>
                        
                            <div id="matInput-size"> 
                                <mat-form-field appearance="outline">
                                    <mat-label>Transaction To</mat-label>
                                    <input matInput [matDatepicker]="picker1" formControlName="end_date"
                                        autocomplete="off" id="ecfap-0183">
                                    <mat-datepicker-toggle matSuffix [for]="picker1">
                                        <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #picker1></mat-datepicker>
                                </mat-form-field>
                            </div> -->


                                <div id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>GST No</mat-label>
                                        <input matInput formControlName="suppliergst_no" autocomplete="off"
                                            id="ecfap-0184">
                                    </mat-form-field>
                                </div>

                                <!-- <div id="matInput-size">
                                    <lib-vs-optiondd-cmp [InputFields]="Invoice" [formGroup]="commonForm"
                                        (dataEvent)="statusfun($event)"></lib-vs-optiondd-cmp> -->
                                <!-- <mat-form-field appearance="outline">
                                    <mat-select placeholder="Invoice Status" formControlName="invoice_status"
                                        [disabled]="commonForm.value.apinvoiceheaderstatus_id != '' "
                                        id="ecfap-0185">
                                        <mat-option *ngFor="let st of commonStatusList" [value]="st.id">
                                            {{st.text}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field> -->
                                <!-- </div> -->
                                <!-- <div id="matInput-size">
                                    <lib-vs-optiondd-cmp [InputFields]="report_status" [formGroup]="commonForm"
                                        (dataEvent)="invoicefun($event)"></lib-vs-optiondd-cmp> -->

                                <!-- <mat-form-field appearance="outline">
                                    <mat-select placeholder="Report Status"
                                        formControlName="apinvoiceheaderstatus_id"
                                        [disabled]="commonForm.value.invoice_status != '' " id="ecfap-0186">
                                        <mat-option *ngFor="let type of ecfStatusList" [value]="type.id">
                                            {{type.text}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field> -->
                                <!-- </div> -->

                                <div [ngStyle]="{'pointer-events': commonForm.value.apinvoiceheaderstatus_id != '' ? 'none' : 'auto',
                                 'opacity':commonForm.value.apinvoiceheaderstatus_id != '' ? '0.6' : '1'}">
                                    <lib-vs-optiondd-cmp id="matInput-size" [formGroup]="commonForm"
                                        [InputFields]="commoninvoicestatustype">
                                    </lib-vs-optiondd-cmp>

                                    <!--                                     
                                    <mat-form-field style="width:150px;margin-left: 15px;">
                                        <mat-select placeholder="Invoice Status" formControlName="invoice_status"
                                         [disabled]="commonForm.value.apinvoiceheaderstatus_id != '' " id="ecfap-0185">
                                            <mat-option *ngFor="let st of commonStatusList" [value]="st.id">
                                                {{st.text}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field> -->
                                </div>
                                <!-- <div [ngStyle]="{'pointer-events':commonForm.value.invoice_status != '' ? 'none' : 'auto',
                                     'opacity':commonForm.value.invoice_status != '' ? '0.6' : '1'}">

                                    <lib-vs-optiondd-cmp id="matInput-size" [formGroup]="commonForm"
                                        [InputFields]="commonstatustype">
                                    </lib-vs-optiondd-cmp> -->
                                    <!-- <mat-form-field style="width: 150px; margin-left: 15px; ">
                                        <mat-select placeholder="Report Status" formControlName="apinvoiceheaderstatus_id"
                                        [disabled]="commonForm.value.invoice_status != '' " id="ecfap-0186">
                                            <mat-option *ngFor="let type of ecfStatusList" [value]="type.id">
                                                {{type.text}}
                                            </mat-option>
                                        </mat-select>
                                        </mat-form-field> -->
                                <!-- </div> -->
                                <div class="npm-mat-edit-expand">
                                    <lib-vs-sep-dates-cmp id="matInput-size" [DateInput]="frtodate"
                                        [formGroup]="commonForm">
                                    </lib-vs-sep-dates-cmp>
                                </div>
                                <div>
                                    <!-- <mat-form-field style="width:130px;margin-left: 10px;">
                                        <mat-select placeholder="ECF Type" formControlName="aptype" id="ecfap-0173">
                                            <mat-option *ngFor="let type of TypeList" [value]="type.id" matTooltip="{{type.text}}" matTooltipClass="custom-tooltipnew">
                                                {{type.text}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field> -->
                                    <lib-vs-optiondd-cmp id="matInput-size" [InputFields]="ecfdroptype"
                                        [formGroup]="commonForm">
                                    </lib-vs-optiondd-cmp>
                                </div>
                                <div class="cus-filterSearch-btnDiv">

                                    <button class="btn btn-outline-danger" style="border-radius:40px" color="primary"
                                        (click)="overallreset()">

                                        Reset
                                    </button>

                                    <div class="btn-align">
                                        <button class="btn btn-outline-success" style="border-radius:40px" type="submit"
                                            (click)="commonSummarySearch($event)" color="primary">
                                            Apply
                                        </button>
                                        <button class="btn btn-outline-primary" style="border-radius:40px"
                                            (click)="close()">
                                            Cancel
                                        </button>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </table>


            </form>
        </div>

        <!-- <div  style="margin-top: 2%;margin-left: 20px; width: 77%;">
            <table class="table table-bordered  padsize" style="text-align:center;" >	
                
                <thead>
                    <tr class="table_header tableset " style="text-align: center;margin-left: 3%;">

             -->
        <!-- <h3>
            Common ECF Summary
        </h3> -->
        <!-- <lib-vs-cbox-summary [SummaryDetails]="SummarycommonecfData" [ResetForm]="restcommonformummary" [SummaryApiObj]="SummaryApicommonecfObjNew"
            [FirstLastbtn]="true"></lib-vs-cbox-summary> -->
            <lib-vs-cbox-summary [SummaryDetails]="SummarycommonecfData" [SummaryApiObj]="SummaryApicommonecfObjNew"
            [FirstLastbtn]="true" #cboxSummary (dataEvent)="ecfcommonsummarydata($event)"></lib-vs-cbox-summary>
            
        <!-- <lib-vs-cbox-summary    [SummaryDetails]="SummaryecfapData"
            [SummaryApiObj]="SummaryApiecfapObjNew"></lib-vs-cbox-summary> -->
        <!-- <div class="table-responsive" id="ecfap-0003" style="margin-top: 1%;margin-left: 10px; width: 95%;">
                <table class="table scrolltable table-bordered" style="text-align:center;">
                    <thead fixed-header>

                        <tr class="table_header " fixed-header>


                            <th style="width: 45px;">S.No</th>
                            <th>Invoice CR No</th>
                            <th>ECF Type</th>
                            <th>ECF Date</th>
                            <th>Batch No</th>
                            <th>Batch Status</th>
                            <th>Supplier Name</th>
                            <th>Raiser</th>
                            <th>Raiser Branch</th>
                            <th>Invoice No</th>
                            <th>Invoice Amount</th>
                            <th>Invoice Date</th>
                            <th>GST No</th>
                            <th>Invoice Status</th>
                            <th>View Entry</th>
                            <th>Download Covernote</th> -->
        <!-- <th>Action</th> -->
        <!-- </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let lists of commonSummary; index as i" style="text-align: center;">
                            <td style="width: 45px;"> {{(commonpresentpage - 1)*pagesizecommon +i+1 }} </td>
                            <td>
                                <p style="cursor: pointer;color: #3684BF;" (click)="linkView(lists)">
                                    {{lists?.apinvoiceheader_crno}}</p>
                            </td>
                            <td style="white-space: nowrap;">{{lists?.aptype.text}}</td>
                            <td style="white-space: nowrap;">{{lists?.apdate | date:'dd-MMM-yyyy'}}</td>
                            <td
                                *ngIf="lists?.batch_no != null && lists?.batch_no != undefined && lists?.batch_no != '' ">
                                {{lists?.batch_no}}</td>
                            <td
                                *ngIf="lists?.batch_no == null || lists?.batch_no == undefined || lists?.batch_no == '' ">
                                -</td>
                            <td
                                *ngIf="lists?.batch_status != null && lists?.batch_status != undefined && lists?.batch_status != '' ">
                                {{lists?.batch_status}}</td>
                            <td
                                *ngIf="lists?.batch_status == null || lists?.batch_status == undefined || lists?.batch_status == '' ">
                                -</td>
                            <td
                                *ngIf="lists?.supplier_data != null && lists?.supplier_data != undefined && lists?.supplier_data != '' ">
                                <div style="width: 200px;overflow: hidden"
                                    matTooltip="{{lists?.supplier_data?.name}} - {{lists?.supplier_data?.code}}"
                                    matTooltipClass="custom-tooltipnew">
                                    {{lists?.supplier_data?.name}} - {{lists?.supplier_data?.code}}
                                </div>
                            </td>
                            <td
                                *ngIf="lists?.supplier_data == null || lists?.supplier_data == undefined || lists?.supplier_data == '' ">
                                -</td>
                            <td>{{lists?.raiser_name}}</td>
                            <td>{{lists?.raiserbranch_branch?.name_code }}</td>
                            <td>{{lists?.invoice_no }}</td>
                            <td style="text-align: right;">{{lists?.totalamount|currency:'INR'}}</td>
                            <td style="white-space: nowrap;">{{lists?.invoicedate | date:'dd-MMM-yyyy'}}</td>
                            <td>{{lists?.supplier_data?.gstno }}</td>
                            <td>{{lists?.ap_status}}</td> -->
        <!-- || lists?.apinvoicehdr_status?.id == 15 || lists?.apinvoicehdr_status?.id == 27 || lists?.apinvoicehdr_status?.id == 28 || 
                                lists?.apinvoicehdr_status?.id == 29 || lists?.apinvoicehdr_status?.id == 38 || lists?.apinvoicehdr_status?.id == 39" -->
        <!-- <td
                                *ngIf="lists?.apinvoicehdr_status?.id == 9 || lists?.apinvoicehdr_status?.id == 13 || lists?.apinvoicehdr_status?.id == 15">
                                <i matTooltip="view entry" class=" fa fa-eye create "
                                    style="color: green;cursor: pointer;padding:10px" data-toggle="modal"
                                    data-target="#ecfap-0015"
                                    (click)="CommonViewEntry(lists?.apinvoiceheader_crno)"></i>
                            </td> -->
        <!-- && lists?.apinvoicehdr_status?.id != 15 && lists?.apinvoicehdr_status?.id != 27 && lists?.apinvoicehdr_status?.id != 28 && 
                                lists?.apinvoicehdr_status?.id != 29 && lists?.apinvoicehdr_status?.id != 38 && lists?.apinvoicehdr_status?.id != 39" -->
        <!-- <td
                                *ngIf="lists?.apinvoicehdr_status?.id != 9 && lists?.apinvoicehdr_status?.id != 13 && lists?.apinvoicehdr_status?.id != 15">
                                -</td>
                            <td style="width: 20px;"
                                *ngIf="lists?.ecfstatus?.text != 'RETURNED' && lists?.ecfstatus?.text != 'BATCH ECF RETURNED'
                                                                && lists?.ecfstatus?.text != 'PENDING IN ECF APPROVAL'">
                                <button type="button" class="btn btn-outline-success"
                                    (click)="coverNotedownload(lists.apheader_id,lists.ecftype_id)"
                                    style="border-radius: 40px;margin-left: 5px;;margin-top: 15px" id="ecfap-0187">
                                    <i class="fa fa-download" matTooltip="Download CoverNote"
                                        matTooltipClass="custom-tooltipnew">
                                    </i>
                                </button>
                            </td>
                            <td style="width: 20px;" *ngIf="lists?.ecfstatus?.text == 'RETURNED' || lists?.ecfstatus?.text == 'BATCH ECF RETURNED'
                                || lists?.ecfstatus?.text == 'PENDING IN ECF APPROVAL'">
                            </td> -->
        <!-- <td>
                            <span matTooltip="View" class=" fa fa-eye create "
                            style="color: green;cursor: pointer;padding:10px"  (click)="commonView(lists)"></span>
                        </td> -->
        <!-- </tr>
                    </tbody>
                </table>

                <div *ngIf="commonSummary ?.length == 0" style="margin-left: 42%;">
                    <h3>Sorry data not found!.. </h3>
                </div>
            </div>
            <div class="row" *ngIf="iscommonsummarypage" style="width:85%"> -->
        <!-- <div  class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
                <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -85%;">
                    Total Count:{{getcommontotalcount}}
                </p> 
            </div> -->
        <!-- <div class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left: 42%"> -->
        <!-- <button mat-icon-button [disabled]="has_commonpageprevious === false" color="primary" (click)="previousClickcommon()" id="ecfap-0188">
                    <mat-icon>arrow_back</mat-icon>
                </button> {{commonpresentpage}}
                <button mat-icon-button [disabled]="has_commonpagenext === false" color="primary" (click)="nextClickcommon()" id="ecfap-0189">
                    <mat-icon>arrow_forward</mat-icon>
                </button> -->
        <!-- <mat-paginator (page)="handlecommonPageEvent($event)" [length]="length_commonecf"
                        [pageSize]="pageSize_commonecf" [showFirstLastButtons]="showFirstLastButtons"
                        [pageSizeOptions]="pageSizeOptions" [pageIndex]="pageIndexCommon" [hidePageSize]="true"
                        aria-label="Select page">

                    </mat-paginator>
                </div>
                <div class="col-sm-3"
                    style="margin-bottom: 0%;font-size: small;text-align: right;margin-top: 18px;left: -15%;font-weight:bold">
                    Page: {{ecfpresentpage}}
                </div>
            </div> -->
        <!-- </mat-card> -->
    </div>



<!-- <div *ngIf="ECFReportSummaryForm"> -->
    <!-- <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;margin-left: 20px;"> -->
        <!-- <form [formGroup]="frmECFReportSummary">
                <tr>
                    <td style="width: 300px;">
                        <h3>
                            ECF Report
                        </h3>
                    </td>
            </tr>
        <div style="margin-top: 10px; width: 99%;">
             <div class="search-auto-fit">
                    <lib-vs-search-cmp id="matInput-size" [SearchArr]="ecfreport" Tooltip="true"
                        (dataoutput)="ecfreportsearch($event)">
                    </lib-vs-search-cmp> -->
                                 <!-- <lib-vs-optiondd-cmp id="matInput-size" [InputFields]="ecfreporttype"
                                        [formGroup]="frmECFReportSummary">
                                    </lib-vs-optiondd-cmp>
                                    <lib-vs-sep-dates-cmp id="matInput-size" [DateInput]="frtodatereport"
                                        [formGroup]="frmECFReportSummary">
                                    </lib-vs-sep-dates-cmp> -->
                <!-- </div> -->
        <!-- <div class="table-responsive" style="margin-top: 1%;width: 96%;margin-left: 10px;">
            <table class="table scrolltable table-bordered" >
                <thead>
                    <tr class="table_header" style="text-align:center;">
                        <th>S.No</th>
                        <th>Report Name</th>
                        <th>Created By</th>
                        <th>Created Date</th>
                        <th>From Date</th>
                        <th>To Date</th>
                        <th>Report Status</th>
                        <th>Download</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let dd of DooScoreSummary; index as i" style="text-align: center;">
                        <td style="text-align: center;" scope="row">{{(presentpagerep - 1)*pageSize_rep +i+1 }}</td>
                        <td>{{ dd?.report_name }}</td>
                        <td >{{ dd?.created_by?.code}}-{{ dd?.created_by?.name}}</td>
                        <td>{{ dd?.created_date | date:'dd-MMM-yyyy'}}</td>
                        <td>{{ dd?.from_date | date:'dd-MMM-yyyy'}}</td>
                        <td>{{ dd?.to_date | date:'dd-MMM-yyyy'}}</td>
                        <td>{{ dd?.report_status}}</td>
                        <td style="text-align: center;"><button [disabled]="dd?.report_status != 'Completed'" type="button" class="btn btn-outline-primary" style="border-radius: 40px;"
                            (click)="ECFRptSummarydownload(dd)">
                            <mat-icon matTooltip="Download">download</mat-icon>
                        </button></td>
                    </tr>
                </tbody>
            </table>
            <div *ngIf="DooScoreSummary?.length==0" style="text-align: center;" >No Records Found...</div>
            <div class="row" *ngIf="DooScoreSummary?.length > 0" style="width:85%">
                <div  class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
                </div>
                <div  class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left: 18%">
                    <mat-paginator
                    (page)="handleReportSearchPageEvent($event)"
                    [length]="length_rep"
                    [pageSize]="pageSize_rep"
                    [showFirstLastButtons]="showFirstLastButtons"
                    [pageSizeOptions]="pageSizeOptions"
                    [pageIndex]="pageIndex_rep"
                    [hidePageSize]="true"
                    aria-label="Select page">
                    </mat-paginator>
                </div>
                </div>
        </div> -->
        <!-- </div>
    </form> -->
    <!-- </mat-card> -->
<!-- </div> -->

<div *ngIf="ECFReportSummaryForm">
    <!-- <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;margin-left: 20px;"> -->
        <form [formGroup]="frmECFReportSummary">
               <h3>
            ECF Report
        </h3>
            <!-- <tr>
                <td style="width: 300px;">
                    <div style="color:black;font-size: 20px;font-family:'Times New Roman';font-weight:bold;margin-left: 10px;margin-top: 10px;">
                        ECF Report
                    </div>
                </td>
            </tr> -->
        <!-- <div style="margin-top: 10px; width: 99%;"> -->

        <!-- <table >
            <tr> -->
             <div class="search-auto-fit">
                <div id="matInput-size">
                    <mat-form-field appearance="outline">
                        <mat-select placeholder="Report Type" formControlName="report_type" id="ap-0461"
                        matTooltip="{{frmECFReportSummary.value.report_type}}" matTooltipClass="custom-tooltipnew">
                            <mat-option *ngFor="let type of reportList" [value]="type.api_name"
                            matTooltip="{{type.report_name}}" matTooltipClass="custom-tooltipnew">
                                {{type.report_name}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div id="matInput-size">
                 <mat-form-field appearance="outline" style="margin-left:10px" (click)="getRaiserbranch()">
                     <mat-label>Branch
                     </mat-label>
                     <input matInput  #raiserbrInput [matAutocomplete]="matraiserAutocomplete" formControlName="branchdetails_id"
                     [readonly]="! enable_ddl" placeholder="Enter Branch"
                     matTooltip="{{frmECFReportSummary.value?.branchdetails_id?.code}}-{{frmECFReportSummary.value?.branchdetails_id?.name}}" 
                     matTooltipClass="custom-tooltipnew" />
                     <mat-autocomplete #matraiserAutocomplete="matAutocomplete"  (opened)="raiseBranchScroll()" [displayWith]="displayFnbranchrole">
                       <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                       matTooltip="{{branch.code}}-{{branch.name}}" matTooltipClass="custom-tooltipnew">
                         {{branch.code}}-{{branch.name}}
                     </mat-option>
                     </mat-autocomplete>
                   </mat-form-field>
                </div>
                <div id="matInput-size">
                 <mat-form-field appearance="outline" style="margin-left:10px" (click)="getsupplierbranch()">
                     <mat-label>Supplier
                     </mat-label>
                     <input matInput  #supplierbrInput [matAutocomplete]="matsupplierAutocomplete" formControlName="supplier_id"
                    placeholder="Enter Supplier"
                     matTooltip="{{frmECFReportSummary.value?.supplier_id?.code}}-{{frmECFReportSummary.value?.supplier_id?.name}}" 
                     matTooltipClass="custom-tooltipnew" />
                     <mat-autocomplete #matsupplierAutocomplete="matAutocomplete"  (opened)="supplierBranchScroll()" [displayWith]="displayFnsupplierrole">
                       <mat-option *ngFor="let sup of supplierlist" [value]="sup"
                       matTooltip="{{sup.code}}-{{sup.name}}" matTooltipClass="custom-tooltipnew">
                         {{sup.code}}-{{sup.name}}
                     </mat-option>
                     </mat-autocomplete>
                   </mat-form-field>
                </div>
                <div id="matInput-size">
                    <mat-form-field appearance="outline" style="margin-left:10px">
                        <mat-label>From Date</mat-label>
                        <input matInput readonly [matDatepicker]="picker1" placeholder="From Date" [max]="today"
                            formControlName="from_date" id="ap-0466" (dateChange)="rptSummaryDateChange()">
                        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                        <mat-datepicker #picker1></mat-datepicker>
                    </mat-form-field>
                </div>
             <div id="matInput-size">
                    <mat-form-field appearance="outline" style="margin-left:10px">
                        <mat-label>To Date</mat-label>
                        <input matInput readonly [matDatepicker]="picker2" placeholder="To Date" [min]="dooFromdate" 
                           [max]="dooTodate" formControlName="to_date" id="ap-0467">
                        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                        <mat-datepicker #picker2></mat-datepicker>
                    </mat-form-field>
                </div>
                <div >
                        <button class="btn btn-outline-primary" type = button [disabled]="generate_btn_disable"
                        style="border-radius: 10px;margin-left: 20px;" matTooltip="Generate" (click)="generate_report(1)"
                        >Generate</button>
                        <button class="btn btn-outline-primary" type="button" (click)="resetDooScore()"
                            style="border-radius:40px;margin-left: 10px;width: 50px"  id="ap-0059">
                           <mat-icon  style="margin-top: 3px;margin-bottom: 0px;" aria-hidden="true" matTooltip="Reset"
                           matTooltipClass="custom-tooltipnew" >refresh</mat-icon>
                        </button>
                        <!-- </td> -->
                        <!-- <td> -->
                        <!-- </td> -->
                        </div>
                        </div>
                         <span><b>Page Reload in : </b>{{ formatTime(count1) }}</span>

            <!-- </tr>
        </table>  -->
        
         <div class="table-responsive">
             <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
            <table>
                <thead>
                    <tr class="table_header" style="text-align:center;">
                        <th>S.No</th>
                        <th>Report Name</th>
                        <th>Created By</th> 
                        <th>Created Date</th>
                        <th>From Date</th>
                        <th>To Date</th>
                        <th>Report Status</th>
                        <th>Download</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let dd of DooScoreSummary; index as i" style="text-align: center;">
                        <td style="text-align: center;" scope="row">{{(presentpagerep - 1)*pageSize_rep +i+1 }}</td>
                        <td>{{ dd?.report_name }}</td>
                        <td >{{ dd?.created_by?.code}}-{{ dd?.created_by?.name}}</td>    
                        <td>{{ dd?.created_date | date:'dd-MMM-yyyy'}}</td>
                        <td>{{ dd?.from_date | date:'dd-MMM-yyyy'}}</td>    
                        <td>{{ dd?.to_date | date:'dd-MMM-yyyy'}}</td>    
                        <td>{{ dd?.report_status}}</td>
                        <td style="text-align: center;"><button [disabled]="dd?.report_status != 'Completed'" type="button" class="btn btn-outline-primary" style="border-radius: 40px;"
                            (click)="ECFRptSummarydownload(dd)">
                            <mat-icon matTooltip="Download">download</mat-icon> 
                        </button></td> 
                    </tr>
                </tbody>
            </table>
            <div *ngIf="DooScoreSummary?.length==0" style="text-align: center;" >No Records Found...</div>
            <div class="row" *ngIf="DooScoreSummary?.length > 0" style="width:85%">
                <div  class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
                </div>
                <div  class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left: 18%">
                    <mat-paginator  
                    (page)="handleReportSearchPageEvent($event)"
                    [length]="length_rep"
                    [pageSize]="pageSize_rep"
                    [showFirstLastButtons]="showFirstLastButtons"
                    [pageSizeOptions]="pageSizeOptions"
                    [pageIndex]="pageIndex_rep"
                    [hidePageSize]="true"
                    aria-label="Select page">
                    </mat-paginator>
                </div>
                </div>
                </div>
        </div>
        <!-- </div> -->
    </form>
    <!-- </mat-card> -->
</div>



    <div *ngIf="commonInvViewForm">
        <!-- <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;"> -->
        <!-- <h2 style="font-weight:bold;margin-left: 10px;">Invoice Header ({{crno}})  </h2> -->
        <div *ngIf="showinvoicediv">
            <header class="header-adjust">
                <div class="headingalign">
                    <h3>
                        <i class="fa fa-arrow-left" aria-hidden="true" (click)="commonbackview()">
                        </i>&nbsp; Invoice Header
                    </h3>
                </div>
                <div class="button-div">
                    <!-- <button type="button"
                #debitclosebtn
                style="border-radius:40px;"
                class="btn btn-outline-primary"
                (click)="commonbackview()"
                id="ecfap-0220">Back</button> -->
                </div>
            </header>
        </div>
        <div *ngIf="showdebitdiv">
            <header class="header-adjust">
                <div class="headingalign">
                    <h3>
                        <i class="fa fa-arrow-left" aria-hidden="true" (click)="debitbacks()">
                        </i>&nbsp; Invoice Header
                    </h3>
                </div>
                <div class="button-div">
                    <!-- <button type="button"
                #debitclosebtn
                style="border-radius:40px;"
                class="btn btn-outline-primary"
                (click)="debitbacks()"
                id="ecfap-0221">Back</button> -->
                </div>
            </header>
        </div>
        <div class="header-container" *ngIf="showdebitdiv" style="margin-top:10px">
            <h3><b>Invoice Header ({{crno}})</b></h3>
        </div>

        <div class="header-container" *ngIf="showinvoicediv" style="margin-top:10px">
            <h3><b>Invoice Header ({{crno}}) </b></h3>
            <div>
                <i class="fa fa-clock-o" matTooltip="View Transaction" style="font-size: 28px; cursor: pointer"
                    aria-hidden="true" (click)="view_summary()"></i>
                <mat-icon (click)="view_notes()" matTooltip="View Notes"style="font-size: 28px; cursor: pointer;margin-left:15px"
                    aria-hidden="true">note_add</mat-icon>
            </div>
        </div>
        <div *ngIf="showinvoicediv">
            <form [formGroup]="frmInvHdr">
                <mat-accordion>
                    <mat-expansion-panel [expanded]="true" class="expansion-conatiner">
                        <mat-expansion-panel-header>
                            <!-- <h3 class="component-title ">Tour</h3> -->
                            <!-- <h3 class="expansion-title mb-0">Invoice Header</h3> -->
                        </mat-expansion-panel-header>
                        <div class="expansition-div">
                            <div>
                                <div class="card-container">
                                    <div class="card-view">
                                        <div class="card-point">
                                            <h4>Employee</h4>
                                            <p>{{ this.Emppanel }}</p>
                                        </div>
                                        <div class="card-point">
                                            <h4>Invoice No</h4>
                                            <p>{{ this.InvNopanel }}</p>
                                        </div>
                                        <div class="card-point">
                                            <h4>Branch</h4>
                                            <p>{{ this.Branchnamecard }}</p>
                                        </div>
                                        <div class="card-point">
                                            <h4>Branch GST</h4>
                                            <p>{{ this.BranchGSTpanel }}</p>
                                        </div>
                                        <div *ngIf="this.headerdata[0]?.pmd_data?.location != undefined">
                                            <h4>PMD Location</h4>
                                            <p>{{ this.Pmdpanel }}</p>
                                        </div>
                                        <div class="card-point">
                                            <h4>Invoice Date</h4>
                                            <p>{{ this.InvDatepanel }}</p>
                                        </div>
                                        <div class="card-point">
                                            <h4>Invoice Amount</h4>
                                            <p>{{ this.InvAmtpanel }}</p>
                                        </div>
                                        <div class="card-point">
                                            <h4>Taxable Amount</h4>
                                            <p>{{ this.TaxableAmtpanel }}</p>
                                        </div>
                                        <div class="card-point">
                                            <h4>Invoice Status</h4>
                                            <p>{{ this.Statuspanel }}</p>
                                        </div>
                                        <!-- </div>
                                  </div> -->
                                        <!-- </mat-expansion-panel> -->
                                        <!-- </mat-accordion> -->
                                        <!-- <mat-accordion> -->
                                        <!-- <mat-expansion-panel [expanded]="true" class="expansion-conatiner"> -->
                                        <!-- <mat-expansion-panel-header>
                                    <h3 class="expansion-title mb-0">Supplier Details</h3>
                                  </mat-expansion-panel-header> -->
                                        <!-- <div class="card-container">
                                    <div class="card-view"> -->
                                        <div class="card-point" *ngIf="payto_id =='S'">
                                            <h4>Supplier</h4>
                                            <p>{{ this.Supplierpanel }}</p>
                                        </div>
                                        <div class="card-point" *ngIf="payto_id =='S'">
                                            <h4>Supplier GST</h4>
                                            <p>{{ this.SupGSTpanel }}</p>
                                        </div>
                                        <div class="card-point">
                                            <h4>Commodity Name</h4>
                                            <p>{{ this.commoditynamepanel }}</p>
                                        </div>
                                        <div class="card-point">
                                            <h4>Is Recurring</h4>
                                            <p>{{ this.Is_recurpanel }}</p>
                                        </div>
                                        <div class="card-point">
                                            <h4>Recurring Type</h4>
                                            <p>{{ this.Service_typepanel }}</p>
                                        </div>
                                        <div class="card-point"
                                            *ngIf="frmInvHdr.get('service_type').value == 'MONTHLY' && showRecurDates">
                                            <h4>Recurring Month</h4>
                                            <p>{{ this.Recur_fromdatepanel| date : "dd-MMM-yyyy" }}</p>
                                        </div>
                                        <div class="card-point"
                                            *ngIf="frmInvHdr.get('service_type').value == 'PERIOD' && showRecurDates">
                                            <h4>Recurring From</h4>
                                            <p>{{ this.Recur_fromdatepanel| date : "dd-MMM-yyyy" }}</p>
                                        </div>
                                        <div class="card-point"
                                            *ngIf="frmInvHdr.get('service_type').value == 'PERIOD' && showRecurDates">
                                            <h4>Recurring To </h4>
                                            <p>{{ this.Recur_todatepanel | date : "dd-MMM-yyyy" }}</p>
                                        </div>
                                        <div class="card-point" *ngIf="ecftypeid != 4">
                                            <h4>GST Applicable</h4>
                                            <p>{{ this.Gstpanel }}</p>
                                        </div>
                                        <div class="card-point" *ngIf="ecftypeid == 2">
                                            <h4>Is PCA</h4>
                                            <p>{{ this.Is_pcapanel }}</p>
                                        </div>
                                        <div class="card-point" *ngIf="this.headerdata[0]?.is_pca">
                                            <h4>PCA No</h4>
                                            <div style="display: flex; align-items: center;">
                                                <p>{{ this.Pca_nopanel }}</p>
                                                <i class="fa fa-info-circle"
                                                    style="font-size:24px;color:#0077ff;margin-left:10px"
                                                    *ngIf="this.PCA_Det.length >0"
                                                    matTooltip="{{PCA_Det[0]?.pca_no}} - {{PCA_Det[0]?.pca_bal_amt}}"
                                                    matTooltipClass="custom-tooltipnew"></i>
                                            </div>
                                        </div>
                                        <div class="card-point">
                                            <h4>View File</h4>
                                            <i class=" fa fa-eye create " matTooltip="View File"
                                                matTooltipClass="custom-tooltipnew" (click)="ecfap_list()"
                                                style="color: blue;cursor: pointer;">
                                                <!-- data-toggle="modal" data-target="#ecfap-0009" -->
                                            </i>
                                        </div>
                                         <div class="card-point">
                                                <h4>Is Capitalized</h4>
                                            <p>{{ this.Is_capitalized }}</p>
                                        </div>
                                        <div class="card-point">
                                                <h4>MSME</h4>
                                            <p>{{ this.msme }}</p>
                                        </div>
                                        <div *ngIf="showreg" class="card-point">
                                                <h4>MSME Reg No</h4>
                                            <p>{{ this.msme_reg_no }}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>

                <div class="modal fade" tabindex="-1" role="dialog" data-keyboard="false"Add commentMore actions
        data-backdrop="static" aria-labelledby="myExtraLargeModalLabel" aria-hidden="true" id="ecfap-0289">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
            <div class="modal-header">
                <h2>Note Pad</h2>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ecfap-view-0030">
                        <span aria-hidden="true">&times;</span>
                    </button>
            </div>
                <div  class="modal-body">
                    <div class="container">
                        <div [ngxSummernote]="config"
                            [ngxSummernoteDisabled]="editorDisabled" (blur)="onBlur()"
                            (mediaDelete)="onDelete($event)"
                            (summernoteInit)="summernoteInit($event)"
                            formControlName="notename">
                        </div>
                    </div>
                </div>
                <br>
                <div>
                    <!-- <button type="button" style="border-radius: 40px;margin-left: 10px;"
                        class="btn btn-outline-primary"
                        data-dismiss="modal" id="ecfap-view-0031">Close</button> -->
                    <!-- <button *ngIf="!editorDisabled" style="border-radius:40px;margin-left: 10px; "
                    class="btn btn-outline-success" type="button"
                        data-dismiss="modal" (click)="notessave()" id="ecfap-view-0032">
                        Submit</button> -->
                    <div class="modal-footer">
                        <button type="button" style="border-radius:40px;margin-left: 500px;margin-bottom: 10px; "
                             class="btn btn-outline-primary"
                        data-dismiss="modal" id="ecfap-view-0033">
                        Back</button>
                    </div>
                </div>
            </div>
        </div>
                </div>
            </form>
            <br>
            <br>
            <!-- ----------Debit detail if aptype is advance--------- -->

            <div *ngIf="this.ecftypeid == 4">
                <h3>Debit Details </h3>
                <!-- &nbsp;&nbsp;&nbsp;&nbsp; -->
                <div>
                    <form [formGroup]="DebitDetailForm">
                        <!-- <div class="card" style="margin-bottom: 3%;margin-right: 20px;margin-left: 10px;">
                        <div class="card-body">
                        <div class="tableFixHead">
                            <table class="table table-bordered  table-sm">
                                <thead style='font-family:"Times New Roman"'>
                                    <tr  class="table_header" fixed-header> -->
                        <div class="table-responsive">
                            <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>S.No</th>
                                        <th>Category</th>
                                        <th>Sub Category </th>
                                        <th>GL Number</th>
                                        <th>BS </th>
                                        <th>CC</th>
                                        <th style="text-align:center">CCBS Percentage</th>
                                        <th style="text-align:center">Amount</th>
                                        <th style="text-align:center">Adjust Amount</th>
                                        <th style="text-align:center">Debit Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let dbt of invDebitList;index as i">
                                        <td>{{i+1}}</td>
                                        <td>{{dbt?.category_code?.code}}
                                            <p style="color: blue;font: size 11px;">{{dbt?.category_code?.name}}</p>
                                        </td>
                                        <td>{{dbt?.subcategory_code?.code}}
                                            <p style="color: blue;font: size 11px;">{{dbt?.subcategory_code?.name}}</p>
                                        </td>
                                        <td>{{dbt?.glno}}
                                            <p style="color: blue;font: size 11px;">
                                                {{dbt?.subcategory_code?.gl_description}}</p>
                                        </td>
                                        <td>{{dbt?.bs_code?.name}}</td>
                                        <td>{{dbt?.cc_code?.name}}</td>
                                        <td style="text-align:center">{{dbt?.ccbspercentage}}</td>
                                        <td style="text-align:right">{{dbt?.amount| currency:'INR'}}</td>
                                        <td style="text-align:right">{{dbt?.deductionamount}}</td>
                                        <td style="text-align:right">{{dbt?.amount| currency:'INR'}}</td>
                                    </tr>
                                </tbody>
                                <tr>
                                    <th class="totaldisplay" colspan="9"
                                        style="font-family: 'Times New Roman', Times, serif;;font-size:15px;text-align: end;">
                                        Net Amount:
                                    </th>
                                    <td style="text-align:right">{{debitsum | currency:'INR'}}</td>
                                </tr>
                            </table>
                            </div>
                        </div>
                        <!-- </div>
                        </div> -->
                    </form>
                </div>
            </div>
            <!-- -------------- -->

            <form [formGroup]="InvoiceDetailForm">
                <!-- ----------Invoice detail if aptype other than advance--------- -->

                <div *ngIf="this.ecftypeid !=4">
                    <h3><b>Invoice Details</b></h3>
                    <!-- <div class="card" style="margin-bottom: 3%;margin-right: 20px;margin-left: 10px;">
                        <div class="card-body">
                    <div class="tableFixHead">
                        <table class="table table-bordered  table-sm">
                            <thead style='font-family:"Times New Roman"'>
                                <tr  class="table_header" fixed-header> -->
                    <div class="table-responsive">
                        <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>S.No</th>
                                    <th>Particulars</th>
                                    <th *ngIf="ecftypeid ==1">GRN Code</th>
                                    <th>Product Name</th>
                                    <!-- <th>Is RCM</th> -->
                                    <th *ngIf="this.ecftypeid == 13 || this.ecftypeid == 3">Supplier</th>
                                    <th>UOM</th>
                                    <th *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8">HSN Code</th>
                                    <th *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8">HSN %</th>
                                    <th>Unit Price</th>
                                    <th>Quantity</th>
                                    <th> Amount</th>
                                    <th *ngIf=" this.ecftypeid !== 4 && this.ecftypeid !== 8">Discount</th>
                                    <th>Taxable Amount</th>
                                    <th *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8">CGST</th>
                                    <th *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8">SGST</th>
                                    <th *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8">IGST</th>
                                    <th *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8">Tax Amount</th>
                                    <th>Total Amount</th>
                                    <!-- <th>Is Capitalized</th>   -->
                                    <th>View Debit</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let dtl of invDetailList;index as j">
                                    <td>{{j+1}}</td>
                                    <td matTooltip={{dtl?.description}} matTooltipClass="custom-tooltipnew">
                                        {{dtl?.description}}</td>
                                    <td *ngIf="ecftypeid == 1">
                                        <div style="display: flex; align-items: center;">
                                            <span matTooltip="{{dtl?.grn_code}}">{{dtl?.grn_code}}</span>
                                            <ng-container *ngIf="is_component&&dtl?.productname !='Tax collected at source'">
                                            <i
                                            class="fa fa-eye"
                                            style="color: green; margin-left: 10px; font-size: medium; cursor: pointer;"
                                            matTooltip="View Component"
                                            matTooltipClass="custom-tooltipnew"
                                            (click)="addpodetails(dtl)">
                                            </i>
                                            </ng-container>
                                            <ng-container *ngIf="tcsadded && dtl?.productname =='Tax collected at source'">
                                            </ng-container>
                                        </div>
                                        </td>

                                    <td>
                                        <div style="width: 220px;;overflow: hidden">
                                            {{dtl?.productname}}
                                            <h3>Is RCM :<span
                                                    [ngStyle]=" dtl?.is_rcmproduct == 'Y'?{'color':'green','font-weight':'bold'}: {'color': 'red','font-weight':'bold'}">{{dtl?.is_rcmproduct}}</span>&nbsp;&nbsp;Is
                                                Blocked:<span
                                                    [ngStyle]=" dtl?.is_blockedproduct == 'Y'?{'color':'green','font-weight':'bold'}: {'color': 'red','font-weight':'bold'}">{{dtl?.is_blockedproduct}}</span>
                                            </h3>
                                        </div>
                                    </td>
                                    <!-- <td style="text-align: center;">{{dtl?.is_rcmproduct}}</td> -->
                                    <td *ngIf="this.ecftypeid == 13 || this.ecftypeid == 3" style="text-align: center;">
                                        <i matTooltip="Supplier Details" matTooltipClass="custom-tooltipnew"
                                            class="fa fa-eye create" style="color: darkviolet;padding:10px"
                                            (click)="getsupplierindex(dtl)">
                                            <!-- data-toggle="modal" data-target="#ecfap-0017" -->
                                        </i>
                                    </td>
                                    <td>{{dtl?.uom}}</td>
                                    <td *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8">{{dtl?.hsn?.code}}</td>
                                    <td style="text-align: center;"
                                        *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8">{{dtl?.hsn_percentage}}
                                    </td>
                                    <td style="text-align:right">{{dtl?.unitprice| currency:'INR'}}</td>
                                    <td style="text-align: center;">{{dtl?.quantity}}</td>
                                    <td style="text-align:right">{{dtl?.amount| currency:'INR'}}</td>
                                    <td *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8" style="text-align:right">
                                        {{dtl?.discount| currency:'INR'}}</td>
                                    <td style="text-align:right">{{dtl?.taxable_amount| currency:'INR'}}</td>
                                    <td *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8" style="text-align:right">
                                        {{dtl?.cgst| currency:'INR'}}</td>
                                    <td *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8" style="text-align:right">
                                        {{dtl?.sgst| currency:'INR'}}</td>
                                    <td *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8" style="text-align:right">
                                        {{dtl?.igst| currency:'INR'}}</td>
                                    <td *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8" style="text-align:right">
                                        {{dtl?.taxamount| currency:'INR'}}</td>
                                    <td style="text-align:right">{{dtl?.totalamount| currency:'INR'}}</td>
                                    <!-- <td *ngIf="dtl?.is_capitalized == true || dtl?.is_capitalized == 1" style="text-align: center;">Yes</td>
                                   <td *ngIf="dtl?.is_capitalized == false || dtl?.is_capitalized ==0" style="text-align: center;">No</td> -->
                                    <td style="text-align:center">
                                        <i matTooltip="View" matTooltipClass="custom-tooltipnew"
                                            class=" fa fa-eye create " style="color: black;cursor: pointer;"
                                            (click)="adddebits(dtl)"></i>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="totaldisplay" colspan="10"
                                        *ngIf="this.ecftypeid !=1 && this.ecftypeid !=4 && this.ecftypeid != 8 && this.ecftypeid !=13 && this.ecftypeid != 3"
                                        style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                        Total Taxable Amount:</td>
                                    <td class="totaldisplay" colspan="11"
                                        *ngIf="this.ecftypeid ==1 || this.ecftypeid ==13 || this.ecftypeid == 3"
                                        style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                        Total Taxable Amount:</td>
                                    <td class="totaldisplay" colspan="2"
                                        *ngIf=" this.ecftypeid ==4 || this.ecftypeid == 8"
                                        style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                        Total Taxable Amount:</td>
                                    <td style="text-align:right">{{taxableamt| currency:'INR'}}</td>
                                    <td class="totaldisplay" colspan="4"
                                        *ngIf="this.ecftypeid !=1 && this.ecftypeid !=4 && this.ecftypeid != 8 && this.ecftypeid !=13 && this.ecftypeid != 3"
                                        style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                        Other Adjustment:</td>
                                    <td class="totaldisplay" colspan="4"
                                        *ngIf="this.ecftypeid ==1 || this.ecftypeid ==13 || this.ecftypeid == 3"
                                        style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                        Other Adjustment:</td>
                                    <td class="totaldisplay" colspan="7"
                                        *ngIf=" this.ecftypeid ==4 || this.ecftypeid == 8"
                                        style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                        Other Adjustment:</td>
                                    <td style="text-align:right">{{OtherAmount| currency:'INR'}}</td>
                                </tr>
                                <tr>
                                    <td class="totaldisplay" colspan="15"
                                        *ngIf="this.ecftypeid !=1 && this.ecftypeid !=4 && this.ecftypeid != 8 && this.ecftypeid !=13 && this.ecftypeid != 3"
                                        style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                        Rounding Off:</td>
                                    <td class="totaldisplay" colspan="16"
                                        *ngIf=" this.ecftypeid ==1 || this.ecftypeid ==13 || this.ecftypeid == 3"
                                        style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                        Rounding Off:</td>
                                    <td class="totaldisplay" colspan="6"
                                        *ngIf=" this.ecftypeid ==4 || this.ecftypeid == 8"
                                        style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                        Rounding Off:</td>
                                    <td style="text-align:right">{{Roundoffamount| currency:'INR'}}</td>
                                </tr>
                                <tr>
                                    <td class="totaldisplay" colspan="15"
                                        *ngIf="this.ecftypeid !=1 && this.ecftypeid !=4 && this.ecftypeid != 8 && this.ecftypeid !=13 && this.ecftypeid != 3"
                                        style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                        Net Amount:</td>
                                    <td class="totaldisplay" colspan="16"
                                        *ngIf="this.ecftypeid ==1 || this.ecftypeid ==13 || this.ecftypeid == 3"
                                        style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                        Net Amount:</td>
                                    <td class="totaldisplay" colspan="6"
                                        *ngIf="this.ecftypeid ==4 || this.ecftypeid == 8"
                                        style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                        Net Amount:</td>
                                    <td style="text-align:right">{{INVsum | currency:'INR'}}</td>
                                </tr>
                            </tbody>
                        </table>
                        </div>
                    </div>
                </div>
            </form>


            <!-- ----------credit detail --------- -->

            <br><br>
            <h3><b>Credit Details</b></h3>
            <form [formGroup]="creditdetForm">
                <table>
                        <tr>
                            <td style="margin-left: 10px;">
                                <h3>TDS Applicability : {{tdsapplicability}}</h3>
                            </td>&nbsp;&nbsp;&nbsp;&nbsp;
                            <td>
                                <h3>Payment Instructions : {{paymentinstructions}}</h3>
                            </td>
                        </tr>
                </table>
                <!-- <div>
                <div class=" row col-md-12" *ngIf="paytoid=='SUPPLIER'">
                    <div class="col-md-3">
                        <mat-form-field style="margin-left: 5%;width:220px">
                            <input type="text" formControlName="supName" matInput readonly placeholder="Supplier Name" id="ecfap-0212">
                            <mat-label>Supplier Name</mat-label>
                        </mat-form-field>
                    </div>
                    <div class="col-md-3">
                        <mat-form-field style="margin-left: 5%;width:220px">
                            <input type="text" formControlName="isexcempted" matInput readonly placeholder="Is Exempted" id="ecfap-0213">
                            <mat-label>Is Exempted</mat-label>
                        </mat-form-field>
                    </div>
                    <div class="col-md-3" *ngIf="showthreshold">
                        <mat-form-field style="margin-left: 5%;width:220px">
                            <input type="text" formControlName="TDSSection" matInput readonly placeholder="TDS Section" id="ecfap-0214">
                            <mat-label>TDS Section</mat-label>
                        </mat-form-field>
                    </div>
                    <div class="col-md-3" *ngIf="showthreshold">
                        <mat-form-field style="margin-left: 5%;width:220px">
                            <input type="text" formControlName="TDSRate" matInput readonly placeholder="TDS Rate" id="ecfap-0215">
                            <mat-label>TDS Rate</mat-label>
                        </mat-form-field>
                    </div>
                </div>    
                <div class=" row col-md-12" *ngIf="paytoid=='S'">
                    <div class="col-md-3" *ngIf="showthreshold">
                        <mat-form-field style="margin-left: 5%;width:220px">
                            <input type="text" formControlName="thresholdValue" matInput readonly placeholder="Threshold Value" id="ecfap-0216">
                            <mat-label>Threshold Value</mat-label>
                        </mat-form-field>
                    </div>
                    <div class="col-md-3" *ngIf="showthreshold">
                        <mat-form-field style="margin-left: 5%;width:220px">
                            <input type="text" matInput formControlName="amountPaid" readonly placeholder="Amount Paid" id="ecfap-0217">
                            <mat-label>Amount Paid</mat-label>
                        </mat-form-field>
                    </div>
                    <div class="col-md-3" *ngIf="showthreshold">
                        <mat-form-field style="margin-left: 5%;width:220px">
                            <input type="text" matInput formControlName="balThroAmt" readonly placeholder="Balance Threshold Amount" id="ecfap-0218">
                            <mat-label>Balance Threshold Amount</mat-label>
                        </mat-form-field>
                    </div>
                    <div class="col-md-3" *ngIf="showthreshold">
                        <mat-form-field style="margin-left: 5%;width:220px">
                            <input type="text" matInput formControlName="normaltdsRate" readonly placeholder="Normal TDS Rate" id="ecfap-0219">
                            <mat-label>Normal TDS Rate</mat-label>
                        </mat-form-field>
                    </div>
                </div>  
            </div> -->
            </form>
            <!-- <div class="card" style="margin-bottom: 3%;margin-right: 20px;margin-left: 10px;">
            <div class="card-body">
            <div class="tableFixHead">
                <table class="table table-bordered  table-sm"> -->
            <!-- <thead style='font-family:"Times New Roman"'>
                        <tr  class="table_header" fixed-header> -->
                            <div class="table-responsive">
                                <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>S.No</th>
                                            <th>Paymode</th>
                                            <th>Account Detail/GL</th>
                                            <!-- <th>Transaction Branch</th> -->
                                            <th>Ref No</th>
                                            <th *ngIf="this.payto_id != 'E' && this.payto_id != 'B'">Bank Name</th>
                                            <th *ngIf="this.payto_id != 'E' && this.payto_id != 'B'">Branch Name</th>
                                            <th *ngIf="this.payto_id != 'E' && this.payto_id != 'B'">IFSC Code</th>
                                            <th>Beneficiary Name</th>
                                            <th>Tax Type</th>
                                            <th>Tax Rate</th>
                                            <th>TDS Excempt</th>
                                            <th>Taxable Amount</th>
                                            <th>GL No</th>
                                            <th>Amount</th>
                                            <!-- <th>Amount change</th> -->
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let cdt of invCreditList;index as i">
                                            <td>{{i+1}}</td>
                                            <td>{{cdt?.paymode?.name}}</td>
                                            <td>{{cdt?.refno}}</td>
                                            <!-- <td style="text-align: center;">-</td> -->
                                            <td>{{cdt?.refno}}</td>
                                            <td *ngIf="this.payto_id == 'S'"><ng-container
                                                    *ngFor="let cdtdtl of cdt?.supplierpayment_details?.data">{{cdtdtl?.bank_id?.name}}</ng-container>
                                            </td>
                                            <td *ngIf="this.payto_id == 'S'"><ng-container
                                                    *ngFor="let cdtdtl of cdt?.supplierpayment_details?.data">{{cdtdtl?.branch_id?.name}}</ng-container>
                                            </td>
                                            <td *ngIf="this.payto_id == 'S'"><ng-container
                                                    *ngFor="let cdtdtl of cdt?.supplierpayment_details?.data">{{cdtdtl?.branch_id?.ifsccode}}</ng-container>
                                            </td>
                                            <td *ngIf="this.payto_id == 'S'"><ng-container
                                                    *ngFor="let cdtdtl of cdt?.supplierpayment_details?.data">{{cdtdtl?.beneficiary}}</ng-container>
                                            </td>
                                            <!-- <td *ngIf="this.payto_id == 'E'"><ng-container *ngFor="let cdtdtl of cdt?.employeeaccount_details?.data">{{cdtdtl?.bank_name}}</ng-container></td>
                                                <td *ngIf="this.payto_id == 'E'"><ng-container *ngFor="let cdtdtl of cdt?.employeeaccount_details?.data">{{cdtdtl?.bankbranch?.name}}</ng-container></td>
                                                <td *ngIf="this.payto_id == 'E'"><ng-container *ngFor="let cdtdtl of cdt?.employeeaccount_details?.data">{{cdtdtl?.bankbranch?.ifsccode}}</ng-container></td> -->
                                            <td *ngIf="this.payto_id == 'E'"><ng-container
                                                    *ngFor="let cdtdtl of cdt?.employeeaccount_details?.data">{{cdtdtl?.beneficiary_name}}</ng-container>
                                            </td>
                                            <!-- <td *ngIf="this.payto_id == 'B'">KARUR VYSYA BANK</td>
                                                <td *ngIf="this.payto_id == 'B'">EXPENSES MANAGEMENT CELL</td>
                                                <td *ngIf="this.payto_id == 'B'">KVBL0001903</td> -->
                                            <td *ngIf="this.payto_id == 'B'"><ng-container
                                                    *ngFor="let cdtdtl of cdt?.employeeaccount_details?.data">{{cdtdtl?.beneficiary_name}}</ng-container>
                                            </td>
                                            <td>{{cdt?.suppliertaxtype}}</td>
                                            <td>{{cdt?.suppliertaxrate == "0.0" ? "-" :cdt?.suppliertaxrate }}</td>
                                            <td>{{cdt?.taxexcempted}}</td>
                                            <td style="text-align:right">{{cdt?.taxableamount == "0.0" ? "-":cdt?.taxableamount| currency:'INR'}}</td>
                                            <td>{{cdt?.glno}}</td>
                                            <td style="text-align:right">{{cdt?.amount| currency:'INR'}}</td>
                                        </tr>
                                    </tbody>
                                    <tr *ngIf="this.payto_id != 'E' && this.payto_id != 'B'">
                                        <td class="totaldisplay" colspan="13"
                                            style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                            Net Amount:</td>
                                        <td style="text-align:right">{{cdtsum | currency:'INR'}}</td>
                                    </tr>
                                    <tr *ngIf="this.payto_id == 'E' || this.payto_id == 'B'">
                                        <td class="totaldisplay" colspan="10"
                                            style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                            Net Amount:</td>
                                        <td style="text-align:right">{{cdtsum | currency:'INR'}}</td>
                                    </tr>
                                </table>
                                </div>
                            </div>                
            <br>
            <div style="display: flex; justify-content: center;">
                <button type="button" style="border-radius:40px"
                class="btn btn-outline-primary" (click)="commonbackview()" id="ecfap-0220">
                Back</button>
            </div>
        </div>
        <!-- Debit Div starts---- -->
        <div *ngIf="showdebitdiv">
            <h3>Debit Details (Total Amount :
                {{invtotamount | currency:'INR'}})</h3>

            <!-- &nbsp;&nbsp;&nbsp;&nbsp; -->

            <div>
                <form [formGroup]="DebitDetailForm">
                    <!-- <div class="card" style="margin-bottom: 3%;margin-right: 20px;margin-left: 10px;">
                        <div class="card-body">
                        <div class="tableFixHead">
                            <table class="table table-bordered  table-sm">
                                <thead style='font-family:"Times New Roman"'>
                                    <tr  class="table_header" fixed-header> -->
                    <div class="table-responsive">
                        <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>S.No</th>
                                    <th>Category</th>
                                    <th>Sub Category </th>
                                    <th>GL Number</th>
                                    <th>BS </th>
                                    <th>CC</th>
                                    <th >CCBS Percentage</th>
                                    <th >Amount</th>
                                    <th >Adjust Amount</th>
                                    <th >Debit Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let dbt of invDebitList;index as i">
                                    <td>{{i+1}}</td>
                                    <td>{{dbt?.category_code?.code}}
                                        <p style="color: blue;font: size 11px;">{{dbt?.category_code?.name}}</p>
                                    </td>
                                    <td>{{dbt?.subcategory_code?.code}}
                                        <p style="color: blue;font: size 11px;">{{dbt?.subcategory_code?.name}}</p>
                                    </td>
                                    <td>{{dbt?.glno}} - {{dbt?.subcategory_code?.gl_description}}</td>
                                    <td>{{dbt?.bs_code?.name}}</td>
                                    <td>{{dbt?.cc_code?.name}}</td>
                                    <td >{{dbt?.ccbspercentage}}</td>
                                    <td >{{dbt?.amount| currency:'INR'}}</td>
                                    <td >{{dbt?.deductionamount| currency:'INR'}}</td>
                                    <td >{{dbt?.amount| currency:'INR'}}</td>
                                </tr>
                            </tbody>
                            <tr>
                               <td colspan="8"></td>
                                <td class="totaldisplay" colspan="1">
                                    <div style="display:flex; justify-content:space-between; font-family:'Times New Roman'; font-size:15px;">
                                        <span>Net Amount:</span>
                                    </div>
                                </td>
                                <td >{{debitsum | currency:'INR'}}</td>
                            </tr>
                            <tr>
                                <!-- <td colspan="10">
                                        <button type="button" #debitclosebtn
                                            style="border-radius:40px;margin-left:625px;font-family: 'Times New Roman', Times, serif;"
                                            class="btn btn-outline-primary" (click)="debitbacks()" id="ecfap-0221">
                                            Back</button>
                                    </td> -->
                            </tr>
                        </table>
                        </div>
                    </div>
                    <!-- </div>
                        </div> -->
                </form>

                <div style="display: flex; justify-content: center; align-items: center;margin-top: 20px;">
                    <button type="button" #debitclosebtn
                    style="border-radius:40px;"
                    class="btn btn-outline-primary" (click)="debitbacks()" id="ecfap-0221">
                    Back</button>
                </div>
            </div>
        </div>


        <!-- Debit div ends -->
        <!-- </mat-card> -->
    </div>

    <!-- </mat-card> -->
</div>





<div *ngIf="showapprovepop">
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
        aria-hidden="true" data-backdrop="static" data-keyboard="false" id="ecfap-0004">
        <div class="modal-dialog modal-xl " style="width: 40%;">
            <div class="modal-content">
                <div class="modal-header text-center" style="background: rgba(23, 204, 23, 0.288);">
                    <h3 class="modal-title"
                        style="color:black ;height:2px;font-family: 'Times New Roman', Times, serif;">Approver Details
                    </h3>
                    <button type="button" class="close" #closedbutton data-dismiss="modal" aria-label="Close"
                        id="ecfap-0222">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div style="margin-left: 70px;margin-right: 80%;margin-top: 2%; width: 80%;">

                    <span style="margin-left:10px">Commodity Name : <p [ngStyle]="{'color': 'blue'}"
                            style="margin-left:155px;margin-top:-24px">{{commodityname}}</p></span>
                    <form [formGroup]="ApproverForm">
                        <table>
                            <div>

                                <tr>
                                    <td>
                                        <mat-form-field style="width: 200px;margin-left: 10px;" (click)="branchname()">
                                            <mat-label> Branch</mat-label>
                                            <input #brInput placeholder="Branch" matInput
                                                formControlName="approvedbranch" [matAutocomplete]="branchmatAuto"
                                                id="ecfap-0223">
                                            <mat-autocomplete [panelWidth]="300" #branchmatAuto="matAutocomplete"
                                                (opened)="approverbranchScroll()" [displayWith]="displayFnBranch">
                                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                                <ng-container *ngIf="!isLoading">
                                                    <mat-option *ngFor="let br of branchList"
                                                        matTooltip="{{br.code}}-{{br.name}}"
                                                        matTooltipClass="custom-tooltipnew" [value]="br">
                                                        {{br.code}}-{{br.name}}
                                                    </mat-option>
                                                </ng-container>
                                            </mat-autocomplete>
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field style="width: 200px;margin-left: 10px;" (click)="getApprover()">
                                            <mat-label> Approver</mat-label>
                                            <input #approverInput placeholder="Approver" matInput
                                                formControlName="approvedby" [matAutocomplete]="approvertype"
                                                id="ecfap-0224">
                                            <mat-autocomplete [panelWidth]="300" #approvertype="matAutocomplete"
                                                (opened)="approverScroll()" [displayWith]="displayFnAprover">
                                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                                <ng-container *ngIf="!isLoading">
                                                    <mat-option *ngFor="let app of ApproverList"
                                                        matTooltip="{{app.name}} -{{app.code}}-{{app.limit}}-{{app.designation}}"
                                                        matTooltipClass="custom-tooltipnew" [value]="app">
                                                        {{app.name}}-{{app.code}} - {{app.limit}} - {{app.designation}}
                                                    </mat-option>
                                                </ng-container>
                                            </mat-autocomplete>
                                        </mat-form-field>
                                    </td>

                                    <!-- <td>
                                        <td>
                                            <mat-form-field style="width: 250px;margin-left: 15px;" (click)="approvername()">
                                                <mat-label>Approver Name</mat-label>
                                                <input #appInput  placeholder="Choose Approver" matInput 
                                                formControlName="approvedby" [matAutocomplete]="approver"  id="ecfap-0225">
                                                <mat-autocomplete [panelWidth]="400" #approver="matAutocomplete" (opened)="autocompleteapproverScroll()"
                                                [displayWith]="displayFnApprover">
                                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                                <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let app of approverList"
                                                [value]="app" matTooltip="{{app?.name}}- {{app?.code}}  ({{app?.limit}}) app?.designation" matTooltipClass="custom-tooltipnew">
                                                {{app?.name}} - {{app?.code}} ({{app?.limit}}) app?.designation
                                            </mat-option>
                                         </ng-container>
                                             </mat-autocomplete>
                                            </mat-form-field>
                                        </td> -->

                                </tr>
                            </div>
                        </table>
                        <br>
                        <tr>
                            <div style="margin-bottom: 5%;">
                                <td>
                                    <button type="submit" [disabled]="disable_batchsubmit"
                                        style="border-radius:40px;margin-left: 175px;font-family: 'Times New Roman', Times, serif;"
                                        class="btn btn-outline-success" (click)="batchsubmit()" id="ecfap-0226">
                                        Save</button>

                                </td>

                                <td>
                                    <button type="button"
                                        style="border-radius:40px;margin-left:10px;font-family: 'Times New Roman', Times, serif;"
                                        class="btn btn-outline-primary" (click)="appback()" id="ecfap-0227">
                                        Back</button>

                                </td>
                            </div>
                        </tr>
                    </form>
                </div>

                <!-- <div  style="margin-top: 2%;margin-left: 90px; width: 85%;">
                    <table class="table table-bordered  padsize" style="text-align:center;" >	
                        
                        <thead>
                            <tr class="table_header tableset " style="text-align: center;margin-left: 3%;">
                
                                <th>S.No</th>
                                <th>CR NO</th>
                                <th>ECF Type</th>
                                <th>Commodity Name</th>
                                <th>ECF Date</th>
                                <th>ECF Amount</th>
                                <th>ECF Status</th>
                                <th>Payment For</th>
                                <th>View</th>
                                <th>Download</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor ="let ab of batchviewlist;index as i">
                                <td>{{(bvpresentpage - 1)*pagesizebview +i+1 }}</td>
                                <td>{{(ab?.crno !== null)?(ab?.crno):"-"}}</td>
                                <td>{{ab?.aptype}}</td>
                                <td>{{ab?.commodity_id?.name}}</td>
                                <td>{{ (ab?.apdate !== "None") ? (ab?.apdate | date: 'dd/MM/yyyy') : "-" }}</td>
                                <td>{{ab?.apamount|currency:'INR'}}</td>
                                <td>{{ab?.apstatus}}</td>
                                <td>{{ab?.payto}}</td>
                                <td>
                                    
                                    <span matTooltip="view" class=" fa fa-eye create "
                                        style="color: green;cursor: pointer;padding:10px" (click)="showecfview(ab)"></span>
                               
                            </td>
                            <td>
                               
                                    <button type="button" class="btn btn-outline-success"
                                        (click)="coverNotedownload(ab?.id,ab?.aptype_id)"
                                        style="border-radius: 40px;margin-left: 3%;" >
                                        <span class="fa fa-download" matTooltip="Download CoverNote">
                                        </span>
                                    </button>
                                </td>
                
                            </tr>
                        </tbody>
                    </table>
                    <div *ngIf="batchviewlist ?.length == 0" style="margin-left: 42%;">
                        <h3 >Sorry data not found!.. </h3>
                    </div>
                    <div class="row" *ngIf="isbatchviewpage">
                      <div  class="col-sm-12" style="margin-bottom: 5%;font-size: small;text-align:right;">
                            <button mat-icon-button [disabled]="has_bviewpageprevious === false" color="primary" (click)="previousClickbview()" id="ecfap-0228">
                                <mat-icon>arrow_back</mat-icon>
                            </button> {{bvpresentpage}}
                            <button mat-icon-button [disabled]="has_bviewpagenext === false" color="primary" (click)="nextClickbview()" id="ecfap-0229">
                                <mat-icon>arrow_forward</mat-icon>
                            </button>
                        </div>
                    </div>
                   </div> -->

            </div>
        </div>
    </div>
</div>

<div>
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
        aria-hidden="true" data-backdrop="static" data-keyboard="false" id="ecfap-0005">
        <div class="modal-dialog modal-xl " style="width: 30%;">
            <div class="modal-content">
                <div class="modal-header text-center" style="background: rgba(23, 204, 23, 0.288);">
                    <h3 class="modal-title "
                        style="color:black ;height:2px;font-family: 'Times New Roman', Times, serif;">Payment Details
                    </h3>
                    <button type="button" class="close" #closedpaybutton data-dismiss="modal" aria-label="Close"
                        id="ecfap-0230">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div style="margin-left: 70px;margin-right: 80%;margin-top: 2%; width: 80%;">


                    <form [formGroup]="PaymentFileForm">
                        <table>
                            <div>

                                <tr>
                                    <td>
                                        <mat-form-field
                                            style="width:250px;font-family: 'Times New Roman', Times, serif;margin-left: 50px;">
                                            <input matInput placeholder="UTR No" formControlName="callbackrefno"
                                                autocomplete="off" id="ecfap-0231">
                                        </mat-form-field>
                                    </td>

                                </tr>
                            </div>
                        </table>

                        <tr>
                            <div style="margin-bottom: 3%;">
                                <td>
                                    <button type="submit"
                                        style="border-radius:40px;margin-left: 80px;font-family: 'Times New Roman', Times, serif;"
                                        class="btn btn-outline-success" (click)="utrsubmit()" id="ecfap-0232">
                                        Submit</button>

                                </td>

                                <td>
                                    <button type="button"
                                        style="border-radius:40px;margin-left:10px;font-family: 'Times New Roman', Times, serif;"
                                        class="btn btn-outline-primary" (click)="utrback()" id="ecfap-0233">
                                        Back</button>

                                </td>
                            </div>
                        </tr>
                    </form>
                </div>

                <!-- <div  style="margin-top: 2%;margin-left: 90px; width: 85%;">
                    <table class="table table-bordered  padsize" style="text-align:center;" >	
                        
                        <thead>
                            <tr class="table_header tableset " style="text-align: center;margin-left: 3%;">
                
                                <th>S.No</th>
                                <th>CR NO</th>
                                <th>ECF Type</th>
                                <th>Commodity Name</th>
                                <th>ECF Date</th>
                                <th>ECF Amount</th>
                                <th>ECF Status</th>
                                <th>Payment For</th>
                                <th>View</th>
                                <th>Download</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor ="let ab of batchviewlist;index as i">
                                <td>{{(bvpresentpage - 1)*pagesizebview +i+1 }}</td>
                                <td>{{(ab?.crno !== null)?(ab?.crno):"-"}}</td>
                                <td>{{ab?.aptype}}</td>
                                <td>{{ab?.commodity_id?.name}}</td>
                                <td>{{ (ab?.apdate !== "None") ? (ab?.apdate | date: 'dd/MM/yyyy') : "-" }}</td>
                                <td>{{ab?.apamount|currency:'INR'}}</td>
                                <td>{{ab?.apstatus}}</td>
                                <td>{{ab?.payto}}</td>
                                <td>
                                    
                                    <span matTooltip="view" class=" fa fa-eye create "
                                        style="color: green;cursor: pointer;padding:10px" (click)="showecfview(ab)"></span>
                               
                            </td>
                            <td>
                               
                                    <button type="button" class="btn btn-outline-success"
                                        (click)="coverNotedownload(ab?.id,ab?.aptype_id)"
                                        style="border-radius: 40px;margin-left: 3%;" >
                                        <span class="fa fa-download" matTooltip="Download CoverNote">
                                        </span>
                                    </button>
                                </td>
                
                            </tr>
                        </tbody>
                    </table>
                    <div *ngIf="batchviewlist ?.length == 0" style="margin-left: 42%;">
                        <h3 >Sorry data not found!.. </h3>
                    </div>
                    <div class="row" *ngIf="isbatchviewpage">
                      <div  class="col-sm-12" style="margin-bottom: 5%;font-size: small;text-align:right;">
                            <button mat-icon-button [disabled]="has_bviewpageprevious === false" color="primary" (click)="previousClickbview()" id="ecfap-0234">
                                <mat-icon>arrow_back</mat-icon>
                            </button> {{bvpresentpage}}
                            <button mat-icon-button [disabled]="has_bviewpagenext === false" color="primary" (click)="nextClickbview()" id="ecfap-0235">
                                <mat-icon>arrow_forward</mat-icon>
                            </button>
                        </div>
                    </div>
                   </div> -->

            </div>
        </div>
    </div>
</div>

<!-- View Trancation -->
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
    id="ecfap-0006" data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog modal-xl" style="width: 70%">
        <div class="modal-content">
            <div class="modal-header">
                <h3> View Transaction</h3>
                <button class="close" type="button" data-dismiss="modal" id="ap-0403">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="container">
                    <div class="row">
                        <div class="table-responsive" style="width: 100%; margin-top: 1%">
                            <div class="table-responsive">
                                <lib-vs-cbox-summary [SummaryDetails]="SummaryviewData"
                                    [SummaryApiObj]="SummaryApiviewObjNew" [FirstLastbtn]="true"></lib-vs-cbox-summary>
                            </div>
                            <br />
                            <table style="width: 100%; text-align: center">
                                <tr>
                                    <td>Employee Name: &nbsp;{{ this.name }}</td>
                                    <td>Designation: &nbsp;{{ this.designation }}</td>
                                    <td>Branch Name : &nbsp;{{ this.branch }}</td>
                                </tr>
                            </table>
                            <!-- <table
          class="table table-bordered"
          style="width: 100%; text-align: center"
        >
          <thead class="table_header">
            <tr>
              <th>S.NO</th>
              <th>Type</th>
              <th>Status</th>
              <th>From Date</th>
              <th>Remarks</th>
              <th>Employee Name</th>
              <th>Approver Name</th>
            </tr>
          </thead>
          <tr *ngFor="let dt of viewtrnlist; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ dt.Type }}</td>
            <td>{{ dt?.comments }}</td>
            <td>{{ dt.created_date }}</td>
            <td>{{ dt.remarks }}</td>
            <td>
              {{ dt.from_user.name }}
              <br />
              <div *ngIf="dt.from_user_id == -1; else deta"></div>
              <ng-template #deta>
                <a style="color: green; cursor: pointer" (click)="view(dt)"
                  >View Details</a
                >
              </ng-template>
            </td>
            <td>
              {{ dt?.to_user?.name }}
              <br />
              <div *ngIf="dt.to_user_id == -1; else deta1"></div>
              <ng-template #deta1>
                <a style="color: green; cursor: pointer" (click)="viewto(dt)"
                  >View Details</a
                >
              </ng-template>
            </td>
          </tr>
        </table> -->
                        </div>
                        <!-- <div class="modal-footer"> -->
                        <!-- <table style="width: 100%; text-align: center">
          <tr>
            <td>Employee Name: &nbsp;{{ this.name }}</td>
            <td>Designation: &nbsp;{{ this.designation }}</td>
            <td>Branch Name : &nbsp;{{ this.branch }}</td>
          </tr>
        </table> -->

                        <!-- <tr>
            <td colspan="3"> -->

                <div class="row" *ngIf="viewtrnlist?.length > 0">
                    <div class="col-sm-8" style="margin-bottom: 0%;font-size: small;text-align: right;margin-top: 18px;font-weight:bold">
                    Page: {{viewtrnCurrentPage}}
                    </div>
                    <div  class="col-sm-4" style="margin-bottom: 0%;font-size: small;text-align:right;">
                        <mat-paginator  style="margin-top: 0%;width: 350px;"
                                    (page)="handleViewtrn($event)"
                                    [length]="length_viewtrn"
                                    [pageSize]="pageSize_Viewtrn"
                                    [showFirstLastButtons]="showFirstLastButtons"
                                    [pageSizeOptions]="pageSizeOptions"
                                    [pageIndex]="pageIndexViewtrn"
                                    [hidePageSize]="true"
                                    aria-label="Select page">                            
                        </mat-paginator>
                    </div>
                </div>
 
                
                        <!-- <div style="margin-left: 950px; margin-top: 10px">
                            <button type="button" class="btn btn-outline-primary" style="border-radius: 40px"
                                data-dismiss="modal" id="ecfap-0237">
                                Back
                            </button>
                        </div> -->
                        <!-- </td>
          </tr> -->
                        <!-- </div> -->
                    </div>
                </div>
            </div>
            
            <div class="modal-footer" >
                <button type="button" class="btn btn-outline-primary" style="border-radius:40px;"
                    data-dismiss="modal" id="ap-0404">Back</button>
            </div> 
        </div>
    </div>
</div>


<!-- Liquidation Details -->
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
data-keyboard="false" data-backdrop="static" id="ecfap-0007">
    <div class="modal-dialog modal-xl" style="width:80%;height:200%;">
        <div class="modal-content">
            <div class="modal-header" style="text-align:center">
                <h2 class="modal-title" style="text-align:center;margin-left:42%">Liquidation Details</h2>
                <button class="close" type="button" data-dismiss="modal" id="ecfap-0238">x</button>
            </div>
            <form [formGroup]="frmLiq">
                <table style="margin-left: 10px;">
                    <div style="margin-left: 10px;">
                        <tr>
                            <td>
                                <mat-form-field>
                                    <input type="text" matInput formControlName="advno" readonly
                                        placeholder="Advance No" id="ecfap-0239">
                                    <mat-label>Advance No</mat-label>
                                </mat-form-field>
                            </td>
                            <td *ngIf="payto_id =='S'">
                                <mat-form-field style="margin-left: 50px;">
                                    <input type="text" matInput formControlName="supplier" readonly
                                        placeholder="Supplier Name" id="ecfap-0240">
                                    <mat-label>Supplier Name</mat-label>
                                </mat-form-field>
                            </td>
                            <td *ngIf="payto_id !='S'">
                                <mat-form-field style="margin-left: 50px;">
                                    <input type="text" matInput formControlName="supplier" readonly
                                        placeholder="Employee Name" id="ecfap-0241">
                                    <mat-label>Employee Name</mat-label>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field style="margin-left: 50px;">
                                    <input type="text" matInput formControlName="amount" readonly
                                        placeholder="Advance Amount" id="ecfap-0242">
                                    <mat-label>Advance Amount</mat-label>
                                </mat-form-field>
                            </td>
                        </tr>
                    </div>
                </table>
            </form>
            <div>
                <table class="table table-bordered" style="width: 95%; margin-left: 25px;text-align: center;">
                    <thead class="table_header">
                        <tr>
                            <th>S.NO</th>
                            <th>CR No</th>
                            <th>Invoice Header Status</th>
                            <th>AP Status</th>
                            <th>Date</th>
                            <th>PPX Amount</th>
                            <th>PPX Balance</th>
                            <th>ECF Amount</th>
                            <th>AP Amount</th>
                        </tr>
                    </thead>
                    <tr *ngFor="let dt of liqDetails;let i=index">
                        <td>{{i+1}}</td>
                        <td>{{dt.current_crno}}</td>
                        <td>{{dt.apinvoicehdr_status.text}}</td>
                        <td>{{dt.apstatus?.text}}</td>
                        <td>{{dt.ppxheader_date | date: 'dd/MM/yyyy' }}</td>
                        <td>{{dt.ppxdetails_amount}}</td>
                        <td>{{dt.ppxdetails_balance}}</td>
                        <td>{{dt.ecf_amount}}</td>
                        <td>{{dt.ap_amount}}</td>
                    </tr>
                </table>
                <div *ngIf="liqDetails ?.length == 0" style="margin-left: 42%;">
                    <h3>Sorry data not found!.. </h3>
                </div>
            </div>
        </div>

    </div>
</div>

<!-- <pre>{{ecfradioForm.value|json}}</pre> -->


<div>
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
        data-backdrop="static" data-keyboard="false" id="ecfap-0008">
        <div class="modal-dialog modal-xl" style="width: 70%">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title mb-0"><b> Transaction Details </b></h3>
                    <button type="button" class="close" data-dismiss="modal" #closetranbutton aria-label="Close"
                        id="ecfap-0243">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="container">
                        <div class="row">
                            <div class="table-responsive" style="width: 100%; margin-top: 1%">
                                <div class="table-responsive">
                                    <lib-vs-cbox-summary [SummaryDetails]="SummarytransactionData"
                                        [SummaryApiObj]="SummaryApitransactionObjNew" [FirstLastbtn]="true"
                                    ></lib-vs-cbox-summary>
                                </div>
                                <br />
                                <table style="width: 100%; text-align: center">
                                    <tr>
                                        <td>Employee Name: &nbsp;{{ this.name }}</td>
                                        <td>Designation: &nbsp;{{ this.designation }}</td>
                                        <td>Branch Name : &nbsp;{{ this.branch }}</td>
                                    </tr>
                                </table>
                                <!-- <table
                    class="table table-bordered"
                    fixed-header
                    style="width: 99%; margin-top: 10px"
                  >
                    <thead class="table_header" style="text-align: left">
                      <tr>
                        <th>S.No</th>
                        <th>Status</th>
                        <th>Date</th>
                        <th>Remarks</th>
                        <th>Employee Name</th>
                        <th>Approver Name</th> -->
                                <!-- <th>Approved By</th> -->
                                <!-- </tr>
                    </thead>
                    <tr *ngFor="let dtl of tranrecords; index as i">
                      <td>{{ i + 1 }}</td>
                      <td>{{ dtl?.comments }}</td>
                      <td>{{ dtl?.created_date }}</td>
                      <td>{{ dtl?.remarks }}</td>
                      <td>
                        {{ dtl?.from_user?.name }}
                        <br />
                        <div *ngIf="dtl.from_user_id == -1; else deta"></div>
                        <ng-template #deta>
                          <a
                            style="color: green; cursor: pointer"
                            (click)="view(dtl)"
                            >View Details</a
                          >
                        </ng-template>
                      </td>
                      <td>
                        {{ dtl?.to_user?.name }}
                        <br />
                        <div *ngIf="dtl.to_user_id == -1; else deta1"></div>
                        <ng-template #deta1>
                          <a
                            style="color: green; cursor: pointer"
                            (click)="viewto(dtl)"
                            >View Details</a
                          >
                        </ng-template>
                      </td>
                    </tr>
                  </table> -->
                            </div>

                            <div class="row" *ngIf="tranrecords?.length > 0">
                                <div class="col-sm-8" style="margin-bottom: 0%;font-size: small;text-align: right;margin-top: 18px;font-weight:bold">
                                Page: {{tranrecordsCurrentPage}}
                                </div>
                                <div  class="col-sm-4" style="margin-bottom: 0%;font-size: small;text-align:right;">
                                    <mat-paginator  style="margin-top: 0%;width: 350px;"
                                                (page)="handleTranrecords($event)"
                                                [length]="length_tranrecords"
                                                [pageSize]="pageSize_tranrecords"
                                                [showFirstLastButtons]="showFirstLastButtons"
                                                [pageSizeOptions]="pageSizeOptions"
                                                [pageIndex]="pageIndextranrecords"
                                                [hidePageSize]="true"
                                                aria-label="Select page">                            
                                    </mat-paginator>
                                </div>
                            </div>
                                <!-- <div style="margin-left: 45%;width: 100%;margin-bottom: 10px;">
                                    <button type="button" class="btn btn-outline-danger" style="border-radius:40px;"
                                     data-dismiss="modal"  id="ap-0404">Back</button>
                                </div>   -->
                        
                        </div>
                    </div>
                </div>
                <div class="modal-footer" >
                    <button type="button" class="btn btn-outline-primary" style="border-radius: 40px"
                        data-dismiss="modal" aria-label="Close" (click)="tranback()" id="ap-0404">
                        Back
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
data-keyboard="false" data-backdrop="static"  id="ecfap-0009">
    <div class="modal-dialog modal-lg " style="width: 60%;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Attachments
                </h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" #closeAttachment
                    id="ecfap-0245">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="padding:2rem">
                <!-- <div class="row"> -->
                <div class="table-responsive">
                    <!-- <lib-vs-cbox-summary
                        [SummaryDetails]="SummaryFiles"
                        [SummaryApiObj]="SummaryApiFilesObjNew"
                      ></lib-vs-cbox-summary> -->
                    <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                    <table>
                        <thead>
                            <tr>
                                <th>S.No</th>
                                <th>File Name</th>
                                <th>View</th>
                                <th>Download</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let file of pagedFiles; index as j">
                                <td>{{(pageIndexAttach * pagesize_attach) + (j + 1)}}</td>
                                <td style="width: 303px;">
                                    <div  style="width: 300px;overflow: hidden" matTooltip="{{file.file_name}}" matTooltipClass="custom-tooltipnew">
                                        {{file.file_name}}
                                    </div>
                                </td>
                                <td style="text-align: left;">
                                    <i class="fa fa-external-link" aria-hidden="true"
                                        style="color:blue;font-size: 18px;margin-left: 20px;"
                                        (click)="data1(file)"></i>
                                </td>
                                <td style="text-align: left;">
                                    <i class="fa fa-download" style="color: green;" (click)="getfiles(file)">
                                    </i>
                                    <!-- <button mat-icon-button type="button">
                                    <mat-icon style="color:green;font-size: 24px;margin-bottom:15px" aria-label="download"  (click)="getfiles(attach)">
                                        download</mat-icon>
                                </button> -->
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    </div>
                    <div  *ngIf="allFiles.length >0">
                            <mat-paginator (page)="handleAttachmentsPageEvent($event)"
                                        [length]="length_attachments"
                                        [pageSize]="pagesize_attach"
                                        [pageSizeOptions]="pageSizeOptions"
                                        [pageIndex]="pageIndexAttach"
                                        aria-label="Select page" [hidePageSize]="true" >
                            </mat-paginator>
                    </div>
                </div>
                <!-- </div> -->
            </div>
            <!-- <tr>
                <td>
                    <button type="button" class="btn btn-light" style="border-radius:7px;margin-left:300px;
                        border-color: black; margin-bottom: 20px;
                        background-color: white;" (click)=attachmentback() id="ecfap-0246">Back</button>
                </td>
            </tr> -->
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-primary" style="border-radius:40px;"
                    (click)="attachmentback() " id="ecfap-0246">
                    Back
                </button>
            </div>
    </div>
    </div>
</div>



<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
data-keyboard="false" data-backdrop="static" id="ecfap-0010">
    <div class="modal-dialog modal-xl ">
        <div class="modal-content">
            <div class="modal-header" style="text-align:center;background:#DDEFDD;">
                <h3 class="modal-title" style="text-align:center;margin-left:38%;font-size: 22px;">
                    Change History</h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ecfap-0247">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="table-responsive" style="width: 95%;margin-left: 30px; margin-right: 25px;margin-bottom: 15px;">
                <h3 style=" font-size: 20px;margin-top: 10px;margin-bottom: 0px">Invoice Header</h3>
                <table id="customers" style="text-align: center;margin-top: 0px">
                    <thead>
                        <tr>
                            <th style="text-align: center;color: black;">S.NO</th>
                            <th style="text-align: center;color: black;">Type</th>
                            <th style="text-align: center;color: black;">CR No.</th>
                            <th style="text-align: center;color: black;">Invoice No.</th>
                            <th style="text-align: center;color: black;">Is GST</th>
                            <th style="text-align: center;color: black;">Invoice Amount</th>
                            <th style="text-align: center;color: black;">Taxable Amount</th>
                            <th style="text-align: center;color: black;">Supplier Name</th>
                            <th style="text-align: center;color: black;">Branch Name</th>
                            <th style="text-align: center;color: black;">Invoice Date</th>
                            <th style="text-align: center;color: black;">Purpose</th>
                            <th style="text-align: center;color: black;">Invoice Status</th>
                            <th style="text-align: center;color: black;">Transaction By</th>
                        </tr>
                    </thead>
                    <tr *ngFor="let hdr of changeHistoryInvHdr;let i=index">
                        <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{(presentpageHdrChgHist
                            - 1)*10 +i+1 }}</td>
                        <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                            {{hdr?.module_type?.text}}</td>
                        <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                            {{hdr?.apinvoiceheader_crno}}</td>
                        <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{hdr?.invoiceno}}</td>
                        <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{hdr?.invoicegst}}</td>
                        <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{hdr?.totalamount|
                            currency:'INR'}}</td>
                        <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{(hdr?.totalamount -
                            hdr?.taxamount)| currency:'INR'}}</td>
                        <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{hdr?.supplier_id}}</td>
                        <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{hdr?.branch}}</td>
                        <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{hdr?.invoicedate}}</td>
                        <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{hdr?.remarks}}</td>
                        <td *ngIf="hdr.module_type.text == 'ECF'"
                            [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{hdr?.invoice_status}}
                        </td>
                        <td *ngIf="hdr.module_type.text == 'AP'"
                            [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                            {{hdr?.apinvoiceheader_status}}</td>
                        <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                            {{hdr?.transaction_by?.name}} - {{hdr?.transaction_by?.code}}</td>
                    </tr>
                </table>

                <div *ngIf="changeHistoryInvHdr.length == 0" style="margin-left: 42%;">
                    <h3>Sorry data not found!.. </h3>
                </div>
                <div class="row" *ngIf="changeHistoryInvHdr.length > 0" style="width:85%">
                    <div class="col-sm-3" style="font-size: small;text-align:left;right:-225px;">
                    </div>
                    <div class="col-sm-9" style="font-size: small;text-align:right;left: 18%">
                        <mat-paginator (page)="handleHdrChgHistPageEvent($event)" [length]="length_HdrChgHist"
                            [pageSize]="pageSize_HdrChgHist" [showFirstLastButtons]="showFirstLastButtons"
                            [pageSizeOptions]="pageSizeOptions" [pageIndex]="pageIndex_HdrChgHist" [hidePageSize]="true"
                            aria-label="Select page">
                        </mat-paginator>
                    </div>
                </div>

            </div>


            <div class="table-responsive" style="width: 95%;;margin-left: 30px;margin-right: 25px;margin-bottom: 15px">
                <h3 style=" font-size: 20px;;margin-top: 0px;margin-bottom: 0px">Invoice Detail</h3>
                <table id="customers" style="text-align: center;margin-top: 0px">
                    <thead>
                        <tr>
                            <th style="text-align: center;color: black;">S.NO</th>
                            <th style="text-align: center;color: black;">Type</th>
                            <th style="text-align: center;color: black;">Particulars</th>
                            <th *ngIf="ecftypeid ==1" style="text-align: center;color: black;">GRN Code</th>
                            <th style="text-align: center;color: black;">Product Name</th>
                            <!-- <th style="text-align: center;color: black;">Is Capitalized</th> -->
                            <th style="text-align: center;color: black;">UOM</th>
                            <th style="text-align: center;color: black;">HSN Code</th>
                            <th style="text-align: center;color: black;">HSN %</th>
                            <th style="text-align: center;color: black;">Unit Price</th>
                            <th style="text-align: center;color: black;">Quantity</th>
                            <th style="text-align: center;color: black;">Amount</th>
                            <th style="text-align: center;color: black;">CGST</th>
                            <th style="text-align: center;color: black;">SGST</th>
                            <th style="text-align: center;color: black;">IGST</th>
                            <th style="text-align: center;color: black;">Tax Amount</th>
                            <th style="text-align: center;color: black;">Discount</th>
                            <th style="text-align: center;color: black;">Total Amount</th>
                            <th style="text-align: center;color: black;">Transaction By</th>
                        </tr>
                    </thead>
                    <tr *ngFor="let dtl of changeHistoryInvdtl;let i=index">
                        <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{(presentpageDtlChgHist
                            - 1)*10 +i+1 }}</td>
                        <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                            {{dtl?.module_type?.text}}</td>
                        <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dtl?.description}}</td>
                        <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'" *ngIf="">
                            {{dtl?.grn_code}}</td>
                        <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dtl?.productname}}</td>
                        <!-- <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'" *ngIf="dtl?.is_capitalized==0">No</td>
                     <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'" *ngIf="dtl?.is_capitalized==1">Yes</td> -->
                        <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dtl?.uom}}</td>
                        <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dtl?.hsn}}</td>
                        <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dtl?.hsn_percentage}}
                        </td>
                        <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dtl?.unitprice}}</td>
                        <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dtl?.quantity}}</td>
                        <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dtl?.amount|
                            currency:'INR'}}</td>
                        <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dtl?.cgst|
                            currency:'INR'}}</td>
                        <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dtl?.sgst|
                            currency:'INR'}}</td>
                        <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dtl?.igst|
                            currency:'INR'}}</td>
                        <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dtl?.taxamount|
                            currency:'INR'}}</td>
                        <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dtl?.discount|
                            currency:'INR'}}</td>
                        <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dtl?.totalamount|
                            currency:'INR'}}</td>
                        <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                            {{dtl?.transaction_by?.name}} - {{dtl?.transaction_by?.code}}</td>
                    </tr>
                </table>

                <div *ngIf="changeHistoryInvdtl.length == 0" style="margin-left: 42%;">
                    <h3>Sorry data not found!.. </h3>
                </div>
                <div class="row" *ngIf="changeHistoryInvdtl.length > 0" style="width:85%">
                    <div class="col-sm-3" style="font-size: small;text-align:left;right:-225px;">
                    </div>
                    <div class="col-sm-9" style="font-size: small;text-align:right;left: 18%">
                        <mat-paginator (page)="handleDtlChgHistPageEvent($event)" [length]="length_DtlChgHist"
                            [pageSize]="pageSize_DtlChgHist" [showFirstLastButtons]="showFirstLastButtons"
                            [pageSizeOptions]="pageSizeOptions" [pageIndex]="pageIndex_DtlChgHist" [hidePageSize]="true"
                            aria-label="Select page">
                        </mat-paginator>
                    </div>
                </div>

            </div>
            <div class="table-responsive" style="width: 95%;;margin-left: 30px;margin-right: 20px;margin-bottom: 15px">
                <h3 style=" font-size: 20px;margin-top: 0px;margin-bottom: 0px">Debit Detail</h3>
                <table id="customers" style="text-align: center;margin-top: 0px">
                    <thead>
                        <tr>
                            <th style="text-align: center;color: black;">S.No</th>
                            <th style="text-align: center;color: black;">Type</th>
                            <th style="text-align: center;color: black;">Category</th>
                            <th style="text-align: center;color: black;">Sub Category </th>
                            <th style="text-align: center;color: black;">GL Number</th>
                            <th style="text-align: center;color: black;">BS </th>
                            <th style="text-align: center;color: black;">CC</th>
                            <th style="text-align: center;color: black;">CCBS Percentage</th>
                            <th style="text-align: center;color: black;">Amount</th>
                            <th style="text-align: center;color: black;">Adjust Amount</th>
                            <th style="text-align: center;color: black;">Debit Amount</th>
                            <th style="text-align: center;color: black;">Transaction By</th>
                        </tr>
                    </thead>
                    <tr *ngFor="let dbt of changeHistoryDbtdtl;let i=index">
                        <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{(presentpageDebChgHist
                            - 1)*10 +i+1 }}</td>
                        <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                            {{dbt?.module_type?.text}}</td>
                        <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dbt?.category}}</td>
                        <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                            {{dbt?.subcategory?.name}}</td>
                        <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dbt?.glno}} -
                            {{dbt?.subcategory?.gl_description}}</td>
                        <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dbt?.bs_name}}</td>
                        <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dbt?.cc_name}}</td>
                        <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                            style="text-align:center">{{dbt?.ccbspercentage}}</td>
                        <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'" style="text-align:right">
                            {{dbt?.amount| currency:'INR'}}</td>
                        <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'" style="text-align:right">
                            {{dbt?.deductionamount}}</td>
                        <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'" style="text-align:right">
                            {{dbt?.amount| currency:'INR'}}</td>
                        <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                            {{dbt?.transaction_by?.name}} - {{dbt?.transaction_by?.code}}</td>
                    </tr>
                </table>

                <div *ngIf="changeHistoryDbtdtl.length == 0" style="margin-left: 42%;">
                    <h3>Sorry data not found!.. </h3>
                </div>
                <div class="row" *ngIf="changeHistoryDbtdtl.length > 0" style="width:85%">
                    <div class="col-sm-3" style="font-size: small;text-align:left;right:-225px;">
                    </div>
                    <div class="col-sm-9" style="font-size: small;text-align:right;left: 18%">
                        <mat-paginator (page)="handleDebChgHistPageEvent($event)" [length]="length_DebChgHist"
                            [pageSize]="pageSize_DebChgHist" [showFirstLastButtons]="showFirstLastButtons"
                            [pageSizeOptions]="pageSizeOptions" [pageIndex]="pageIndex_DebChgHist" [hidePageSize]="true"
                            aria-label="Select page">
                        </mat-paginator>
                    </div>
                </div>

            </div>
            <div class="table-responsive" style="width: 95%;margin-left:30px;margin-right: 25px;">
                <h3 style="font-size: 20px;margin-top: 0px;margin-bottom: 0px">Credit Detail</h3>
                <table id="customers" style="text-align: center;margin-top: 0px">
                    <thead>
                        <tr>
                            <th style="text-align: center;color: black;">S.No</th>
                            <th style="text-align: center;color: black;">Type</th>
                            <th style="text-align: center;color: black;">Paymode</th>
                            <th style="text-align: center;color: black;">Account Detail/GL</th>
                            <th style="text-align: center;color: black;">Transaction Branch</th>
                            <th style="text-align: center;color: black;">Ref No</th>
                            <th style="text-align: center;color: black;">Bank Name</th>
                            <th style="text-align: center;color: black;">Branch Name</th>
                            <th style="text-align: center;color: black;">IFSC Code</th>
                            <th style="text-align: center;color: black;">Beneficiary Name</th>
                            <th style="text-align: center;color: black;">Tax Type - GL No</th>
                            <th style="text-align: center;color: black;">Tax Rate</th>
                            <th style="text-align: center;color: black;">TDS Excempt</th>
                            <th style="text-align: center;color: black;">Taxable Amount</th>
                            <th style="text-align: center;color: black;">GL No</th>
                            <th style="text-align: center;color: black;">Amount</th>
                            <th style="text-align: center;color: black;">Transaction By</th>
                        </tr>
                    </thead>
                    <tr *ngFor="let cdt of changeHistoryCreddtl;let i=index">
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{(presentpageCredChgHist
                            - 1)*10 +i+1 }}</td>
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                            {{cdt?.module_type?.text}}</td>
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{cdt?.paymode}}</td>
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{cdt?.refno}}</td>
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                            style="text-align: center;">-</td>
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{cdt?.refno}}</td>

                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                            *ngIf="this.paytoid == 'S'"><ng-container
                                *ngFor="let cdtdtl of cdt?.supplierpayment_details?.data">{{cdtdtl?.bank_id?.name}}</ng-container>
                        </td>
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                            *ngIf="this.paytoid == 'S'"><ng-container
                                *ngFor="let cdtdtl of cdt?.supplierpayment_details?.data">{{cdtdtl?.branch_id?.name}}</ng-container>
                        </td>
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                            *ngIf="this.paytoid == 'S'"><ng-container
                                *ngFor="let cdtdtl of cdt?.supplierpayment_details?.data">{{cdtdtl?.branch_id?.ifsccode}}</ng-container>
                        </td>
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                            *ngIf="this.paytoid == 'S'"><ng-container
                                *ngFor="let cdtdtl of cdt?.supplierpayment_details?.data">{{cdtdtl?.beneficiary}}</ng-container>
                        </td>

                        <!-- <td *ngIf="this.paytoid == 'E'"><ng-container *ngFor="let cdtdtl of cdt?.employeeaccount_details?.data">{{cdtdtl?.bank_name}}</ng-container></td>
                        <td *ngIf="this.paytoid == 'E'"><ng-container *ngFor="let cdtdtl of cdt?.employeeaccount_details?.data">{{cdtdtl?.bankbranch?.name}}</ng-container></td>
                        <td *ngIf="this.paytoid == 'E'"><ng-container *ngFor="let cdtdtl of cdt?.employeeaccount_details?.data">{{cdtdtl?.bankbranch?.ifsccode}}</ng-container></td>
                        <td *ngIf="this.paytoid == 'E'"><ng-container *ngFor="let cdtdtl of cdt?.employeeaccount_details?.data">{{cdtdtl?.beneficiary_name}}</ng-container></td> -->
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                            *ngIf="this.paytoid == 'E'">{{cdt?.employeeaccount_details?.data[0]?.bank_name}}</td>
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                            *ngIf="this.paytoid == 'E'">{{cdt?.employeeaccount_details?.data[0]?.bankbranch?.name}}</td>
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                            *ngIf="this.paytoid == 'E'">{{cdt?.employeeaccount_details?.data[0]?.bankbranch?.ifsccode}}
                        </td>
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                            *ngIf="this.paytoid == 'E'">{{cdt?.employeeaccount_details?.data[0]?.beneficiary_name}}</td>

                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                            *ngIf="this.paytoid == 'B'">KARUR VYSYA BANK</td>
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                            *ngIf="this.paytoid == 'B'">EXPENSES MANAGEMENT CELL</td>
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                            *ngIf="this.paytoid == 'B'">KVBL0001903</td>
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                            *ngIf="this.paytoid == 'B'">EXPENSES MANAGEMENT CELL</td>
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{cdt?.suppliertaxtype}}
                        </td>
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{cdt?.suppliertaxrate}}
                        </td>
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{cdt?.taxexcempted}}
                        </td>
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'" style="text-align:right">
                            {{cdt?.taxableamount| currency:'INR'}}</td>
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{cdt?.glno}}</td>
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'" style="text-align:right">
                            {{cdt?.amount| currency:'INR'}}</td>
                        <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                            {{cdt?.transaction_by?.name}} - {{cdt?.transaction_by?.code}}</td>

                    </tr>
                </table>

                <div *ngIf="changeHistoryCreddtl.length == 0" style="margin-left: 42%;">
                    <h3>Sorry data not found!.. </h3>
                </div>
                <div class="row" *ngIf="changeHistoryCreddtl.length > 0" style="width:85%">
                    <div class="col-sm-3" style="font-size: small;text-align:left;right:-225px;">
                    </div>
                    <div class="col-sm-9" style="font-size: small;text-align:right;left: 18%">
                        <mat-paginator (page)="handleCredChgHistPageEvent($event)" [length]="length_CredChgHist"
                            [pageSize]="pageSize_CredChgHist" [showFirstLastButtons]="showFirstLastButtons"
                            [pageSizeOptions]="pageSizeOptions" [pageIndex]="pageIndex_CredChgHist"
                            [hidePageSize]="true" aria-label="Select page">
                        </mat-paginator>
                    </div>
                </div>

            </div>
            <div>
                <button data-dismiss="modal" class="btn btn-outline-primary"
                    style="border-radius:35px;height: 40px;margin-top: 1%;margin-bottom: 2%; margin-left: 500px;"
                    id="ecfap-0248">Back</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
data-keyboard="false" data-backdrop="static"  id="ecfap-0015">
    <div class="modal-dialog modal-xl" style="width: 70%">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    View Entry -
                    {{ CommonTransCrno }}
                </h3>
                <button type="button" class="close" #closeCommonentry (click)="closeCommonEntryClick()"
                    data-dismiss="modal" aria-label="Close" id="ecfap-0249">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div>
                <div class="modal-body">
                    <div class="table-responsive">
                        <lib-vs-cbox-summary [SummaryDetails]="SummaryviewecfData"
                            [SummaryApiObj]="SummaryApiviewecfObjNew" [FirstLastbtn]="true"></lib-vs-cbox-summary>
                    </div>
                    <!-- <table
                class="table table-bordered"
                style="width: 100%; text-align: center"
              >
                <thead class="table_header">
                  <tr>
                    <th>S.No</th>
                    <th>Type</th>
                    <th>GL No</th>
                    <th>GL Description</th>
                    <th>Module</th>
                  <th>Entry Status</th> -->
                    <!-- <th>Transaction Date</th>
                    <th>Amount</th>
                  </tr>
                </thead>
                <tr
                  *ngFor="let dt of commonViewEntrySummary; let i = index"
                >
                  <td>{{ i + 1 }}</td>
                  <td>{{ dt?.entry_type == "D" ? "DEBIT" : "CREDIT" }}</td>
                  <td>{{ dt?.entry_gl }}</td>
                  <td>{{ dt?.gl_name }}</td>
                  <td>{{ dt?.entry_module }}</td> -->
                    <!-- <td></td> -->
                    <!-- <td>
                    {{ dt?.entry_transactiondate | date : "dd-MMM-yyyy " }}
                    {{ dt?.entry_transactiontime }}
                  </td>
                  <td>{{ dt?.entry_amt }}</td>
                </tr>
              </table>  -->
                    <!-- <div *ngIf="commonViewEntrySummary?.length == 0" style="margin-left: 42%">
                        <h3>Sorry data not found!..</h3>
                    </div> -->
                    <!-- <div *ngIf="isCommonViewEntrypage" style="margin-left: 950px; margin-top: 10px"> -->
                    <!-- <div  class="col-sm-3" style="font-size: small;text-align:left;right:-225px;">
                           <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -85%;">
                           </p>
                       </div>
                       <div  class="col-sm-9" style="font-size: small;text-align:right;left: 18%">
                           <button mat-icon-button [disabled]="has_CommonViewEntrypageprevious === false" color="primary" (click)="previousClickCommonViewEntry()" id="ecfap-0250">
                               <mat-icon>arrow_back</mat-icon>
                           </button> {{CommonViewEntryPage}}
                           <button mat-icon-button [disabled]="has_CommonViewEntrypagenext === false" color="primary" (click)="nextClickCommonViewEntry()" id="ecfap-0251">
                               <mat-icon>arrow_forward</mat-icon>
                           </button>
                       </div> -->
                    <!-- </div> -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-primary" style="border-radius: 40px"
                        (click)="closeCommonEntryClick()" id="ecfap-0252">
                        Back
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true"
data-keyboard="false" data-backdrop="static"  id="ecfap-0016">
    <div class="modal-dialog modal-xl" style="width:80%;height:200%;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Find Supplier</h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ecfap-0253">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <!-- <br> -->
            <div class="modal-body">
                <!-- <form [formGroup]="SelectSupplierForm" (ngSubmit)="SelectSuppliersearch($event)"> -->
                <form [formGroup]="SelectSupplierForm">
                    <div class="search-auto-fit" style="margin-left:20px">
                        <lib-vs-search-cmp id="matInput-size" [SearchArr]="suppliersearch" [Outputtype]="searchvar"
                            (dataoutput)="SelectSuppliersearch($event)" [SeparateReset]="true" Tooltip="true"
                            (ResetOutput)="dataclear($event)">
                        </lib-vs-search-cmp>
                    </div>

                    <table style="margin-left: 20px;">
                        <div>
                            <!-- <tr> -->
                            <!-- <td>
                                    <mat-form-field style="width: 200px;">
                                        <mat-label>Supplier GST Number</mat-label>
                                        <input matInput placeholder="GST No" formControlName="gstno"
                                            autocomplete="off" (keypress)="only_numalpha($event)" maxlength="15" id="ecfap-0254">
                                    </mat-form-field>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                </td>
                                <td>
                                    <mat-form-field style="width: 200px;">
                                        <mat-label>Supplier Code</mat-label>
                                        <input matInput placeholder="Supplier" formControlName="code"
                                            autocomplete="off" (keypress)="only_numalpha($event)" maxlength="10" id="ecfap-0255">
                                    </mat-form-field>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                </td> -->
                            <!-- [disabled]="showsuppliercode"  -->
                            <!-- <td>
                                    <mat-form-field style="width: 200px;">
                                        <mat-label>PAN Number</mat-label>
                                        <input matInput placeholder="PAN" formControlName="panno" autocomplete="off"
                                            (keypress)="only_numalpha($event)" id="ecfap-0256">
                                    </mat-form-field>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                </td> -->
                            <!--  [disabled]="true" -->
                            <!-- <button class="btn btn-outline-primary" type="submit"
                                    style="border-radius:40px;margin-left: 15px;" color="primary"
                                    (click)="SelectSuppliersearch($event)" id="ecfap-0257"><i class="fa fa-search"
                                        aria-hidden="true"></i></button>&nbsp; -->
                            <!-- <button type="button" style="border-radius:10px;margin-left: 15px; border-color: black; 
                                background-color: white;" class="btn btn-light" (click)="dataclear()" id="ecfap-0258">
                                    Reset</button> -->
                            <!-- <button type="button" style="border-radius:40px;margin-left: 15px;
                                    font-family: 'Times New Roman', Times, serif;"
                                        class="btn btn-outline-primary" (click)="dataclear($event)" id="ecfap-0259">
                                        Reset</button> -->
                            <!-- </tr> -->

                            <tr>
                                <div *ngIf="default">
                                    <lib-vs-dynamicform-cmp id="matInput-size" [formGroup]="SelectSupplierForm"
                                        (dataEvent)="choosesupplierdata($event)" [InputFields]="choose_supplier_field"
                                        [ResetForm]="restformfile"></lib-vs-dynamicform-cmp>
                                    <!-- <td>
                                        <mat-form-field style="width: 250px;margin-top: 5px;" (click)="getsuppdd()">
                                            <mat-label>Choose Supplier</mat-label>
                                            <input #suppInput placeholder="Choose Supplier" matInput
                                                formControlName="name" [matAutocomplete]="Suppliertype" id="ecfap-0260">
                                            <mat-autocomplete [panelWidth]="400" #Suppliertype="matAutocomplete"
                                                [displayWith]="displayFn" (opened)="supplierScroll()">
                                                <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                                </mat-option>
                                                <ng-container *ngIf="!isLoading"> -->
                                    <!-- ngDefaultControl [(ngModel)]="inputSUPPLIERValue"
                                                        [ngModelOptions]="{standalone: true}"
                                                        (ngModelChange)="inputSUPPLIERValue = $event.toUpperCase()" -->
                                    <!-- <mat-option *ngFor="let suppliername of supplierNameData"
                                                        
                                                        (onSelectionChange)="getsuppView(suppliername)" 
                                                        [value]="suppliername" matTooltip="{{suppliername.name}}" matTooltipClass="custom-tooltipnew">
                                                        {{suppliername.name}}
                                                    </mat-option>
                                                </ng-container>
                                            </mat-autocomplete>
                                        </mat-form-field>
                                    </td> -->
                                </div>
                                <div *ngIf="alternate">
                                    <lib-vs-dynamicform-cmp id="matInput-size" [formGroup]="SelectSupplierForm"
                                        (dataEvent)="choosesupplierdata1($event)"
                                        [InputFields]="choose_supplier_field_1"
                                        [ResetForm]="restformfile1"></lib-vs-dynamicform-cmp>
                                    <!-- <td>
                                        <mat-form-field style="width: 250px;margin-top: 5px;" (click)="getsuppdd()">
                                            <mat-label>Choose Supplier</mat-label>
                                            <input #name placeholder="Choose Supplier" matInput
                                                formControlName="name" [matAutocomplete]="autosupp2" id="ecfap-0261">
                                            <mat-autocomplete [panelWidth]="400" #autosupp2="matAutocomplete"
                                                [displayWith]="displaytest"> -->
                                    <!-- [(ngModel)]="inputSUPPLIERValue" [ngModelOptions]="{standalone: true}" 
                                                
                                                        ngDefaultControl
                                                        (ngModelChange)="inputSUPPLIERValue = $event.toUpperCase()" -->
                                    <!-- <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                                </mat-option>
                                                <ng-container *ngIf="!isLoading">
                                                    <mat-option *ngFor="let suppliername of selectsupplierlist"
                                                    (onSelectionChange)="getsuppView(suppliername)"
                                                        [value]="suppliername" matTooltip="{{suppliername.name}}" matTooltipClass="custom-tooltipnew">
                                                        {{suppliername.name}}
                                                    </mat-option>
                                                </ng-container>
                                            </mat-autocomplete>
                                        </mat-form-field>
                                    </td> -->
                                </div>
                            </tr>
                        </div>
                    </table>
                    <!-- <form [formGroup]="supplierchooseForm"></form> -->
                    <table width="100%" style="margin-top: 2%;margin-bottom: 5%;">
                        <tbody>
                            <tr>
                                <td valign="top">
                                    <table style="font-size:14px;margin-left: 20px;">
                                        <tbody>
                                            <tr>
                                                <td
                                                    style="color: #808080;  width: 200px;font-size: medium;height: 50px">
                                                    Supplier Name:
                                                </td>
                                                <td style="width: 400px;height: 50px">
                                                    {{SupplierName }}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="color: #808080; width: 200px;font-size: medium;height: 50px">
                                                    Supplier Code:
                                                </td>
                                                <td style="width: 400px;height: 50px">
                                                    {{SupplierCode }}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td
                                                    style="color: #808080;  width: 200px;font-size: medium;height: 50px">
                                                    Supplier GST Number:
                                                </td>
                                                <td style="width: 400px;height: 50px">
                                                    {{SupplierGSTNumber }}
                                                </td>
                                            </tr>
                                            <!-- <p style="color: #808080; margin: 0px 0 4px;">
                                                    Supplier Name:
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
                                                        style="color: black;margin-left: 2.5em;">{{SupplierName }}
                                                    </span>
                                                </p>
                                                <p style="color: #808080; margin: 0px 0 4px;margin-top: 3%;">
                                                    Supplier Code:
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                    <span style="color: black;margin-left: 3.8em;">{{SupplierCode}}
                                                    </span>
                                                </p>
                                                <p style="color: #808080; margin: 0px 0 4px;margin-top: 3%;">
                                                    Supplier GST Number:
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                    <span
                                                        style="color: black;margin-left: 0.2em;">{{SupplierGSTNumber}}
                                                    </span>
                                                </p> -->
                                        </tbody>
                                    </table>
                                </td>
                                <td valign="top">
                                    <table style="font-size:14px;margin-left:-120px;">
                                        <tbody>
                                        <tbody>
                                            <tr>
                                                <td
                                                    style="color: #808080;  width: 120px;font-size: medium;height: 50px">
                                                    PAN Number:
                                                </td>
                                                <td style="width: 300px;height: 50px">
                                                    {{SupplierPANNumber }}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="color: #808080; width: 120px;font-size: medium;height: 50px">
                                                    Address:
                                                </td>
                                                <td style="width: 300px;height: 50px">
                                                    {{line1 }},
                                                    {{line2 }},
                                                    {{line3 }}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td
                                                    style="color: #808080;  width: 120px;font-size: medium;height: 50px">
                                                    City:
                                                </td>
                                                <td style="width: 300px;height: 50px">
                                                    {{City }}
                                                </td>
                                            </tr><!-- <tr>
                                                <p style="color: #808080; margin: 0px 0 4px;">
                                                    PAN Number:
                                                    &nbsp;&nbsp;&nbsp;<span
                                                        style="color: black;margin-left: 0em;">{{SupplierPANNumber}}
                                                    </span>
                                                </p>
                                                <p style="color: #808080; margin: 0px 0 4px;margin-top: 3%;">
                                                    Address:
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                    <span style="color: black;margin-left: 0.3em;"> {{line1}},
                                                        {{line2}},
                                                        {{line3}}</span>
                                                </p>
                                                <p style="color: #808080; margin: 0px 0 4px;margin-top: 3%;">
                                                    City:
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                    <span style="color: black;margin-left: -0.4em;">{{City}} </span>
                                                </p>
                                            </tr> -->
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </form>
            </div>


            <!-- <br><br> -->
            <div class="modal-footer">
                <!-- <div style="margin-left: 20px; "> -->
                <!-- <tr> -->
                <!-- <button type="button" data-dismiss="modal" style="border-radius:10px;margin-left: 500px;border-color: #f5c68b;
                                    background-color: #f5c68b;" class="btn btn-light"
                                        (click)="Branchcallingfunction()" id="ecfap-0262">
                                        Submit</button> -->
                <button type="button" data-dismiss="modal" [disabled]="!submitbutton" style="border-radius: 40px"
                    class="btn btn-outline-success" (click)="supplierModalSubmit()" id="ecfap-0263">
                    Submit</button>
                <button type="button" data-dismiss="modal" style="border-radius: 40px; margin-left: 10px"
                    class="btn btn-outline-primary" id="ecfap-0264">Back</button>
                <!-- </tr> -->
            </div>
        </div>
    </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
    data-backdrop="static" data-keyboard="false" id="ecfap-0017">
    <div class="modal-dialog modal-xl" >

        <div class="modal-content">
            <div class="modal-header" >
                <h3 class="modal-title">Supplier Details</h3>
                <button type="button" #supclosebuttons class="close" data-dismiss="modal" aria-label="Close"
                    id="ecfap-0265">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

                <form [formGroup]="SupplierDetailForm">
                   
                        <div class="search-auto-fit">

                            
                                <div id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Supplier Gst-No</mat-label>
                                        <input matInput  formControlName="suppliergst"
                                            readonly id="ecfap-0266">

                                    </mat-form-field>
                                    <!-- (input)="validationGstNo($event)" -->
                                </div>
                                
                                    <!-- <span class="fa fa-check-circle" style="font-size:36px;color:darkblue;margin-left:10px;cursor: pointer;" 
                                    matTooltip="validate" matTooltipClass="custom-tooltipnew" (click)="validationGstNo(SupplierDetailForm?.value?.suppliergst)"></span> -->
                               
                                <div id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Supplier Name</mat-label>
                                        <input matInput  formControlName="supplier_name"
                                            readonly id="ecfap-0267">
                                    </mat-form-field>
                                </div>
                                <!-- <td *ngIf="!supdetDisable">
                                    <mat-form-field
                                        style="width:200px;margin-left:-400px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="Supplier Name" formControlName="supplier_name"
                                        autocomplete="off" readonly id="ecfap-0268">
                                    </mat-form-field>
                                </td> -->
                                <div id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Supplier Pin-Code</mat-label>
                                        <input matInput formControlName="pincode"
                                            readonly id="ecfap-0269">
                                    </mat-form-field>
                                </div>
                                <!-- <td >
                                    <mat-form-field
                                        style="width:200px;margin-left:-150px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="Supplier Pin-Code" formControlName="pincode" maxlength="6"
                                        autocomplete="off" (keypress)="numberOnly($event)" readonly id="ecfap-0270">
                                    </mat-form-field>
                                </td> -->
                                <div id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Invoice No</mat-label>
                                        <input matInput  formControlName="invoiceno" readonly
                                            id="ecfap-0271">
                                    </mat-form-field>
                                </div>

                           
                           

                                <div id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Date</mat-label>
                                        <input matInput  formControlName="invoicedate" readonly
                                            id="ecfap-0272">
                                    </mat-form-field>
                                </div>
                                <div id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Supplier Address</mat-label>
                                        <input matInput  formControlName="address"
                                            readonly autocomplete="off" id="ecfap-0273">
                                    </mat-form-field>
                                </div>
                                <!-- <td *ngIf="!supdetDisable">
                                    <mat-form-field
                                        style="width:400px;margin-left:70px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="Supplier Address" formControlName="address" 
                                            autocomplete="off"  id="ecfap-0274">
                                    </mat-form-field>
                                </td> -->

                            

                        </div>
                   
                   
                </form>

            </div>

            <div class="modal-footer">
                <button type="submit" style="border-radius:40px;" (click)="supplierBack()" class="btn btn-outline-primary"
                   id="ecfap-0275">Back</button>
            </div>

        </div>
    </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
    aria-hidden="true" data-backdrop="static" data-keyboard="false" id="ecfap-0284">
    <div class="modal-dialog modal-xl " style="width: 35%;">
        <div class="modal-content">
            <div class="modal-header text-center">
                <h3 class="modal-title">
                    Create Template
                </h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

                <form [formGroup]="createTempForm">

                    <div style="display: flex;justify-content: space-around;">

                        <div>
                            <mat-radio-group formControlName="inv_crnos" class="ecfap">
                                <mat-radio-button *ngFor="let n of invCrnosForTemplate" [value]="n"
                                    style="margin-left: 3%;margin-top: 10px">
                                    {{n.apinvoiceheader_crno}} </mat-radio-button>
                            </mat-radio-group>
                        </div>
                        <div id="matInput-size">
                            <mat-form-field appearance="outline">
                                <mat-label>Template Name</mat-label>
                                <input matInput placeholder="Template Name" formControlName="name" autocomplete="off">
                            </mat-form-field>
                        </div>


                    </div>

                </form>
            </div>

            <div class="modal-footer">
                <div>
                    <button type="submit" style="border-radius:40px;" class="btn btn-outline-success"
                        (click)="submitCreateTemp()">
                        Submit</button>
                </div>
                <div>
                    <button type="button" data-dismiss="modal" style="border-radius:40px;"
                        class="btn btn-outline-primary" >
                        Back</button>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- <div class="modal fade" tabindex="-1" role="dialog" data-keyboard="false"Add commentMore actions
        data-backdrop="static" aria-labelledby="myExtraLargeModalLabel" aria-hidden="true" id="ecfap-0289">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
            <div class="modal-header text-center" style="background:#DDEFDD;">
                <h2 class="modal-title w-100 font-weight-bold" style="font-family: 'Times New Roman', Times, serif;">
                        Note Pad

                        <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ecfap-view-0030">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    </h2>
                </div>
                <br>
                <div style="margin-left: 50px;width:90%;height: 70%;">
                    <div>

                        <div [ngxSummernote]="config"
                            [ngxSummernoteDisabled]="editorDisabled" (blur)="onBlur()"
                            (mediaDelete)="onDelete($event)"
                            (summernoteInit)="summernoteInit($event)"
                            formControlName="notename">
                        </div>

                    </div>
                </div>
                <br>
                <div> -->
                    <!-- <button type="button" style="border-radius: 40px;margin-left: 10px;"
                        class="btn btn-outline-primary"
                        data-dismiss="modal" id="ecfap-view-0031">Close</button> -->

                    <!-- <button *ngIf="!editorDisabled" style="border-radius:40px;margin-left: 10px; "
                    class="btn btn-outline-success" type="button"
                        data-dismiss="modal" (click)="notessave()" id="ecfap-view-0032">
                        Submit</button> -->
                <!-- <button type="button" style="border-radius:40px;margin-left: 500px;margin-bottom: 10px; "
                    class="btn btn-outline-danger"
                        data-dismiss="modal" id="ecfap-view-0033">
                        Back</button>

                </div>
            </div>
        </div>
</div> -->
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
data-keyboard="false" data-backdrop="static"  id="addpocomponent">
    <div class="modal-dialog modal-lg " style="width: 60%;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Component Details
                </h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" #closecomponent
                    id="ecfap-0245">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="padding:2rem">
                <div class="table-responsive">
                    <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                    <table>
                        <thead>
                            <tr>
                                <th>S.No</th>
                                    <th>Product Name</th>
                                            <th style="width:80px">
                                                HSN Code</th>
                                            <th style="width:30px">
                                                HSN %</th>
                                            <th style="width:100px">Unit Price</th>
                                            <th style="width:50px">Quantity</th>
                                            <th style="width:100px">Amount</th>
                                            <th style="width:100px">Taxable Amount</th>
                                            <th style="width:100px">
                                                CGST</th>
                                            <th style="width:100px">
                                                SGST</th>
                                            <th style="width:100px">
                                                IGST</th>
                                            <th style="width:100px">
                                                Tax Amount</th>
                                            <th style="width:100px">Total Amount</th>

                            </tr>
                        </thead>
                      <tbody>
  <tr *ngFor="let child of selectedDetail?.invoicedetail_child?.data; let j = index">
    <td>{{ j + 1 }}</td>
    <td style="width: 303px;">
      <div style="width: 300px; overflow: hidden"
          matTooltip="{{ child.productname }}"
          matTooltipClass="custom-tooltipnew">
        {{ child.productname }}
      </div>
    </td>
    <td>{{ child.hsn }}</td>
    <td>{{ child.hsn_percentage }}</td>
    <td>{{ child.unitprice }}</td>
    <td>{{ child.quantity }}</td>
    <td>{{ child.amount | currency :'INR'}}</td>
    <td>{{ child.taxable_amount | currency :'INR' }}</td>
    <td>{{ child.cgst }}</td>
    <td>{{ child.sgst }}</td>
    <td>{{ child.igst }}</td>
    <td>{{ child.taxamount | currency :'INR' }}</td>
    <td>{{ child.totalamount  | currency :'INR'}}</td>
  </tr>
</tbody>


                    </table>
                    </div>
                  
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-primary" style="border-radius:40px;"
                    (click)="compoback() " id="ecfap-0246">
                    Back
                </button>
            </div>
    </div>
    </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true" 
 data-keyboard="false" data-backdrop="static"   id="ecfap-0286">
         <div class="modal-dialog modal-xl">
             <div class="modal-content">
                 <div class="modal-header">
                     <h3 class="modal-title">
                         Common Report Download
                     </h3>
                     <button type="button" class="close" data-dismiss="modal" #closecmnrptDwnld
                     (click)="backCmnRptDwnld()" aria-label="Close">
                         <span aria-hidden="true">&times;</span>
                     </button>
                 </div>
 
                 <div class="modal-body">                   
                     <form [formGroup]="CommonRptDwnldForm">
                         
                        <div class="search-auto-fit">
                             <div id="matInput-size">
                                 <mat-form-field appearance="outline">
                                     <mat-label>Invoice CR No</mat-label>
                                     <input matInput formControlName="invoiceheader_crno" autocomplete="off" id="ecfap-0165">
                                 </mat-form-field>
                             </div>

                             <!-- <div id="matInput-size"> 
                                 <mat-form-field appearance="outline">
                     
                                     <mat-label>Supplier</mat-label>
                                     <input #supplierInput  placeholder="Choose Supplier" matInput 
                                     formControlName="supplier_id" [matAutocomplete]="supp"  id="ecfap-0167">
                                     <mat-autocomplete [panelWidth]="400" #supp="matAutocomplete" (opened)="supplierScroll()"
                                     [displayWith]="displayFnSupplier">
                                     <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                     <ng-container *ngIf="!isLoading">
                                         <mat-option *ngFor="let supplier of supplierNameData"
                                         [value]="supplier" matTooltip="{{supplier.name}}" matTooltipClass="custom-tooltipnew">{{supplier.name}}
                                         </mat-option>
                                     </ng-container>
                                 </mat-autocomplete>                                       
                             </mat-form-field>
                             </div> -->

                             <lib-vs-dynamicform-cmp id="matInput-size" [formGroup]="CommonRptDwnldForm"
                             [InputFields]="choose_supplier_field_common_report"
                            [ResetForm]="restformfile"></lib-vs-dynamicform-cmp>

                             <!-- <div id="matInput-size">
                                 <mat-form-field appearance="outline" (click)="getRaiserbranch()">
                                    <mat-label>Raiser Branch</mat-label>
                                     <input #raiserbrInput matInput formControlName="branchdetails_id" [readonly]="! enable_ddl"
                                         [matAutocomplete]="matraiserAutocomplete" placeholder="Raiser Branch" id="ecfap-0170">
                                     <mat-autocomplete [panelWidth]="400" #matraiserAutocomplete="matAutocomplete"
                                         [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                                         <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                         <ng-container *ngIf="!isLoading">
                                             <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                                 matTooltip="{{branch.code}}-{{branch.name}}" matTooltipClass="custom-tooltipnew">
                                                 {{branch.code}}-{{branch.name}}
                                             </mat-option>
                                         </ng-container>
                                     </mat-autocomplete>
                                 </mat-form-field>
                             </div> -->

                             <lib-vs-dynamicform-cmp id="matInput-size" [formGroup]="CommonRptDwnldForm"
                             [InputFields]="ecf_approval_commonbranch_common_report"
                            [ResetForm]="restformfile"></lib-vs-dynamicform-cmp>

                             <!-- <div id="matInput-size">

                                 <mat-form-field appearance="outline"  (click)="getraiserdropdown()">
                                     <mat-label>Raiser</mat-label>
                                     <input #raiserInput matInput
                                         formControlName="raiser_name" [matAutocomplete]="raisertyperole" 
                                         placeholder="Choose Employee" id="ecfap-0172">
                                     <mat-autocomplete [panelWidth]="400" #raisertyperole="matAutocomplete"
                                         [displayWith]="displayFnraiserrole" (opened)="raiserScroll()">
                                         <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                         <ng-container *ngIf="!isLoading">
                                             <mat-option *ngFor="let data of Raiserlist" [value]="data" matTooltip = "{{data.full_name}}" matTooltipClass="custom-tooltipnew">
                                                 {{data.full_name}}
                                             </mat-option>
                                         </ng-container>
                                     </mat-autocomplete>
                                 </mat-form-field>
                             </div> -->
                             
                             <lib-vs-dynamicform-cmp id="matInput-size" [formGroup]="CommonRptDwnldForm"
                             [InputFields]="raiser_common_report"></lib-vs-dynamicform-cmp>

                             <!-- <div id="matInput-size">
                             <mat-form-field appearance="outline">
                                <mat-label>ECF Type</mat-label>
                                 <mat-select placeholder="ECF Type" formControlName="aptype" id="ecfap-0173">
                                     <mat-option *ngFor="let type of TypeList" [value]="type.id" matTooltip="{{type.text}}" matTooltipClass="custom-tooltipnew">
                                         {{type.text}}
                                     </mat-option>
                                 </mat-select>
                             </mat-form-field>
                         </div> -->

                         <lib-vs-optiondd-cmp [InputFields]="ecf_approval_type_common_report"
                         (dataEvent)="commonecfTypeChange($event)"
                         [formGroup]="CommonRptDwnldForm">
                         </lib-vs-optiondd-cmp>

                         <!-- <div id="matInput-size">
                             <mat-form-field appearance="outline">
                                 <mat-label>Batch No</mat-label>
                                 <input matInput formControlName="batch_no" autocomplete="off" id="ecfap-0179">
                             </mat-form-field>
                         </div> -->
                         
                         <div id="matInput-size">
                             <mat-form-field appearance="outline">
                                 <mat-label>Invoice No</mat-label>
                                 <input matInput formControlName="invoice_no" autocomplete="off" type="text" id="ecfap-0180">
                             </mat-form-field>
                         </div>  

                         <div id="matInput-size">
                             <mat-form-field appearance="outline">
                                 <mat-label>Invoice Amount</mat-label>
                                 <input matInput formControlName="invoice_amount" autocomplete="off" type="number" id="ecfap-0181">
                             </mat-form-field>
                         </div> 
                         
                         <!-- <div id="matInput-size">
                             <mat-form-field appearance="outline">
                                 <mat-label>Transaction From</mat-label>
                                 <input matInput [matDatepicker]="picker" formControlName="start_date"
                                 readonly autocomplete="off" id="ecfap-0182">
                                 <mat-datepicker-toggle matSuffix [for]="picker">
                                 </mat-datepicker-toggle>
                                 <mat-datepicker #picker></mat-datepicker>
                             </mat-form-field>
                         </div> 

                         <div id="matInput-size">
                             <mat-form-field appearance="outline">
                                 <mat-label>Transaction To</mat-label>
                                 <input matInput [matDatepicker]="picker1" formControlName="end_date"
                                 readonly autocomplete="off" id="ecfap-0183">
                                 <mat-datepicker-toggle matSuffix [for]="picker1">
                                 </mat-datepicker-toggle>
                                 <mat-datepicker #picker1></mat-datepicker>
                             </mat-form-field>
                         </div> -->
                        <div id="matInput-size">
                             <mat-form-field appearance="outline">
                                 <mat-label>GST No</mat-label>
                                 <input matInput formControlName="suppliergst_no" autocomplete="off" id="ecfap-0184">
                             </mat-form-field>
                         </div> 
                         <div class="npm-mat-edit-expand">
                            <lib-vs-sep-dates-cmp id="matInput-size" [DateInput]="approval_frtodate_common_report"
                            [formGroup]="CommonRptDwnldForm">
                            </lib-vs-sep-dates-cmp>
                        </div>

                          

                         <!-- <div id="matInput-size">

                            <mat-form-field appearance="outline">
                                <mat-label>ECF Status</mat-label>
                                <mat-select placeholder="ECF Status" formControlName="apinvoiceheaderstatus_id"
                                 id="ecfap-0186">
                                    <mat-option *ngFor="let type of commonAndECFStatusList"
                                    (click)="commonStatusChange(type)" [value]="type.id">
                                        {{type.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                         </div> -->

                         <lib-vs-dynamicform-cmp id="matInput-size" [formGroup]="CommonRptDwnldForm"
                         [InputFields]="ecfstatuss_common_report" (dataEvent)="commonecfStatusChange($event)"></lib-vs-dynamicform-cmp>

                        </div>
                          
                     </form>
                 </div>
                 <div class="modal-footer">
                         <button type="submit" 
                         style=" border-radius:40px;"
                         class="btn btn-outline-success" (click)="getRptDownload(3)">
                         Download</button>
                         <button type="button"
                         style="border-radius:40px;"
                         class="btn btn-outline-danger" (click)="resetCmnRptDwnld()">
                         Reset</button>
                         <button type="button" data-dismiss="modal"
                         style="border-radius:40px;"
                         class="btn btn-outline-primary" (click)="createtempBack()">
                         Back</button>    
                 </div>         
                 
             </div>
         </div>
 </div>

 <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
 data-keyboard="false" data-backdrop="static" id="create-ecf-0152">
 <div class="modal-dialog modal-lg" style="width: 43%;">
     <div class="modal-content">
         <div class="modal-header">
             <h3 class="modal-title">
                 ECF Clone
             </h3>
             <button type="button" class="close" #closefrmtempCreate data-dismiss="modal" aria-label="Close" (click)="createTmpBack()">
                 <span aria-hidden="true">&times;</span>
             </button>
         </div>
 
 
             
             <form [formGroup]="frmCreateTemp">
                <div class="modal-body">
                    <div class="search-auto-fit" *ngIf="ecfType != 3 && ecfType != 13">
 
                        
                            <div id="matInput-size" *ngIf=" ecfType != 14">
                                <mat-form-field appearance="outline">
                                    <mat-label>Invoice No</mat-label>
                                    <input matInput placeholder="Invoice No" formControlName="invoiceno"
                                        autocomplete="off" maxlength="16" required (keypress)="invNoFilter($event);" #invoiceno>
                                </mat-form-field>
                            </div>
                            <div id="matInput-size" *ngIf="ecfType == 14">
                                <mat-form-field appearance="outline">
                                    <input matInput placeholder="Acc No" formControlName="invoiceno"
                                        autocomplete="off"   maxlength="16" required
                                        (change)="filterTexts(invoiceno, 'invoiceno');icrAccno()" #invoiceno>
                                </mat-form-field>
                            </div>
                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Date</mat-label>
                                    <input matInput [matDatepicker]="picker1" placeholder="Date" (dateChange)="onDateChange($event)"
                                    required  formControlName="invoicedate" [max]="today" readonly>
                                    <mat-datepicker-toggle matSuffix [for]="picker1">
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #picker1></mat-datepicker>
                                </mat-form-field>
                            </div>
                            
                                <div id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label *ngIf="this.ecftypeid == 7">CRN Total Amount</mat-label>
                                        <mat-label *ngIf="this.ecftypeid != 7">Invoice Amount</mat-label>
                                        <input matInput style="text-align: right;" formControlName="totalamount" autocomplete="off" 
                                            (keypress)="getCharCode($event);numberOnlyandDot($event, this.frmCreateTemp.value.totalamount)" 
                                            (input)="invhdrTempChngeToCurrency(totalamount ,'totalamount')" required
                                            #totalamount (focusout)="invamount(totalamount)" 
                                            (change)="invhdramtDecimalChg(totalamount ,'totalamount',0, frmCreateTemp)">
                                    </mat-form-field>
                                </div>
                            <div id="matInput-size" *ngIf="this.ecftypeid != 14">
                                <mat-form-field appearance="outline">
                                    <mat-label>Taxable Amount </mat-label>
                                    <input matInput style="text-align:right" required
                                        formControlName="invoiceamount" #invoiceamount  (change)="invhdramtDecimalChg(invoiceamount ,'invoiceamount',0, frmCreateTemp)"
                                        (keypress)="getCharCode($event);numberOnlyandDot($event, this.frmCreateTemp.value.invoiceamount)" (input)="invhdrTempChngeToCurrency(invoiceamount ,'invoiceamount')" 
                                        (ngModelChange)="taxableAmount($event)" (focusout)="taxableAmount1()">
                                </mat-form-field>
                            </div>
                            <div style="display: flex;justify-content: space-between;">
                                
                                    <i (click)="UploadPopupOpen()" class="fa fa-cloud-upload" matTooltip="Upload file" matTooltipClass="custom-tooltipnew"
                                    aria-hidden="true" style="font-size: 25px;color: blue;margin-left: 10px;margin-top:10px;" data-target="#create-ecf-0139" data-toggle="modal"
                                ></i><label style="color:red;margin-left: 5px;margin-top:15px;">*</label>
                                    <div style="border:0px" *ngIf="fileUploaded">
                                
                                        <div>
                                        <i matTooltip="view" matTooltipClass="custom-tooltipnew" class=" fa fa-eye create "
                                        
                                    data-target="#create-ecf-0004" data-toggle="modal"
                                    style="cursor: pointer;color:blue;margin-top: 18px;margin-left: 2px;" (click)="FileViewOpen()"></i>
                                    </div>
                                </div>
                                
                            </div>
                    
                    </div>
                    <div class="search-auto-fit" *ngIf="ecfType == 3 || ecfType == 13">
                                              
                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Invoice Amount</mat-label>
                                    <input matInput style="text-align: right;" formControlName="totalamount" autocomplete="off" 
                                        (keypress)="getCharCode($event);numberOnlyandDot($event, this.frmCreateTemp.value.totalamount)" 
                                        (input)="invhdrTempChngeToCurrency(totalamount ,'totalamount')"  required
                                        #totalamount (focusout)="invamount(totalamount)" (change)="invhdramtDecimalChg(totalamount ,'totalamount',0, frmCreateTemp)">
                                </mat-form-field>
                            </div>
                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Taxable Amount </mat-label>
                                    <input matInput style="text-align:right" required
                                        formControlName="invoiceamount" #invoiceamount  (change)="invhdramtDecimalChg(invoiceamount ,'invoiceamount',0, frmCreateTemp)"
                                        (keypress)="getCharCode($event);numberOnlyandDot($event, this.frmCreateTemp.value.invoiceamount)" (input)="invhdrTempChngeToCurrency(invoiceamount ,'invoiceamount')" 
                                        (ngModelChange)="taxableAmount($event)" (focusout)="taxableAmount1()">
                                </mat-form-field>
                            </div>
                            <div id="matInput-size">
                                <!-- <tr>
                                <td style="border:0px">
                                    <i (click)="UploadPopupOpen()" class="fa fa-cloud-upload" matTooltip="Upload file" matTooltipClass="custom-tooltipnew"
                                    aria-hidden="true" style="font-size: 25px;color: blue;margin-left: 10px;margin-top:10px;" 
                                    data-target="#create-ecf-0139" data-toggle="modal"
                                ></i><label style="color:red;margin-left: 5px;">*</label>
                                    </td>
                                    <td style="border:0px" *ngIf="fileUploaded">                                   
                                        <div>
                                           <i matTooltip="view" matTooltipClass="custom-tooltipnew" class=" fa fa-eye create "
                                           data-target="#create-ecf-0004" data-toggle="modal" (click)="FileViewOpen()"
                                           style="cursor: pointer;color:blue;"></i>
                                    </div>
                                </td>
                                </tr> -->
                                  <tr>
                                      <td style="border:0px">
                                        <i (click)="UploadPopupOpen()" class="fa fa-cloud-upload" matTooltip="Upload file" matTooltipClass="custom-tooltipnew"
                                        aria-hidden="true" style="font-size: 25px;color: blue;margin-left: 10px;margin-top:10px;" 
                                        data-target="#create-ecf-0139" data-toggle="modal"
                                      ></i><label style="color:red;margin-left: 5px;">*</label>
                                        </td>
                                        <td style="border:0px" *ngIf="fileUploaded">                                   
                                            <div>
                                            <i matTooltip="view" matTooltipClass="custom-tooltipnew" class=" fa fa-eye create "
                                           data-target="#create-ecf-0004" data-toggle="modal" (click)="FileViewOpen()"
                                           style="cursor: pointer;color:blue;"></i>
                                        </div>
                                      </td>
                                    </tr>
                            </div>
                        
                    </div>
                </div>
                 
                    
                     <div class="modal-footer">
                         <button type="button"
                         style="border-radius:40px;"
                         class="btn btn-outline-success" (click)="submitCreateTmp()">
                         Submit</button>
                         <button type="button"
                         style="border-radius:40px;"
                         class="btn btn-outline-danger" (click)="resetCreateTmp()">
                         Reset</button>
                         <button type="button" data-dismiss="modal"
                         style="border-radius:40px;"
                         class="btn btn-outline-primary" (click)="createTmpBack()">
                         Back</button> 
                     </div>
                 
             </form>
         
     </div>
 
         
         
 </div>
 </div>

<!-- <div *ngIf="showCreateTempForm">
     
</div> -->

<div *ngIf="uploadPopShow">
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true" 
    data-keyboard="false" data-backdrop="static"  id="create-ecf-0139">
            <div class="modal-dialog modal-lg ">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title">Upload File
                        </h3>
                        <button type="button" class="close" data-dismiss="modal" #uploadclose aria-label="Close"
                        id="create-ecf-0140" (click)="uploadback()"                          
                        data-toggle="modal" data-target="#create-ecf-0152">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>

                    <div class="modal-body">
                        <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                            <table >
                                <thead >
                                <tr>
                                    <th>S.No</th>
                                    <th>Document Type</th>
                                    <th>Upload</th>
                                    <th>Selected Files</th>
                                </tr>
                                </thead>
                                <tbody>
                                        <tr  *ngFor="let type of uploadFileTypes; let index = index">
                                        <td>{{index+1}}</td>
                                        <td>
                                            {{type}} 
                                        </td>
                                        <td>
                                            <input #fileInput id="create-ecf-0002" type="file" multiple style="width: 108px;" hidden 
                                            (change)="getFileDetails( $event, type)">
                                            <i  (click)="fileInput.click()"  class="fa fa-cloud-upload" matTooltip="Upload file" 
                                            matTooltipClass="custom-tooltipnew" aria-hidden="true" style="font-size: 25px;color: blue;"
                                            ></i>
                                        </td>  
                                        <td>
                                            <div *ngFor="let file of file_process_data2[type]; let j = index"
                                            style="border: 0cm;width: 300px;overflow: hidden" matTooltip="{{file.name}}"
                                                matTooltipClass="custom-tooltipnew">
                                                <div>{{j+1}}.{{file.name}}</div>
                                            </div>
                                        </td>                                          
                                        </tr>                                        
                                </tbody>
                            </table>                               
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-success" style="border-radius:40px;" (click)="uploadSubmit()" 
                        data-toggle="modal" data-target="#create-ecf-0152"  id="create-ecf-0153">Submit</button>
                        <button type="button" class="btn btn-outline-primary" style="border-radius:40px;" (click)="uploadback()" 
                        data-toggle="modal" data-target="#create-ecf-0152" >Back</button>
                        <!-- (click)="uploadfileback()"  -->
                    </div>
                </div>
            </div>
    </div>
</div>

    
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true" 
data-keyboard="false" data-backdrop="static" id="create-ecf-0004">
    <div class="modal-dialog modal-lg ">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Attachments
                </h3>
                <button type="button" class="close" data-dismiss="modal" #closedbuttons aria-label="Close"
                (click)="fileback()" 
                id="create-ecf-0130" data-target="#create-ecf-0152" data-toggle="modal" >
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">
             <h3>Currently Attached Files</h3>
                <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                    <table class="table" fixed-header>
                        <thead class="table_header">
                        <tr>
                            <th>S.No</th>
                            <th>Document Type</th>
                            <th>File Name</th>
                            <th>Delete</th>
                        </tr>
                        </thead>
                        <tbody>
                            <ng-container *ngFor="let type of uploadFileTypes; let ind = index">
                            <tr *ngFor="let files of file_process_data[type]; let index = index">
                                <td>
                                    {{ind+1}}.{{index+1}}
                                </td>
                                <td>
                                    {{type}} 
                                </td>
                                <td >
                                    <div  style="width: 300px;overflow: hidden" matTooltip="{{files?.name}}" matTooltipClass="custom-tooltipnew">
                                        {{files?.name}}
                                    </div>
                                </td>
                                <td>
                                    
                                    <span (click)="deletefileUpload(index, type)">
                                        <mat-icon matTooltip="Delete" matTooltipClass="custom-tooltipnew">delete
                                        </mat-icon>
                                    </span>
                                </td>
                                </tr>
                            </ng-container>
                            
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-primary" style="border-radius:40px;" (click)="fileback()" 
                    data-target="#create-ecf-0152" data-toggle="modal" id="create-ecf-0132">Back</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true" 
 data-keyboard="false" data-backdrop="static"   id="ecfap-0287">
         <div class="modal-dialog modal-xl">
             <div class="modal-content">
                 <div class="modal-header">
                     <h3 class="modal-title">
                         ECF Inventory Report Download
                     </h3>
                     <button type="button" class="close" data-dismiss="modal" #closeECFinvRptDwnld
                     (click)="backECFinvRptDwnld()" aria-label="Close">
                         <span aria-hidden="true">&times;</span>
                     </button>
                 </div>
 
                 <div class="modal-body">                   
                     <form [formGroup]="ECFinvRptDwnldForm">
                         
                             <div class="search-auto-fit">
                                 
                                    <div id="matInput-size">
                                        <mat-form-field appearance="outline">
                                            <mat-label>CR No</mat-label>
                                            <input class="toolbar-search" type="text" matInput autocomplete="off" formControlName="crno" id="ecfap-0018">
                                        </mat-form-field>
                                    </div>
                                    <div id="matInput-size"> 
                                        <!-- <mat-form-field appearance="outline">
                                
                                                <mat-label>Supplier</mat-label>
                                                <input #supplierInput  placeholder="Choose Supplier" matInput 
                                                formControlName="supplier_id" [matAutocomplete]="supp"  id="ecfap-0167">
                                                <mat-autocomplete [panelWidth]="400" #supp="matAutocomplete" (opened)="supplierScroll()"
                                                [displayWith]="displayFnSupplier">
                                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                                <ng-container *ngIf="!isLoading">
                                                    <mat-option *ngFor="let supplier of supplierNameData"
                                                    [value]="supplier" matTooltip="{{supplier.name}}" matTooltipClass="custom-tooltipnew">{{supplier.name}}
                                                    </mat-option>
                                                </ng-container>
                                            </mat-autocomplete>                                       
                                        </mat-form-field> -->
                                        <lib-vs-dynamicform-cmp 
                                        id="matInput-size" 
                                        [InputFields]="supplydown"
                                        [formGroup]="ECFinvRptDwnldForm">
                                    </lib-vs-dynamicform-cmp>
                                    <!-- (dataEvent)="supplierdata($event)" -->
                                    </div>
                                    <div id="matInput-size">
                                        <mat-form-field appearance="outline">
                                            <mat-label>Invoice No</mat-label>
                                            <input class="toolbar-search" type="text" matInput autocomplete="off" formControlName="invoice_no" id="ecfap-0021">
                                        </mat-form-field>                  
                                    </div>
                                    <div id="matInput-size">          
                                        <!-- <mat-form-field appearance="outline">
                                            <mat-label>ECF Type</mat-label>
                                            <mat-select  formControlName="aptype"  id="ecfap-0022">
                                                <mat-option *ngFor="let type of TypeList" [value]="type.id" >
                                                    {{type.text}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field> -->
                                        <lib-vs-optiondd-cmp 
                                         id="matInput-size" 
                                         [InputFields]="typedown"
                                         (dataEvent)="ecfTypeChange($event)"
                                         [formGroup]="ECFinvRptDwnldForm">
                                        </lib-vs-optiondd-cmp>
                                    </div>
                         
                                    <div id="matInput-size">                   
                                        <!-- <mat-form-field appearance="outline">
                                            <mat-label>ECF Status</mat-label>
                                            <mat-select  formControlName="ecfstatus" id="ecfap-0023">
                                                <mat-option *ngFor="let status of StatusList" [value]="status.id" >
                                                    {{status.text}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field> -->
                                        <lib-vs-optiondd-cmp 
                                        id="matInput-size" 
                                        [InputFields]="statusdown"
                                        (dataEvent)="ecfStatusChange($event)"
                                        [formGroup]="ECFinvRptDwnldForm">
                                        </lib-vs-optiondd-cmp>
                                    </div>
    
                                    <div id="matInput-size">
                                        <!-- <mat-form-field  appearance="outline" (click)="getSearchbranch()">
                                            <mat-label>Branch</mat-label>
                                            <input #raiserbrInput matInput formControlName="branch"
                                                [matAutocomplete]="matraiserAutocomplete" placeholder="Branch" id="ecfap-0027">
                                            <mat-autocomplete [panelWidth]="250" #matraiserAutocomplete="matAutocomplete"
                                                [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                                <ng-container *ngIf="!isLoading">
                                                    <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                                        matTooltip="{{branch.code}}-{{branch.name}}" matTooltipClass="custom-tooltipnew">
                                                        {{branch.code}}-{{branch.name}}
                                                    </mat-option>
                                                </ng-container>
                                            </mat-autocomplete>
                                        </mat-form-field> -->
                                        <lib-vs-dynamicform-cmp 
                                         id="matInput-size"
                                         [InputFields]="branchdown"
                                         [formGroup]="ECFinvRptDwnldForm">
                                        </lib-vs-dynamicform-cmp>
                                        <!-- (dataEvent)="branchdata($event)" -->
                                    </div>
                                    
                                    <div id="matInput-size">
                                        <!-- <mat-form-field appearance="outline">
                                            <mat-label>Commodity Name</mat-label>
                                                <input #commodityInput placeholder="Commodity Name" matInput
                                                    formControlName="commodity_id" [matAutocomplete]="commoditytype"
                                                    [matTooltip]="ecfSearchForm.value.commodity_id.name" matTooltipClass="custom-tooltipnew" id="ecfap-0028">
                                                <mat-autocomplete [panelWidth]="300" #commoditytype="matAutocomplete"
                                                    [displayWith]="displayFncommodity" (opened)="commodityScroll()">
                                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                                    <ng-container *ngIf="!isLoading">
                                                        <mat-option *ngFor="let commodity of commodityList"
                                                            [value]="commodity"
                                                            matTooltip="{{commodity.name}}" matTooltipClass="custom-tooltipnew">
                                                            {{commodity.name}}
                                                        </mat-option>
                                                    </ng-container>
                                                </mat-autocomplete>
                                        </mat-form-field> -->
                                        <lib-vs-dynamicform-cmp 
                                        id="matInput-size" 
                                        [InputFields]="commoditydown"
                                        [formGroup]="ECFinvRptDwnldForm">
                                    </lib-vs-dynamicform-cmp>
                                    <!-- (dataEvent)="commoditydata($event)" -->
                                    </div>
                                 
                             
                               
                     
                             </div>
                         
                          
                     </form>
                 </div>
                 <div class="modal-footer">
                         <button type="submit" 
                         style=" border-radius:40px;"
                         class="btn btn-outline-success" (click)="getRptDownload(1)">
                         Download</button>
                         <button type="button"
                         style="border-radius:40px;"
                         class="btn btn-outline-danger" (click)="resetECFinvRptDwnld()">
                         Reset</button>
                         <button type="button" data-dismiss="modal"
                         style="border-radius:40px;"
                         class="btn btn-outline-primary" (click)="backECFinvRptDwnld()">
                         Back</button>    
                 </div>         
                 
             </div>
         </div>
 </div>
 
 <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true" 
 data-keyboard="false" data-backdrop="static"   id="ecfap-0288">
         <div class="modal-dialog modal-xl">
             <div class="modal-content">
                 <div class="modal-header">
                     <h3 class="modal-title">
                         ECF Approval Report Download
                     </h3>
                     <button type="button" class="close" data-dismiss="modal" #closeECFAppRptDwnld
                     (click)="backECFAppRptDwnld()" aria-label="Close">
                         <span aria-hidden="true">&times;</span>
                     </button>
                 </div>
 
                 <div class="modal-body">                   
                     <form [formGroup]="ECFAppRptDwnldForm">
                        
                            <div class="search-auto-fit">
                                
                                <div id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>CR No</mat-label>
                                        <input class="toolbar-search" type="text" matInput autocomplete="off" 
                                        formControlName="crno" id="ecfap-0076">
                                    </mat-form-field>
                                     
                                </div>

                                <!-- <div id="matInput-size">
                                    <mat-form-field appearance="outline">
                            
                                        <mat-label>Supplier</mat-label>
                                        <input #supplierInput  placeholder="Choose Supplier" matInput 
                                        formControlName="supplier_id" [matAutocomplete]="supp"  id="ecfap-0167">
                                        <mat-autocomplete [panelWidth]="400" #supp="matAutocomplete" (opened)="supplierScroll()"
                                        [displayWith]="displayFnSupplier">
                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                        <ng-container *ngIf="!isLoading">
                                            <mat-option *ngFor="let supplier of supplierNameData"
                                            [value]="supplier" matTooltip="{{supplier.name}}" matTooltipClass="custom-tooltipnew">{{supplier.name}}
                                            </mat-option>
                                        </ng-container>
                                        </mat-autocomplete> 
                                    
                                    </mat-form-field>
                              
                                </div> -->

                                    <lib-vs-dynamicform-cmp id="matInput-size"
                                     [formGroup]="ECFAppRptDwnldForm"  
                                    [InputFields]="choose_supplier_field_approve_report"
                                   ></lib-vs-dynamicform-cmp>

                                <!-- <div id="matInput-size">
                                    <mat-form-field appearance="outline" (click)="getSearchbranch()">
                                        <mat-label>Branch</mat-label>
                                        <input #raiserbrInput matInput formControlName="branch"
                                            [matAutocomplete]="matraiserAutocomplete" placeholder="Branch" id="ecfap-0079">
                                        <mat-autocomplete [panelWidth]="400" #matraiserAutocomplete="matAutocomplete"
                                            [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                                            <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                                    matTooltip="{{branch.code}}-{{branch.name}}" matTooltipClass="custom-tooltipnew">
                                                    {{branch.code}}-{{branch.name}}
                                                </mat-option>
                                            </ng-container>
                                        </mat-autocomplete>
                                    </mat-form-field>
                                </div> -->

                                <lib-vs-dynamicform-cmp id="matInput-size" [formGroup]="ECFAppRptDwnldForm"
                                [InputFields]="ecf_approval_commonbranch_approve_report"
                              ></lib-vs-dynamicform-cmp>

                                <!-- <div id="matInput-size">
                                    
                                    <mat-form-field appearance="outline">
                                        <mat-label>ECF Type</mat-label>
                                        <mat-select  formControlName="aptype"  id="ecfap-0082">
                                            <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                                {{type.text}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div> -->
                              
                                <lib-vs-optiondd-cmp [InputFields]="ecf_approval_type_approver_report"
                                [formGroup]="ECFAppRptDwnldForm" (dataEvent)="approveecfTypeChange($event)">
                                </lib-vs-optiondd-cmp>

                                <!-- <div id="matInput-size">
                                    <mat-form-field  appearance="outline">
                                        <mat-label>Commodity</mat-label>
                                                            <input #commodityInput placeholder="Commodity" matInput
                                                                formControlName="commodity_id" [matAutocomplete]="commoditytype"
                                                                [matTooltip]="ecfapprovalform.value.commodity_id.name" matTooltipClass="custom-tooltipnew" id="ecfap-0083">
                                                            <mat-autocomplete [panelWidth]="300" #commoditytype="matAutocomplete"
                                                                [displayWith]="displayFncommodity" (opened)="commodityScroll()">
                                                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                                                <ng-container *ngIf="!isLoading">
                                                                    <mat-option *ngFor="let commodity of commodityList"
                                                                        [value]="commodity"
                                                                        matTooltip="{{commodity.name}}" matTooltipClass="custom-tooltipnew">
                                                                        {{commodity.name}}
                                                                    </mat-option>
                                                                </ng-container>
                                                            </mat-autocomplete>
                                                        </mat-form-field>
                                </div> -->

                                <lib-vs-dynamicform-cmp id="matInput-size" [InputFields]="ecf_approval_commodity_approve_report"
                                [formGroup]="ECFAppRptDwnldForm"></lib-vs-dynamicform-cmp>

                                <div id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Purpose</mat-label>
                                        <input class="toolbar-search" type="text" matInput autocomplete="off" formControlName="purpose" id="ecfap-0089">
                                    </mat-form-field>
                                    
                                </div>

                                <!-- <div id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Transaction From</mat-label>
                                        <input matInput readonly [matDatepicker]="picker1" placeholder="Transaction From "
                                            formControlName="start_date" autocomplete="off" id="ecfap-0090">
                                        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                        <mat-datepicker #picker1></mat-datepicker>
                                    </mat-form-field>
                                </div>

                                <div id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Transaction To</mat-label>
                                        <input matInput readonly [matDatepicker]="picker2" placeholder="Transaction To"
                                            formControlName="end_date" id="ecfap-0091">
                                        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                        <mat-datepicker #picker2></mat-datepicker>
                                    </mat-form-field>
                                </div>           -->
                       

                                <div class="npm-mat-edit-expand">
                                    <lib-vs-sep-dates-cmp id="matInput-size" [DateInput]="approval_frtodate_approve_report"
                                    [formGroup]="ECFAppRptDwnldForm">
                                    </lib-vs-sep-dates-cmp>
                                </div>
                                 
                               
                            </div>
                         
                         
                     </form>
                 </div>
                 <div class="modal-footer">
                         <button type="submit" 
                         style=" border-radius:40px"
                         class="btn btn-outline-success" (click)="getRptDownload(2)">
                         Download</button>
                         <button type="button"
                         style="border-radius:40px;"
                         class="btn btn-outline-danger" (click)="resetECFAppRptDwnld()">
                         Reset</button>
                         <button type="button" data-dismiss="modal"
                         style="border-radius:40px;"
                         class="btn btn-outline-primary" (click)="backECFAppRptDwnld()">
                         Back</button>    
                 </div>         
                 
             </div>
         </div>
 </div>

<div *ngIf="PaymentAdvisoryForm">
    <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;">
        <p style="color:black;font-size:20px;font-family:'Times New Roman';font-weight:bold;margin-left: 10px;">
            Payment Advisory Search
        </p>
        <div>
            <form [formGroup]="frmPaymentAdvisory">
                <table>
                    <div>
                        <tr>
                            <td>
                                <mat-form-field style="width:130px;margin-left: 10px;">
                                    <mat-label> CR No</mat-label>
                                    <input matInput formControlName="crno" autocomplete="off" id="ecfap-0165">
                                </mat-form-field>
                            </td>
                            <td>
                                <button type="button" class="btn btn-outline-primary" matTooltip="Select Supplier"
                                    matTooltipClass="custom-tooltipnew" data-toggle="modal" data-target="#ecfap-0016"
                                    style="border-radius:40px;margin-left: 5px;" id="ecfap-0166"><i
                                        class="fa fa-arrow-up"></i></button>
                                <mat-form-field style="width: 150px;margin-left: 5px; ">

                                    <mat-label>Supplier</mat-label>
                                    <input #supplierInput placeholder="Choose Supplier" matInput readonly
                                        formControlName="supplier_id" id="ecfap-0167">
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field style="width: 150px; margin-left: 15px; " (click)="getRaiserbranch()">
                                    <input #raiserbrInput matInput formControlName="branch"
                                        [matAutocomplete]="matraiserAutocomplete" placeholder="Raiser Branch"
                                        id="ecfap-0170">
                                    <mat-autocomplete [panelWidth]="400" #matraiserAutocomplete="matAutocomplete"
                                        [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                        <ng-container *ngIf="!isLoading">
                                            <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                                matTooltip="{{branch.code}}-{{branch.name}}"
                                                matTooltipClass="custom-tooltipnew">
                                                {{branch.code}}-{{branch.name}}
                                            </mat-option>
                                        </ng-container>
                                    </mat-autocomplete>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field style="margin-left: 50px; width:150px;">
                                    <mat-label>From Date</mat-label>
                                    <input matInput readonly [matDatepicker]="picker1" placeholder="From Date "
                                        formControlName="from_date" id="ecfap-0090">
                                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                    <mat-datepicker #picker1></mat-datepicker>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field style="margin-left: 10px; width:150px;">
                                    <mat-label>To Date</mat-label>
                                    <input matInput readonly [matDatepicker]="picker2" placeholder="To Date"
                                        formControlName="to_date" id="ecfap-0091">
                                    <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                    <mat-datepicker #picker2></mat-datepicker>
                                </mat-form-field>
                            </td>
                            <td>
                                <button class="btn btn-outline-primary" type="submit"
                                    style="border-radius:40px;margin-left: 10px;" color="primary"
                                    (click)="PaymentAdvSearch()" id="ecfap-0176"><i matTooltip="Search"
                                        matTooltipClass="custom-tooltipnew" class="fa fa-search"
                                        aria-hidden="true"></i></button>
                                <button class="btn btn-outline-primary" type="button"
                                    style="border-radius:40px;margin-left: 10px;" color="primary"
                                    (click)="resetPayAdvisory()" id="ecfap-0177">Reset</button>
                                <button class="btn btn-outline-primary" type="button"
                                    style="border-radius:40px;margin-left: 10px;"
                                    data-toggle="modal" data-target="#ecfap-0286" color="primary"
                                    (click)="getRptDnldPmtAdv()" id="ecfap-0178">Report Download</button>
                            </td>

                        </tr>
                    </div>
                </table>
            </form>
        </div>
        <p style="color:black;font-size:20px;font-family:'Times New Roman';font-weight:bold;margin-left: 10px;">
            Payment Advisory
        </p>
        <div class="table-responsive" id="ecfap-0003" style="margin-top: 1%;margin-left: 10px; width: 95%;">
            <table class="table scrolltable table-bordered" style="text-align:center;">
                <thead fixed-header>
                    <tr class="table_header " fixed-header>
                        <th style="width: 45px;">S.No</th>
                        <th>Invoice CR No</th>
                        <th>ECF Type</th>
                        <th>ECF Date</th>
                        <th>Batch No</th>
                        <th>Batch Status</th>
                        <th>Supplier Name</th>
                        <th>Raiser</th>
                        <th>Raiser Branch</th>
                        <th>Invoice No</th>
                        <th>Invoice Amount</th>
                        <th>Invoice Date</th>
                        <th>GST No</th>
                        <th>Invoice Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let lists of paymentAdvisorySumm; index as i" style="text-align: center;">
                        <td style="width: 45px;"> {{(pymtAdvpresentpage - 1)*pagesize_PymtAdv +i+1 }} </td>
                        <td>
                            <p style="cursor: pointer;color: #3684BF;" (click)="linkView(lists)">
                                {{lists?.apinvoiceheader_crno}}</p>
                        </td>
                        <td style="white-space: nowrap;">{{lists?.aptype.text}}</td>
                        <td style="white-space: nowrap;">{{lists?.apdate | date:'dd-MMM-yyyy'}}</td>
                        <td>
                            <div style="width: 200px;overflow: hidden"
                                matTooltip="{{lists?.supplier_data?.name}} - {{lists?.supplier_data?.code}}"
                                matTooltipClass="custom-tooltipnew">
                                {{lists?.supplier_data?.name}} - {{lists?.supplier_data?.code}}
                            </div>
                        </td>
                        <td>{{lists?.raiser_name}}</td>
                        <td>{{lists?.raiserbranch_branch?.name_code }}</td>
                        <td>{{lists?.invoice_no }}</td>
                        <td style="text-align: right;">{{lists?.totalamount|currency:'INR'}}</td>
                        <td style="white-space: nowrap;">{{lists?.invoicedate | date:'dd-MMM-yyyy'}}</td>
                        <td>{{lists?.supplier_data?.gstno }}</td>
                        <td>{{lists?.ap_status}}</td>
                    </tr>
                </tbody>
            </table>
            <div *ngIf="paymentAdvisorySumm ?.length == 0" style="margin-left: 42%;">
                <h3>Sorry data not found!.. </h3>
            </div>
        </div>
        <div class="row" *ngIf="isPymtAdvpage" style="width:85%">
            <div class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left: 42%">
                <mat-paginator (page)="handlePymtAdvPageEvent($event)" [length]="length_PymtAdv"
                    [pageSize]="pagesize_PymtAdv" [showFirstLastButtons]="showFirstLastButtons"
                    [pageSizeOptions]="pageSizeOptions" [pageIndex]="pageIndexPymtAdv" [hidePageSize]="true"
                    aria-label="Select page">
                </mat-paginator>
            </div>
            <div class="col-sm-3"
                style="margin-bottom: 0%;font-size: small;text-align: right;margin-top: 18px;left: -15%;font-weight:bold">
                Page: {{pymtAdvpresentpage}}
            </div>
        </div>
    </mat-card>
</div>