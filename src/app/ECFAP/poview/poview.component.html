<div style="width:100%">
    <!-- <mat-card style="margin-top: 13px;margin-left: 20px;margin-right: 20px;margin-bottom: 20px;"> -->
        <div style="margin-left: 50px;margin-top: 1%; width: 100%;">

            <h2 style="font-weight:bold;">POInvoice Maker</h2>

            <div>
               <form [formGroup]="POMakerForm" style="margin-left:2%">
                 <table style="margin-bottom: 2%;">
                    <div>
                        <tr>
                            <td>
                                <mat-form-field style="width:200px;margin-left:-25px">
                                    <input matInput placeholder="Type" formControlName="type" autocomplete="off"
                                        readonly id="poview-0002">
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field style="width:200px;margin-left:50px;">
                                    <input matInput placeholder="PO Number" formControlName="po_number" autocomplete="off"
                                        readonly id="poview-0003">
                                </mat-form-field>
                            </td>
                            <td>
                                <section class="example-section ecfapcheck" style="margin-left:50px">
                                    <mat-checkbox class="example-margin" formControlName="is_gst">GST Applicable
                                        <label style="color:red;">*</label> </mat-checkbox>
                                </section>
                            </td>
                            <td >
                                <mat-form-field style="width:200px;margin-left: 50px;">
                                    <input matInput placeholder="Supplier Name" formControlName="supplier_name" autocomplete="off"
                                        readonly id="poview-0004">
                                </mat-form-field>
                            </td>
                                <i class="fa fa-arrow-up" aria-hidden="true"  matTooltip="Select Supplier" matTooltipClass="custom-tooltipnew"
                                 data-toggle="modal"
                                data-target="#selectSupplier" style="margin-left:0px;color: blue;"></i>
                            <!-- <td>
                                <button type="button" class="btn btn-outline-primary"
                                    matTooltip="Select Supplier" data-toggle="modal"
                                    data-target="#selectSupplier" 
                                    style="border-radius:40px;margin-left:15px;" id="poview-0005"><span
                                        class="fa fa-arrow-up"></span></button>

                            </td> -->
                           
                          
                        </tr>
                        <tr> 
                            <td >
                            <mat-form-field style="width:200px;margin-left:-25px;">
                                <input matInput placeholder="Supplier GST" formControlName="supplier_gst" autocomplete="off"
                                    readonly id="poview-0006">
                            </mat-form-field>
                            </td>
                              <td>
                                <mat-form-field style="width: 200px;margin-left:50px;">
                                    <mat-label>Date</mat-label>
                                    <input matInput [matDatepicker]="picker1" placeholder="Invoice Date" formControlName="invoice_date" [max]="tomorrow" readonly id="poview-0007">
                                   <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                    <mat-datepicker #picker1></mat-datepicker>
                                </mat-form-field> 
                            </td>

                            <td>
                                <mat-form-field style="width:200px;margin-left:50px;">
                                    <input matInput placeholder="Invoice Number" formControlName="invoice_no" autocomplete="off"
                                         id="poview-0008">
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field style="width:200px;margin-left:50px;">
                                    <input matInput placeholder="Amount" formControlName="amount" autocomplete="off"
                                         id="poview-0009">
                                </mat-form-field>
                            </td>
                            </tr>
                            <tr>
                            <td>
                                <mat-form-field style="width:200px;margin-left:-25px;">
                                    <input matInput placeholder="Taxable Amount" formControlName="taxableamount" autocomplete="off"
                                         id="poview-0010">
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field style="width:200px;margin-left:50px;">
                                    <input matInput placeholder="Employee" formControlName="employee" autocomplete="off"
                                         id="poview-0011">
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field style="width:200px;margin-left:50px;">
                                    <input matInput placeholder="Choose Branch" formControlName="branch" autocomplete="off"
                                         id="poview-0012">
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field style="width:200px;margin-left:50px;">
                                    <input matInput placeholder="Branch GST No" formControlName="branch_gstno" autocomplete="off"
                                         id="poview-0013">
                                </mat-form-field>
                            </td>
                            </tr>
                            <tr>
                            <td>
                                <mat-form-field style="margin-left: -25px;width:200px">
                                    <mat-select placeholder="Is Original Invoice"
                                        formControlName="is_original_invoice" required id="poview-0014">
                                        
                                        <mat-option *ngFor="let inv of invoiceyesno" [value]="inv.value">
                                            {{inv.display}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>

                            </td>
                            <td>
                                <mat-form-field style="width:200px;margin-left:50px;">
                                    <input matInput placeholder="MEP Number" formControlName="mep_no" autocomplete="off"
                                         id="poview-0015">
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field style="width:200px;margin-left:50px;">
                                    <input matInput placeholder="Purpose" formControlName="remarks" autocomplete="off"
                                         id="poview-0016">
                                </mat-form-field>
                            </td>
                            <td>
                                <button class="btn btn-outline-success" type="button" style="border-radius:40px;margin-left: 50px;"
                                title="Save" id="poview-0017">Save</button>
                            </td>
                            <td>
                                <button class="btn btn-outline-primary" type="button" style="border-radius:40px;margin-left: -125px;" (click)="cancel()"
                                title="back" id="poview-0018">Back</button>
                            </td>
                        </tr>
                    </div>
                </table>

            </form>
            </div>

<!-- 
            <div>
                <form [formGroup]="POHeaderForm" style="margin-left:2%;">
                    <table style="margin-bottom: 2%;">
                        <div>
                            <tr>
                                <td>
                                    <mat-form-field style="width:200px;margin-left:-25px;">
                                        <input matInput placeholder="Date" formControlName="date" autocomplete="off"
                                            readonly id="poview-0019">
                                    </mat-form-field>
                                </td>
                                <td>


                                    <mat-form-field style="width:200px;margin-left:50px;">
                                        <input matInput placeholder="State" formControlName="state" autocomplete="off"
                                            readonly id="poview-0020">
                                    </mat-form-field>
                                </td>
                                <td>


                                    <mat-form-field style="width:200px;margin-left:50px;">
                                        <input matInput placeholder="Invoice Number" formControlName="invoice_no"
                                            autocomplete="off" readonly id="poview-0021">
                                    </mat-form-field>
                                </td>
                                <td>


                                    <mat-form-field style="width:200px;margin-left:50px;">
                                        <input matInput placeholder="Invoice Amount" formControlName="amount"
                                            autocomplete="off" readonly id="poview-0022">
                                    </mat-form-field>
                                </td>

                            </tr>
                        </div>
                    </table>
                </form>
            </div>
          -->
           
           <div>
                <form [formGroup]="POInvoiceForm" autocomplete="off">
                    <div class="table-responsive" style="width:100%;margin-top: 1%;">
                        <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                            <thead class="table_header" style="text-align: center;">
                                <tr>
                                    <th>S.No</th>
                                    <th>Product Name</th>
                                    <th>GRN Code</th>
                                    <th>UOM</th>
                                    <th>Unit Price</th>
                                    <th>Qty Ordered</th>
                                    <th>Qty Read & Paid</th>
                                    <th>Balance Qty</th>
                                    <th>Select</th>
                                    <th>Current Invoice Qty Read</th>
                                    <th>Amount</th>
                                </tr>
                               
                            </thead>
                            <ng-container formArrayName="poheader"
                            *ngFor="let section of getSections(POInvoiceForm); let i = index">
                            <tr [formGroupName]="i">
                                <td>{{i+1}}</td>
                                <td>
                                    
                                        <mat-form-field >
                                            <input matInput placeholder="Product Name" formControlName="product_name" autocomplete="off"
                                                readonly id="poview-0023">
                                        </mat-form-field>
                                   
                                </td>
                                <td>
                                    <mat-form-field >
                                        <input matInput placeholder="GRN Code" formControlName="grn_code" autocomplete="off"
                                            readonly id="poview-0024">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field>
                                        <input matInput placeholder="UOM" formControlName="uom" autocomplete="off"
                                            readonly id="poview-0025">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field >
                                        <input matInput placeholder="Unit Price" formControlName="unitprice" autocomplete="off"
                                            readonly id="poview-0026">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field >
                                        <input matInput placeholder="Qty Ordered" formControlName="qty" autocomplete="off"
                                            readonly id="poview-0027">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field >
                                        <input matInput placeholder="Qty Read & Paid" formControlName="qty_read" autocomplete="off"
                                            readonly id="poview-0028">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field >
                                        <input matInput placeholder="Balance Qty" formControlName="balance" autocomplete="off"
                                            readonly id="poview-0029">
                                    </mat-form-field>
                                </td>
                                
                                <td></td>
                                <td>
                                    <mat-form-field >
                                        <input matInput placeholder="Current Invoice Qty Read" formControlName="current_invoice_qty" autocomplete="off"
                                            readonly id="poview-0030">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field >
                                        <input matInput placeholder="Amount" formControlName="amt" autocomplete="off"
                                            readonly id="poview-0031">
                                    </mat-form-field>
                                </td>
                            </tr>
                            </ng-container>
                            <tr >
                                <th class="totaldisplay" colspan="9" style="text-align: end;">Total Count:</th>
                                <td style="text-align: right;">0</td>
        
        
                            </tr>
                        </table>
                    </div>
            
                </form>
            </div>
            <br> 

            <!-- <div>
              <tr>
                <td>
                    <button class="btn btn-outline-success" type="button" style="border-radius:40px;margin-left: 508px;"
                    title="Save" id="poview-0032">Save</button>
                </td>
                <td>
                    <button class="btn btn-outline-primary" type="button" style="border-radius:40px;margin-left: 15px;" (click)="cancel()"
                    title="cancel" id="poview-0033">Cancel</button>
                </td>
            </tr>
            </div> -->
        </div>

       

    <!-- </mat-card> -->
</div>

<!-- supplier popup -->
<div *ngIf="showsupppopup">
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" 
        id="poview-0001">
        <div class="modal-dialog modal-xl" style="width:80%;height:200%;">
            <div class="modal-content">
                <div class="modal-header" style="background: rgba(23, 204, 23, 0.288);">
                    <h2 class="modal-title">
                        Find Supplier</h2>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="poview-0034">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <br>
                <div>
                    <form [formGroup]="SelectSupplierForm" (ngSubmit)="SelectSuppliersearch()">
                        <table style="margin-left: 20px;">
                            <div>
                                <tr>
                                    <td>
                                        <mat-form-field style="width: 200px;">
                                            <mat-label>Supplier GST Number</mat-label>
                                            <input matInput placeholder="GST No" formControlName="gstno"
                                                autocomplete="off" (keypress)="only_numalpha($event)" maxlength="" id="poview-0035">
                                        </mat-form-field>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </td>

                                    <td>
                                        <mat-form-field style="width: 200px;">
                                            <mat-label>Supplier Code</mat-label>
                                            <input matInput placeholder="Supplier" formControlName="code"
                                                autocomplete="off" (keypress)="only_numalpha($event)" id="poview-0036">
                                        </mat-form-field>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </td>
                                    <!-- [disabled]="showsuppliercode"  -->

                                    <td>
                                        <mat-form-field style="width: 200px;">
                                            <mat-label>PAN Number</mat-label>
                                            <input matInput placeholder="PAN" formControlName="panno" autocomplete="off"
                                                (keypress)="only_numalpha($event)" id="poview-0037">
                                        </mat-form-field>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </td>
                                    <!--  [disabled]="true" -->
                                    <button class="btn btn-outline-primary" type="submit"
                                        style="border-radius:40px;margin-left: 15px;" color="primary"
                                        (click)="SelectSuppliersearch()" id="poview-0038"><i class="fa fa-search"
                                            aria-hidden="true"></i></button>&nbsp;

                                    <!-- <button type="button" style="border-radius:10px;margin-left: 15px; border-color: black; 
                                    background-color: white;" class="btn btn-light" (click)="dataclear()" id="poview-0039">
                                        Reset</button> -->

                                        <button type="button" style="border-radius:40px;margin-left: 15px;
                                        font-family: 'Times New Roman', Times, serif;"
                                            class="btn btn-outline-primary" (click)="dataclear()" id="poview-0040">
                                            Reset</button>


                                </tr>
                                <tr>
                                    <div *ngIf="default">
                                        <td>
                                            <mat-form-field style="width: 250px;margin-top: 5px;" (click)="getsuppdd()">
                                                <mat-label>Choose Supplier</mat-label>
                                                <input #suppInput placeholder="Choose Supplier" matInput
                                                    formControlName="name" [matAutocomplete]="Suppliertype" id="poview-0041">
                                                <mat-autocomplete [panelWidth]="400" #Suppliertype="matAutocomplete"
                                                    [displayWith]="displayFn" (opened)="supplierScroll()">

                                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                                    </mat-option>
                                                    <ng-container *ngIf="!isLoading">
                                                        <mat-option *ngFor="let suppliername of supplierNameData"
                                                            ngDefaultControl [(ngModel)]="inputSUPPLIERValue"
                                                            [ngModelOptions]="{standalone: true}"
                                                            (ngModelChange)="inputSUPPLIERValue = $event.toUpperCase()"
                                                            (focusout)="getsuppView(suppliername)"
                                                            [value]="suppliername" matTooltip="{{suppliername.name}}" matTooltipClass="custom-tooltipnew">
                                                            {{suppliername.name}}
                                                        </mat-option>
                                                    </ng-container>
                                                </mat-autocomplete>
                                            </mat-form-field>
                                        </td>
                                    </div>

                                    <div *ngIf="alternate">
                                        <td>
                                            <mat-form-field style="width: 250px;margin-top: 5px;" (click)="getsuppdd()">
                                                <mat-label>Choose Supplier</mat-label>
                                                <input #name placeholder="Choose Supplier" matInput
                                                    formControlName="name" [matAutocomplete]="autosupp2" id="poview-0042">
                                                <mat-autocomplete [panelWidth]="400" #autosupp2="matAutocomplete"
                                                    [displayWith]="displaytest">
                                                    <!-- [(ngModel)]="inputSUPPLIERValue" [ngModelOptions]="{standalone: true}" -->
                                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                                    </mat-option>
                                                    <ng-container *ngIf="!isLoading">
                                                        <mat-option *ngFor="let suppliername of selectsupplierlist"
                                                            ngDefaultControl
                                                            (ngModelChange)="inputSUPPLIERValue = $event.toUpperCase()"
                                                            (focusout)="getsuppView(suppliername)"
                                                            [value]="suppliername" matTooltip="{{suppliername.name}}" matTooltipClass="custom-tooltipnew">
                                                            {{suppliername.name}}
                                                        </mat-option>
                                                    </ng-container>
                                                </mat-autocomplete>
                                            </mat-form-field>
                                        </td>
                                    </div>
                                </tr>
                            </div>
                        </table>

                        <!-- <form [formGroup]="supplierchooseForm"></form> -->
                        <table width="100%" style="margin-top: 2%;margin-bottom: 5%;">
                            <tbody>
                                <tr>
                                    <td width="20%" valign="top">
                                        <table width="100%;" style="font-size:14px;margin-left: 20px;">
                                            <tbody>
                                                <tr>
                                                    <p style="color: #808080; margin: 0px 0 4px;">
                                                        Supplier Name:
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
                                                            style="color: black;margin-left: 2.5em;">{{SupplierName }}
                                                        </span>
                                                    </p>
                                                    <p style="color: #808080; margin: 0px 0 4px;margin-top: 3%;">
                                                        Supplier Code:
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        <span style="color: black;margin-left: 3.8em;">{{SupplierCode}}
                                                        </span>
                                                    </p>
                                                    <p style="color: #808080; margin: 0px 0 4px;margin-top: 3%;">
                                                        Supplier GST Number:
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        <span
                                                            style="color: black;margin-left: 0.2em;">{{SupplierGSTNumber}}
                                                        </span>
                                                    </p>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </td>
                                    <td width="20%" valign="top">
                                        <table width="100%;" style="font-size:14px;margin-left:-120px;">
                                            <tbody>
                                                <tr>
                                                    <p style="color: #808080; margin: 0px 0 4px;">
                                                        PAN Number:
                                                        &nbsp;&nbsp;&nbsp;<span
                                                            style="color: black;margin-left: 0em;">{{SupplierPANNumber}}
                                                        </span>
                                                    </p>
                                                    <p style="color: #808080; margin: 0px 0 4px;margin-top: 3%;">
                                                        Address:
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        <span style="color: black;margin-left: 0.3em;"> {{line1}},
                                                            {{line2}},
                                                            {{line3}}</span>
                                                    </p>
                                                    <p style="color: #808080; margin: 0px 0 4px;margin-top: 3%;">
                                                        City:
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        <span style="color: black;margin-left: -0.4em;">{{City}} </span>
                                                    </p>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </td>
                                </tr>
                                <br><br>
                                <div *ngIf="submitbutton" style="margin-left: 20px; ">
                                    <tr>
                                        <!-- <button type="button" data-dismiss="modal" style="border-radius:10px;margin-left: 500px;border-color: #f5c68b;
                                        background-color: #f5c68b;" class="btn btn-light"
                                            (click)="Branchcallingfunction()" id="poview-0043">
                                            Submit</button> -->

                                        <button type="submit" data-dismiss="modal"
                                            style="border-radius:40px;margin-left: 500px;font-family: 'Times New Roman', Times, serif;"
                                            class="btn btn-outline-primary" (click)="Branchcallingfunction()" id="poview-0044">
                                            Submit</button>


                                    </tr>
                                </div>
                            </tbody>
                        </table>

                    </form>
                </div>
            </div>
        </div>


    </div>
</div>