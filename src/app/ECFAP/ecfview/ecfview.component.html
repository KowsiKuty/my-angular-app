<div style="width:100%">
    <!-- <mat-card style="margin-top: 13px;margin-left: 20px;margin-right: 20px;margin-bottom: 20px;"> -->
    <!-- <div style="margin-left: 10px;margin-top: 1%; width: 100%;">

            <h2 style="font-weight:bold;">Invoice Header:({{crno}})</h2>
            <div>
                <form [formGroup]="ECFHeaderForm" style="margin-left:2%;">
                    <table style="margin-bottom: 2%;">
                        <div>
                            <tr>
                                <td>


                                    <mat-form-field style="width:200px;margin-left:-25px;">
                                        <input matInput placeholder="ECF Type" formControlName="ecftype"
                                            autocomplete="off" readonly id="ecfview-0012">
                                    </mat-form-field>
                                </td>
                                <td>


                                    <mat-form-field style="width:200px;margin-left:50px;">
                                        <input matInput placeholder="Raiser Name" formControlName="raisername"
                                            autocomplete="off" readonly id="ecfview-0013">
                                    </mat-form-field>
                                </td>
                                <td>


                                    <mat-form-field style="width:200px;margin-left:50px;">
                                        <input matInput placeholder="Raiser Branch" formControlName="raiserbranch"
                                            autocomplete="off" readonly id="ecfview-0014">
                                    </mat-form-field>
                                </td>
                                <td>


                                    <mat-form-field style="width:250px;margin-left:50px;">
                                        <input matInput placeholder="Supplier Name" formControlName="supplierName"
                                            autocomplete="off" readonly id="ecfview-0015">
                                    </mat-form-field>
                                </td>
                            </tr>
                            <tr>
                                <td>


                                    <mat-form-field style="width:200px;margin-left:-25px;">
                                        <input matInput placeholder="Invoice No" formControlName="invoiceno"
                                            autocomplete="off" readonly id="ecfview-0016">
                                    </mat-form-field>
                                </td>
                                <td>


                                    <mat-form-field style="width:200px;margin-left:50px;">
                                        <input matInput placeholder="Invoice Date" formControlName="invoicedate"
                                            autocomplete="off" readonly id="ecfview-0017">
                                    </mat-form-field>
                                </td>
                                <td>


                                    <mat-form-field style="width:200px;margin-left:50px;">
                                        <input matInput placeholder="Taxable Amount" formControlName="taxableamount"
                                            autocomplete="off" readonly id="ecfview-0018">
                                    </mat-form-field>
                                </td>
                                <td>


                                    <mat-form-field style="width:200px;margin-left:50px;">
                                        <input matInput placeholder="Tax Amount" formControlName="taxamount"
                                            autocomplete="off" readonly id="ecfview-0019">
                                    </mat-form-field>
                                </td>
                            </tr>
                            <tr>
                                <td>


                                    <mat-form-field style="width:200px;margin-left:-25px;">
                                        <input matInput placeholder="Total Amount" formControlName="totalamount"
                                            autocomplete="off" readonly id="ecfview-0020">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="margin-left: 50px;width:200px">
                                        <mat-select placeholder="Is Original Document"
                                            formControlName="is_originalinvoice" required id="ecfview-0021">
                                            <mat-option *ngFor="let inv of invoiceyesno" [value]="inv.value">
                                                {{inv.display}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>

                                </td>
                               
                                <td>
                                    <button class="btn btn-outline-success" type="button" style="border-radius:40px;margin-left: 50px;" (click)="invhdrsave()"
                                    title="Save" id="ecfview-0022">Save</button>
                                </td>
                                <td>
                                    <button class="btn btn-outline-primary" type="button" style="border-radius:40px;margin-left: -130px;" (click)="backtoinward()"
                                    title="Save" id="ecfview-0023">Back to Inward</button>
                                </td>
                                <td>
                                    <button type="button" (click)="movetoprevious()" class="btn btn-outline-primary"
                                        style="border-radius:40px;margin-left:-290px" [disabled]="viewindex == 0" id="ecfview-0024">
                                        Move Previous
                                    </button>
                                </td>
                                <td>

                                    <button type="button" class="btn btn-outline-primary"
                                        style="border-radius:40px;margin-left: -140px;"
                                        [disabled]="viewindex+1 == invoiceheaderres?.length" (click)="movetonext()" id="ecfview-0025">
                                        Move Next
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                              

                                    <input #fileInput id="ecfview-0001" type="file" multiple  style="width: 108px;margin-left:-25px;">
                                </td>
                            </tr>
                        </div>
                    </table>
                </form>
            </div>

          
            <br>
            <h2 style="font-weight:bold;">Attachments
                <button type="button" *ngIf="showhideicon" class="btn btn-primary btn-sm" (click)="hideimage()" style="margin-left:50px" id="ecfview-0026">Hide Image</button>
            </h2>
            <div *ngIf="showfiletable" class="table-responsive" style="width:100%;margin-top: 1%;">
                <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                    <thead class="table_header" style="text-align: left;">

                        <tr>
                            <th>S.No</th>
                            <th>File Name</th>
                            <th>View</th>
                            <th>Download</th>
                            <th>Delete</th>


                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let attach of filedata; index as i">
                            <td>{{i+1}}</td>
                            <td>{{attach.file_name}}</td>
                            <td>
                                <span matTooltip="View" class=" fa fa-eye create " style="cursor: pointer;"
                                    matTooltip="View Image" style="color: green;cursor: pointer;padding:10px"
                                    (click)="data(attach)"></span>
                            </td>
                            <td>
                                <button class="btn btn-outline-success" type="submit" (click)="getfiles(attach)"
                                    style="border-radius:40px;margin-left: 15px;" color="primary" id="ecfview-0027">
                                    <i matTooltip="Download" class="fa fa-download" aria-hidden="true"></i>
                                </button>
                            </td>
                            <td>
                                <mat-icon style="color: green;cursor: pointer;margin-left: 15px;"
                                    (click)="fileDeletes(attach.file_id,i)" matTooltip="Delete">delete</mat-icon>


                             
                            </td>
                        </tr>
                    </tbody>
                </table>

            </div>
        </div> -->

    <!-- <div *ngIf="showIcon">
            <tr>
                <td>

                    <i class="fa fa-search-plus fa" aria-hidden="true" style="color:blue;font-size: 24px;margin-left: 950px;" (click)="zoomIn()"
                        matTooltip="Zoom In"></i>

                </td>
                <td>

                    <i class="fa fa-search-minus" aria-hidden="true" style="color:blue;font-size: 24px;margin-left: 20px;" (click)="zoomOut()"
                        matTooltip="Zoom Out"></i>
                </td>
                <td>
                    <i class="fa fa-external-link" aria-hidden="true" style="color:blue;font-size: 24px;margin-left: 20px;" (click)="data1()"></i>
                </td>
            </tr>
        </div> -->

    <!-- <div *ngIf="showimageHeaderAPI" class="image-container table-responsive" style="height: 600px; overflow: auto;">

            <img src="{{jpgUrlsAPI}}" class="img-responsive" style="width: 100%;"
                [style.transform]="'scale(' + zoomLevel + ')'">

           
        </div> -->

    <!-- <div *ngIf="showimagepdf" class="image-container table-responsive" style="height: 300px; overflow: auto;">


            <pdf-viewer [src]="pdfurl" [original-size]="false" [render-text]='false' [show-borders]="true"
                [style.transform]="'scale(' + zoomLevel + ')'" [fit-to-page]="true" [show-all]="true"
                style="display: block; height: 600px;" [fit-to-page]="true">
            </pdf-viewer>
            

        </div> -->
        <!-- <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;;"> -->
            <header class="header-adjust">
                <div class="headingalign">
                  <h3>
                      <i
                        class="fa fa-arrow-left"
                        aria-hidden="true"
                        (click)="backtoinward()"
                      ></i
                      >&nbsp; Invoice Count & ECF Count
                  </h3>
              
              </div>
              <div  class="button-div">
               <!-- <button type="button"
               style="border-radius:40px;"
               class="btn btn-outline-primary" 
                (click)="back()"
                 id="ecfap-view-0043">Back</button> -->
                </div>
              </header>
              <br>
            <form [formGroup]="ecfSearchForm">
                <div class="search-auto-fit">
                <!-- <table> -->
                    <!-- <tr> -->
                        <!-- <td>
                            <mat-form-field class="example-full-width">
                                <input class="toolbar-search" type="text" matInput autocomplete="off"
                                    formControlName="ecf_no" [readonly]="completedFlag" id="ecfview-0028">
                                <mat-placeholder>Ecf No</mat-placeholder>
                            </mat-form-field>

                        </td> -->
                        <div id="matInput-size">
                            <mat-form-field  appearance="outline">
                                <mat-select placeholder="Select Entry" formControlName="invoicegst"
                                    (selectionChange)="selectentry($event.value)" required id="ecfview-0029"  [disabled]="completedFlag">
                                    <mat-option *ngFor="let gst of ecforpo" [value]="gst.value">
                                        {{gst.display}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div id="matInput-size" *ngIf="selectedEntry === 'E'">
                            <mat-form-field appearance="outline">
                                <input placeholder="Ecf No" class="toolbar-search" type="text" matInput (input)="validateEcfNo($event)"
                                    autocomplete="off" formControlName="ecf_no" [readonly]="completedFlag" id="ecfview-0030">
                            </mat-form-field>
                        </div>
                        <!-- <td class="form-field" *ngIf="selectedEntry === 'P'">
                            <mat-form-field class="mat_input1" style="margin-left: 45px;">
                                <input placeholder="PO No" class="toolbar-search" type="text" matInput
                                    autocomplete="off" formControlName="po_no" [readonly]="completedFlag" id="ecfview-0031">
                            </mat-form-field>
                        </td> -->
                        <div>
                            <button class="btn btn-outline-success" type="submit"
                                style="border-radius:40px;margin-top: 5px;" color="success" (click)="searchdata()"
                                [disabled]="completedFlag || this.ecfSearchForm.value.ecf_no == ''" id="ecfview-0032"><i matTooltip="Search" matTooltipClass="custom-tooltipnew"
                                    class="fa fa-search" aria-hidden="true"></i></button>
                        </div>
                        <div>

                            <!-- <button class="btn btn-outline-success" type="button" *ngIf="!completedFlag"
                            style="border-radius:40px;font-size: 0px;margin-top: 5px;" 
                            (click)="resetecfno()" id="ecfview-0033">
                            <mat-icon  aria-hidden="true"
                            matTooltip="Reset" matTooltipClass="custom-tooltipnew">refresh</mat-icon></button> -->

                            <button class="btn btn-outline-success" type="button" *ngIf="!completedFlag"
                                style="border-radius:40px;font-size: 16px;margin-top: 5px;" 
                                (click)="resetecfno()" id="ecfview-0033">
                                <i matTooltip="Reset" matTooltipClass="custom-tooltipnew" class="fa fa-refresh" aria-hidden="true"></i>
                            </button>

                        </div>
                        <div>
                            <!-- <button class="btn btn-outline-primary" type="button"
                                style="border-radius:40px;margin-left: 15px;" (click)="backtoinward()" title="Save" id="ecfview-0034">Back
                                to Inward</button> -->
                        </div>

                    <!-- </tr>
                </table> -->
                </div>
            </form>
        
        
    


    <br>
<div *ngIf="showforecf">
    <h3 *ngIf="!completedFlag">ECF No:({{ecfcrno}})</h3>
    <h3 *ngIf="!completedFlag">Invoice Count:{{invoiceheaderrescount}}</h3>

    <div style="margin-top: 1%; width: 100%;" *ngIf="!completedFlag">
        <form [formGroup]="invoiceSearchForm">
            <div class="search-auto-fit">
                <lib-vs-search-cmp
                   id="matInput-size"
                  [SearchArr]="invoicesearch"
                  [Outputtype]="searchvar"
                >
                </lib-vs-search-cmp>
                <!-- (dataoutput)="searchdatas($event)" -->
              </div>
            <!-- <table>
                <tr>
                    <td>
                        <mat-form-field class="example-full-width" style="margin-left: 10px;">
                            <input class="toolbar-search" type="text" matInput autocomplete="off"
                                formControlName="branch" id="ecfview-0035">
                            <mat-placeholder>Branch</mat-placeholder>
                        </mat-form-field>

                    </td>
                    <td>
                        <mat-form-field class="example-full-width" style="margin-left: 50px;">
                            <input class="toolbar-search" type="text" matInput autocomplete="off"
                                formControlName="inv_no" id="ecfview-0036">
                            <mat-placeholder>Invoice No</mat-placeholder>
                        </mat-form-field>

                    </td>
                    <td>
                        <mat-form-field class="example-full-width" style="margin-left: 50px;">
                            <input class="toolbar-search" type="text" matInput autocomplete="off"
                                formControlName="inv_date" id="ecfview-0037">
                            <mat-placeholder>Invoice Date</mat-placeholder>
                        </mat-form-field>

                    </td>
                    <td>
                        <mat-form-field class="example-full-width" style="margin-left: 50px;">
                            <input class="toolbar-search" type="text" matInput autocomplete="off"
                                formControlName="inv_amt" id="ecfview-0038">
                            <mat-placeholder>Invoice Amount</mat-placeholder>
                        </mat-form-field>

                    </td>

                    <td>
                        <button class="btn btn-outline-primary" type="submit"
                            style="border-radius:40px;margin-left: 50px;" color="primary" id="ecfview-0039"><i matTooltip="Search" matTooltipClass="custom-tooltipnew"
                                class="fa fa-search" aria-hidden="true"></i></button>
                    </td>
                    <td>

                        <button class="btn btn-outline-primary" type="button"
                            style="border-radius:40px;margin-left: 15px;" color="primary"
                            (click)="resetinv()" id="ecfview-0040">Reset</button>
                    </td>
                </tr>
            </table> -->
        </form>
        <div *ngIf="!completedFlag">
            <form [formGroup]="InvoiceHeaderForm" autocomplete="off">
                <!-- <div class="table-responsive" style="width:100%;margin-top: 1%;margin-left: 10px;">
                    <table class="table table-bordered" fixed-header style="width: 90%;margin-top: 10px;">
                        <thead class="table_header" style="text-align: left;"> -->
                            <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                                <table class="table " fixed-header >
                                    <thead class="table_header" fixed-header >  
                            <tr>


                                <th>S.No</th>
                                <th>InvoiceHeader No</th>
                                <th style="width:10%">Supplier Name</th>
                                <th>Raiser Name</th>
                                <th>Branch</th>
                                <th>Invoice Date</th>
                                <th>Invoice No</th>
                                <th>Invoice Amount</th>
                                <th>Attachment</th>
                                <th>Physical Verification</th>

                            </tr>
                        </thead>
                        <!-- *ngFor="let section of getSections(InvoiceHeaderForm).slice((page-1)*pageSize, page*pageSize);let i = index" -->
                        <tbody *ngIf="showfrontdata">
                            <ng-container formArrayName="invoiceheader"
                                *ngFor="let section of getSections(InvoiceHeaderForm);let i = index">
                                <tr [formGroupName]="i">

                                    <!-- <tbody> -->
                                    <!-- <tr *ngFor="let hdr of invoiceheaderres.slice((page-1)*pageSize, page*pageSize); index as i"> -->
                                    <!-- <td>{{ (page - 1) * pageSize + i + 1 }}</td> -->
                                    <td> {{(createpresentpage - 1)*pageSizecreate_ecf +i+1 }} </td>
                                    <td>{{section?.value?.apinvoiceheader_crno}}</td>
                                    <td>{{section?.value?.supplier_name}}</td>
                                    <td>{{section?.value?.raisername}}</td>
                                    <td>{{section?.value?.raiserbranch}}</td>
                                    <td style="white-space: nowrap;">{{section?.value?.invoicedate|date:'dd-MMM-yyyy'}}
                                    </td>
                                    <td>{{section?.value?.invoiceno}}</td>
                                    <td >{{section?.value?.totalamount|currency:'INR'}}</td>
                                    <td style="align-items: center;">
                                        <!-- <input #fileInput id="ecfview-0002" type="file" multiple style="width: 108px;" hidden (change)="getFileDetails($event)">
                                            <i  (click)="fileInput.click()"  class="fa fa-cloud-upload" matTooltip="Upload file"
                                            matTooltipClass="custom-tooltipnew" aria-hidden="true" style="font-size: 25px;color: blue;"
                                           ></i> -->
                                            <i class=" fa fa-eye create " style="cursor: pointer;" matTooltipClass="custom-tooltipnew"
                                            matTooltip="View File" style="color: blue;cursor: pointer;padding:10px"
                                            data-toggle="modal" data-target="#ecfview-0007" (click)="getfiledetails(section,i)"></i>
                                        <!-- <button type="button" class="btn btn-outline"  #fileInput id="ecfview-0003" type="file" multiple
                                            style="border-radius: 40px;border-color:blueviolet;cursor:pointer"
                                            matTooltip="Upload file"  (change)="getFileDetails(i,$event)">
                                            <i  (click)="fileInput.click()" class="fa fa-upload" aria-hidden="true" style="color:blueviolet"></i>
                                        </button>
                                        <input type="file" #fileInput style="display:none;"
                                         id="ecfview-0041"> -->
                                    </td>
                                    <!-- <td style="align-items: center;">
                                        <input #fileInput id="ecfview-0002" type="file" multiple style="width: 108px;" hidden (change)="getFileDetails($event)">        
                                            <i  (click)="fileInput.click()"  class="fa fa-cloud-upload" matTooltip="Upload file"
                                            matTooltipClass="custom-tooltipnew" aria-hidden="true" style="font-size: 25px;color: blue;"
                                           ></i>
                                        <i class=" fa fa-eye create " style="cursor: pointer;" matTooltipClass="custom-tooltipnew"
                                            matTooltip="View File" style="color: blue;cursor: pointer;padding:10px"
                                            data-toggle="modal" (click)="getfiledetails(section,i)"></i> -->

                                            

                                        <!-- <button type="button" class="btn btn-outline"  #fileInput id="ecfview-0003" type="file" multiple
                                            style="border-radius: 40px;border-color:blueviolet;cursor:pointer"
                                            matTooltip="Upload file"  (change)="getFileDetails(i,$event)">
                                            <i  (click)="fileInput.click()" class="fa fa-upload" aria-hidden="true" style="color:blueviolet"></i>
                                        </button>
                                        <input type="file" #fileInput style="display:none;"
                                         id="ecfview-0041"> -->

                                    <!-- </td> -->

                                    <td  id="matInput-size">
                                        <mat-form-field appearance="outline">
                                            <mat-select placeholder="Physical Verification" [disabled]="completedFlag"
                                                formControlName="is_originalinvoice" required id="ecfview-0042">
                                                <mat-option *ngFor="let x of physical_verify" [value]="x.id" (change)="storedata($event,i,section.value)"
                                                matTooltip="{{x.text}}"  matTooltipClass="custom-tooltipnew" >
                                                    {{x.text}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </td>

                                </tr>

                            </ng-container>
                            <tr *ngIf="invhdr_data.length > 0">
                                <td colspan="19">
                                <button class="btn btn-outline-success" type="button" style="border-radius:40px;margin-left:1500px"
                                [disabled]="invhdrsaved" (click)="invhdrsave()" title="Save" id="ecfview-0048">Save</button>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                    <div *ngIf="invhdr_data.length==0">No Records Found...</div>
                    <!-- <div *ngIf="invoiceheaderres?.length==0; else pagination" class="NodataAlign">No Records Found...</div> -->
                    <!-- <ng-template #pagination>
                <div style="font-size: small;text-align: right;margin-bottom: 100px;cursor: pointer;">
                    <button mat-icon-button [disabled]="has_previous === false" color="primary" id="ecfview-0043">
                        <mat-icon style="cursor: pointer;">arrow_back</mat-icon>
                    </button>
                    {{currentpage}}
                    <button mat-icon-button [disabled]="has_next === false" color="primary" id="ecfview-0044">
                        <mat-icon style="cursor: pointer;">arrow_forward</mat-icon>
                    </button>
                </div>
            </ng-template> -->
                </div>
            </form>
        </div>
        <!-- <br>
        <div style="margin-bottom: 3%;width: 90%;" *ngIf="!completedFlag">
            <div class="row">
                <div class="col-3"></div>
                <div class="col-9">
                    <mat-paginator (page)="handlePagecreateEvent($event)" [length]="createlength_ecf" [pageSize]="pageSizecreate_ecf"
                        [showFirstLastButtons]="showFirstLastButtons" [pageSizeOptions]="pageSizeOptions"
                        [pageIndex]="pageIndex" [hidePageSize]="true" aria-label="Select page">
                    </mat-paginator>
                </div>
            </div> -->
            <!-- <select [(ngModel)]="pageSize"  (change)="page = 1" id="ecfview-0045">
               <option *ngFor="let size of pageSizes" [value]="size">{{ size }}</option>
            </select>
            <button mat-icon-button [disabled]="page == 1" (click)="page = page - 1"  color="primary" id="ecfview-0046">
                <mat-icon style="cursor: pointer;">arrow_back</mat-icon>
            </button>
           
            <span>{{ page }} / {{ pageCount }}</span>
            <button  mat-icon-button color="primary" [disabled]="page * pageSize  id="ecfview-0047">= invoiceheaderres?.length" (click)="page = page + 1">
                <mat-icon style="cursor: pointer;">arrow_forward</mat-icon>
            </button> -->

        <!-- </div> -->
    </div>

    <!-- <div style="margin-bottom: 2%;" *ngIf="invhdr_data.length > 0">
        <div class="row">
            <div class="col-10">

            </div>
            <div class="col-2">
                <button class="btn btn-outline-success" type="button" style="border-radius:40px;"
                    [disabled]="invhdrsaved" (click)="invhdrsave()" title="Save" id="ecfview-0048">Save</button>
            </div>

        </div>

    </div> -->
</div>


    



<div *ngIf="showforpo">
    <!-- <div style="margin-left: 50px;margin-top: 1%; width: 100%;">
        <form [formGroup]="POInvoiceForm" autocomplete="off">
            <div class="table-responsive" style="width:100%;margin-top: 1%;">
                <table class="table table-bordered" fixed-header style="width: 90%;margin-top: 10px;">
                    <thead class="table_header" style="text-align: left;">
                        <tr>
                            <th>S.No</th>
                            <th>Product Name</th>
                            <th>GRN Code</th>
                            <th>UOM</th>
                            <th>Unit Price</th>
                            <th>Qty Ordered</th>
                            <th>Qty Read & Paid</th>
                            <th>Balance Qty</th>
                            <th>Select</th>
                            <th>Current Invoice Qty Read</th>
                            <th>Amount</th>
                        </tr>
                       
                    </thead>
                    <ng-container formArrayName="poheader"
                    *ngFor="let lists of getpoSections(POInvoiceForm); let i = index">
                    
                    <tr [formGroupName]="i">
                        <td>{{i+1}}</td>
                        <td>{{lists?.value?.product_name}}</td>
                        <td>{{lists?.value?.grn_code}}</td>
                        <td>{{lists?.value?.uom}}</td>
                        <td style="text-align: right;">{{lists?.value?.unitprice|currency:'INR'}}</td>
                        <td>{{lists?.value?.qty}}</td>
                        <td>{{lists?.value?.qty_read}}</td>
                        <td>{{lists?.value?.balance}}</td>
                       
                        <td>
                            <section class="example-section">
                             
                                <mat-checkbox matTooltip="Select" matTooltipClass="custom-tooltipnew"  style="margin-left: 15px;margin-right: 5px;margin-bottom: 15px"
                                (change)="onselectionchange($event,lists,i)" [checked]="lists?.select" >
                                </mat-checkbox>
                            </section>
                        </td>
                        <td>
                            <mat-form-field >
                                <input matInput type="number" placeholder="Current Invoice Qty Read" formControlName="current_invoice_qty" autocomplete="off"
                                     id="ecfview-0049">
                            </mat-form-field>
                        </td>
                        <td style="text-align: right;">{{lists?.value?.amt|currency:'INR'}}</td>
                       
                    </tr>
                    </ng-container>
                    <tr >
                        <th class="totaldisplay" colspan="9" style="text-align: end;">Total Count:</th>
                        <td style="text-align: right;">0</td>


                    </tr>
               
                </table>
            </div>
    
        </form>
    </div>
    <br>
    <div style="margin-bottom: 3%;width: 85%;">
        <div class="row">
            <div class="col-3"></div>
            <div class="col-9">
                <mat-paginator (page)="handlePagecreateEvent($event)" [length]="createlength_ecf" [pageSize]="pageSizecreate_ecf"
                    [showFirstLastButtons]="showFirstLastButtons" [pageSizeOptions]="pageSizeOptions"
                    [pageIndex]="pageIndex" [hidePageSize]="true" aria-label="Select page">
                </mat-paginator>
            </div>
        </div>

        <br>
        <h2 style="font-weight: bold;margin-left: 50px;margin-top: 1%; width: 100%;">POInvoice Creation</h2>
        <div style="margin-left: 50px;margin-top: 1%; width: 100%;">
            
                <div class="table-responsive" style="width:100%;margin-top: 1%;">
                    <table class="table table-bordered" fixed-header style="width: 90%;margin-top: 10px;">
                        <thead class="table_header" style="text-align: left;">
                            <tr>
                                <th>S.No</th>
                                <th>Product Name</th>
                                <th>PO NO</th>
                                <th>UOM</th>
                                <th>Unit Price</th>
                                <th>Qty Ordered</th>
                                <th>Amount</th>
                                <th>Delete</th>
                            </tr>
                           
                        </thead>
                       <tbody>
                         <tr *ngFor="let datas of selectionArray;index as i">
                            <td>{{i+1}}</td>
                            <td>{{datas?.product_name}}</td>
                            <td>{{datas?.po_num}}</td>
                            <td>{{datas?.uom}}</td>
                            <td style="text-align: right;">{{datas?.unitprice|currency:'INR'}}</td>
                            <td>{{datas?.current_invoice_qty}}</td>
                            <td>{{datas?.amt}}</td>
                            <td>
                                <button mat-icon-button type="button" matTooltip="Delete" matTooltipClass="custom-tooltipnew" id="ecfview-0050">
                                    <mat-icon style="color: green;" aria-label="Edit" (click)="delete(i,datas)">
                                        delete</mat-icon>
                                </button>
                            </td>
                           
                           
                           
                        </tr>
                       </tbody>
                        
                   
                    </table>
                    <div *ngIf="selectionArray?.length==0">No Records Found...</div>
                </div>
        
           
        </div>

        <div style="margin-bottom: 2%;">
            <div class="row">
                <div class="col-10">
    
                </div>
                <div class="col-2">
                    <button class="btn btn-outline-success" type="button" style="border-radius:40px;"
                        [disabled]="this.ecfSearchForm.value.ecf_no == ''"  title="Save"
                        data-toggle="modal" data-target="#showpodata" id="ecfview-0051">Save</button>
                </div>
    
            </div>
    
        </div>
    
</div> -->

    <!-- </mat-card> -->
    <h3 style="margin-left: 10px;">PO Invoice Creation</h3>
    <div style="margin-top: 1%; width: 100%;">
        <div>
            <form [formGroup]="POMakerForm">
             
                 <div style="margin-left: 10px;margin-bottom: 2%;">
                    <div class="search-auto-fit">
                         <div id="matInput-size">
                             <mat-form-field appearance="outline">
                                <mat-label>Type</mat-label>
                                 <input matInput placeholder="Type" formControlName="type" autocomplete="off"
                                     readonly id="ecfview-0052">
                             </mat-form-field>
                         </div>
                         
                        <div id="matInput-size">
                            <mat-form-field appearance="outline">
                                <mat-label>PO Number</mat-label>
                                <input matInput placeholder="PO Number" formControlName="po_number" 
                                autocomplete="off" [readonly]="POSaved" required
                                (focusout)="getponoDetails()" id="ecfview-0064">
                            </mat-form-field>
                        </div>

                        <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>PCA Number</mat-label>
                                    <input matInput placeholder="PCA Number" formControlName="mep_no" 
                                    autocomplete="off" [readonly]="POSaved"
                                        id="ecfview-0065">
                                </mat-form-field>
                        </div>
                         
                         <div id="matInput-size">
                             <mat-form-field appearance="outline">
                                <mat-label>Supplier Name</mat-label>
                                 <input matInput placeholder="Supplier Name" formControlName="supplier_name" autocomplete="off"
                                     readonly id="ecfview-0053" required>
                             </mat-form-field>
                         </div>
                             
                        <i class="fa fa-arrow-up" aria-hidden="true"  matTooltip="Select Supplier" matTooltipClass="custom-tooltipnew" (click)="popupopen1()" style="margin-top:16px;color: blue;">
                                <!-- data-toggle="modal"
                                data-target="#ecfview-0011" -->
                        </i>
                        
                        <div id="matInput-size">
                                <mat-form-field appearance="outline" >
                                    <mat-label>Supplier GST</mat-label>
                                    <input matInput placeholder="Supplier GST" formControlName="supplier_gst" autocomplete="off"
                                        readonly id="ecfview-0054" required>
                                </mat-form-field>
                        </div>

                        <div id="matInput-size" >
                                <section class="example-section ecfapcheck" >
                                    <mat-checkbox class="example-margin" style="margin-top:5px;margin-bottom:-5px;" 
                                    formControlName="is_gst" [disabled]="POSaved">GST Applicable
                                        <label style="color:red;margin-top: 15px;" >*</label> </mat-checkbox>
                                </section>
                        </div>

                        <div id="matInput-size" style="margin-left: 95px;">
                                <mat-form-field appearance="outline">
                                    <mat-label>Invoice Number</mat-label>
                                    <input matInput placeholder="Invoice Number" formControlName="invoice_no" 
                                    autocomplete="off" [readonly]="POSaved" required
                                            id="ecfview-0056">
                                </mat-form-field>
                        </div>

                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Invoice Date</mat-label>
                                    <input matInput [matDatepicker]="picker1" placeholder="Invoice Date" formControlName="invoice_date" 
                                    [max]="tomorrow" readonly id="ecfview-0055" required>
                                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                    <mat-datepicker #picker1 [disabled]="POSaved"></mat-datepicker>
                                </mat-form-field> 
                            </div>


                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Invoice Amount</mat-label>
                                    <input matInput placeholder="Invoice Amount" formControlName="amount" autocomplete="off"
                                    appCleardirective
                                            (keypress)="getCharCode($event);numberOnlyandDot($event, this.POMakerForm.value.amount)"
                                            (input)="invhdrTempChngeToCurrency($event.target ,'amount')" required
                                            #amount (focusout)="invamount(0, POMakerForm.get('amount'), POMakerForm)"
                                            (change)="invhdramtDecimalChg('amount',POMakerForm)" [readonly]="POSaved"
                                            id="ecfview-0057">
                                </mat-form-field>
                            </div>
                            
                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Taxable Amount</mat-label>
                                    <input matInput placeholder="Taxable Amount" formControlName="taxableamount" autocomplete="off"
                                    appCleardirective
                                            (change)="invhdramtDecimalChg('taxableamount',POMakerForm)"
                                            (keypress)="getCharCode($event);numberOnlyandDot($event, this.POMakerForm.value.taxableamount)"
                                            (input)="invhdrTempChngeToCurrency($event.target, 'taxableamount')"
                                            (ngModelChange)="taxableAmount($event,0,taxableamount, POMakerForm)"
                                            (focusout)="taxableAmount1(0,taxableamount, POMakerForm )" [readonly]="POSaved" required
                                        id="ecfview-0058">
                                </mat-form-field>
                            </div>


                            <div id="matInput-size">
                            <mat-form-field  appearance="outline"  (click)="getraiserdropdown()">
                                <mat-label>Raiser</mat-label>
                                <input #raiserInput matInput [readonly]="POSaved"
                                    formControlName="employee" [matAutocomplete]="raisertyperole" 
                                    placeholder="Choose Raiser" id="ecfview-0059" required>
                                <mat-autocomplete [panelWidth]="400" #raisertyperole="matAutocomplete"
                                    [displayWith]="displayFnraiserrole" (opened)="raiserScroll()">
                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                        <mat-option *ngFor="let data of Raiserlist" [value]="data" (click)="getEmpCode()" 
                                        matTooltip = "{{data.full_name}}" matTooltipClass="custom-tooltipnew">
                                            {{data.full_name}}
                                        </mat-option>
                                    </ng-container>
                                </mat-autocomplete>
                            </mat-form-field>
                            <!-- <mat-form-field style="width:250px;margin-left:-25px;">
                                    <input matInput placeholder="Employee" formControlName="employee" autocomplete="off"
                                        id="ecfview-0060">
                                </mat-form-field> -->
                            </div>

                            <div id="matInput-size">
                            <mat-form-field appearance="outline" (click)="getRaiserbranch()">
                            <mat-label>Raiser Branch</mat-label>
                            <input #raiserbrInput matInput formControlName="branch"  [readonly]="POSaved"
                                [matAutocomplete]="matraiserAutocomplete" placeholder="Raiser Branch" id="ecfview-0061" required>
                            <mat-autocomplete [panelWidth]="400" #matraiserAutocomplete="matAutocomplete"
                                [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                <ng-container *ngIf="!isLoading">
                                    <mat-option *ngFor="let branch of Branchlist" [value]="branch" (click)="getBranchGst()"
                                        matTooltip="{{branch.code}}-{{branch.name}}" matTooltipClass="custom-tooltipnew">
                                        {{branch.code}}-{{branch.name}}
                                    </mat-option>
                                </ng-container>
                            </mat-autocomplete>
                        </mat-form-field>
                                <!-- <mat-form-field style="width:250px;margin-left:50px;">
                                    <input matInput placeholder="Choose Branch" formControlName="branch" autocomplete="off"
                                        id="ecfview-0062">
                                </mat-form-field> -->
                            </div>

                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Branch GST No</mat-label>
                                    <input matInput placeholder="Branch GST No" formControlName="branch_gstno" readonly
                                    autocomplete="off"
                                        id="ecfview-0063">
                                </mat-form-field>
                            </div>
                           
                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Purpose</mat-label>
                                    <input matInput placeholder="Purpose" formControlName="remarks" 
                                    autocomplete="off" [readonly]="POSaved" id="ecfview-0067">
                                </mat-form-field>
                            </div>
                          

                            <div id="matInput-size">
                            <mat-form-field appearance="outline">
                                <mat-label>Is Original Document</mat-label>
                                <mat-select placeholder="Is Original Document" [disabled]="POSaved"
                                    formControlName="is_original_invoice" required id="ecfview-0066">
                                    
                        `            <mat-option *ngFor="let inv of invoiceyesno" [value]="inv.value">
                                        {{inv.display}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>

                            </div>
                       

                            <div>


                                 <i (click)="UploadPopupOpens()" class="fa fa-cloud-upload"
                                            matTooltip="Upload file" matTooltipClass="custom-tooltipnew"
                                            aria-hidden="true" style="font-size: 25px;color: blue;"></i>
                                             <span class="required-star">*</span>
                            </div>

                            <div style="margin-left:10px;"
                               *ngIf="POMakerForm.get('uploadedFiles').value?.length > 0">

                                <div>
                                    <i matTooltip="view" matTooltipClass="custom-tooltipnew"
                                        class=" fa fa-eye create " (click)="getfiledetailss()"
                                        style="cursor: pointer;color:blue;margin-left: 5px;">
                                    </i>
                                </div>
                            </div>

                    </div>
                
                   
                    
                 </div>
             
             <div style="display: flex;justify-content: flex-end;margin-top: 2%;margin-right: 10px;">
                                
                
                    <button class="btn btn-outline-success" type="button" style="border-radius:40px;margin-left:40px;"
                    (click)="createPOInvoice()" title="Save" [disabled]="POSaved" id="ecfview-0068">Save</button>
                
                    <button class="btn btn-outline-primary" type="button" style="border-radius:40px;margin-left:10px;" (click)="cancel()"
                    title="back" id="ecfview-0069">Back</button>
                     
                  
             </div>

         </form>
         </div>
    </div>
</div>
<div style="margin-top: 1%; width: 100%;">
    
    <h3> ECF Count : {{length_ecf}}/{{fulldataslist?.doccount}}</h3>
    <!-- <div class="table-responsive" style="width:100%;margin-top: 1%;margin-left: 10px;">
        <table class="table table-bordered" fixed-header style="width: 90%;margin-top: 10px;">
            <thead class="table_header" style="text-align: left;"> -->
                <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                    <table class="table" fixed-header>
                        <thead class="table_header" fixed-header>
                <tr>
                    <th>S.No</th>
                    <th>CR No</th>
                    <th>ECF Type</th>
                    <th>Commodity </th>
                    <th>Branch</th>
                    <th>Document No</th>
                    <th>ECF Amount</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody *ngFor="let list of ECFDataList;index as i">
                <tr *ngFor="let lists of list.ref_no['data'];index as j">
                    <td> {{(hdrpresentpage - 1)*pageSize_ecf +i+1 }} </td>
                    <td>{{lists?.crno}}</td>
                    <td>{{lists?.aptype}}</td>
                    <td>{{lists?.commodity_id?.name}}</td>
                    <td *ngFor="let datas of lists.branch">{{datas?.code}} - {{datas?.name}}</td>
                    <td>{{list?.docnumber}}</td>
                    <td>{{lists?.apamount | currency : 'INR'}}</td>
                    <td >
                        <i class="fa fa-eye create" matTooltip="View Invoice Header" matTooltipClass="custom-tooltipnew"
                            style="cursor:pointer;color:blue;" data-toggle="modal"
                            (click)="getheaders(lists?.id)"></i>
                            <!-- data-target="#ecfview-0006" -->
                    </td>
                </tr>
            </tbody>
        </table>
        <div *ngIf="ECFDataList?.length == 0">No Records Found...</div>
        <div style="margin-bottom: 3%;width: 100%;">
            <div class="row">
                <div class="col-3"></div>
                <div class="col-9">
                    <mat-paginator (page)="handlePageEvent($event)" [length]="length_ecf" [pageSize]="pageSize_ecf"
                        [showFirstLastButtons]="showFirstLastButtons" [pageSizeOptions]="pageSizeOptions"
                        [pageIndex]="pageIndex" [hidePageSize]="true" aria-label="Select page">
                    </mat-paginator>
                </div>
            </div>
        </div>
                </div>
</div>

<!-- </mat-card> -->

<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
    id="ecfview-0005" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-xl " style="width: 100%;">
        <div class="modal-content" style=" height: 800px;">
            <div class="modal-header" style="background: rgba(23, 204, 23, 0.288);">
                <h2 style="margin-left: 4px;;font-weight:bold;">Attachments</h2>
                <button type="button" class="close" #closebuttons data-dismiss="modal" aria-label="Close" id="ecfview-0070">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <br>
            <h2 style="font-weight:bold;">
                <button type="button" *ngIf="showhideicon" class="btn btn-primary btn-sm" (click)="hideimage()"
                    style="margin-left:50px" id="ecfview-0071">Hide Image</button>
            </h2>
            <div *ngIf="showfiletable" class="table-responsive" style="width:100%;margin-top: 1%;">
                <table class="table table-bordered" fixed-header style="width: 90%;margin-top: 10px;margin-left: 50px;">
                    <thead class="table_header" style="text-align: left;">

                        <tr>
                            <th>S.No</th>
                            <th>File Name</th>
                            <th>View</th>
                            <th>Download</th>
                            <th>Delete</th>


                        </tr>
                    </thead>
                    <tbody *ngFor="let datas of invoiceheaderres;index as i">
                        <tr *ngFor="let attach of datas?.file_data; index as j">
                            <td>{{j+1}}</td>
                            <td style="width: 303px;">
                                <div  style="width: 300px;overflow: hidden" matTooltip="{{attach.file_name}}" matTooltipClass="custom-tooltipnew">
                                    {{attach.file_name}}
                                </div>
                            </td>
                            <td>
                                <span matTooltip="View" matTooltipClass="custom-tooltipnew" class=" fa fa-eye create " style="cursor: pointer;"
                                    matTooltip="View Image" style="color: green;cursor: pointer;padding:10px"
                                    (click)="data(attach)"></span>
                            </td>
                            <td>
                                <button class="btn btn-outline-success" type="submit" (click)="getfiles(attach)"
                                    style="border-radius:40px;margin-left: 15px;" color="primary" id="ecfview-0072">
                                    <i matTooltip="Download" matTooltipClass="custom-tooltipnew" class="fa fa-download" aria-hidden="true"></i>
                                </button>
                            </td>
                            <td>
                                <mat-icon style="color: green;cursor: pointer;margin-left: 15px;"
                                    (click)="fileDeletes(attach.file_id,i)" matTooltip="Delete" matTooltipClass="custom-tooltipnew">delete</mat-icon>



                            </td>
                        </tr>
                    </tbody>
                </table>

            </div>


            <div *ngIf="showIcon">
                <tr>
                    <td>

                        <i class="fa fa-search-plus fa" aria-hidden="true"
                            style="color:blue;font-size: 24px;margin-left: 950px;" (click)="zoomIn()"
                            matTooltip="Zoom In" matTooltipClass="custom-tooltipnew"></i>

                    </td>
                    <td>

                        <i class="fa fa-search-minus" aria-hidden="true"
                            style="color:blue;font-size: 24px;margin-left: 20px;" (click)="zoomOut()"
                            matTooltip="Zoom Out" matTooltipClass="custom-tooltipnew"></i>
                    </td>
                    <td>
                        <i class="fa fa-external-link" aria-hidden="true"
                            style="color:blue;font-size: 24px;margin-left: 20px;" (click)="data1('')"></i>
                    </td>
                </tr>
            </div>

            <div *ngIf="showimageHeaderAPI" class="image-container table-responsive"
                style="height: 800px; overflow: auto;">

                <img src="{{jpgUrlsAPI}}" class="img-responsive" style="width: 100%;"
                    [style.transform]="'scale(' + zoomLevel + ')'">


            </div>

            <div *ngIf="showimagepdf" class="image-container table-responsive" style="height: 800px; overflow: auto;">


                <pdf-viewer [src]="pdfurl" [original-size]="false" [render-text]='false' [show-borders]="true"
                    [style.transform]="'scale(' + zoomLevel + ')'" [fit-to-page]="true" [show-all]="true"
                    style="display: block; height: 600px;" [fit-to-page]="true">
                </pdf-viewer>


            </div>
        </div>
    </div>
</div>



    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
    data-backdrop = "static" data-keyboard="false" id="ecfview-0006">
        <div class="modal-dialog modal-xl " style="width: 100%;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">
                    Invoice Header
                    </h3>
                    <button type="button" class="close" data-dismiss="modal" #closedbuttons aria-label="Close" id="ecfview-0073">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- <form [formGroup]="invoiceSearchForm">
                        <table>
                            <tr>
                              <td>
                                <mat-form-field class="example-full-width">
                                    <input class="toolbar-search" type="text" matInput autocomplete="off" formControlName="branch" id="ecfview-0074">
                                    <mat-placeholder>Branch</mat-placeholder>
                                </mat-form-field>
                              
                            </td>
                            <td>
                                <mat-form-field class="example-full-width" style="margin-left: 50px;">
                                    <input class="toolbar-search" type="text" matInput autocomplete="off" formControlName="inv_no" id="ecfview-0075">
                                    <mat-placeholder>Invoice No</mat-placeholder>
                                </mat-form-field>
                              
                            </td>
                            <td>
                                <mat-form-field class="example-full-width" style="margin-left: 50px;">
                                    <input class="toolbar-search" type="text" matInput autocomplete="off" formControlName="inv_date" id="ecfview-0076">
                                    <mat-placeholder>Invoice Date</mat-placeholder>
                                </mat-form-field>
                              
                            </td>
                            <td>
                                <mat-form-field class="example-full-width" style="margin-left: 50px;">
                                    <input class="toolbar-search" type="text" matInput autocomplete="off" formControlName="inv_amt" id="ecfview-0077">
                                    <mat-placeholder>Invoice Amount</mat-placeholder>
                                </mat-form-field>
                              
                            </td>
                            
                           <td>
                            <button class="btn btn-outline-primary" type="submit"
                            style="border-radius:40px;margin-left: 50px;" color="primary"
                             id="ecfview-0078"><i matTooltip="Search" class="fa fa-search"
                                aria-hidden="true"></i></button>
                    </td>
                    <td>
                     
                            <button class="btn btn-outline-primary" type="button"
                            style="border-radius:40px;margin-left: 15px;"
                           color="primary" (click)="resetinv()" id="ecfview-0079">Reset</button>
                        </td>
                        </tr>
                        </table>
                    </form> -->
                    <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                        <!-- <div class="table-responsive" style="margin-top: 1%;"> -->
                            <!-- <lib-vs-cbox-summary  
                            [SummaryDetails]="Summaryecfentrydata"
                            [SummaryApiObj]="SummaryApiecfentryObjNew" 
                            [FirstLastbtn]="true">
                           </lib-vs-cbox-summary> -->
                            <table class="table" fixed-header>
                                <thead class="table_header">
                                    <tr>

                                        <th>S.No</th>
                                        <th>InvoiceHeader No</th>
                                        <th style="width:10%">Supplier Name</th>
                                        <th>Raiser Name</th>
                                        <th>Branch</th>
                                        <th>Invoice Date</th>
                                        <th>Invoice No</th>
                                        <th>Invoice Amount</th>
                                        <th>Attachment</th>
                                        <th>Physical Verification</th>

                                    </tr>
                                </thead>
                               
                                <tbody>
                                    <tr *ngFor="let datas of invoiceheaderres;index as i">
                                        <td> {{(viewpresentpage - 1)*pageSizeview_ecf +i+1 }} </td>
                                        <td>{{datas?.apinvoiceheader_crno}}</td>
                                        <td>{{datas?.supplier_id?.name}}</td>
                                        <td>{{datas?.raisercode}} - {{datas?.raisername}}</td>
                                        <td>{{datas?.branchdetails_id?.code}} - {{datas?.branchdetails_id?.name}}</td>
                                        <td style="white-space: nowrap;">{{datas?.invoicedate|date:'dd-MMM-yyyy'}}</td>
                                        <td>{{datas?.invoiceno}}</td>
                                        <td >{{datas?.totalamount|currency:'INR'}}</td>
                                        <td>

                                            <i class=" fa fa-eye create " matTooltip="View File" matTooltipClass="custom-tooltipnew"
                                                style="color: blue;cursor: pointer;padding:10px;cursor: pointer;"
                                                (click)="showimg()"></i>
                                        </td>
                                        <td *ngIf="datas?.inward_flag == true">{{datas?.is_originalinvoice?.text}}</td>
                                        <td *ngIf="datas?.inward_flag == false"></td>
                                    </tr>
                                </tbody>

                            </table>
                            <div *ngIf="invoiceheaderres?.length==0">No Records Found...</div> 
                      
                    <!-- </div> -->
                    <br>
                    <!-- <div style="margin-bottom: 5%;margin-left: 1050px;">
                   
                    <select [(ngModel)]="pageSize"  (change)="page = 1" id="ecfview-0082">
                       <option *ngFor="let size of pageSizes" [value]="size">{{ size }}</option>
                    </select>
                    <button mat-icon-button [disabled]="page == 1" (click)="page = page - 1"  color="primary" id="ecfview-0083">
                        <mat-icon style="cursor: pointer;">arrow_back</mat-icon>
                    </button>
                   
                    <span>{{ page }} / {{ pageCount }}</span>
                    <button  mat-icon-button color="primary" [disabled]="page * pageSize  id="ecfview-0084">= invoiceheaderres?.length" (click)="page = page + 1">
                        <mat-icon style="cursor: pointer;">arrow_forward</mat-icon>
                    </button>
                  </div> -->
                    <!-- </div> -->







                    <div *ngIf="showattachment">
                        <h3>Attachments</h3>
                        <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                            <table class="table" fixed-header>
                                <thead class="table_header">
    
                                    <tr>
                                        <th >S.No</th>
                                        <th >File Name</th>
                                        <th >View</th>
                                        <th >Download</th>
                                        
    
    
                                    </tr>
                                </thead>
                                <tbody *ngFor="let datas of invoiceheaderres;index as i">
                                    <tr *ngFor="let attach of datas?.file_data; index as i">
                                        <td >{{i+1}}</td>
                                        <td style="width: 303px;">
                                            <div  style="width: 300px;overflow: hidden" matTooltip="{{attach.file_name}}" matTooltipClass="custom-tooltipnew">
                                                {{attach.file_name}}
                                            </div>
                                        </td>
                                        <td  >
                                            <i class="fa fa-external-link" aria-hidden="true" style="color:blue;font-size: 24px;" (click)="data1(attach)"></i>
                                            </td>
                                       
    
                                        <td >
                                            <button class="btn btn-outline-primary" type="submit"
                                                (click)="getfiles(attach)"
                                                style="border-radius:40px;" color="primary" id="ecfview-0085">
                                                <i matTooltip="Download" matTooltipClass="custom-tooltipnew" class="fa fa-download"
                                                    aria-hidden="true"></i>
                                            </button>
                                        </td>
                                        
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    </div>
                    <div>
                        <button type="button" style="border-radius:40px;margin-bottom: 10px;margin-left: 1040px; "
                            class="btn btn-outline-primary" data-dismiss="modal">
                            Back</button>
                    </div>
                </div>
        </div>
    </div>
</div>



<div>
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true" 
    data-backdrop = "static" data-keyboard="false" id="ecfview-0007">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Attachments
                    </h3>
                    <button type="button" class="close" data-dismiss="modal" #closedbuttons aria-label="Close" id="ecfview-0086">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="table-responsive">
                                <h3>Currently Attached Files</h3>
                                <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                                    <table class="table" fixed-header>
                                        <thead class="table_header">
                                        <tr>
                                            <th>S.No</th>
                                            <th>File Name</th>
                                            <th>View</th>
                                            <!-- <th style="text-align: center;">Delete</th> -->
                                        </tr>
                                        </thead>
                                        <tbody>
                                             <tr  *ngFor="let files of file_process_data['file'+fileindex]; let index = index">
                                                <td>{{index+1}}</td>
                                                <td style="width: 303px;">
                                                    <div  style="width: 300px;overflow: hidden" matTooltip="{{files?.name}}" matTooltipClass="custom-tooltipnew">
                                                        {{files?.name}}
                                                    </div>
                                                </td>
                                                <td >
                                                <i class="fa fa-external-link" aria-hidden="true" style="color:blue;font-size: 24px;margin-left: 20px;" (click)="filepreview(files)" data-toggle="modal"
                                                data-target="#ecfview-0008"></i>
                                                </td>
                                                <!-- <td style="text-align: center;">
                                                    
                                                    <span (click)="deletefileUpload(InvoiceHeaderForm?.value?.invoiceheader[this.fileindex],index)"
                                                        >
                                                        <mat-icon matTooltip="Delete" matTooltipClass="custom-tooltipnew">delete
                                                        </mat-icon>
                                                    </span>
                                                </td> -->
                                             </tr>
                                            
                                        </tbody>
                                    </table>
                                </div>
                               
                                <!-- <div
                                *ngFor="let files of InvoiceHeaderForm?.value?.invoiceheader[this.fileindex]?.filevalue; let index = index">
                                <p (click)="filepreview(files)" data-toggle="modal"
                                    data-target="#my-modalpreview"
                                    style="color: #0000EE;cursor: pointer;">
                                    {{index+1}}.{{files?.name}} </p>
                                <span
                                    (click)="deletefileUpload(InvoiceHeaderForm?.value?.invoiceheader[this.fileindex],index)"
                                    [class.disabled]="readinvhdrdata != false">
                                    <mat-icon matTooltip="Delete">delete
                                    </mat-icon>
                                </span>
                            </div> -->
                            <br>
                            <h3>Previously Attached Files</h3>
                            <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                                <table class="table" fixed-header >
                                    <thead class="table_header">
                                        <tr>
                                            <th>S.No</th>
                                            <th>File Name</th>
                                            <th>View</th>
                                            <th>Download</th>
                                            <th>Delete </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let attach of filedatas; index as i">
                                            <td>{{i+1}}</td>
                                            <td style="width: 303px;">
                                                <div  style="width: 300px;overflow: hidden" matTooltip="{{attach.file_name}}" matTooltipClass="custom-tooltipnew">
                                                    {{attach.file_name}}
                                                </div>
                                            </td>
                                            <td>
                                                <i class="fa fa-external-link" aria-hidden="true" style="color:blue;font-size: 24px;" (click)="data1(attach)"></i>
                                                </td>
                                            <!-- <td style="text-align: center;color:blue;">
                          <div matTooltip="View" class="fa fa-arrow-up" aria-hidden="true" 
                            data-toggle="modal"
                            (click)="data(attach.file_id)" >
                           
                          </div>
                        </td> -->
                                            <td>
                                                <button class="btn btn-outline-primary" type="submit"
                                                    (click)="getfiles(attach)"
                                                    style="border-radius:40px;" color="primary" id="ecfview-0087">
                                                    <i matTooltip="Download" matTooltipClass="custom-tooltipnew" class="fa fa-download"
                                                        aria-hidden="true"></i>
                                                </button>
                                            </td>
                                            <td >
                                                <mat-icon style="color: black;cursor: pointer;"
                                                    (click)="fileDeletes(attach.file_id,i)">delete</mat-icon>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            </div>
                            <!-- <tr>
                                <td>
                                    <button type="button" class="btn btn-light" style="border-radius:7px;margin-left:220px;
                                                            border-color: black; margin-bottom: 20px;
                                                            background-color: white;" (click)="fileback()" id="ecfview-0088">Back</button>
                                </td>
                            </tr> -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-primary" style="border-radius:40px;"
                        data-dismiss="modal" id="ecfview-0088">
                        Back
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div *ngIf="showimageHeaderPreview" id="ecfview-0008" class="modal fade" aria-labelledby="my-modalLabel"
    aria-hidden="true" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-xl" data-dismiss="modal" style="width: 60%;height: 80%;">
        <div class="modal-content">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ecfview-0089">
                <span aria-hidden="true">&times;</span>
            </button>
            <div class="modal-body">
                <img src="{{jpgUrls}}" class="img-responsive" style="width: 100%;">

            </div>
        </div>
    </div>
</div>

<div *ngIf="showimageHeaderPreviewPDF" id="ecfview-0008" class="modal fade" aria-labelledby="my-modalLabel"
    aria-hidden="true" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header" style="background: rgba(23, 204, 23, 0.288);">
                <h2 class="modal-title"> ECF Attachments</h2>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ecfview-0090">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <pdf-viewer [src]="pdfurl" [original-size]="false" [render-text]='false' [show-borders]="true"
                [fit-to-page]="true" [show-all]="true" style="display: block; height: 600px;" [fit-to-page]="true">
            </pdf-viewer>
        </div>
    </div>
</div>

<div>
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true" 
    data-backdrop = "static" data-keyboard="false"  id="ecfview-0010">
        <div class="modal-dialog modal-xl " style="width: 100%;">
            <div class="modal-content">
                <div class="modal-header" style="background: rgba(23, 204, 23, 0.288);">
                    <h2 class="modal-title" style="color:black ;text-align: center;font-weight: bold;">POInvoice Maker
                    </h2>
                    <button type="button" class="close" data-dismiss="modal" #closedbuttons aria-label="Close" id="ecfview-0091">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div style="margin-left: 50px;margin-top: 1%; width: 100%;">
                    <div>
                        <form [formGroup]="POMakerForm" style="margin-left:2%">
                          <table style="margin-bottom: 2%;">
                             <div>
                                 <tr>
                                     <td>
                                         <mat-form-field style="width:200px;margin-left:-25px">
                                             <input matInput placeholder="Type" formControlName="type" autocomplete="off"
                                                 readonly id="ecfview-0092">
                                         </mat-form-field>
                                     </td>
                                     <td>
                                         <mat-form-field style="width:200px;margin-left:50px;">
                                             <input matInput placeholder="PO Number" formControlName="po_number" autocomplete="off"
                                                 readonly id="ecfview-0093">
                                         </mat-form-field>
                                     </td>
                                     <td>
                                         <section class="example-section ecfapcheck" style="margin-left:50px">
                                             <mat-checkbox class="example-margin" formControlName="is_gst">GST Applicable
                                                 <label style="color:red;">*</label> </mat-checkbox>
                                         </section>
                                     </td>
                                     <td >
                                         <mat-form-field style="width:200px;margin-left: 50px;">
                                             <input matInput placeholder="Supplier Name" formControlName="supplier_name" autocomplete="off"
                                                 readonly id="ecfview-0094">
                                         </mat-form-field>
                                     </td>
                                         <i class="fa fa-arrow-up" aria-hidden="true"  matTooltip="Select Supplier" matTooltipClass="custom-tooltipnew" data-toggle="modal"
                                         data-target="#ecfview-0011" style="margin-left:0px;color: blue;"></i>
                                     <!-- <td>
                                         <button type="button" class="btn btn-outline-primary"
                                             matTooltip="Select Supplier" data-toggle="modal"
                                             data-target="#selectSupplier" 
                                             style="border-radius:40px;margin-left:15px;" id="ecfview-0095"><span
                                                 class="fa fa-arrow-up"></span></button>
         
                                     </td> -->
                                    
                                   
                                 </tr>
                                 <tr> 
                                     <td >
                                     <mat-form-field style="width:200px;margin-left:-25px;">
                                         <input matInput placeholder="Supplier GST" formControlName="supplier_gst" autocomplete="off"
                                             readonly id="ecfview-0096">
                                     </mat-form-field>
                                     </td>
                                       <td>
                                         <mat-form-field style="width: 200px;margin-left:50px;">
                                             <mat-label>Date</mat-label>
                                             <input matInput [matDatepicker]="picker1" placeholder="Invoice Date" formControlName="invoice_date" [max]="tomorrow" readonly id="ecfview-0097">
                                            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                             <mat-datepicker #picker1></mat-datepicker>
                                         </mat-form-field> 
                                     </td>
         
                                     <td>
                                         <mat-form-field style="width:200px;margin-left:50px;">
                                             <input matInput placeholder="Invoice Number" formControlName="invoice_no" autocomplete="off"
                                                  id="ecfview-0098">
                                         </mat-form-field>
                                     </td>
                                     <td>
                                         <mat-form-field style="width:200px;margin-left:50px;">
                                             <input matInput placeholder="Amount" formControlName="amount" autocomplete="off"
                                                  id="ecfview-0099">
                                         </mat-form-field>
                                     </td>
                                     </tr>
                                     <tr>
                                     <td>
                                         <mat-form-field style="width:200px;margin-left:-25px;">
                                             <input matInput placeholder="Taxable Amount" formControlName="taxableamount" autocomplete="off"
                                                  id="ecfview-0100">
                                         </mat-form-field>
                                     </td>
                                     <td>
                                         <mat-form-field style="width:200px;margin-left:50px;">
                                             <input matInput placeholder="Employee" formControlName="employee" autocomplete="off"
                                                  id="ecfview-0101">
                                         </mat-form-field>
                                     </td>
                                     <td>
                                         <mat-form-field style="width:200px;margin-left:50px;">
                                             <input matInput placeholder="Choose Branch" formControlName="branch" autocomplete="off"
                                                  id="ecfview-0102">
                                         </mat-form-field>
                                     </td>
                                     <td>
                                         <mat-form-field style="width:200px;margin-left:50px;">
                                             <input matInput placeholder="Branch GST No" formControlName="branch_gstno" autocomplete="off"
                                                  id="ecfview-0103">
                                         </mat-form-field>
                                     </td>
                                     </tr>
                                     <tr>
                                     <td>
                                         <mat-form-field style="margin-left: -25px;width:200px">
                                             <mat-select placeholder="Is Original Document"
                                                 formControlName="is_original_invoice" required id="ecfview-0104">
                                                 
                                                 <mat-option *ngFor="let inv of invoiceyesno" [value]="inv.value">
                                                     {{inv.display}}
                                                 </mat-option>
                                             </mat-select>
                                         </mat-form-field>
         
                                     </td>
                                     <td>
                                         <mat-form-field style="width:200px;margin-left:50px;">
                                             <input matInput placeholder="MEP Number" formControlName="mep_no" autocomplete="off"
                                                  id="ecfview-0105">
                                         </mat-form-field>
                                     </td>
                                     <td>
                                         <mat-form-field style="width:200px;margin-left:50px;">
                                             <input matInput placeholder="Purpose" formControlName="remarks" autocomplete="off"
                                                  id="ecfview-0106">
                                         </mat-form-field>
                                     </td>
                                     <td>
                                         <button class="btn btn-outline-success" type="button" style="border-radius:40px;margin-left: 50px;"
                                         title="Save" id="ecfview-0107">Save</button>
                                     </td>
                                     <td>
                                         <button class="btn btn-outline-primary" type="button" style="border-radius:40px;margin-left: -125px;" (click)="cancel()"
                                         title="back" id="ecfview-0108">Back</button>
                                     </td>
                                 </tr>
                             </div>
                         </table>
         
                     </form>
                     </div>
                </div>

            
            
            </div>
        </div>
    </div>
</div>

<div *ngIf="showsupppopup">
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" 
    data-backdrop = "static" data-keyboard="false" id="ecfview-0011">
        <div class="modal-dialog modal-xl" style="width:80%;height:200%;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">
                        Find Supplier</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ecfview-0109">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <br>
                <div class="modal-body">
                    <form [formGroup]="SelectSupplierForm">
                    <!-- <form [formGroup]="SelectSupplierForm" (ngSubmit)="SelectSuppliersearch()"> -->
                        <div class="search-auto-fit" style="margin-left:20px">
                            <lib-vs-search-cmp id="matInput-size" [SearchArr]="suppliersearch" [Outputtype]="searchvar"
                                (dataoutput)="SelectSuppliersearchs($event)" [SeparateReset]="true"
                                (ResetOutput)="dataclear($event)">
                            </lib-vs-search-cmp>
                        </div>
                        <table style="margin-left: 20px;">
                            <div>
                               
                                <!-- <tr>
                                    <td>
                                        <mat-form-field style="width: 200px;">
                                            <mat-label>Supplier GST Number</mat-label>
                                            <input matInput placeholder="GST No" formControlName="gstno"
                                                autocomplete="off" (keypress)="only_numalpha($event)" maxlength="" id="ecfview-0110">
                                        </mat-form-field>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </td>

                                    <td>
                                        <mat-form-field style="width: 200px;">
                                            <mat-label>Supplier Code</mat-label>
                                            <input matInput placeholder="Supplier" formControlName="code"
                                                autocomplete="off" (keypress)="only_numalpha($event)" id="ecfview-0111">
                                        </mat-form-field>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </td> -->
                                    <!-- [disabled]="showsuppliercode"  -->

                                    <!-- <td>
                                        <mat-form-field style="width: 200px;">
                                            <mat-label>PAN Number</mat-label>
                                            <input matInput placeholder="PAN" formControlName="panno" autocomplete="off"
                                                (keypress)="only_numalpha($event)" id="ecfview-0112">
                                        </mat-form-field>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    </td> -->
                                    <!--  [disabled]="true" -->
                                    <!-- <button class="btn btn-outline-primary" type="submit"
                                        style="border-radius:40px;margin-left: 15px;" color="primary"
                                        (click)="SelectSuppliersearch()" id="ecfview-0113"><i class="fa fa-search"
                                            aria-hidden="true"></i></button>&nbsp; -->

                                    <!-- <button type="button" style="border-radius:10px;margin-left: 15px; border-color: black; 
                                    background-color: white;" class="btn btn-light" (click)="dataclear()" id="ecfview-0114">
                                        Reset</button> -->

                                        <!-- <button type="button" style="border-radius:40px;margin-left: 15px;
                                        font-family: 'Times New Roman', Times, serif;"
                                            class="btn btn-outline-primary" (click)="dataclear()" id="ecfview-0115">
                                            Reset</button> -->


                                <!-- </tr> -->
                                <tr>
                                    <div *ngIf="default">
                                        <lib-vs-dynamicform-cmp id="matInput-size" [formGroup]="SelectSupplierForm"
                                        (dataEvent)="choosesupplierdata($event)" [InputFields]="choosesupplierfield"
                                        [ResetForm]="restformfile"></lib-vs-dynamicform-cmp>
                                        <!-- <td>
                                            <mat-form-field style="width: 250px;margin-top: 5px;" (click)="getsuppdd()">
                                                <mat-label>Choose Supplier</mat-label>
                                                <input #suppInput placeholder="Choose Supplier" matInput
                                                    formControlName="name" [matAutocomplete]="Suppliertype" id="ecfview-0116">
                                                <mat-autocomplete [panelWidth]="400" #Suppliertype="matAutocomplete"
                                                    [displayWith]="displayFn" (opened)="supplierScroll()">

                                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                                    </mat-option>
                                                    <ng-container *ngIf="!isLoading">
                                                        <mat-option *ngFor="let suppliername of supplierNameData"
                                                            ngDefaultControl [(ngModel)]="inputSUPPLIERValue"
                                                            [ngModelOptions]="{standalone: true}"
                                                            (ngModelChange)="inputSUPPLIERValue = $event.toUpperCase()"
                                                            (focusout)="getsuppView(suppliername)"
                                                            [value]="suppliername" matTooltip="{{suppliername.name}}" matTooltipClass="custom-tooltipnew">
                                                            {{suppliername.name}}
                                                        </mat-option>
                                                    </ng-container>
                                                </mat-autocomplete>
                                            </mat-form-field>
                                        </td> -->
                                    </div>

                                    <div *ngIf="alternate">
                                        <td>
                                            <lib-vs-dynamicform-cmp id="matInput-size" [formGroup]="SelectSupplierForm"
                                            (dataEvent)="choosesupplierdata1($event)"
                                            [InputFields]="choosesupplierfield1"
                                            [ResetForm]="restformfile1"></lib-vs-dynamicform-cmp>
                                            <!-- <mat-form-field style="width: 250px;margin-top: 5px;" (click)="getsuppdd()">
                                                <mat-label>Choose Supplier</mat-label>
                                                <input #name placeholder="Choose Supplier" matInput
                                                    formControlName="name" [matAutocomplete]="autosupp2" id="ecfview-0117">
                                                <mat-autocomplete [panelWidth]="400" #autosupp2="matAutocomplete"
                                                    [displayWith]="displaytest"> -->
                                                    <!-- [(ngModel)]="inputSUPPLIERValue" [ngModelOptions]="{standalone: true}" -->
                                                    <!-- <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                                    </mat-option>
                                                    <ng-container *ngIf="!isLoading">
                                                        <mat-option *ngFor="let suppliername of selectsupplierlist"
                                                            ngDefaultControl
                                                            (ngModelChange)="inputSUPPLIERValue = $event.toUpperCase()"
                                                            (focusout)="getsuppView(suppliername)"
                                                            [value]="suppliername" matTooltip="{{suppliername.name}}" matTooltipClass="custom-tooltipnew">
                                                            {{suppliername.name}}
                                                        </mat-option>
                                                    </ng-container>
                                                </mat-autocomplete>
                                            </mat-form-field>
                                        </td> -->
                                    </div>
                                </tr>
                            </div>
                        </table>

                        <!-- <form [formGroup]="supplierchooseForm"></form> -->
                        <table width="100%" style="margin-top: 2%;margin-bottom: 5%;">
                            <tbody>
                                <tr>
                                    <td valign="top">
                                        <table style="font-size: 14px; margin-left: 20px">
                                            <tbody>
                                                <tr>
                                                    <td style="
                                                    color: #808080;
                                                    width: 170px;
                                                    font-size: medium;
                                                    height: 50px;vertical-align: top;">
                                                        Supplier Name:
                                                            
                                                    </td>
                                                    <td style="width: 400px; height: 50px; vertical-align: top">
                                                        {{SupplierName }}
                                                    </td>
                                                </tr>

                                                <tr>
                                                    <td style="
                                                    color: #808080;
                                                    width: 170px;
                                                    font-size: medium;
                                                    height: 50px;vertical-align: top">
                                                        Supplier Code:
                                                    </td>
                                                    <td style="width: 400px; height: 50px;vertical-align: top">{{SupplierCode}}
                                                    </td>
                                                </tr>

                                                <tr>
                                                    <td  style="
                                                    color: #808080;
                                                    width: 190px;
                                                    font-size: medium;
                                                    height: 50px;vertical-align: top
                                                  ">
                                                        Supplier GST Number:
                                                    </td>
                                                    <td
                                                    style="width: 400px; height: 50px;vertical-align: top">{{SupplierGSTNumber}}
                                                    </td>
                                                </tr>
                                                

                                                <!-- <p style="color: #808080; margin: 0px 0 4px;">
                                                    Supplier Name:
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
                                                        style="color: black;margin-left: 2.5em;">{{SupplierName }}
                                                    </span>
                                                </p>
                                                <p style="color: #808080; margin: 0px 0 4px;margin-top: 3%;">
                                                    Supplier Code:
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                    <span style="color: black;margin-left: 3.8em;">{{SupplierCode}}
                                                    </span>
                                                </p>
                                                <p style="color: #808080; margin: 0px 0 4px;margin-top: 3%;">
                                                    Supplier GST Number:
                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                    <span
                                                        style="color: black;margin-left: 0.2em;">{{SupplierGSTNumber}}
                                                    </span>
                                                </p> -->
                                            </tbody>
                                        </table>
                                    </td>
                                    <td valign="top">
                                        <table style="font-size:14px;">
                                            <tbody></tbody>
                                            <tbody>

                                                <tr>
                                                    <td style="
                                                    color: #808080;
                                                    width: 170px;
                                                    font-size: medium;
                                                    height: 50px;vertical-align: top
                                                  ">
                                                        PAN Number:
                                                    </td>
                                                    <td style="width: 300px; height: 50px;vertical-align: top">
                                                        {{SupplierPANNumber}}
                                                      </td>
                                                </tr>

                                                <tr>
                                                    <td style="
                                                    color: #808080;
                                                    width: 170px;
                                                    font-size: medium;
                                                    height: 50px;vertical-align: top
                                                  ">
                                                        Address:
                                                    </td>
                                                    <td style="width: 300px; height: 50px;vertical-align: top"> {{line1}},
                                                        {{line2}},
                                                        {{line3}}</td>
                                                </tr>

                                                <tr>
                                                    <td style="
                                                    color: #808080;
                                                    width: 120px;
                                                    font-size: medium;
                                                    height: 50px;vertical-align: top
                                                  ">
                                                        City:
                                                    </td>
                                                    <td style="width: 300px; height: 50px;vertical-align: top">{{City}} </td>
                                                </tr>

                                            </tbody>
                                        </table>
                                    </td>
                                </tr>
                                
                                <!-- <div *ngIf="submitbutton" style="margin-left: 20px; ">
                                    <tr> -->
                                        <!-- <button type="button" data-dismiss="modal" style="border-radius:10px;margin-left: 500px;border-color: #f5c68b;
                                        background-color: #f5c68b;" class="btn btn-light"
                                            (click)="Branchcallingfunction()" id="ecfview-0118">
                                            Submit</button> -->

                                        <!-- <button type="submit" data-dismiss="modal"
                                            style="border-radius:40px;margin-left: 500px;font-family: 'Times New Roman', Times, serif;"
                                            class="btn btn-outline-success" (click)="Branchcallingfunction()" id="ecfview-0119">
                                            Submit</button>


                                    </tr>
                                </div> -->
                            </tbody>
                        </table>

                    </form>
                </div>

                <div class="modal-footer">
                    <button type="submit" data-dismiss="modal"
                    style="border-radius:40px;"
                    class="btn btn-outline-success" (click)="Branchcallingfunction()" id="ecfview-0119">
                    Submit</button>
                    <button type="button" data-dismiss="modal" style="border-radius: 40px; margin-left: 10px"
                    class="btn btn-outline-primary" id="ecfview-0119">
                    Back
                </button>
                </div>
            </div>
        </div>


    </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
    data-keyboard="false" data-backdrop="static" id="fileUploaddpopup">
    <div class="modal-dialog modal-lg ">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Upload File
                </h3>
                <button type="button" class="close" data-dismiss="modal" #uploadclose aria-label="Close"
                    id="create-ecf-0140">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>


            <div class="modal-body">
                <div class="table-responsive">
                    <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                    <table>
                        <thead>
                            <tr>
                                <th>S.No</th>
                                <th>Document Type</th>
                                <th>Upload</th>
                                <th>Selected Files</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let type of uploadFileTypes; let index = index">
                                <td>{{index+1}}</td>
                                <td>
                                    {{type}}
                                </td>
                                <td>
                                    <input #fileInput id="create-ecf-0002" type="file" multiple style="width: 108px;"
                                        hidden (change)="getFileDetails( $event, type)">
                                    <i (click)="fileInput.click()" class="fa fa-cloud-upload" matTooltip="Upload file"
                                        matTooltipClass="custom-tooltipnew" aria-hidden="true"
                                        style="font-size:18px;color: blue;cursor: pointer;"></i>
                                </td>
                                <td  style="width: 303px;">
                                    <div *ngFor="let file of file_process_data2[type]; let j = index"
                                    style="border: 0cm;width: 300px;overflow: hidden" matTooltip="{{file.name}}"
                                     matTooltipClass="custom-tooltipnew">
                                        <div>{{j+1}}.{{file.name}}</div>
                                    </div>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                    </div>
                </div>

            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-outline-success" style="border-radius:40px;margin-left:40%;
                        margin-bottom: 20px; " (click)="uploadSubmit()" id="create-ecf-0153">Submit</button>
                <button type="button" class="btn btn-outline-primary" style="border-radius:40px;margin-left:10px;
                        margin-bottom: 20px; " data-dismiss="modal" (click)="uploadback()" id="create-ecf-fileupload-close">Back</button>
            </div>


        </div>
    </div>
</div>

<div class="modal
 fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true" data-keyboard="false"
    data-backdrop="static" id="viewfilepopopen">
    <div class="modal-dialog modal-lg " style="width: 60%;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Attachments
                </h3>
                <button type="button" class="close" data-dismiss="modal" #closesbuttons aria-label="Close"
                    id="create-ecf-0130">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="padding:2rem">

                <div class="row">
                    <div class="table-responsive">
                        <h3>Currently Attached Files</h3>
                        <!-- <lib-vs-cbox-summary
                                [SummaryDetails]="SummaryCurrentlyAttechedFiles"
                                [SummaryApiObj]="SummaryApiCurrentlyAttechedFilesObjNew"
                              ></lib-vs-cbox-summary> -->
                    <!-- <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>S.No</th>
                                    <th>Document Type</th>
                                    <th>File Name</th>
                                    <th>Delete</th>
                                </tr>
                            </thead>
                            <tbody>
                                <ng-container *ngFor="let type of uploadFileTypes; let ind = index">
                                    <tr *ngFor="let files of file_process_data[type]; let index = index">
                                        <td>
                                            {{ind+1}}.{{index+1}}
                                        </td>
                                        <td>
                                            {{type}}
                                        </td>
                                        <td  style="width: 303px;">
                                            <div  style="width: 300px;overflow: hidden" matTooltip="{{files?.name}}" matTooltipClass="custom-tooltipnew">
                                                {{files?.name}}
                                            </div>
                                        </td>
                                        <td style="text-align: left;color:red">
                                            <span *ngIf="this.invhdrForm != 'frmInvHdrDet'"
                                                (click)="deletefileUpload(InvoiceHeaderForm?.value?.invoiceheader[this.fileindex], index, type)"
                                                [class.disabled]="readinvhdrdata != false">
                                                <mat-icon matTooltip="Delete" matTooltipClass="custom-tooltipnew" style="font-size: 18px;">delete
                                                </mat-icon>
                                            </span>
                                            <span *ngIf="this.invhdrForm == 'frmInvHdrDet'"
                                                (click)="deletefileUpload('frmInvHdrDet',index, type)">
                                                <mat-icon matTooltip="Delete" matTooltipClass="custom-tooltipnew">delete
                                                </mat-icon>
                                            </span>
                                        </td>
                                    </tr>
                                </ng-container>

                            </tbody>
                        </table>
                    </div>
                     <div class="row" *ngIf="isPymtAdvpage" style="width:85%">
            <div class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left: 42%">
                <mat-paginator (page)="handlePymtAdvPageEvent($event)" [length]="length_PymtAdv"
                    [pageSize]="pagesize_PymtAdv" [showFirstLastButtons]="showFirstLastButtons"
                    [pageSizeOptions]="pageSizeOptions" [pageIndex]="pageIndexPymtAdv" [hidePageSize]="true"
                    aria-label="Select page">
                </mat-paginator>
            </div>
            <div class="col-sm-3"
                style="margin-bottom: 0%;font-size: small;text-align: right;margin-top: 18px;left: -15%;font-weight:bold">
                Page: {{pymtAdvpresentpage}}
            </div>
        </div> -->

        <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
            <table>
                <thead>
                <tr>
                    <th>S.No</th>
                    <th>Document Type</th>
                    <th>File Name</th>
                    <th>Delete</th>
                </tr>
                </thead>
                <tbody>
            <tr *ngFor="let row of pagedFiles; let i = index">
                <td>{{ (pageIndexPymtAdv * pagesize_PymtAdv) + (i + 1) }}</td>
                <td>{{ row.type }}</td>
                <td style="width: 303px;">
                    <div style="width: 300px; overflow: hidden"
                        matTooltip="{{ row.file?.name }}"
                        matTooltipClass="custom-tooltipnew">
                    {{ row.file?.name }}
                    </div>
                </td>
                <td style="text-align: left;color:red">
                    <span *ngIf="invhdrForm !== 'frmInvHdrDet'"
                        (click)="deletefileUpload(row)"
                        [class.disabled]="readinvhdrdata !== false">
                    <mat-icon matTooltip="Delete" matTooltipClass="custom-tooltipnew" style="font-size: 18px;">delete</mat-icon>
                    </span>
                    <span *ngIf="invhdrForm === 'frmInvHdrDet'"
                        (click)="deletefileUpload(row)">
                    <mat-icon matTooltip="Delete" matTooltipClass="custom-tooltipnew">delete</mat-icon>
                    </span>
                </td>
            </tr>

                </tbody>
            </table>
        </div>

        <!-- paginator -->
        <div  *ngIf="isPymtAdvpage">
            <!-- <div class="col-sm-9"> -->
                <mat-paginator (page)="handlePymtAdvPageEvent($event)"
                            [length]="length_PymtAdv"
                            [pageSize]="pagesize_PymtAdv"
                            [pageSizeOptions]="pageSizeOptions"
                            [pageIndex]="pageIndexPymtAdv"
                            aria-label="Select page" [hidePageSize]="true" >
                            <!-- [showFirstLastButtons]="showFirstLastButtons" -->
                </mat-paginator>
            <!-- </div>
            <div class="col-sm-3">
                Page: {{ pymtAdvpresentpage }}
            </div> -->
        </div>
                        <!-- <div
                                *ngFor="let files of InvoiceHeaderForm?.value?.invoiceheader[this.fileindex]?.filevalue; let index = index">
                                <p (click)="filepreview(files)" data-toggle="modal"
                                    data-target="#my-modalpreview"
                                    style="color: #0000EE;cursor: pointer;">
                                    {{index+1}}.{{files?.name}} </p>
                                <span
                                    (click)="deletefileUpload(InvoiceHeaderForm?.value?.invoiceheader[this.fileindex],index)"
                                    [class.disabled]="readinvhdrdata != false">
                                    <mat-icon matTooltip="Delete">delete
                                    </mat-icon>
                                </span>
                            </div> -->
                        <div *ngIf="this.invhdrForm != 'frmInvHdrDet'">

                        </div>
                        <h3>Previously Attached Files</h3>
                        <lib-vs-cbox-summary [SummaryDetails]="SummarypreviousAttechedFiles"
                            [SummaryApiObj]="SummaryApipreviouslyAttechedFilesObjNew"></lib-vs-cbox-summary>
                        <!-- <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                                    <thead class="table_header" style="text-align: left;">
                                        <tr>
                                            <th style="text-align: center;">S.No</th>
                                            <th style="text-align: center;">Document Type</th>
                                            <th style="text-align: center;">File Name</th>
                                            <th style="text-align: center;">Action</th>
                                            <th style="text-align: center;">Delete </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let attach of filedatas; index as i">
                                            <td style="text-align: center;">{{i+1}}</td>
                                            <td>{{attach.document_type}}</td>
                                            <td>{{attach.file_name}}</td>
                                            <td style="text-align: center;" >
                                                <button type="button" class="btn btn-outline-primary"
                                                matTooltip="View / Open" matTooltipClass="custom-tooltipnew" 
                                                (click)="data1(attach)"
                                                style="border-radius:40px;color: mediumblue;">
                                                <i class=" fa fa-arrow-right "
                                               style="cursor: pointer;color:blue;"></i>
                                               </button>
                                            </td> -->
                        <!-- <td style="text-align: center;color:blue;">
                                            <div matTooltip="View" class="fa fa-arrow-up" aria-hidden="true" 
                                                data-toggle="modal"
                                                (click)="data(attach.file_id)" >
                                            
                                            </div>
                                            </td> -->
                        <!-- <td style="text-align: center;">
                                                <button class="btn btn-outline-primary" type="submit"
                                                    (click)="getfiles(attach)"
                                                    style="border-radius:40px;margin-left: 15px;" color="primary" id="create-ecf-0131">
                                                    <i matTooltip="Download" matTooltipClass="custom-tooltipnew" class="fa fa-download" matTooltipClass="custom-tooltipnew"
                                                        aria-hidden="true"></i>
                                                </button>
                                            </td> -->
                        <!-- <td style="text-align:center">
                                                <mat-icon style="color: black;cursor: pointer;"
                                                    (click)="fileDeletes(attach.file_id,i)">delete</mat-icon>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>  -->
                    </div>
                    <!-- <tr>
                                <td>
                                   
                                </td>
                            </tr> -->
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-primary" style="border-radius:40px;" (click)="fileback()"
                    id="create-ecf-0132" data-dismiss="modal">
                    Back
                    <!-- data-target="#create-ecf-0152" data-toggle="modal" -->
                </button>
            </div>
        </div>
    </div>
</div>


<!-- <pre>{{InvoiceHeaderForm.value|json}}</pre> -->