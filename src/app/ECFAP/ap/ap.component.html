<div class="p-4">
    <!-- class="table-newcontainer" -->
    <!-- style="background-color: #F6F6F6;" -->
    <!-- height:92vh;overflow:auto" (scroll)="listenScroll($event)" -->
    <!-- <mat-card style="margin:20px 12px 20px 20px;" class="mat-elevation-z0"> -->
    <!-- <nav>
        <div class="nav nav-tabs" style="margin-top: 20px;">
            <span class="nav-item nav-link" data-toggle="tab" (click)="ECFAPSubModule(sub)" role="tab" #SubMenu
                *ngFor="let sub of AP_Sub_Menu_List">
                {{sub.name}}
            </span>
        </div>
    </nav> -->
    <div class="nav-container mb-2">
        <button class="scroll-button left" (click)="scrollLeft()">
            <mat-icon>arrow_left</mat-icon>
        </button>
        <nav class="nav-tabs" #navTabs>
            <p class="nav-item nav-link" [ngClass]="{ active: sub.active }" (click)="setActiveTab(sub)" role="tab"
                *ngFor="let sub of AP_Sub_Menu_List">
                {{ sub.name }}
            </p>
        </nav>
        <button class="scroll-button right" (click)="scrollRight()">
            <mat-icon>arrow_right</mat-icon>
        </button>
    </div>
    <div *ngIf="isinwardAdd">
        <app-inward-form (onSubmit)="inwardCreateEditSubmit()" (onCancel)="inwardCreateEditCancel()"
            (onSearch)="searchdata()" (onView)="searchpodata()"> </app-inward-form>
    </div>

    <div *ngIf="isecfview">
        <app-ecfview (onCancel)="ecfviewCancel()"></app-ecfview>
    </div>

    <div *ngIf="ispoview">
        <app-poview (onCancel)="poviewCancel()"></app-poview>
    </div>


    <div *ngIf="APInwardSummaryForm">
        <!-- <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;"> -->
        <!-- <form [formGroup]="InwardsummarySearchForm"> -->
            <div class="ap-summary-header">
                <h3 class="summary-title">Inward Summary</h3>
                <button class="circle-icon-btn-md" matTooltip="Reset" (click)="overallinward_reset()">
                    <mat-icon  >
                    refresh</mat-icon>
                </button>
                <button class="circle-icon-btn-md" (click)="inwardRoute()" matTooltip="Add Inward">
                    <mat-icon  aria-hidden="true">
                    add</mat-icon>
                </button>
                <button matTooltip="Report Download" class="circle-icon-btn-md" (click)="downloadFileXLSX()">
                    <mat-icon>
                    download</mat-icon>
                </button>

            </div>
            <!-- <div class="search-auto-fit">
                <lib-vs-search-cmp id="matInput-size" [SearchArr]="inwardsearch" [Outputtype]="searchvar"
                    (dataoutput)="apinward_summary($event)"
                    Tooltip="true" [ButtonArr]="templatebutton" [ResetForm]="restfiled">
                </lib-vs-search-cmp>
            </div>
            <table>
                <div *ngIf="expand_inward" class="cus-filterSearchContainers">

                    <div class="cus-filterSearch">

                        <div class="npm-mat-edit-expand">
                            <lib-vs-sep-dates-cmp id="matInput-size" [DateInput]="inward_frtodate"
                                [formGroup]="InwardsummarySearchForm">
                            </lib-vs-sep-dates-cmp>
                        </div>

                        <div>
                            <lib-vs-dynamicform-cmp id="matInput-size" [formGroup]="InwardsummarySearchForm"
                                [InputFields]="raisers_names"></lib-vs-dynamicform-cmp>
                        </div>

                        <div id="matInput-size">
                            <mat-form-field appearance="outline">
                                <mat-label>AWB No</mat-label>
                                <input class="toolbar-search" type="text" formControlName="awb_no" matInput
                                    autocomplete="off" id="ap-0057">
                                <mat-placeholder>AWB No</mat-placeholder>
                            </mat-form-field>
                        </div>

                        <div class="cus-filterSearch-btnDiv">
                            <button class="btn btn-outline-primary" style="border-radius:40px" color="primary"
                                (click)="inward_reset()">
                                Reset
                            </button>

                            <div class="btn-align">
                                <button class="btn btn-outline-success" style="border-radius:40px" type="submit"
                                    (click)="getInwardsummary($event)" color="primary">
                                    Apply
                                </button>
                                <button class="btn btn-outline-primary" style="border-radius:40px"
                                    (click)="approval_close()">
                                    Cancel
                                </button>
                            </div>
                        </div>
                    </div>
                </div>


            </table> -->
            <!-- <table style="margin-left: 10px;">
                <tr>
                    <td>
                        <mat-form-field  >
                            <input class="toolbar-search" type="text" formControlName="inward_no" matInput
                                autocomplete="off" id="ap-0050">
                            <mat-placeholder>Inward No</mat-placeholder>
                        </mat-form-field>
                    </td>
                    <td>
                        <mat-form-field style="width: 200px; margin-left: 10px;">
                            <mat-label>Courier</mat-label>
                            <input #CourierInput placeholder="Select Courier" type="text" matInput
                                formControlName="courier_id" [matAutocomplete]="Courier" id="ap-0051">
                            <mat-autocomplete #Courier="matAutocomplete" [displayWith]="displayFncourier"
                                (opened)="autocompleteCourierScroll()">
                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                <ng-container *ngIf="!isLoading">
                                    <mat-option *ngFor="let Courier of CourierList" [value]="Courier.id">
                                        {{Courier.name}}
                                    </mat-option>
                                </ng-container>
                            </mat-autocomplete>
                        </mat-form-field>
                    </td> -->
            <!-- <td>
                        <mat-form-field class="spacebtwfield" style="margin-left: 50px;">
                            <input class="toolbar-search" type="text" formControlName="docnumber" matInput
                                autocomplete="off" id="ap-0052">
                            <mat-placeholder>Doc Number</mat-placeholder>
                        </mat-form-field>
                    </td> -->
            <!-- <td>
                        <mat-form-field class="example-full-width" style="margin-left: 10px;">
                            <mat-label>From Date</mat-label>
                            <input matInput readonly [matDatepicker]="picker1" placeholder="From Date"
                                formControlName="fromdate" id="ap-0053">
                            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                            <mat-datepicker #picker1></mat-datepicker>
                        </mat-form-field>
                    </td>
                    <td>
                        <mat-form-field class="example-full-width" style="margin-left: 10px;">
                            <mat-label>To Date</mat-label>
                            <input matInput readonly [matDatepicker]="picker2" placeholder="To Date"
                                formControlName="todate" id="ap-0054">
                            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                            <mat-datepicker #picker2></mat-datepicker>
                        </mat-form-field>
                    </td>
    
    
                </tr>
                <tr>
                    <td>
                        <mat-form-field>
                            <mat-label>Channel</mat-label>
                            <mat-select formControlName="channel_id" placeholder="Channel" id="ap-0055">
                                <mat-option *ngFor="let channel of ChannelList" [value]="channel.id">
                                    {{channel.name}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </td>
                    <td>
                        <mat-form-field  style="width:200px;margin-left: 10px;"  (click)="getraiserdropdowninward()">
                            <mat-label>Raiser Name</mat-label>
                            <input #raiserInput matInput
                                formControlName="created_by" [matAutocomplete]="raisertyperoleInw" 
                                placeholder="Choose Raiser" id="ap-0056">
                            <mat-autocomplete [panelWidth]="250" #raisertyperoleInw="matAutocomplete"
                                [displayWith]="displayFnraiserrole" (opened)="raiserScroll()">
                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                <ng-container *ngIf="!isLoading">
                                    <mat-option *ngFor="let data of Raiserlist" [value]="data" matTooltip = "{{data.full_name}}">
                                        {{data.full_name}}
                                    </mat-option>
                                </ng-container>
                            </mat-autocomplete>
                        </mat-form-field>
                    </td>
                    <td>
                        <mat-form-field class="spacebtwfield" style="margin-left: 10px;">
                            <input class="toolbar-search" type="text" formControlName="awb_no" matInput autocomplete="off" id="ap-0057">
                            <mat-placeholder>AWB NO</mat-placeholder>
                        </mat-form-field>
                    </td>
                   <td>
                        <button class="buttonsize btn btn-outline-primary" (click)="getInwardsummary('')" style="margin-left: 10px;" id="ap-0058"><i
                                class="fa fa-search" aria-hidden="true"></i></button>
                        <button class="buttonsize btn btn-outline-primary" (click)="resetInward()"
                             style="margin-left: 5px;" id="ap-0059">Reset</button>
                        <button type="button" class="buttonsize btn btn-outline-success" (click)="inwardRoute()" style="margin-left: 5px;" id="ap-0060">
                            <span class="fa fa-plus"></span></button>
                        <button type="button" class="buttonsize btn btn-outline-success"
                            (click)="downloadFileXLSX('inwardsummary')" style="border-radius:40px;margin-left: 5px;" id="ap-0061">
                            <span class="fa fa-download"></span> Report</button>
                    </td>
                </tr>
            </table> -->
        

        <lib-vs-cbox-summary [SummaryDetails]="Summaryinwarddata"
            [SummaryApiObj]="SummaryApiinwardObjNew" [FirstLastbtn]="true" #inwardSummary (dataEvent)="apinwardsummarydata($event)"></lib-vs-cbox-summary>


            <!-- <div class="table-responsive" style="margin-top: 1%;width: 94%;margin-left: 10px;">
                <table class="table scrolltable table-bordered" fixed-header>
                    <thead>
                        <tr class="table_header"  fixed-header style="text-align:center;"> -->
                            <!-- [formGroup]="InwardsummarySearchForm" -->
                            <!-- <th>S.No</th> -->
                            <!-- <th>Inward No</th> -->
                            <!-- <th class="minwidth" style="text-align: center; position: relative; cursor: pointer;" (click)="toggleSearch()">
                                <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                                    <span style="width: 80%; text-align: center;">Inward No</span>
                                    <span style="width: 20%; text-align: right;">
                                        <i matTooltip="Search" style="font-size: 20px; cursor: pointer;" class="fa fa-filter"></i>
                                    </span>
                                </div>
                            
                                <div *ngIf="isInwno" class="search-container"  (click)="$event.stopPropagation()">
                                    <mat-form-field appearance="outline" style="width: 150px; margin-top: 5px;">
                                        <mat-label>Inward No</mat-label>
                                        <input matInput formControlName="inward_no" placeholder="Enter Inward No" />
                                        <button mat-icon-button matSuffix (click)="getInwardsummary('')">
                                            <i matTooltip="Search" class="fa fa-search" style="margin-bottom: 8px;"></i>
                                        </button> -->
                                        <!-- [(ngModel)]="searchValues['crno']"  -->
                                    <!-- </mat-form-field>
                                </div>
                            </th>
                            <th>Date</th>
                            <th>Channel</th>
                            <th>Courier</th>
                            <th>No of Packets</th>
                            <th>AWB No</th>
                            <th>Raiser</th>
                            <th>Status</th>
                            <th>Action</th>
        
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let inward of inwardSummaryList; index as i">
                            <td style=" text-align: center;">{{(currentpageinw - 1)*pageSize +i+1 }}</td>
                            <td>{{ inward?.no }}</td>
                            <td>{{ inward?.date | date:'dd-MMM-yyyy '}}</td>
                            <td>{{ inward?.channel_id?.name}}</td>
                            <td>
                                <span *ngIf=" inward?.courier_id?.name;else nullCouier">
                                    {{ inward?.courier_id?.name}}
                                </span>
                                <ng-template #nullCouier>
                                    <label>--</label>
                                </ng-template>
                            </td>
        
        
                            <td>{{ inward?.noofpockets}}</td>
                            <td>
                                <span *ngIf=" inward?.awbno;else nullAwbno">
                                    {{ inward?.awbno}}
                                </span>
                                <ng-template #nullAwbno>
                                    <label>--</label>
                                </ng-template>
                            </td> -->
                            <!-- <td><button mat-icon-button matTooltip="View" class="iconbutton" 
                                (click)="detailView(inward)"  id="ap-0062">
                                <mat-icon style="color: gray;">edit</mat-icon>
                            </button></td> -->

                            <!-- <td>
                                {{ inward?.raised_by?.full_name}}
                            </td>

                            <td> -->
                                <!-- {{inward?.status}} -->
                                <!-- <span> -->
                                    <!-- {{ inward?.awbno}} -->
                                    <!-- {{inward?.inwardstatus}}
                                </span>
        
                            </td>

                            <td> -->
                                <!-- inward?.detail_complete == true -->
                                <!-- <div *ngIf="inward?.inwardstatus != 'Completed'; else greyEditView">
                                    <button mat-icon-button matTooltip="Edit" class="iconbutton"
                                        (click)="editInwardMaker(inward)" id="ap-0063">
                                        <mat-icon style="color: green;">edit</mat-icon>
                                    </button>
                                </div>
                                <ng-template #greyEditView>
                                    <i matTooltip="View" class=" fa fa-eye create "
                                    style="color: green;cursor: pointer;padding:10px;margin-top: 10px;" (click)="editInwardMaker(inward)"></i> -->
                                    <!-- <button mat-icon-button matTooltip="View" class="iconbutton"
                                        (click)="editInwardMaker(inward)" id="ap-0064">
                                        <mat-icon style="color: grey;">view</mat-icon>
                                    </button> -->
        
                                <!-- </ng-template> -->
                                <!-- <button mat-icon-button matTooltip="View" class="iconbutton" (click)="editInwardMaker(inward)" id="ap-0065">
                                    <mat-icon style="color: gray;">edit</mat-icon>
                                </button> -->
                            <!-- </td>
        
                        </tr>
                    </tbody>
                </table>
                <div *ngIf="inwardSummaryList?.length==0; " class="NodataAlign">No Records Found...</div>
                
                    <div class="row" *ngIf="inwardSummaryList?.length > 0">
                    <div class="col-sm-7" style="margin-bottom: 0%;font-size: small;text-align: right;margin-top: 18px;font-weight:bold">
                        Page: {{currentpageinw}}
                    </div>
                    <div  class="col-sm-5" style="margin-bottom: 5%;font-size: small;text-align:right;">
                        <mat-paginator  style="margin-top: 0%;margin-left: 25px; width: 350px;"
                                    (page)="handleInwardPageEvent($event)"
                                    [length]="length_inward"
                                    [pageSize]="pageSize_inward"
                                    [showFirstLastButtons]="showFirstLastButtons"
                                    [pageSizeOptions]="pageSizeOptions"
                                    [pageIndex]="pageIndexInward"
                                    [hidePageSize]="true"
                                    aria-label="Select page"> 
                                
                        </mat-paginator>
                    </div>
                    </div> -->
                
                <!-- <ng-template #pagination>
                    <div style="font-size: small;text-align: right;margin-bottom: 100px;cursor: pointer;">
                        <button mat-icon-button [disabled]="has_previousinw === false" color="primary"
                            (click)="getInwardsummary('previous')" id="ap-0066">
                            <mat-icon style="cursor: pointer;">arrow_back</mat-icon>
                        </button>
                        {{currentpageinw}}
                        <button mat-icon-button [disabled]="has_nextinw === false" color="primary"
                            (click)="getInwardsummary('next')" id="ap-0067">
                            <mat-icon style="cursor: pointer;">arrow_forward</mat-icon>
                        </button>
                    </div>
                </ng-template> -->
            <!-- </div> -->
        <!-- </form> -->
    </div>




    <div *ngIf="ecfsummaryForm">
        <form [formGroup]="ecfradioForm">
            <mat-radio-group formControlName="type" class="ecfap">
                <mat-radio-button *ngFor="let n of typelist" [value]="n.id" style="margin-left: 3%;margin-top: 10px"
                    (click)="getradio(n)"> {{n.name}} </mat-radio-button>
            </mat-radio-group>
        </form>

        <div *ngIf="ecfradioForm?.value?.type == 2">
            <form [formGroup]="ecfSearchForm">
                <p style="color:black;font-size:18px;font-family:'Times New Roman';font-weight:bold;margin-left: 3%;">
                    ECF Search
                </p>

                <table>
                    <tr>
                        <td>
                            <mat-form-field class="example-full-width" style="margin-left: 33px;">
                                <input class="toolbar-search" type="text" matInput autocomplete="off"
                                    formControlName="crno" id="ap-0068">
                                <mat-placeholder>CR No</mat-placeholder>
                            </mat-form-field>

                        </td>

                        <td>

                            <mat-form-field class="example-full-width" style="margin-left: 50px;">
                                <mat-label>ECF Type</mat-label>
                                <mat-select formControlName="aptype" id="ap-0069">
                                    <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                        {{type.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>

                        <td>

                            <mat-form-field class="example-full-width" style="margin-left: 50px;">
                                <mat-label>ECF Status</mat-label>
                                <mat-select formControlName="apstatus" id="ap-0070">
                                    <mat-option *ngFor="let status of StatusList" [value]="status.id">
                                        {{status.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>

                        <td>
                            <!-- <mat-label>Min Amount</mat-label><br> -->
                            <mat-form-field class="example-full-width" style="margin-left: 50px;">
                                <input class="toolbar-search" type="text" matInput autocomplete="off"
                                    formControlName="minamt" (keypress)="numberOnlyandDot($event)"
                                    style="text-align: right;" id="ap-0071">
                                <mat-placeholder>Min Amount</mat-placeholder>
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>

                            <mat-form-field class="example-full-width" style="margin-left: 33px;">
                                <input class="toolbar-search" type="text" matInput autocomplete="off"
                                    formControlName="maxamt" (keypress)="numberOnlyandDot($event)"
                                    style="text-align:right" id="ap-0072">
                                <mat-placeholder>Max Amount</mat-placeholder>
                            </mat-form-field>
                        </td>

                        <td>


                            <button class="btn btn-outline-primary" type="submit"
                                style="border-radius:40px;margin-left: 50px;" color="primary" (click)="summarysearch()"
                                id="ap-0073"><i matTooltip="Search" class="fa fa-search"
                                    aria-hidden="true"></i></button>
                        </td>
                        <td>

                            <button class="btn btn-outline-primary" type="button"
                                style="border-radius:40px;margin-left: -115px;" color="primary"
                                (click)="Resetecfinventory()" id="ap-0074">Reset</button>
                        </td>
                        <td>


                            <button type="button" class="btn btn-outline-success" matTooltip="Raise ECF"
                                style="border-radius:40px;margin-left:-255px;" (click)="showadd()" id="ap-0075"><span
                                    class="fa fa-plus"></span></button>
                        </td>
                        <td>

                            <button class="btn btn-outline-success" type="button"
                                style="border-radius:40px;margin-left: -418px;" color="primary" data-toggle="modal"
                                data-target="#ap-0012" (click)="checkbatch()" id="ap-0076">Create Batch
                                <!-- <i class="fas fa-chevron-circle-right"></i> -->
                            </button>
                        </td>
                        <!-- (click)="batchsubmit()" -->

                    </tr>

                </table>
            </form>


            <!-- </div> -->

            <p style="color:black;font-size: 18px;font-family:'Times New Roman';font-weight:bold;margin-left: 3%;">
                ECF Summary
            </p>
            <div class="table-responsive ccbstable"
                style="margin-top: 2%;margin-left: 35px;overflow: auto;height:300px;margin-bottom: 1%;width:1200px">
                <table class="table table-bordered scrolltable" fixed-header>
                    <!-- [style.height]="defaultHeight+'vh'"  -->
                    <!-- table-responsive padsize -->

                    <thead style="text-align: center;margin-left: 3%;">

                        <!-- <div class="table-responsive" style="height:400px;
        width:100%;
        overflow:auto;">
            <table class="table table-bordered scrolltable" fixed-header>
              <thead class="table_header" style="text-align: left;"> -->

                        <tr class="table_header " fixed-header>


                            <th>S.No</th>
                            <th>ECF Type</th>
                            <th>CR No</th>
                            <th>Commodity Name</th>
                            <th>Batch No</th>
                            <th>ECF Date</th>
                            <!-- <th>Invoice No</th> -->
                            <th>ECF Amount</th>
                            <!-- <th>ECF Raiser</th>
            <th>Supplier Name</th>
            <th>Approver Name</th> -->
                            <th>ECF Status</th>
                            <!-- <th>AP Status</th> -->
                            <!-- <th>Payment Status</th> -->
                            <th>Payment For</th>
                            <!-- <th>UTR Number</th>
            <th>Payment Date</th> -->
                            <th>View</th>
                            <th>Edit</th>
                            <th>Delete</th>
                            <th>Download</th>
                            <th>Select</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr *ngFor="let list of ecf_summary_data; index as i" style="text-align: center;">
                            <td  style=" text-align: center;"> {{(ecfpresentpage - 1)*pagesizeecf +i+1 }} </td>
                            <td *ngIf="list?.aptype_id != 8" style="white-space: nowrap;">{{list?.aptype}}</td>
                            <td *ngIf="list?.aptype_id == 8" style="white-space: nowrap;">TCF</td>
                            <td *ngIf="list?.crno!=null">{{list?.crno}}</td>
                            <td *ngIf="list?.crno === null">-</td>
                            <td>{{list?.commodity_id?.name}}</td>
                            <td>{{ (list?.batch_no !== null) ? list?.batch_no : "-" }}</td>
                            <td style="white-space: nowrap;"> {{ (list?.apdate !== "None") ? (list?.apdate |
                                date:'dd-MMM-yyyy') : "-" }}</td>

                            <!-- <td *ngIf="list?.invoiceheader != undefined && list?.invoiceheader != null ">{{list.invoiceheader.invoiceno}}</td>
            <td *ngIf="list?.invoiceheader == undefined && list?.invoiceheader == null">-</td> -->


                            <td style="text-align: right;">{{list?.apamount|currency:'INR'}}</td>
                            <!-- <td *ngIf="list?.raisername != null">{{list?.raisername}}</td>
            <td *ngIf="list?.raisername == null">-</td>
            <td *ngIf="list?.invoiceheader?.supplier_id != null">{{list?.invoiceheader?.supplier_id?.name}}</td>
            <td *ngIf="list?.invoiceheader?.supplier_id == null">-</td>
            <td *ngIf="list?.approvername != null">{{list?.approvername}}</td>
            <td *ngIf="list?.approvername == null">-</td> -->
                            <td *ngIf="list?.apstatus != 'PENDING_FOR_APPROVAL' && list.apstatus_id != 5">{{
                                list?.apstatus }}</td>
                            <td *ngIf="list?.apstatus == 'PENDING_FOR_APPROVAL'">PENDING FOR APPROVAL</td>
                            <td *ngIf="list?.apstatus_id == 5">PENDING FOR APPROVAL MODIFICATION</td>
                            <!-- <td *ngIf="list?.ap_status != null">{{list?.ap_status}}</td>
            <td *ngIf="list?.ap_status == null">-</td>
            <td *ngIf="list?.ap_status == 'PAID'">
                <span matTooltip="view Payment Details" class=" fa fa-eye create " style="color: green;cursor: pointer;"
               (click)="getpaystatus(list?.crno)" data-toggle="modal"  data-target="#showpaymentdetails"></span>
            </td>
            <td *ngIf="list?.ap_status != 'PAID'">-</td> -->
                            <td *ngIf="list?.aptype_id != 3 && list?.aptype_id != 4 && list?.aptype_id != 13">SUPPLIER
                            </td>
                            <td *ngIf="list?.aptype_id == 3 || list?.aptype_id == 13">{{list?.payto}}</td>
                            <td *ngIf="list?.aptype_id== 4">{{list?.ppx}}</td>

                            <!-- <td> {{ (list?.invoiceheader?.utrno != null) ? list?.invoiceheader?.utrno : "-" }}</td>
            <td> {{ (list?.invoiceheader?.paymentdate !== "None") ? (list?.invoiceheader?.paymentdate | date: 'dd/MM/yyyy') : "-" }}</td> -->
                            <td>
                                <span matTooltip="view" class=" fa fa-eye create "
                                    style="color: green;cursor: pointer;padding:10px" (click)="showview(list)"></span>
                            </td>
                            <!-- <td *ngIf="list.apstatus === 'APPROVED' || list.apstatus === 'REJECT' || list.apstatus === 'AP_APPROVED'||list?.apstatus == 'PENDING_FOR_APPROVAL'||list.can_edit != true"> -->
                            <td *ngIf="list?.apstatus != 'DRAFT' && list?.apstatus != 'READY FOR BATCH'">
                                <button mat-icon-button matTooltip=" Edit" class="iconbutton" color="primary"
                                    [disabled]="true" id="ap-0077">
                                    <mat-icon style="color: grey;" aria-label="Edit">edit</mat-icon>
                                </button>
                            </td>
                            <!-- <td *ngIf="list.apstatus != 'APPROVED' && list.apstatus != 'REJECT' &&  list.apstatus != 'AP_APPROVED' && list?.apstatus != 'PENDING_FOR_APPROVAL' && list.can_edit == true"> -->
                            <td *ngIf="list?.apstatus == 'DRAFT' || list?.apstatus == 'READY FOR BATCH'">
                                <button mat-icon-button matTooltip=" Edit" class="iconbutton" color="primary"
                                    (click)="showedit(list)" id="ap-0078">
                                    <mat-icon style="color: green;" aria-label="Edit">edit</mat-icon>
                                </button>
                            </td>

                            <!-- <td  *ngIf="list.apstatus != 'APPROVED' && list.apstatus != 'REJECT'&& list.apstatus != 'PENDING_FOR_APPROVAL' &&  list.apstatus != 'AP_APPROVED' && list.apstatus_id != 5 && list.can_edit == true"> -->
                            <td *ngIf="list?.apstatus == 'DRAFT' || list?.apstatus == 'READY FOR BATCH'">
                                <button mat-icon-button type="button" matTooltip="Delete" id="ap-0079">
                                    <mat-icon style="color: green;" -arialabel="Edit" (click)="delete(list.id)">
                                        delete</mat-icon>
                                </button>
                            </td>
                            <!-- <td  *ngIf="list.apstatus == 'APPROVED' || list.apstatus == 'REJECT' || list.apstatus == 'PENDING_FOR_APPROVAL'||  list.apstatus == 'AP_APPROVED' || list.apstatus_id == 5 || list.can_edit != true"> -->
                            <td *ngIf="list?.apstatus != 'DRAFT' && list?.apstatus != 'READY FOR BATCH'">
                                <button mat-icon-button type="button" matTooltip="Delete" [disabled]="true"
                                    id="ap-0080">
                                    <mat-icon style="color: grey;" aria-label="Edit">
                                        delete</mat-icon>
                                </button>
                            </td>

                            <td
                                *ngIf="list?.apstatus != 'DRAFT' &&  list?.apstatus != 'PENDING IN ECF APPROVAL'&&  list?.apstatus !='READY FOR BATCH' &&  list?.apstatus !='DELETE' && list?.apstatus =='ECF REJECTED';else tpl">
                                <button type="button" class="btn btn-outline-success" (click)="coverNotedownload(list)"
                                    style="border-radius: 40px;margin-left: 3%;">
                                    <!-- (click)="coverNotedownload(list.id,list.ecftype_id)" -->
                                    <span class="fa fa-download" matTooltip="Download CoverNote">
                                    </span>
                                </button>
                            </td>
                            <ng-template #tpl>
                                <td>-</td>
                            </ng-template>
                            <!-- <td *ngIf="list.apstatus != 'APPROVED'">-</td> -->
                            <td *ngIf="list?.apstatus =='READY FOR BATCH'">
                                <section class="example-section ecfapcheck">
                                    <mat-checkbox class="example-margin" (change)="onselectionchange($event,list)"
                                        [checked]="list?.select"
                                        [disabled]="((commcheck=='' || commcheck==null || ecftypecheck == ''||ecftypecheck == null )&& list.batch_no == null)  ? false:(list.commodity_id.id == commcheck && list.aptype_id == ecftypecheck && list.batch_no == null?false:true)">
                                    </mat-checkbox>
                                </section>
                            </td>
                            <td *ngIf="list?.apstatus !='READY FOR BATCH'">-</td>


                        </tr>
                    </tbody>
                </table>

                <div *ngIf="ecf_summary_data ?.length == 0" style="margin-left: 42%;">
                    <h3>Sorry data not found!.. </h3>
                </div>
            </div>

            <div class="row" *ngIf="issummarypage" style="width: 85%;">
                <div class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
                    <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -190px;">
                        Total Count:{{gettotalcount}}
                    </p>
                </div>
                <div class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left:15%">
                    <button mat-icon-button [disabled]="has_pageprevious === false" color="primary"
                        (click)="previousClickPayment()" id="ap-0081">
                        <mat-icon>arrow_back</mat-icon>
                    </button> {{ecfpresentpage}}
                    <button mat-icon-button [disabled]="has_pagenext === false" color="primary"
                        (click)="nextClickPayment()" id="ap-0082">
                        <mat-icon>arrow_forward</mat-icon>
                    </button>
                </div>
            </div>



        </div>

        <div *ngIf="ecfradioForm?.value?.type == 1">
            <form [formGroup]="batchSearchForm">
                <p
                    style="color:black;font-size: 22px;font-family:'Times New Roman';font-weight:bold;margin-top: 20px;margin-left: 3%;">
                    Batch Search
                </p>

                <table>
                    <tr>
                        <td>
                            <mat-form-field class="example-full-width" style="margin-left: 35px;">
                                <input class="toolbar-search" type="text" matInput autocomplete="off"
                                    formControlName="batchno" id="ap-0083">
                                <mat-placeholder>Batch NO</mat-placeholder>
                            </mat-form-field>

                        </td>
                        <td>

                            <mat-form-field class="example-full-width" style="margin-left: 50px;">
                                <mat-label>Batch Status</mat-label>
                                <mat-select formControlName="batchstatus" id="ap-0084">
                                    <mat-option *ngFor="let status of batchStatusList" [value]="status.id">
                                        {{status.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>

                        <td>
                            <mat-form-field class="example-full-width" style="margin-left: 50px;">
                                <input class="toolbar-search" type="text" matInput autocomplete="off"
                                    formControlName="batchcount" id="ap-0085">
                                <mat-placeholder>Batch Count</mat-placeholder>
                            </mat-form-field>

                        </td>

                        <td>


                            <button class="btn btn-outline-primary" type="submit"
                                style="border-radius:40px;margin-left: 50px;" color="primary"
                                (click)="batchsummarysearch()" id="ap-0086"><i matTooltip="Search" class="fa fa-search"
                                    aria-hidden="true"></i></button>
                        </td>
                        <td>

                            <button class="btn btn-outline-primary" type="button"
                                style="border-radius:40px;margin-left: 15px;" color="primary" (click)="resetbatch()"
                                id="ap-0087">Reset</button>
                        </td>


                    </tr>

                </table>
            </form>


            <!-- </div> -->

            <p
                style="color:black;font-size: 22px;font-family:'Times New Roman';font-weight:bold;margin-left: 3%;margin-top: 20px;">
                Batch Summary
            </p>

            <div style="margin-top: 2%;margin-left: 35px; width: 95%;">
                <table class="table table-bordered scrolltable" fixed-header style="text-align:center;">

                    <thead>
                        <tr class="table_header " fixed-header style="text-align: center;margin-left: 3%;">


                            <th>S.No</th>
                            <th>Batch No</th>
                            <th>Batch Date</th>
                            <th>Batch Amount</th>
                            <th>ECF Count</th>
                            <th>ECF Processed Count</th>
                            <th>ECF Pending Count</th>
                            <th>Raiser Name</th>
                            <th>Raiser Branch</th>
                            <th>Approver Name</th>
                            <th>Batch Status</th>
                            <th>View</th>
                            <th>Download</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let lists of batch_summary_data; index as i" style="text-align: center;">
                            <td  style=" text-align: center;"> {{(batchpresentpage - 1)*pagesizebatch +i+1 }} </td>
                            <td>{{lists?.batchno}}</td>
                            <td style="white-space:nowrap;">{{lists?.batch_date | date:'dd-MMM-yyyy'}}</td>
                            <td style="text-align: right;">{{lists?.batchamount|currency:'INR'}}</td>
                            <td>{{lists?.batchcount}}</td>
                            <td>-</td>
                            <td>-</td>
                            <td>{{lists?.raisername}}</td>
                            <td>{{lists?.branchname}}</td>
                            <td>{{lists?.approvername}}</td>
                            <td>{{lists?.batchstatus}}</td>
                            <td>

                                <span matTooltip="view" class=" fa fa-eye create "
                                    style="color: green;cursor: pointer;padding:10px"
                                    (click)="showecfview(lists,'Makerview')"></span>
                                <!-- (click)="showbatchviewview(lists?.id)" data-toggle="modal" data-target="#batchdetails" -->

                            </td>
                            <td *ngIf="lists?.batchstatus == 'APPROVED';else showdown">

                                <button type="button" class="btn btn-outline-success"
                                    (click)="batchcovernotedownload(lists.id)"
                                    style="border-radius: 40px;margin-left: 3%;">
                                    <span class="fa fa-download" matTooltip="Download CoverNote">
                                    </span>
                                </button>
                            </td>
                            <ng-template #showdown>
                                <td>-</td>
                            </ng-template>
                            <!-- <td *ngIf="list.ecfstatus != 'APPROVED'">-</td>
                </td> -->
                        </tr>
                    </tbody>
                </table>

                <div *ngIf="batch_summary_data ?.length == 0" style="margin-left: 42%;">
                    <h3>Sorry data not found!.. </h3>
                </div>
                <div class="row" *ngIf="isbatchsummarypage">
                    <div class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
                        <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -223px;">
                            Total Count:{{getbatchtotalcount}}
                        </p>
                    </div>
                    <div class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left:5px">
                        <button mat-icon-button [disabled]="has_batchpageprevious === false" color="primary"
                            (click)="previousClickbatch()" id="ap-0088">
                            <mat-icon>arrow_back</mat-icon>
                        </button> {{batchpresentpage}}
                        <button mat-icon-button [disabled]="has_batchpagenext === false" color="primary"
                            (click)="nextClickbatch()" id="ap-0089">
                            <mat-icon>arrow_forward</mat-icon>
                        </button>
                    </div>
                </div>
            </div>


            <!-- Batch View -->
            <!-- <div *ngIf="showbatchview" >
<p style="color:black;font-size: 22px;font-weight: 500;margin-left: 3%;margin-top: 20px;">
    Batch View
    </p>
<div  style="margin-top: 2%;margin-left: 50px; width: 85%;">
    <table class="table table-bordered table-responsive padsize" style="text-align:center;" >	
        
        <thead>
            <tr class="table_header tableset " style="white-space: nowrap;text-align: center;margin-left: 3%;">

                <th>S.No</th>
                <th>CR NO</th>
                <th>ECF Type</th>
                <th>Commodity Name</th>
                <th>ECF Date</th>
                <th>ECF Amount</th>
                <th>ECF Status</th>
                <th>Payment For</th>
                <th>View</th>
                <th>Download</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor ="let ab of batchviewlist;index as i">
                <td>{{(bvpresentpage - 1)*pagesizebview +i+1 }}</td>
                <td>{{(ab?.crno !== null)?(ab?.crno):"-"}}</td>
                <td>{{ab?.aptype}}</td>
                <td>{{ab?.commodity_id?.name}}</td>
                <td>{{ (ab?.apdate !== "None") ? (ab?.apdate | date: 'dd/MM/yyyy') : "-" }}</td>
                <td>{{ab?.apamount|currency:'INR'}}</td>
                <td>{{ab?.apstatus}}</td>
                <td>{{ab?.payto}}</td>
                <td>
                    
                    <span matTooltip="view" class=" fa fa-eye create "
                        style="color: green;cursor: pointer;padding:10px" ></span>
               
            </td>
            <td>
               
                    <button type="button" class="btn btn-outline-success"
                        (click)="coverNotedownload(ab?.id,ab?.aptype_id)"
                        style="border-radius: 40px;margin-left: 3%;" >
                        <span class="fa fa-download" matTooltip="Download CoverNote">
                        </span>
                    </button>
                </td>

            </tr>
        </tbody>
    </table>
    <div *ngIf="batchviewlist ?.length == 0" style="margin-left: 42%;">
        <h3 >Sorry data not found!.. </h3>
    </div>
    <div class="row" *ngIf="isbatchviewpage">
      <div  class="col-sm-12" style="margin-bottom: 5%;font-size: small;text-align:right;">
            <button mat-icon-button [disabled]="has_bviewpageprevious === false" color="primary" (click)="previousClickbview()" id="ap-0090">
                <mat-icon>arrow_back</mat-icon>
            </button> {{bvpresentpage}}
            <button mat-icon-button [disabled]="has_bviewpagenext === false" color="primary" (click)="nextClickbview()" id="ap-0091">
                <mat-icon>arrow_forward</mat-icon>
            </button>
        </div>
    </div>
   </div>
</div> -->



            <!-- <div  style="margin-top: 2%;margin-left: 50px; width: 95%;">
<table class="table table-bordered table-responsive padsize" style="text-align:center;" >	
    
    <thead>
        <tr class="table_header tableset " style="white-space: nowrap;text-align: center;margin-left: 3%;">


            <th>S.No</th>
            <th>ECF Type</th>
            <th>CR NO</th>
            <th>ECF Date</th>
            <th>Invoice No</th>
            <th>ECF Amount</th>
            <th>ECF Raiser</th>
            <th>Supplier Name</th>
            <th>Approver Name</th>
            <th>ECF Status</th>
            <th>AP Status</th>
            <th>Payment Status</th>
            <th>Payment For</th>
            <th>UTR Number</th>
            <th>Payment Date</th>
            <th>View</th>
            <th>Edit</th>
            <th>Delete</th>
            <th>Download</th>
        </tr>
    </thead>

    <tbody>
        <tr *ngFor="let list of ecf_summary_data; index as i" style="white-space: nowrap;text-align: center;">
            <td> {{(ecfpresentpage - 1)*pagesizeecf +i+1 }} </td>
            <td *ngIf="list?.ecftype_id != 8">{{list?.ecftype}}</td>
            <td *ngIf="list?.ecftype_id == 8">TCF</td>
            <td *ngIf="list?.crno!=null">{{list?.crno}}</td>
            <td *ngIf="list?.crno === null">-</td>
           
           <td> {{ (list?.ecfdate !== "None") ? (list?.ecfdate | date: 'dd/MM/yyyy') : "-" }}</td>
            
            <td *ngIf="list?.invoiceheader != undefined && list?.invoiceheader != null ">{{list.invoiceheader.invoiceno}}</td>
            <td *ngIf="list?.invoiceheader == undefined && list?.invoiceheader == null">-</td>
          
           
            <td>{{list?.ecfamount|currency:'INR'}}</td>
            <td *ngIf="list?.raisername != null">{{list?.raisername}}</td>
            <td *ngIf="list?.raisername == null">-</td>
            <td *ngIf="list?.invoiceheader?.supplier_id != null">{{list?.invoiceheader?.supplier_id?.name}}</td>
            <td *ngIf="list?.invoiceheader?.supplier_id == null">-</td>
            <td *ngIf="list?.approvername != null">{{list?.approvername}}</td>
            <td *ngIf="list?.approvername == null">-</td>
            <td *ngIf ="list?.ecfstatus != 'PENDING_FOR_APPROVAL' && list.ecfstatus_id != 5" >{{ list?.ecfstatus }}</td>
            <td *ngIf ="list?.ecfstatus == 'PENDING_FOR_APPROVAL'">PENDING FOR APPROVAL</td>
            <td *ngIf="list?.ecfstatus_id == 5">PENDING FOR APPROVAL MODIFICATION</td>
            <td *ngIf="list?.ap_status != null">{{list?.ap_status}}</td>
            <td *ngIf="list?.ap_status == null">-</td>
            <td *ngIf="list?.ap_status == 'PAID'">
                <span matTooltip="view Payment Details" class=" fa fa-eye create " style="color: green;cursor: pointer;"
               (click)="getpaystatus(list?.crno)" data-toggle="modal"  data-target="#showpaymentdetails"></span>
            </td>
            <td *ngIf="list?.ap_status != 'PAID'">-</td>
            <td *ngIf="list?.ecftype_id != 3 && list?.ecftype_id != 4 && list?.ecftype_id != 13">SUPPLIER</td>
            <td *ngIf="list?.ecftype_id == 3 || list?.ecftype_id == 13">{{list?.payto}}</td>
            <td *ngIf="list?.ecftype_id== 4">{{list?.ppx}}</td>
           
            <td> {{ (list?.invoiceheader?.utrno != null) ? list?.invoiceheader?.utrno : "-" }}</td>
            <td> {{ (list?.invoiceheader?.paymentdate !== "None") ? (list?.invoiceheader?.paymentdate | date: 'dd/MM/yyyy') : "-" }}</td>
            <td>
                <span matTooltip="view" class=" fa fa-eye create "
                    style="color: green;cursor: pointer;padding:10px" (click)="showview(list)"></span>
            </td>
            <td *ngIf="list.ecfstatus === 'APPROVED' || list.ecfstatus === 'REJECT' || list.can_edit != true">
                <button mat-icon-button matTooltip=" Edit" class="iconbutton" color="primary"
                    [disabled]="true" id="ap-0092">
                    <mat-icon style="color: grey;" aria-label="Edit">edit</mat-icon>
                </button>
            </td>
            <td *ngIf="list.ecfstatus != 'APPROVED' && list.ecfstatus != 'REJECT' && list.can_edit == true">
                <button mat-icon-button matTooltip=" Edit" class="iconbutton" color="primary"
                    (click)="showedit(list)" id="ap-0093">
                    <mat-icon style="color: green;" aria-label="Edit">edit</mat-icon>
                </button>
            </td>
            
            <td  *ngIf="list.ecfstatus != 'APPROVED' && list.ecfstatus != 'REJECT'&& list.ecfstatus != 'PENDING_FOR_APPROVAL' && list.ecfstatus_id != 5 && list.can_edit == true">
                <button mat-icon-button type="button" matTooltip="Delete" id="ap-0094">
                    <mat-icon style="color: green;" aria-label="Edit" (click)="delete(list.id)">
                        delete</mat-icon>
                </button>
            </td>
            <td  *ngIf="list.ecfstatus == 'APPROVED' || list.ecfstatus == 'REJECT' || list.ecfstatus == 'PENDING_FOR_APPROVAL'|| list.ecfstatus_id == 5 || list.can_edit != true">
                <button mat-icon-button type="button" matTooltip="Delete" [disabled]="true" id="ap-0095">
                    <mat-icon style="color: grey;" aria-label="Edit" >
                        delete</mat-icon>
                </button>
            </td>

            <td *ngIf="list.ecfstatus == 'APPROVED'">
                <button type="button" class="btn btn-outline-success"
                    (click)="coverNotedownload(list.id,list.ecftype_id)"
                    style="border-radius: 40px;margin-left: 3%;" >
                    <span class="fa fa-download" matTooltip="Download CoverNote">
                    </span>
                </button>
            </td>
            <td *ngIf="list.ecfstatus != 'APPROVED'">-</td>
           
          

        </tr>
    </tbody>
</table>

<div *ngIf="ecf_summary_data ?.length == 0" style="margin-left: 42%;">
    <h3 >Sorry data not found!.. </h3>
</div>


<div class="row" *ngIf="issummarypage">
<div  class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
    <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -220px;">
        Total Count:{{gettotalcount}}
    </p> 
</div>
<div  class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;">
    <button mat-icon-button [disabled]="has_pageprevious === false" color="primary" (click)="previousClickPayment()" id="ap-0096">
        <mat-icon>arrow_back</mat-icon>
    </button> {{ecfpresentpage}}
    <button mat-icon-button [disabled]="has_pagenext === false" color="primary" (click)="nextClickPayment()" id="ap-0097">
        <mat-icon>arrow_forward</mat-icon>
    </button>
</div>
</div>

</div> -->
        </div>




    </div>

    <div *ngIf="ecfapprovalsummaryForm">
        <form [formGroup]="ecfradioForm">
            <mat-radio-group formControlName="type" class="ecfap">
                <mat-radio-button *ngFor="let n of apptypelist" [value]="n.id" style="margin-left: 3%;margin-top: 10px"
                    (click)="getradio(n)"> {{n.name}} </mat-radio-button>
            </mat-radio-group>
        </form>

        <div *ngIf="ecfradioForm?.value?.type == 2">
            <form [formGroup]="ecfapprovalform">
                <p style="color:black;font-size:18px;font-family:'Times New Roman';font-weight:bold;margin-left: 3%;">
                    ECF Approval Search
                </p>

                <table>
                    <tr>
                        <td>
                            <mat-form-field class="example-full-width" style="margin-left: 33px;">
                                <input class="toolbar-search" type="text" matInput autocomplete="off"
                                    formControlName="crno" id="ap-0098">
                                <mat-placeholder>CR No</mat-placeholder>
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field class="example-full-width" style="margin-left: 50px;">
                                <mat-label>ECF Type</mat-label>
                                <mat-select formControlName="aptype" id="ap-0099">
                                    <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                        {{type.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field class="example-full-width" style="margin-left: 50px;">
                                <mat-label>ECF Status</mat-label>
                                <mat-select formControlName="apstatus" id="ap-0100">
                                    <mat-option *ngFor="let status of StatusList" [value]="status.id">
                                        {{status.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                        <td>
                            <!-- <mat-label>Min Amount</mat-label><br> -->
                            <mat-form-field class="example-full-width" style="margin-left: 50px;">
                                <input class="toolbar-search" type="text" matInput autocomplete="off"
                                    formControlName="minamt" (keypress)="numberOnlyandDot($event)"
                                    style="text-align: right;" id="ap-0101">
                                <mat-placeholder>Min Amount</mat-placeholder>
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mat-form-field class="example-full-width" style="margin-left: 33px;">
                                <input class="toolbar-search" type="text" matInput autocomplete="off"
                                    formControlName="maxamt" (keypress)="numberOnlyandDot($event)"
                                    style="text-align:right" id="ap-0102">
                                <mat-placeholder>Max Amount</mat-placeholder>
                            </mat-form-field>
                        </td>

                        <td>


                            <button class="btn btn-outline-primary" type="submit"
                                style="border-radius:40px;margin-left: 50px;" color="primary"
                                (click)="ecfapprovalsummarysearch()" id="ap-0103"><i matTooltip="Search"
                                    class="fa fa-search" aria-hidden="true"></i></button>
                        </td>
                        <td>

                            <button class="btn btn-outline-primary" type="button"
                                style="border-radius:40px;margin-left: -115px;" color="primary"
                                (click)="Resetecfappinventory()" id="ap-0104">Reset</button>
                        </td>
                        <!-- <td>
                    

                    <button type="button" class="btn btn-outline-success" matTooltip="Raise ECF"
                                style="border-radius:40px;margin-left:-255px;" (click)="showadd()" id="ap-0105"><span
                                    class="fa fa-plus"></span></button>
                </td>
                <td>
             
                    <button class="btn btn-outline-success" type="button"
                    style="border-radius:40px;margin-left: -418px;"
                   color="primary" matTooltip="Create Batch"  data-toggle="modal" data-target="#ap-0012" (click)="checkbatch()" id="ap-0106">Create Batch
                  
                </button>
                </td> -->
                        <!-- (click)="batchsubmit()" -->

                    </tr>

                </table>
            </form>


            <!-- </div> -->

            <p style="color:black;font-size: 18px;font-family:'Times New Roman';font-weight:bold;margin-left: 3%;">
                ECF Approval Summary
            </p>
            <div class="table-responsive ccbstable"
                style="margin-top: 2%;margin-left: 35px;overflow: auto;height:300px;margin-bottom: 1%;width:1200px">
                <table class="table table-bordered scrolltable" fixed-header>
                    <!-- [style.height]="defaultHeight+'vh'"  -->
                    <!-- table-responsive padsize -->

                    <thead style="text-align: center;margin-left: 3%;">

                        <!-- <div class="table-responsive" style="height:400px;
        width:100%;
        overflow:auto;">
            <table class="table table-bordered scrolltable" fixed-header>
              <thead class="table_header" style="text-align: left;"> -->

                        <tr class="table_header " fixed-header>


                            <!-- <th>S.No</th>
            <th>ECF Type</th>
            <th>CR NO</th>
            <th>Commodity Name</th>
            <th>Batch No</th>
            <th>ECF Date</th>
            <th>ECF Amount</th>
            <th>ECF Status</th>
            <th>Payment For</th>
            <th>View</th>
            <th>Edit</th>
            <th>Delete</th>
            <th>Download</th>
            <th>Select</th> -->



                            <th>S.No</th>
                            <th>ECF Type</th>
                            <th>Branch Code & Name</th>
                            <th>CR No</th>
                            <th>Invoice CR No</th>
                            <th>Purpose</th>
                            <th>ECF Raising Date</th>
                            <th>Invoice Number</th>
                            <th>Invoice Date</th>
                            <th>ECF Amount</th>
                            <th>Supplier Name</th>
                            <th>Transaction Details</th>
                            <th>View</th>
                            <th>Covernote</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr *ngFor="let list of ecf_approval_data; index as i" style="text-align: center;">
                            <td  style=" text-align: center;"> {{(ecfapppresentpage - 1)*pagesizeappecf +i+1 }} </td>
                            <td *ngIf="list?.aptype_id != 8" style="white-space: nowrap;">{{list?.aptype}}</td>
                            <td *ngIf="list?.aptype_id == 8" style="white-space: nowrap;">TCF</td>
                            <td>{{list?.branch[0]?.code}} - {{list?.branch[0]?.name}}</td>
                            <td *ngIf="list?.crno!=null">{{list?.crno}}</td>
                            <td *ngIf="list?.crno === null">-</td>
                            <td>-</td>
                            <td matTooltip={{list?.remark}}>{{list?.remark}}</td>
                            <td style="white-space: nowrap;"> {{ (list?.apdate !== "None") ? (list?.apdate |
                                date:'dd-MMM-yyyy') : "-" }}</td>
                            <td>-</td>
                            <td>-</td>
                            <td style="text-align: right;">{{list?.apamount|currency:'INR'}}</td>
                            <td>-</td>
                            <td>
                                <button type="button" class="btn btn-outline-success" style="border-radius:40px;"
                                    matTooltip="View Transaction" data-toggle="modal" data-target="#ap-0017"
                                    id="ap-0107">
                                    <i class="fa fa-exchange" aria-hidden="true"></i>
                                </button>
                            </td>
                            <td>
                                <span matTooltip="view" class=" fa fa-eye create "
                                    style="color: green;cursor: pointer;padding:10px"
                                    (click)="showappview(list)"></span>
                            </td>
                            <td
                                *ngIf="list?.apstatus != 'DRAFT' &&  list?.apstatus != 'PENDING IN ECF APPROVAL'&&  list?.apstatus !='READY FOR BATCH' &&  list?.apstatus !='DELETE' && list?.apstatus =='ECF REJECTED';else tpl">
                                <button type="button" class="btn btn-outline-success" (click)="coverNotedownload(list)"
                                    style="border-radius: 40px;margin-left: 3%;">
                                    <!-- (click)="coverNotedownload(list.id,list.ecftype_id)" -->
                                    <span class="fa fa-download" matTooltip="Download CoverNote">
                                    </span>
                                </button>
                            </td>
                            <ng-template #tpl>
                                <td>-</td>
                            </ng-template>


                            <!-- <td>{{list?.commodity_id?.name}}</td>
            <td>{{ (list?.batch_no !== null) ? list?.batch_no : "-" }}</td>
          
            
           
            <td *ngIf ="list?.apstatus != 'PENDING_FOR_APPROVAL' && list.apstatus_id != 5" >{{ list?.apstatus }}</td>
            <td *ngIf ="list?.apstatus == 'PENDING_FOR_APPROVAL'">PENDING FOR APPROVAL</td>
            <td *ngIf="list?.apstatus_id == 5">PENDING FOR APPROVAL MODIFICATION</td>
          
            <td *ngIf="list?.aptype_id != 3 && list?.aptype_id != 4 && list?.aptype_id != 13">SUPPLIER</td>
            <td *ngIf="list?.aptype_id == 3 || list?.aptype_id == 13">{{list?.payto}}</td>
            <td *ngIf="list?.aptype_id== 4">{{list?.ppx}}</td>
           
          
                <td *ngIf="list?.apstatus != 'DRAFT' && list?.apstatus != 'READY FOR BATCH'">
                <button mat-icon-button matTooltip=" Edit" class="iconbutton" color="primary"
                    [disabled]="true" id="ap-0108">
                    <mat-icon style="color: grey;" aria-label="Edit">edit</mat-icon>
                </button>
            </td>
          
                <td *ngIf="list?.apstatus == 'DRAFT' || list?.apstatus == 'READY FOR BATCH'">
                <button mat-icon-button matTooltip=" Edit" class="iconbutton" color="primary"
                    (click)="showedit(list)" id="ap-0109">
                    <mat-icon style="color: green;" aria-label="Edit">edit</mat-icon>
                </button>
            </td>
            
           
                <td *ngIf="list?.apstatus == 'DRAFT' || list?.apstatus == 'READY FOR BATCH'">
                <button mat-icon-button type="button" matTooltip="Delete" id="ap-0110">
                    <mat-icon style="color: green;" aria-label="Edit" (click)="delete(list.id)">
                        delete</mat-icon>
                </button>
            </td>
           
                <td *ngIf="list?.apstatus != 'DRAFT' && list?.apstatus != 'READY FOR BATCH'">
                <button mat-icon-button type="button" matTooltip="Delete" [disabled]="true" id="ap-0111">
                    <mat-icon style="color: grey;" aria-label="Edit" >
                        delete</mat-icon>
                </button>
            </td>

          
           
            <td *ngIf="list?.apstatus =='READY FOR BATCH'">
                <section class="example-section ecfapcheck">
                    <mat-checkbox class="example-margin" (change)="onselectionchange($event,list)" [checked]="list?.select" [disabled]="((commcheck=='' || commcheck==null || ecftypecheck == ''||ecftypecheck == null )&& list.batch_no == null)  ? false:(list.commodity_id.id == commcheck && list.aptype_id == ecftypecheck && list.batch_no == null?false:true)"> </mat-checkbox>
                </section>
            </td>
            <td *ngIf="list?.apstatus !='READY FOR BATCH'">-</td>
           -->

                        </tr>
                    </tbody>
                </table>

                <div *ngIf="ecf_approval_data ?.length == 0" style="margin-left: 42%;">
                    <h3>Sorry data not found!.. </h3>
                </div>
            </div>

            <div class="row" *ngIf="isappsummarypage" style="width: 85%;">
                <div class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
                    <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -190px;">
                        Total Count:{{getapptotalcount}}
                    </p>
                </div>
                <div class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left:15%">
                    <button mat-icon-button [disabled]="has_apppageprevious === false" color="primary"
                        (click)="previousClickappPayment()" id="ap-0112">
                        <mat-icon>arrow_back</mat-icon>
                    </button> {{ecfapppresentpage}}
                    <button mat-icon-button [disabled]="has_apppagenext === false" color="primary"
                        (click)="nextClickappPayment()" id="ap-0113">
                        <mat-icon>arrow_forward</mat-icon>
                    </button>
                </div>
            </div>



        </div>

        <div *ngIf="ecfradioForm?.value?.type == 1">
            <form [formGroup]="batchapprovalform">
                <p
                    style="color:black;font-size: 22px;font-family:'Times New Roman';font-weight:bold;margin-top: 20px;margin-left: 3%;">
                    Batch Approval Search
                </p>

                <table>
                    <tr>
                        <td>
                            <mat-form-field class="example-full-width" style="margin-left: 35px;">
                                <input class="toolbar-search" type="text" matInput autocomplete="off"
                                    formControlName="batchno" id="ap-0114">
                                <mat-placeholder>Batch NO</mat-placeholder>
                            </mat-form-field>

                        </td>
                        <td>

                            <mat-form-field class="example-full-width" style="margin-left: 50px;">
                                <mat-label>Batch Status</mat-label>
                                <mat-select formControlName="batchstatus" id="ap-0115">
                                    <mat-option *ngFor="let status of batchStatusList" [value]="status.id">
                                        {{status.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>

                        <td>
                            <mat-form-field class="example-full-width" style="margin-left: 50px;">
                                <input class="toolbar-search" type="text" matInput autocomplete="off"
                                    formControlName="batchcount" id="ap-0116">
                                <mat-placeholder>ECF Count</mat-placeholder>
                            </mat-form-field>

                        </td>

                        <td>


                            <button class="btn btn-outline-primary" type="submit"
                                style="border-radius:40px;margin-left: 50px;" color="primary"
                                (click)="batchappsummarysearch()" id="ap-0117"><i matTooltip="Search"
                                    class="fa fa-search" aria-hidden="true"></i></button>
                        </td>
                        <td>

                            <button class="btn btn-outline-primary" type="button"
                                style="border-radius:40px;margin-left: 15px;" color="primary" (click)="resetbatchapp()"
                                id="ap-0118">Reset</button>
                        </td>


                    </tr>

                </table>
            </form>


            <!-- </div> -->

            <p
                style="color:black;font-size: 22px;font-family:'Times New Roman';font-weight:bold;margin-left: 3%;margin-top: 20px;">
                Batch Approval Summary
            </p>

            <div style="margin-top: 2%;margin-left: 35px; width: 95%;">
                <table class="table table-bordered scrolltable" fixed-header style="text-align:center;">

                    <thead>
                        <tr class="table_header " fixed-header style="text-align: center;margin-left: 3%;">


                            <th>S.No</th>
                            <th>Batch No</th>
                            <th>Batch Date</th>
                            <th>Batch Amount</th>
                            <th>ECF Count</th>
                            <th>ECF Processed Count</th>
                            <th>ECF Pending Count</th>
                            <th>Raiser Name</th>
                            <th>Branch</th>
                            <th>Transaction Details</th>
                            <th>Batch Status</th>
                            <th>View</th>
                            <th>Download</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let lists of batch_approval_data; index as i" style="text-align: center;">
                            <td style=" text-align: center;"> {{(batchapppresentpage - 1)*pagesizeappbatch +i+1 }} </td>
                            <td>{{lists?.batchno}}</td>
                            <td style="white-space:nowrap;">{{lists?.batch_date | date:'dd-MMM-yyyy'}}</td>
                            <td style="text-align: right;">{{lists?.batchamount|currency:'INR'}}</td>
                            <td>{{lists?.batchcount}}</td>
                            <td>-</td>
                            <td>-</td>
                            <td>{{lists?.raisername}}</td>
                            <td>{{lists?.branchname}}</td>
                            <td>
                                <button type="button" class="btn btn-outline-success" style="border-radius:40px;"
                                    matTooltip="View Transaction" data-toggle="modal" data-target="#ap-0017"
                                    id="ap-0119">
                                    <i class="fa fa-exchange" aria-hidden="true"></i>
                                </button>
                            </td>
                            <td>{{lists?.batchstatus}}</td>
                            <td>

                                <span matTooltip="view" class=" fa fa-eye create "
                                    style="color: green;cursor: pointer;padding:10px"
                                    (click)="showecfview(lists,'Approvalview')"></span>
                                <!-- (click)="showbatchviewview(lists?.id)" data-toggle="modal" data-target="#batchdetails" -->

                            </td>
                            <td *ngIf="lists?.batchstatus == 'APPROVED';else showdown">

                                <button type="button" class="btn btn-outline-success"
                                    (click)="batchcovernotedownload(lists.id)"
                                    style="border-radius: 40px;margin-left: 3%;">
                                    <span class="fa fa-download" matTooltip="Download CoverNote">
                                    </span>
                                </button>
                            </td>
                            <ng-template #showdown>
                                <td>-</td>
                            </ng-template>
                            <!-- <td *ngIf="list.ecfstatus != 'APPROVED'">-</td>
                </td> -->
                        </tr>
                    </tbody>
                </table>

                <div *ngIf="batch_approval_data ?.length == 0" style="margin-left: 42%;">
                    <h3>Sorry data not found!.. </h3>
                </div>
                <div class="row" *ngIf="isbatchappsummarypage">
                    <div class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
                        <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -223px;">
                            Total Count:{{getbatchapptotalcount}}
                        </p>
                    </div>
                    <div class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left:5px">
                        <button mat-icon-button [disabled]="has_appbatchpageprevious === false" color="primary"
                            (click)="previousClickbatchapp()" id="ap-0120">
                            <mat-icon>arrow_back</mat-icon>
                        </button> {{batchapppresentpage}}
                        <button mat-icon-button [disabled]="has_appbatchpagenext === false" color="primary"
                            (click)="nextClickbatchapp()" id="ap-0121">
                            <mat-icon>arrow_forward</mat-icon>
                        </button>
                    </div>
                </div>
            </div>



        </div>




    </div>



    <div *ngIf="ecfcreateForm">
        <app-create-ecf (onSubmit)="ecfcreateSubmit()" (onCancel)="ecfcreateCancel()" (onView)="invdtlview()">
        </app-create-ecf>
    </div>

    <div *ngIf="ecfviewForm">
        <app-ecfap-view (onCancel)="backview()" (onSubmit)="detailview()" (onView)="gotoinvdtlview()"></app-ecfap-view>
    </div>
    <div *ngIf="ecfapprovalviewForm">
        <app-ecf-approval-view (onCancel)="appbackview()" (onSubmit)="ecfappdetailview()"
            (onView)="gotoappinvdtlview()"></app-ecf-approval-view>
    </div>
    <div *ngIf="batchviewForm">
        <app-ecfbatch-view (onCancel)="backview()" (onSubmit)="gotoheader()"></app-ecfbatch-view>
    </div>
    <div *ngIf="InvoiceDetailForm">
        <app-invoice-detail (onSubmit)="invsubmit()" (onCancel)="invcancel()" (onBounce)="commonbackview('bounceview')"
        (onApproveBack)="commonbackview('apapproverview')"></app-invoice-detail>
    </div>

    <div *ngIf="APApprovalForms">
        <app-ap-approve (onCancel)="backviews()" (onSubmit)="submitmodify()" (onView)="movtodtl()"> </app-ap-approve>
    </div>

    <div *ngIf="InvoiceDetailApprovalForm">
        <app-inv-detail-approve (onSubmit)="gotoapapproval()"></app-inv-detail-approve>
    </div>
    <div *ngIf="InvoiceDetailViewForm">
        <app-inv-detail-view (onSubmit)="movetodetails()"></app-inv-detail-view>
    </div>
    <div *ngIf="AppInvoiceDetailViewForm">
        <app-approver-inv-detail-view (onSubmit)="movetoappdetails()"></app-approver-inv-detail-view>
    </div>


    <div *ngIf="preparePaymentForm">
        <app-prepare-payment (onCancel)="ppbackviews()"></app-prepare-payment>
    </div>

    <div *ngIf="schedularform">
        <app-schedular></app-schedular>
    </div>

    <div *ngIf="APCreateForm">
        <app-create-ap (onView)="invdtlview()" (onCancel)="apcreateback()"></app-create-ap>
    </div>


    <div *ngIf="APECFmakeForm">

        <!-- <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;"> -->
        <!-- <div *ngIf="ecfwiseMaker">
   <div>
        <form [formGroup]="apecfsummaryform">
            <tr>
                <td style="width: 300px;">
                    <p style="color:black;font-size:20px;font-weight:bold;margin-left: 20px;">
                        AP Maker Search
                    </p>                
                </td>
                <td>
                    <div style="margin-left: 500px;"  >
                    <mat-slide-toggle  formControlName="type" (change)="getradioMaker(2)" matTooltip="Slide here for ECFwise" color="primary">
                        ECF Wise
                    </mat-slide-toggle> 
                    </div>
                </td>
            </tr>
            <table>
                <div>
                    <tr>
                        <td>
                            <mat-form-field style="width:200px;margin-left: 20px;">
                                <mat-label>CR No</mat-label>
                                <input matInput formControlName="crno" autocomplete="off" id="ap-0122">
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width:200px;margin-left: 50px;">
                                <mat-select placeholder="ECF Type" formControlName="aptype" id="ap-0123">
                                    <mat-option *ngFor="let type of TypeList" [value]="type.id" matTooltip="{{type.text}}">
                                        {{type.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width:200px;margin-left: 50px;">
                                <mat-label>Min Amount</mat-label>
                                <input matInput formControlName="minamt" autocomplete="off" id="ap-0124">
                            </mat-form-field>
                        </td>
                       
                        <td>
                            <mat-form-field style="width:200px;margin-left: 50px;">
                                <mat-label>Max Amount</mat-label>
                                <input matInput formControlName="maxamt" autocomplete="off"  id="ap-0125">
                            </mat-form-field>
                        </td>
                        
                    
                   
                        <td>
                            <button class="btn btn-outline-primary" type="submit"
                            style="border-radius:40px;margin-left: 50px;" color="primary"
                            (click)="apecfSummarySearch()" id="ap-0126"><i matTooltip="Search" class="fa fa-search"
                                aria-hidden="true"></i></button>
                            <button class="btn btn-outline-primary" type="button"
                            style="border-radius:40px;margin-left: 10px;"
                           color="primary" (click)="resetapecf()" id="ap-0127">Reset</button>
                        </td>
                    </tr>
                </div>
            </table>
        </form> 
    </div>   
 <p style="color:black;font-size: 18px;font-weight: bold;margin-left: 20px;">
    AP Maker Summary
</p>
 

            <div   style="margin-top: 2%;margin-left: 18px; width: 95%;">
                <table class="table table-bordered scrolltable" fixed-header style="text-align:center;" >	
                    
                    <thead>
                        <tr class="table_header " fixed-header style="text-align: center;margin-left: 3%;">
                    <th>S.No</th>
                    <th>CR No</th>
                    <th>ECF Type</th>
                    <th>Commodity Name</th>
                    <th>ECF Date</th>
                    <th>ECF Amount</th>
                    <th>ECF Status</th>
                    
                    
                    
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let lists of apecfSummaryData; index as i" style="text-align: center;">
                    <td> {{(apecfpresentpage - 1)*pagesizeecfap +i+1 }} </td>
                    <td><p style="cursor: pointer;color: #3684BF;" (click)="ecflinkView(lists)">{{lists?.crno}}</p></td>
                    <td style="white-space: nowrap;">{{lists?.aptype}}</td>
                    <td>{{lists?.commodity_id?.name}}</td>
                    <td style="white-space: nowrap;">{{lists?.apdate | date:'dd-MMM-yyyy'}}</td>
                    <td style="text-align: right;">{{lists?.apamount|currency:'INR'}}</td>
                    <td>{{lists?.apstatus?.text}}</td>

            
        </tr>
    </tbody>
</table>

<div *ngIf="apecfSummaryData ?.length == 0" style="margin-left: 42%;">
<h3 >Sorry data not found!.. </h3>
</div>
</div>
<div class="row" *ngIf="isapecfsummarypage" style="width:85%">
<div  class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
    <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -85%;">
        Total Count:{{getecfaptotalcount}}
    </p> 
</div>
<div  class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left: 18%">
    <button mat-icon-button [disabled]="has_apecfpageprevious === false" color="primary" (click)="previousClickapecf()" id="ap-0128">
        <mat-icon>arrow_back</mat-icon>
    </button> {{appresentpage}}
    <button mat-icon-button [disabled]="has_apecfpagenext === false" color="primary" (click)="nextClickapecf()" id="ap-0129">
        <mat-icon>arrow_forward</mat-icon>
    </button>
</div>
</div>

</div> -->
        <!-- Invoice Wise AP Invoice Maker Summary -->

        <!-- <div *ngIf="invwiseMaker"> -->
        <div>
            <!-- <div>
                <form [formGroup]="apinvsummaryform"> -->
                    <!-- <tr> -->
                    <!-- <td style="width: 300px;"> -->
                    <div class="ap-summary-header">     
                        <h3 class="summary-title">
                            AP Invoice Maker Summary
                        </h3>
                        <div  class="summary-actions">
                            <button class="circle-icon-btn-md" matTooltip="Reset"(click)="overallreset_maker()">
                                <mat-icon>
                                refresh</mat-icon>
                            </button>
                             <button class="circle-icon-btn-md" (click)="apinvMakerRptDwnld()">
                                <mat-icon>download</mat-icon>
                            </button>
                        </div>
                    </div>
                    <!-- </td> -->
                    <!-- <td>
                        <div style="margin-left: 500px;"  >
                        <mat-slide-toggle  formControlName="type" (change)="getradioMaker(1)" matTooltip="Slide here for Invoicewise" color="primary">
                            Invoice Wise
                        </mat-slide-toggle> 
                        </div>
                    </td> -->
                    <!-- </tr> -->
                    <!-- <div class="search-auto-fit">
                        <lib-vs-search-cmp id="matInput-size" [SearchArr]="makersearch"
                            (dataoutput)="makersumSearch($event)" 
                            Tooltip="true" [ButtonArr]="makerbutton" [ResetForm]="restfiled">
                        </lib-vs-search-cmp>
                    </div>
                    <table>
                        <div *ngIf="expand_InvMaker" class="cus-filterSearchContainers">

                            <div class="cus-filterSearch">

                                <div class="npm-mat-edit-expand">
                                    <lib-vs-sep-dates-cmp id="matInput-size" [DateInput]="maker_frtodate"
                                        [formGroup]="apinvsummaryform">
                                    </lib-vs-sep-dates-cmp>
                                </div>

                                <div>
                                    <lib-vs-dynamicform-cmp id="matInput-size" [formGroup]="apinvsummaryform"
                                        [InputFields]="raises"></lib-vs-dynamicform-cmp>
                                </div>

                                <div [ngStyle]="{ 'pointer-events':
                                (apinvsummaryform.value.invoice_status != '') ? 'none' : 'auto', 'opacity': 
                                (apinvsummaryform.value.invoice_status != '') ? '0.6' : '1'}">
                                    <lib-vs-optiondd-cmp id="matInput-size" [InputFields]="maker_type"
                                        [formGroup]="apinvsummaryform"></lib-vs-optiondd-cmp>
                                </div>
                                <div [ngStyle]="{ 'pointer-events':
                            (apinvsummaryform.value.apinvoiceheaderstatus_id != '') ? 'none' : 'auto', 'opacity': 
                            (apinvsummaryform.value.apinvoiceheaderstatus_id != '') ? '0.6' : '1'}">
                                    <lib-vs-optiondd-cmp id="matInput-size" [InputFields]="makerstatusdroptype"
                                        [formGroup]="apinvsummaryform"></lib-vs-optiondd-cmp>
                                </div>
                                <div id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Invoice No</mat-label>
                                        <input matInput formControlName="invoice_no" autocomplete="off" type="text"
                                            id="ap-0137">
                                    </mat-form-field>
                                </div>
                                <div id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Invoice Amount</mat-label>
                                        <input matInput formControlName="invoice_amount" autocomplete="off"
                                            type="number" id="ap-0138">
                                    </mat-form-field>
                                </div>

                                <div class="cus-filterSearch-btnDiv">
                                    <button class="btn btn-outline-primary" style="border-radius:40px" color="primary"
                                        (click)="maker_reset()">
                                        Reset
                                    </button>

                                    <div class="btn-align">
                                        <button class="btn btn-outline-success" style="border-radius:40px" type="submit"
                                            (click)="apinvSummarySearch($event)" color="primary">
                                            Apply
                                        </button>
                                        <button class="btn btn-outline-primary" style="border-radius:40px"
                                            (click)="maker_close()">
                                            Cancel
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>


                    </table> -->
                    <!-- <table style="width: 100%;">
                    <div>
                        <tr>
                            <td>
                                <mat-form-field style="width:170px;margin-left: 10px;">
                                    <mat-label>Invoice Header CR No</mat-label>
                                    <input matInput formControlName="invoiceheader_crno" autocomplete="off" id="ap-0130">
                                </mat-form-field>
                            </td>
                            
                            <td>
                                <mat-form-field style="width:170px;margin-left: 10px;">
                                    <mat-select placeholder="ECF Type" formControlName="aptype" id="ap-0131">
                                        <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                            {{type.text}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </td>
                            
                            <td>                      -->
                    <!-- <mat-form-field style="width:200px;margin-left: 50px;">
                                    <mat-label>Batch No</mat-label>
                                    <input matInput formControlName="batch_no" autocomplete="off" id="ap-0132">
                                </mat-form-field> -->
                    <!-- <button type="button" class="btn btn-outline-primary" matTooltip="Select Supplier" matTooltipClass="custom-tooltipnew" 
                                data-toggle="modal" data-target="#ap-0044"
                                style="border-radius:40px;margin-left: 15px;" id="ap-0133"><span class="fa fa-arrow-up"></span></button> 
                                <mat-form-field style="width: 155px;margin-left: 5px; " (click)="suppliername_mk()">
                      
                                    <mat-label>Supplier Name</mat-label>
                                    <input #supplierInput  placeholder="Choose Supplier" matInput readonly
                                    formControlName="supplier_id" [matAutocomplete]="supp"  id="ap-0134">
                                    <mat-autocomplete [panelWidth]="250" #supp="matAutocomplete" (opened)="supplierScroll()"
                                    [displayWith]="displayFnSupplier">
                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                        <mat-option *ngFor="let supplier of supplierList"
                                        [value]="supplier" matTooltip="{{supplier.name}}">{{supplier.name}}
                                        </mat-option>
                                    </ng-container>
                                 </mat-autocomplete>
                               
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field style="width: 170px; margin-left: 10px; " (click)="getmakRaiserbranch()">
    
                                    <input #raiserbrInput matInput formControlName="raiserbranch_id"
                                        [matAutocomplete]="matraiserAutocomplete" placeholder="Raiser Branch" id="ap-0135">
                                    <mat-autocomplete [panelWidth]="250" #matraiserAutocomplete="matAutocomplete"
                                        [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                        <ng-container *ngIf="!isLoading">
                                            <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                                matTooltip="{{branch.code}}-{{branch.name}}">
                                                {{branch.code}}-{{branch.name}}
                                            </mat-option>
                                        </ng-container>
                                    </mat-autocomplete>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field  style="width:170px;margin-left: 10px;"  (click)="getraiserdropdownmk()">
                                    <mat-label>Employee</mat-label>
                                    <input #raiserInput matInput
                                        formControlName="raiser_name" [matAutocomplete]="raisertyperole" 
                                        placeholder="Choose Employee" id="ap-0136">
                                    <mat-autocomplete [panelWidth]="250" #raisertyperole="matAutocomplete"
                                        [displayWith]="displayFnraiserrole" (opened)="raiserScroll()">
                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                        <ng-container *ngIf="!isLoading">
                                            <mat-option *ngFor="let data of Raiserlist" [value]="data" matTooltip = "{{data.full_name}}">
                                                {{data.full_name}}
                                            </mat-option>
                                        </ng-container>
                                    </mat-autocomplete>
                                </mat-form-field>
                            </td>
                        </tr>
                        <tr>   
                            <td>
                                <mat-form-field style="width: 170px;margin-left: 10px; ">
                                    <mat-label>Invoice No</mat-label>
                                    <input matInput formControlName="invoice_no" autocomplete="off" type="text" id="ap-0137">
                                </mat-form-field>
                            </td>                 
                            <td>
                                <mat-form-field style="width: 170px;margin-left: 10px; ">
                                    <mat-label>Invoice Amount</mat-label>
                                    <input matInput formControlName="invoice_amount" autocomplete="off" type="number" id="ap-0138">
                                </mat-form-field>
                            </td>          
                            <td>
                                <mat-form-field style="width: 170px;margin-left: 50px;">
                                    <mat-label>From Date</mat-label>
                                    <input matInput readonly [matDatepicker]="picker1" placeholder="From Date"
                                        formControlName="from_date" id="ap-0139">
                                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                    <mat-datepicker #picker1></mat-datepicker>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field style="width: 170px;margin-left: 10px;">
                                    <mat-label>To Date</mat-label>
                                    <input matInput readonly [matDatepicker]="picker2" placeholder="To Date"
                                        formControlName="to_date" id="ap-0140">
                                    <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                    <mat-datepicker #picker2></mat-datepicker>
                                </mat-form-field>
                            </td>
                            <td style="width: 170px;">
                            <mat-form-field style="width:170px;margin-left: 10px;">
                                <mat-select placeholder="Invoice Status" formControlName="invoice_status"
                                 [disabled]="apinvsummaryform.value.apinvoiceheaderstatus_id != '' " id="ap-0141">
                                    <mat-option *ngFor="let st of apMakerStatusList" [value]="st.id">
                                        {{st.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                            </td>  
                        </tr>
                        <tr >     
                            <td colspan="2"></td>                   
                            <td style="width: 170px;" >
                                <mat-form-field style="width:170px;margin-left: 50px;">
                                    <mat-select placeholder="Report Status" formControlName="apinvoiceheaderstatus_id"
                                    [disabled]="apinvsummaryform.value.invoice_status != '' " id="ap-0142">
                                        <mat-option *ngFor="let st of ecfStatusList2" [value]="st.id">
                                            {{st.text}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                                </td>
                            <td>
                               <button class="btn btn-outline-primary" type="button"
                               style="border-radius:40px;margin-left: 10px;"
                              color="primary" (click)="apinvMakerRptDwnld()" id="ap-0143">Report Download</button>
                            </td>                        
                            <td>
                                <button class="btn btn-outline-primary" type="submit"
                                style="border-radius:40px;margin-left: 20px;" color="primary"
                                (click)="apinvSummarySearch()" id="ap-0144"><i matTooltip="Search" class="fa fa-search"
                                    aria-hidden="true"></i></button>
                                <button class="btn btn-outline-primary" type="button"
                                style="border-radius:40px;margin-left: 10px;"
                               color="primary" (click)="resetapinv()" id="ap-0145">Reset</button>
                            </td>
                        </tr>
                    </div>
                </table> -->
                <!-- </form>
            </div> -->

            <!-- <div  style="margin-top: 2%;margin-left: 20px; width: 77%;">
    <table class="table table-bordered  padsize" style="text-align:center;" >	
        
        <thead>
            <tr class="table_header tableset " style="text-align: center;margin-left: 3%;">
    
     -->
            <!-- <h3>
                AP Invoice Maker Summary
            </h3> -->
            <lib-vs-cbox-summary [SummaryDetails]="SummarymakerFiles" [SummaryApiObj]="SummaryObjmakerNew"
                [FirstLastbtn]="true" #makerSummary (dataEvent)="apmakersummarydata($event)"></lib-vs-cbox-summary>
            <!-- <div class="table-responsive ccbstable"
     style="margin-top: 2%;margin-left: 20px;overflow: auto;height:250px;margin-bottom: 1%;width:1250px">
     <table class="table table-bordered scrolltable" fixed-header>
    
    
    
    
         <thead  style="text-align: center;margin-left: 3%;">
             <tr class="table_header " fixed-header> -->
            <!-- <div class="table-responsive" id="ap-0001"  style="margin-top: 1%;margin-left: 10px; width: 95%;">
                    <table class="table scrolltable table-bordered"  style="text-align:center;" >	        
                        <thead fixed-header>            
                            <tr class="table_header " fixed-header style="text-align: center;margin-left: 3%;">
    
    
                        <th>S.No</th>
                        <th>Invoice CR No</th>
                        <th>ECF Type</th>
                        <th>Supplier</th>
                        <th>Employee</th>
                        <th>Employee Branch</th>
                        <th>PO No</th>
                        <th>Invoice No</th>
                        <th>Invoice Amount</th>
                        <th>Invoice Date</th>
                        <th>Ageing</th>
                        <th>Invoice Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let lists of apinvSummaryData; index as i" style="text-align: center;">
                        <td> {{(apinvpresentpage - 1)*pagesizeapinv +i+1 }} </td> -->
            <!-- <td><p style="cursor: pointer;color: #3684BF;" (click)="apmakerview(lists)">{{lists?.apinvoiceheader_crno}}</p></td> -->
            <!-- <td>{{lists?.apinvoiceheader_crno}}</td>
                        <td style="white-space: nowrap;">{{lists?.aptype.text}}</td>
                        <td>{{lists?.supplier_data?.name}} - {{lists?.supplier_data?.code}}</td>
                        <td>{{lists?.raiser_name}}</td>
                        <td>{{lists?.raiserbranch_branch?.name }} - {{lists?.raiserbranch_branch?.code }}</td>
                        <td *ngIf="lists?.aptype_id == 1">{{lists?.po_no}}</td>
                        <td *ngIf="lists?.aptype_id != 1">-</td>
                        <td>{{lists?.invoice_no }}</td>
                        <td style="text-align: right;">{{lists?.totalamount|currency:'INR'}}</td>
                        <td style="white-space: nowrap;">
                            <div style="color:red" *ngIf="lists.highlight =='YES'">More than six month</div>
                            {{lists?.invoicedate | date:'dd-MMM-yyyy'}}</td>
                        <td>{{lists?.ageing}}</td>
                        <td>{{lists?.apinvoicehdr_status?.text}}</td>
                        <td> 
                            <button type="button" class="btn btn-outline-primary"
                                matTooltip="View & Invoice"
                                style="border-radius:40px;margin-left:5px;color: mediumblue;" (click)="apmakerview(lists)" id="ap-0146">
                                <span class="fa fa-arrow-right"></span>
                            </button> 
                        </td>
            </tr>
        </tbody>
    </table>
    
    <div *ngIf="apinvSummaryData ?.length == 0" style="margin-left: 42%;">
    <h3 >Sorry data not found!.. </h3>
    </div>
    </div> -->
            <!-- <div class="row" *ngIf="isapinvsummarypage" style="width:85%">
        <div  class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;"> -->
            <!-- <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -85%;">
                Total Count:{{getapinvtotalcount}}
            </p>  -->
            <!-- </div>
        <div  class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left: 18%"> -->
            <!-- <button mat-icon-button [disabled]="has_apinvpageprevious === false" color="primary" (click)="previousClickapinv()" id="ap-0147">
                <mat-icon>arrow_back</mat-icon>
            </button> {{apinvpresentpage}}
            <button mat-icon-button [disabled]="has_apinvpagenext === false" color="primary" (click)="nextClickapinv()" id="ap-0148">
                <mat-icon>arrow_forward</mat-icon>
            </button> -->
            <!-- <mat-paginator
                (page)="handlebatchPageEvent($event)" 
                [length]="length_batch"
                [pageSize]="pageSize_batch"
                [showFirstLastButtons]="showFirstLastButtons"
                [pageSizeOptions]="pageSizeOptions"
                [pageIndex]="pageIndexmk"
                [hidePageSize]="true"
                aria-label="Select page">
          
            </mat-paginator>
        </div>
        </div> -->

        </div>
        <!-- Invoice Wise AP Invoice Maker Summary ends -->

        <!-- </mat-card> -->
    </div>

    <div *ngIf="APmakerForm">
        <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;">
            <p style="color:black;font-size:20px;font-family:'Times New Roman';font-weight:bold;margin-left: 10px;">
                AP Invoice Maker Search : ({{ecfcrno}})
            </p>
            <div>
                <form [formGroup]="apsummaryform">
                    <table>
                        <div>
                            <tr>
                                <td>
                                    <mat-form-field style="width:200px;margin-left: 20px;">
                                        <mat-label>Invoice Header CR No</mat-label>
                                        <input matInput formControlName="invoiceheader_crno" autocomplete="off"
                                            id="ap-0149">
                                    </mat-form-field>
                                </td>
                                <!-- <td>
                            <mat-form-field style="width:200px;margin-left: 50px;">
                                <mat-label>Batch No</mat-label>
                                <input matInput formControlName="batch_no" autocomplete="off" id="ap-0150">
                            </mat-form-field>
                        </td> -->
                                <td>
                                    <mat-form-field style="width: 200px;margin-left: 50px; ">
                                        <mat-label>Invoice No</mat-label>
                                        <input matInput formControlName="invoice_no" autocomplete="off" type="text"
                                            id="ap-0151">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width:200px;margin-left: 50px;">
                                        <mat-select placeholder="ECF Type" formControlName="aptype" id="ap-0152">
                                            <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                                {{type.text}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width:200px;margin-left: 50px;">
                                        <mat-label>Employee</mat-label>
                                        <input matInput formControlName="raiser_name" autocomplete="off" id="ap-0153">
                                    </mat-form-field>
                                </td>

                            </tr>
                            <tr>

                                <td>
                                    <mat-form-field style="width: 200px;margin-left: 20px; ">
                                        <mat-label>Invoice Amount</mat-label>
                                        <input matInput formControlName="invoice_amount" autocomplete="off"
                                            type="number" id="ap-0154">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width: 200px; margin-left: 50px;">
                                        <mat-label>Minimum Amount</mat-label>
                                        <input matInput formControlName="minamt" autocomplete="off" type="number"
                                            id="ap-0155">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width: 200px; margin-left: 50px; ">
                                        <mat-label>Maximum Amount</mat-label>
                                        <input matInput formControlName="maxamt" autocomplete="off" type="number"
                                            id="ap-0156">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width: 200px; margin-left: 50px; "
                                        (click)="getRaiserbranch()">

                                        <input #raiserbrInput matInput formControlName="raiserbranch_id"
                                            [matAutocomplete]="matraiserAutocomplete" placeholder="Raiser Branch"
                                            id="ap-0157">
                                        <mat-autocomplete [panelWidth]="400" #matraiserAutocomplete="matAutocomplete"
                                            [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                                            <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                                    matTooltip="{{branch.code}}-{{branch.name}}">
                                                    {{branch.code}}-{{branch.name}}
                                                </mat-option>
                                            </ng-container>
                                        </mat-autocomplete>
                                    </mat-form-field>
                                </td>
                            </tr>
                            <tr>
                                <td>

                                    <mat-form-field class="example-full-width" style="margin-left: 20px;">
                                        <mat-label>Is Original Invoice</mat-label>
                                        <mat-select formControlName="is_originalinvoice" id="ap-0158">
                                            <mat-option *ngFor="let type of yesnolist" [value]="type.id">
                                                {{type.text}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </td>

                                <td>
                                    <button class="btn btn-outline-primary" type="submit"
                                        style="border-radius:40px;margin-left: 20px;" color="primary"
                                        (click)="apSummarySearch()" id="ap-0159"><i matTooltip="Search"
                                            class="fa fa-search" aria-hidden="true"></i></button>
                                    <button class="btn btn-outline-primary" type="button"
                                        style="border-radius:40px;margin-left: 10px;" color="primary"
                                        (click)="resetap()" id="ap-0160">Reset</button>
                                </td>
                            </tr>
                        </div>
                    </table>
                </form>
            </div>

            <!-- <div  style="margin-top: 2%;margin-left: 20px; width: 77%;">
<table class="table table-bordered  padsize" style="text-align:center;" >	
    
    <thead>
        <tr class="table_header tableset " style="text-align: center;margin-left: 3%;">

 -->
            <p style="color:black;font-size:20px;font-family:'Times New Roman';font-weight:bold;margin-left: 10px;">
                AP Invoice Maker Summary
            </p>
            <!-- <div class="table-responsive ccbstable"
 style="margin-top: 2%;margin-left: 20px;overflow: auto;height:250px;margin-bottom: 1%;width:1250px">
 <table class="table table-bordered scrolltable" fixed-header>




     <thead  style="text-align: center;margin-left: 3%;">
         <tr class="table_header " fixed-header> -->
            <div style="margin-top: 2%;margin-left: 18px; width: 95%;">
                <table class="table table-bordered scrolltable" fixed-header style="text-align:center;">

                    <thead>
                        <tr class="table_header " fixed-header style="text-align: center;margin-left: 3%;">


                            <th>S.No</th>
                            <th>Invoice CR No</th>
                            <th>ECF Type</th>
                            <th>Supplier Name</th>
                            <th>Employee</th>
                            <th>Employee Branch</th>
                            <th>Invoice No</th>
                            <th>Invoice Amount</th>
                            <th>Invoice Date</th>
                            <th>Ageing</th>
                            <th>Invoice Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let lists of apSummaryData; index as i" style="text-align: center;">
                            <td  style=" text-align: center;"> {{(appresentpage - 1)*pagesizeap +i+1 }} </td>
                            <!-- <td><p style="cursor: pointer;color: #3684BF;" (click)="apmakerview(lists)">{{lists?.apinvoiceheader_crno}}</p></td> -->
                            <td>{{lists?.apinvoiceheader_crno}}</td>
                            <td style="white-space: nowrap;">{{lists?.aptype.text}}</td>
                            <td>{{lists?.supplier_data?.name}}</td>
                            <td>{{lists?.raiser_name}}</td>
                            <td>{{lists?.raiserbranch_branch?.name_code }}</td>
                            <td>{{lists?.invoice_no }}</td>
                            <td style="text-align: right;">{{lists?.totalamount|currency:'INR'}}</td>
                            <td style="white-space: nowrap;">{{lists?.invoicedate | date:'dd-MMM-yyyy'}}</td>
                            <td>{{lists?.ageing}}</td>
                            <td>{{lists?.apinvoicehdr_status?.text}}</td>
                            <td>
                                <button type="button" class="btn btn-outline-primary" matTooltip="View & Invoice"
                                    style="border-radius:40px;margin-left:5px;color: mediumblue;"
                                    (click)="apmakerview(lists)" id="ap-0161">
                                    <span class="fa fa-arrow-right"></span>
                                </button>
                            </td>
                            <!-- <td>
                <span matTooltip="view" class=" fa fa-eye create "
                style="color: green;cursor: pointer;padding:10px"  (click)="commonView(lists)"></span>
            </td> -->
                        </tr>
                    </tbody>
                </table>

                <div *ngIf="apSummaryData ?.length == 0" style="margin-left: 42%;">
                    <h3>Sorry data not found!.. </h3>
                </div>
            </div>
            <div class="row" *ngIf="isapsummarypage" style="width:85%">
                <div class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
                    <!-- <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -85%;">
        Total Count:{{getaptotalcount}}
    </p>  -->
                </div>
                <div class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left: 18%">
                    <!-- <button mat-icon-button [disabled]="has_appageprevious === false" color="primary" (click)="previousClickap()" id="ap-0162">
        <mat-icon>arrow_back</mat-icon>
    </button> {{appresentpage}}
    <button mat-icon-button [disabled]="has_appagenext === false" color="primary" (click)="nextClickap()" id="ap-0163">
        <mat-icon>arrow_forward</mat-icon>
    </button> -->

                    <mat-paginator (page)="handlebatchPageEvent($event)" [length]="length_batch"
                        [pageSize]="pageSize_batch" [showFirstLastButtons]="showFirstLastButtons"
                        [pageSizeOptions]="pageSizeOptions" [pageIndex]="pageIndexmk" [hidePageSize]="true"
                        aria-label="Select page">

                    </mat-paginator>
                </div>
            </div>
        </mat-card>
    </div>




    <div *ngIf="APBounceForm">
        <!-- <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;"> -->
        <div class="ap-summary-header">
            <h3 class="summary-title">
               AP Bounce Summary
            </h3>
            <div class="summary-actions">
                <button class="circle-icon-btn-md" matTooltip="Reset" (click)="overallreset_bounce()">
                     <mat-icon >
                       refresh</mat-icon>
                </button>
                <button class="circle-icon-btn-md" matTooltip="Download" (click)="bounceRptDwnld()">
                     <mat-icon 
                        >
                       download</mat-icon>
                </button>
            </div>
        </div>
        <!-- <div>
            <form [formGroup]="apbounceform">
                <div class="search-auto-fit">
                    <lib-vs-search-cmp id="matInput-size" [SearchArr]="bouncesearch"
                        (dataoutput)="bouncesumSearch($event)" Tooltip="true"
                        [ButtonArr]="bouncebutton" [ResetForm]="restfiled">
                    </lib-vs-search-cmp>
                </div>
                <table>
                    <div *ngIf="expand_Bounce" class="cus-filterSearchContainers">

                        <div class="cus-filterSearch">

                            <div class="npm-mat-edit-expand">
                                <lib-vs-sep-dates-cmp id="matInput-size" [DateInput]="bounce_frtodate"
                                    [formGroup]="apbounceform">
                                </lib-vs-sep-dates-cmp>
                            </div>
                            <lib-vs-optiondd-cmp id="matInput-size" [InputFields]="bounce_type"
                                [formGroup]="apbounceform"></lib-vs-optiondd-cmp>
                            <div>
                                <lib-vs-dynamicform-cmp id="matInput-size" [formGroup]="apbounceform"
                                    [InputFields]="approverfield"></lib-vs-dynamicform-cmp>
                            </div>
                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Invoice No</mat-label>
                                    <input matInput formControlName="invoice_no" autocomplete="off" type="text"
                                        id="ap-0173">
                                </mat-form-field>
                            </div>
                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Invoice Amount</mat-label>
                                    <input matInput formControlName="invoice_amount" autocomplete="off" type="number"
                                        id="ap-0174">
                                </mat-form-field>
                            </div>

                            <div class="cus-filterSearch-btnDiv">
                                <button class="btn btn-outline-primary" style="border-radius:40px" color="primary"
                                    (click)="bounce_reset()">
                                    Reset
                                </button>

                                <div class="btn-align">
                                    <button class="btn btn-outline-success" style="border-radius:40px" type="submit"
                                        (click)="apbounceSummarySearch($event)" color="primary">
                                        Apply
                                    </button>
                                    <button class="btn btn-outline-primary" style="border-radius:40px"
                                        (click)="bounce_close()">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                </table>
               <table>
                <div>
                    <tr>
                        <td>
                            <mat-form-field style="width:170px;margin-left: 10px;">
                                <mat-label>Invoice Header CR No</mat-label>
                                <input matInput formControlName="invoiceheader_crno" autocomplete="off" id="ap-0164">
                            </mat-form-field>
                        </td> -->
                <!-- <td>
                            <mat-form-field style="width:200px;margin-left: 50px;">
                                <mat-label>Batch No</mat-label>
                                <input matInput formControlName="batch_no" autocomplete="off" id="ap-0165">
                            </mat-form-field>
                        </td> -->
                <!-- <td>
                            <mat-form-field style="width:170px;margin-left: 10px;">
                                <mat-select placeholder="ECF Type" formControlName="aptype" id="ap-0166">
                                    <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                        {{type.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td> -->
                <!-- <td>              
                            <button type="button" class="btn btn-outline-primary" matTooltip="Select Supplier" matTooltipClass="custom-tooltipnew" 
                            data-toggle="modal" data-target="#ap-0044"
                            style="border-radius:40px;margin-left: 15px;" id="ap-0167"><span class="fa fa-arrow-up"></span></button>  
                            <mat-form-field style="width: 155px;margin-left: 5px; " (click)="suppliername_bo()">
                  
                                <mat-label>Supplier Name</mat-label>
                                <input #supplierInput  placeholder="Choose Supplier" matInput 
                                formControlName="supplier_id" [matAutocomplete]="supp"  id="ap-0168">
                                <mat-autocomplete [panelWidth]="400" #supp="matAutocomplete" (opened)="supplierScroll()"
                                [displayWith]="displayFnSupplier">
                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                <ng-container *ngIf="!isLoading">
                                    <mat-option *ngFor="let supplier of supplierList"
                                    [value]="supplier" matTooltip="{{supplier.name}}">{{supplier.name}}
                                    </mat-option>
                                </ng-container>
                             </mat-autocomplete>
                           
                            </mat-form-field>
                            
                        </td>
                        <td>
                            <mat-form-field style="width: 170px; margin-left: 10px; " (click)="getRaiserbranch_bo()">

                                <input #raiserbrInput matInput formControlName="raiserbranch_id"
                                    [matAutocomplete]="matraiserAutocomplete" placeholder="Raiser Branch" id="ap-0169">
                                <mat-autocomplete [panelWidth]="250" #matraiserAutocomplete="matAutocomplete"
                                    [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                        <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                            matTooltip="{{branch.code}}-{{branch.name}}">
                                            {{branch.code}}-{{branch.name}}
                                        </mat-option>
                                    </ng-container>
                                </mat-autocomplete>
                            </mat-form-field>
                        </td>                   
                        <td>
                            <mat-form-field  style="width:170px;margin-left: 10px;"  (click)="getraiserdropdownbo()">
                                <mat-label>Employee</mat-label>
                                <input #raiserInput matInput
                                    formControlName="raiser_name" [matAutocomplete]="raisertyperole" 
                                    placeholder="Choose Employee" id="ap-0170">
                                <mat-autocomplete [panelWidth]="250" #raisertyperole="matAutocomplete"
                                    [displayWith]="displayFnraiserrole" (opened)="raiserScroll()">
                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                        <mat-option *ngFor="let data of Raiserlist" [value]="data" matTooltip = "{{data.full_name}}">
                                            {{data.full_name}}
                                        </mat-option>
                                    </ng-container>
                                </mat-autocomplete>
                            </mat-form-field>
                        </td>
                        <td>
                            <button class="btn btn-outline-primary" type="submit"
                                style="border-radius:40px;margin-left: 20px;" color="primary"
                                (click)="apbounceSummarySearch()" id="ap-0171"><i matTooltip="Search" class="fa fa-search"
                                    aria-hidden="true"></i></button>
                                <button class="btn btn-outline-primary" type="button"
                                style="border-radius:40px;margin-left: 10px;"
                           color="primary" (click)="resetapbounce()" id="ap-0172">Reset</button>
                        </td>                        
                    </tr>
                    <tr> 
                        <td>
                            <mat-form-field style="width: 170px;margin-left: 10px; ">
                                <mat-label>Invoice No</mat-label>
                                <input matInput formControlName="invoice_no" autocomplete="off" type="text" id="ap-0173">
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width: 170px;margin-left: 10px; ">
                                <mat-label>Invoice Amount</mat-label>
                                <input matInput formControlName="invoice_amount" autocomplete="off" type="number" id="ap-0174">
                            </mat-form-field>
                        </td>          
                        <td>
                            <mat-form-field style="width: 170px;margin-left: 50px;">
                                <mat-label>From Date</mat-label>
                                <input matInput readonly [matDatepicker]="picker1" placeholder="From Date"
                                    formControlName="from_date" id="ap-0175">
                                <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                <mat-datepicker #picker1></mat-datepicker>
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width: 170px;margin-left: 10px;">
                                <mat-label>To Date</mat-label>
                                <input matInput readonly [matDatepicker]="picker2" placeholder="To Date"
                                    formControlName="to_date" id="ap-0176">
                                <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                <mat-datepicker #picker2></mat-datepicker>
                            </mat-form-field>
                        </td>
                        <td style="width: 170px;">
                        <mat-form-field style="width:170px;margin-left: 10px;">
                            <mat-select placeholder="Invoice Status" formControlName="apinvoiceheaderstatus_id" id="ap-0177">
                                <mat-option *ngFor="let st of ecfStatusList2" [value]="st.id" (click)="statusChange(st.id)">
                                    {{st.text}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                        </td>                         -->
                <!-- <mat-form-field class="example-full-width" style="margin-left: 50px;">
                                    <mat-label>Is Original Invoice</mat-label>
                                    <mat-select  formControlName="is_originalinvoice"  id="ap-0178">
                                        <mat-option *ngFor="let type of yesnolist" [value]="type.id" matTooltip="{{type.text}}">
                                            {{type.text}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field> -->
                <!-- <td>
                               <button class="btn btn-outline-primary" type="button"
                               style="border-radius:40px;margin-left: 10px;"
                              color="primary" (click)="bounceRptDwnld()" id="ap-0179">Report Download</button>
                        </td>
                    </tr>
                </div>
            </table> -->
            <!-- </form>
        </div> --> 

        <!-- <div  style="margin-top: 2%;margin-left: 20px; width: 77%;">
<table class="table table-bordered  padsize" style="text-align:center;" >	
    
    <thead>
        <tr class="table_header tableset " style="text-align: center;margin-left: 3%;">

 -->
        <!-- <h3>
            AP Bounce Summary
        </h3> -->
        <!-- <div class="table-responsive ccbstable"
 style="margin-top: 2%;margin-left: 20px;overflow: auto;height:250px;margin-bottom: 1%;width:1250px">
 <table class="table table-bordered scrolltable" fixed-header>




     <thead  style="text-align: center;margin-left: 3%;">
         <tr class="table_header " fixed-header> -->
        <lib-vs-cbox-summary [SummaryDetails]="SummarybounceFiles" [SummaryApiObj]="SummaryObjbounceNew"
            [FirstLastbtn]="true" #bounceSummary (dataEvent)="apbouncesummarydata($event)"></lib-vs-cbox-summary>
        <!-- <div class="table-responsive" id="ap-0002"  style="margin-top: 1%;margin-left: 10px; width: 95%;"> -->
        <!-- <table class="table scrolltable table-bordered"  style="text-align:center;" >	        
                    <thead fixed-header>
            
                        <tr class="table_header " fixed-header style="text-align: center;margin-left: 3%;">


                    <th>S.No</th>
                    <th>Invoice CR No</th>
                    <th>ECF Type</th>
                    <th>Supplier Name</th>
                    <th>Employee</th>
                    <th>Employee Branch</th>
                    <th>Invoice No</th>
                    <th>Invoice Amount</th>
                    <th>Invoice Date</th>
                    <th>Ageing</th>
                    <th>Invoice Status</th> -->
        <!-- <th>Action</th> -->
        <!-- </tr>
            </thead>
            <tbody>
                <tr *ngFor="let lists of apbounceSummaryData; index as i" style="text-align: center;">
                    <td  style=" text-align: center;"> {{(apbouncepresentpage - 1)*pagesizeapbounce +i+1 }} </td>
                    <td><p style="cursor: pointer;color: #3684BF;" (click)="linkView(lists,'bounceview')">{{lists?.apinvoiceheader_crno}}</p></td>
                    <td style="white-space: nowrap;">{{lists?.aptype.text}}</td>
                    <td>{{lists?.supplier_data?.name}} - {{lists?.supplier_data?.code}}</td>
                    <td>{{lists?.raiser_name}}</td>
                    <td>{{lists?.raiserbranch_branch?.name }} - {{lists?.raiserbranch_branch?.code }}</td>
                    <td>{{lists?.invoice_no }}</td>
                    <td style="text-align: right;">{{lists?.totalamount|currency:'INR'}}</td>
                    <td style="white-space: nowrap;">{{lists?.invoicedate | date:'dd-MMM-yyyy'}}</td>
                    <td>{{lists?.ageing}}</td>
                    <td>{{lists?.apinvoicehdr_status?.text}}</td> -->
        <!-- <td>
                <span matTooltip="view" class=" fa fa-eye create "
                style="color: green;cursor: pointer;padding:10px"  (click)="commonView(lists)"></span>
            </td> -->
        <!-- </tr>
    </tbody>
</table>

<div *ngIf="apbounceSummaryData ?.length == 0" style="margin-left: 42%;">
<h3 >Sorry data not found!.. </h3>
</div>
</div> -->
        <!-- <div class="row" *ngIf="isapbouncesummarypage" style="width:85%">
<div  class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;"> -->
        <!-- <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -85%;">
        Total Count:{{getapbouncetotalcount}}
    </p>  -->
        <!-- </div>
<div  class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left: 18%"> -->
        <!-- <button mat-icon-button [disabled]="has_apbouncepageprevious === false" color="primary" (click)="previousClickapbounce()" id="ap-0180">
        <mat-icon>arrow_back</mat-icon>
    </button> {{apbouncepresentpage}}
    <button mat-icon-button [disabled]="has_apbouncepagenext === false" color="primary" (click)="nextClickapbounce()" id="ap-0181">
        <mat-icon>arrow_forward</mat-icon>
    </button> -->
        <!-- <mat-paginator
        (page)="handlebouncePageEvent($event)" 
        [length]="length_bounce"
        [pageSize]="pageSize_bounce"
        [showFirstLastButtons]="showFirstLastButtons"
        [pageSizeOptions]="pageSizeOptions"
        [pageIndex]="pageIndex_bounce"
        [hidePageSize]="true"
        aria-label="Select page">
  
    </mat-paginator>
</div>
</div> -->
        <!-- </mat-card> -->
    </div>

    <div *ngIf="APRejectForm">
        <!-- <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;"> -->
        <div class="ap-summary-header">
            <h3 class="summary-title">
                AP Reject Summary
            </h3>
            <div class="summary-actions">
                <button class="circle-icon-btn-md" matTooltip="Reset"(click)="overallreset_reject()">
                    <mat-icon>
                       refresh</mat-icon>
                </button>
                 <button class="circle-icon-btn-md" matTooltip="Download" (click)="approverRptDwnld()">
                    <mat-icon>download</mat-icon>
                </button>
            </div>
        </div>
        <!-- <div>
            <form [formGroup]="aprejectform">

                <div class="search-auto-fit">
                    <lib-vs-search-cmp id="matInput-size" [SearchArr]="rejectsearch"
                        (dataoutput)="rejectsumSearch($event)" 
                        Tooltip="true"
                         [ResetForm]="restfiled" [ButtonArr]="filterbutton">
                    </lib-vs-search-cmp>
                </div>
                <table>
                    <div *ngIf="expand_Reject" class="cus-filterSearchContainers">

                        <div class="cus-filterSearch">

                            <div>
                                <lib-vs-dynamicform-cmp id="matInput-size" [formGroup]="aprejectform"
                                    [InputFields]="raisers_name"></lib-vs-dynamicform-cmp>
                            </div>
                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Invoice No</mat-label>
                                    <input matInput formControlName="invoice_no" autocomplete="off" type="text"
                                        id="ap-0189">
                                </mat-form-field>
                            </div>
                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Invoice Amount</mat-label>
                                    <input matInput formControlName="invoice_amount" autocomplete="off" type="number"
                                        id="ap-0190">
                                </mat-form-field>
                            </div>

                            <div class="cus-filterSearch-btnDiv">
                                <button class="btn btn-outline-primary" style="border-radius:40px" color="primary"
                                    (click)="reject_reset()">
                                    Reset
                                </button>

                                <div class="btn-align">
                                    <button class="btn btn-outline-success" style="border-radius:40px" type="submit"
                                        (click)="aprejectSummarySearch($event)" color="primary">
                                        Apply
                                    </button>
                                    <button class="btn btn-outline-primary" style="border-radius:40px"
                                        (click)="reject_close()">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                </table> -->
                <!-- <table>
                <div>
                    <tr>
                        <td>
                            <mat-form-field style="width:200px;margin-left: 10px;">
                                <mat-label>Invoice Header CR No</mat-label>
                                <input matInput formControlName="invoiceheader_crno" autocomplete="off" id="ap-0182">
                            </mat-form-field>
                        </td> -->
                <!-- <td>
                            <mat-form-field style="width:200px;margin-left: 50px;">
                                <mat-label>Batch No</mat-label>
                                <input matInput formControlName="batch_no" autocomplete="off" id="ap-0183">
                            </mat-form-field>
                        </td> -->
                <!-- <td>
                            <mat-form-field style="width:200px;margin-left: 50px;">
                                <mat-select placeholder="ECF Type" formControlName="aptype" id="ap-0184">
                                    <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                        {{type.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                        <td>
                            <button type="button" class="btn btn-outline-primary" matTooltip="Select Supplier" matTooltipClass="custom-tooltipnew" 
                            data-toggle="modal" data-target="#ap-0044"
                            style="border-radius:40px;margin-left: 15px;" id="ap-0185"><span class="fa fa-arrow-up"></span></button> 
                            <mat-form-field style="width: 200px;margin-left: 5px; " (click)="suppliernamere()">
                  
                                <mat-label>Supplier Name</mat-label>
                                <input #supplierInput  placeholder="Choose Supplier" matInput readonly
                                formControlName="supplier_id" [matAutocomplete]="supp"  id="ap-0186">
                                <mat-autocomplete [panelWidth]="400" #supp="matAutocomplete" (opened)="supplierScroll()"
                                [displayWith]="displayFnSupplier">
                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                <ng-container *ngIf="!isLoading">
                                    <mat-option *ngFor="let supplier of supplierList"
                                    [value]="supplier" matTooltip="{{supplier.name}}">{{supplier.name}}
                                    </mat-option>
                                </ng-container>
                             </mat-autocomplete>
                           
                            </mat-form-field>
                            
                        </td>
                        <td>
                            <mat-form-field style="width: 200px; margin-left: 50px; " (click)="getRaiserbranchre()">

                                <input #raiserbrInput matInput formControlName="raiserbranch_id"
                                    [matAutocomplete]="matraiserAutocomplete" placeholder="Raiser Branch" id="ap-0187">
                                <mat-autocomplete [panelWidth]="400" #matraiserAutocomplete="matAutocomplete"
                                    [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                        <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                            matTooltip="{{branch.code}}-{{branch.name}}">
                                            {{branch.code}}-{{branch.name}}
                                        </mat-option>
                                    </ng-container>
                                </mat-autocomplete>
                            </mat-form-field>
                        </td>
                        
                    </tr>
                    <tr>                    
                        <td>
                            <mat-form-field  style="width:250px;margin-left: 10px;"  (click)="getraiserdropdownre()">
                                <mat-label>Employee</mat-label>
                                <input #raiserInput matInput
                                    formControlName="raiser_name" [matAutocomplete]="raisertyperole" 
                                    placeholder="Choose Employee" id="ap-0188">
                                <mat-autocomplete [panelWidth]="400" #raisertyperole="matAutocomplete"
                                    [displayWith]="displayFnraiserrole" (opened)="raiserScroll()">
                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                        <mat-option *ngFor="let data of Raiserlist" [value]="data" matTooltip = "{{data.full_name}}">
                                            {{data.full_name}}
                                        </mat-option>
                                    </ng-container>
                                </mat-autocomplete>
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width: 200px;margin-left: 50px; ">
                                <mat-label>Invoice No</mat-label>
                                <input matInput formControlName="invoice_no" autocomplete="off" type="text" id="ap-0189">
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width: 200px;margin-left: 50px; ">
                                <mat-label>Invoice Amount</mat-label>
                                <input matInput formControlName="invoice_amount" autocomplete="off" type="number" id="ap-0190">
                            </mat-form-field>
                        </td>
                        <td> -->
                <!-- <mat-form-field class="example-full-width" style="margin-left: 20px;">
                                    <mat-label>Is Original Invoice</mat-label>
                                    <mat-select  formControlName="is_originalinvoice"  id="ap-0191">
                                        <mat-option *ngFor="let type of yesnolist" [value]="type.id" matTooltip="{{type.text}}">
                                            {{type.text}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field> -->
                <!-- <button class="btn btn-outline-primary" type="submit"
                                    style="border-radius:40px;margin-left: 20px;" color="primary"
                                    (click)="aprejectSummarySearch()" id="ap-0192"><i matTooltip="Search" class="fa fa-search"
                                        aria-hidden="true"></i></button>
                                    <button class="btn btn-outline-primary" type="button"
                                    style="border-radius:40px;margin-left: 10px;"
                               color="primary" (click)="resetapreject()" id="ap-0193">Reset</button>
                        </td>
                    </tr>
                </div>
            </table> -->
            <!-- </form>
        </div> -->

        <!-- <div  style="margin-top: 2%;margin-left: 20px; width: 77%;">
<table class="table table-bordered  padsize" style="text-align:center;" >	
    
    <thead>
        <tr class="table_header tableset " style="text-align: center;margin-left: 3%;">

 -->
        <!-- <h3>
            AP Reject Summary
        </h3> -->
        <!-- <div class="table-responsive ccbstable"
 style="margin-top: 2%;margin-left: 20px;overflow: auto;height:250px;margin-bottom: 1%;width:1250px">
 <table class="table table-bordered scrolltable" fixed-header>




     <thead  style="text-align: center;margin-left: 3%;">
         <tr class="table_header " fixed-header> -->

        <lib-vs-cbox-summary [SummaryDetails]="SummaryrejectFiles" [SummaryApiObj]="SummaryObjrejectNew"
            [FirstLastbtn]="true" #rejectSummary (dataEvent)="aprejectsummarydata($event)"></lib-vs-cbox-summary>
        <!-- <div class="table-responsive" id="ap-0003"  style="margin-top: 1%;margin-left: 10px; width: 95%;">
                <table class="table scrolltable table-bordered"  style="text-align:center;" >	        
                    <thead fixed-header>
            
                        <tr class="table_header " fixed-header style="text-align: center;margin-left: 3%;">


                    <th>S.No</th>
                    <th>Invoice CR No</th>
                    <th>ECF Type</th>
                    <th>Supplier</th>
                    <th>Employee</th>
                    <th>Employee Branch</th>
                    <th>Invoice No</th>
                    <th>Invoice Amount</th>
                    <th>Invoice Date</th>
                    <th>Ageing</th>
                    <th>Invoice Status</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let lists of aprejectSummaryData; index as i" style="text-align: center;">
                    <td  style=" text-align: center;"> {{(aprejectpresentpage - 1)*pagesizeapreject +i+1 }} </td>
                    <td><p style="cursor: pointer;color: #3684BF;" (click)="linkView(lists,'aprejectview')">{{lists?.apinvoiceheader_crno}}</p></td>
                    <td style="white-space: nowrap;">{{lists?.aptype.text}}</td>
                    <td>{{lists?.supplier_data?.name}} - {{lists?.supplier_data?.code}}</td>
                    <td>{{lists?.raiser_name}}</td>
                    <td>{{lists?.raiserbranch_branch?.name }} - {{lists?.raiserbranch_branch?.code }}</td>
                    <td>{{lists?.invoice_no }}</td>
                    <td style="text-align: right;">{{lists?.totalamount|currency:'INR'}}</td>
                    <td style="white-space: nowrap;">{{lists?.invoicedate | date:'dd-MMM-yyyy'}}</td>
                    <td>{{lists?.ageing}}</td>
                    <td>{{lists?.apinvoicehdr_status?.text}}</td>
                    <td *ngIf="lists.apinvoicehdr_status_id == 40">
                        <button type="button" class="btn btn-outline-primary" matTooltip="View" data-toggle="modal" data-target="#ap-0005"  
                            style="border-radius:40px;margin-left:5px;color: mediumblue;" (click)="viewDispatchDetails(lists)" id="ap-0194">
                           <span class="fa fa-arrow-right"></span>
                        </button>
                    </td> 
                    <td *ngIf="lists.apinvoicehdr_status_id != 40">
                        <button type="button" class="btn btn-outline-primary" matTooltip="Change Status" data-toggle="modal" data-target="#ap-0004"  
                            style="border-radius:40px;margin-left:5px;color: mediumblue;" (click)="showRejectStatChg(lists)" id="ap-0195">
                           <span class="fa fa-arrow-right"></span>
                        </button>
                    </td>  
        </tr>
    </tbody>
</table>

<div *ngIf="aprejectSummaryData ?.length == 0" style="margin-left: 42%;">
<h3 >Sorry data not found!.. </h3>
</div>
</div> -->
        <!-- <div class="row" *ngIf="isaprejectsummarypage" style="width:85%">
<div  class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;"> -->
        <!-- <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -85%;">
        Total Count:{{getaprejecttotalcount}}
    </p>  -->
        <!-- </div>
<div  class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left: 18%"> -->
        <!-- <button mat-icon-button [disabled]="has_aprejectpageprevious === false" color="primary" (click)="previousClickapreject()" id="ap-0196">
        <mat-icon>arrow_back</mat-icon>
    </button> {{aprejectpresentpage}}
    <button mat-icon-button [disabled]="has_aprejectpagenext === false" color="primary" (click)="nextClickapreject()" id="ap-0197">
        <mat-icon>arrow_forward</mat-icon>
    </button> -->
        <!-- <mat-paginator
                                (page)="handlerejecyPageEvent($event)"
                                [length]="length_reject"
                                [pageSize]="pageSize_reject"
                                [showFirstLastButtons]="showFirstLastButtons"
                                [pageSizeOptions]="pageSizeOptions"
                                [pageIndex]="pageIndex_reject"
                                [hidePageSize]="true"
                                aria-label="Select page">
                              
    </mat-paginator>
</div> -->
        <!-- </div> -->

        <!-- <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
id="ap-0004">
<div class="modal-dialog modal-lg" style="width:80%;height:200%;">
    <div class="modal-content">
        <div class="modal-header text-center" style="background: rgba(23, 204, 23, 0.288);">
            <h2 class="modal-title w-100 font-weight-bold" style="color:black ;height:2px;font-family: 'Times New Roman', Times, serif;">Courier Details
            </h2>
            <button type="button" class="close" #closebutton data-dismiss="modal" aria-label="Close" id="ap-0198">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <form [formGroup]="rejectChgStatForm">
            <tr>
            <td>
            <mat-form-field style="width:260px;;margin-left: 70px;margin-top: 20px;">
                <mat-select placeholder="Mode" formControlName="mode" required id="ap-0199">
                    <mat-option *ngFor="let m of rejectmodeList" [value]="m.id" matTooltip="{{m.text}}" (click)="modeselect(m.text)">
                        {{m.text}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            </td>
            <td>
                <mat-form-field style="width: 260px;; margin-left: 50px;">
                    <mat-label> Date</mat-label>
                    <input matInput [matDatepicker]="picker" formControlName="date" autocomplete="off" readonly id="ap-0200">
                    <mat-datepicker-toggle matSuffix [for]="picker">
                        <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                    </mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
            </td>
            </tr>
            <tr>
            <td *ngIf="this.rejectStat=='COURIER'">
                <mat-form-field style="width: 260px;; margin-left: 70px;">
                    <mat-label>Courier</mat-label>
                    <input #courierInput placeholder="Select Courier" type="text" matInput
                        formControlName="courier" [matAutocomplete]="Courier" id="ap-0201">
                    <mat-autocomplete #Courier="matAutocomplete" [displayWith]="displayFnCourier.bind(this)"
                        (opened)="autocompletecourierScroll()">
                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                        <ng-container *ngIf="!isLoading">
                            <mat-option *ngFor="let Courier of courierlist" [value]="Courier.id">
                                {{Courier.name}}
                            </mat-option>
                        </ng-container>
                    </mat-autocomplete>
                </mat-form-field>
            </td>
            <td *ngIf="this.rejectStat=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 50px; ">
                    <mat-label>AWB No</mat-label>
                    <input matInput formControlName="awbno" autocomplete="off" required id="ap-0202">
                </mat-form-field>
            </td>
            </tr>
            <tr>
            <td colspan="2">
                <mat-form-field style="width: 620px;margin-left: 70px; ">
                    <mat-label>Name</mat-label>
                    <input matInput formControlName="name" autocomplete="off" readonly id="ap-0203">
                </mat-form-field>
            </td>
            </tr>
            <tr>
            <td *ngIf="this.rejectStat=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 70px; ">
                    <mat-label>To Address</mat-label>
                    <input matInput formControlName="address" autocomplete="off" readonly id="ap-0204">
                </mat-form-field>
            </td>
            <td *ngIf="this.rejectStat=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 50px; ">
                    <mat-label>City</mat-label>
                    <input matInput formControlName="city" autocomplete="off" readonly id="ap-0205">
                </mat-form-field>
            </td> 
            </tr>
            <tr>
            <td *ngIf="this.rejectStat=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 70px; ">
                    <mat-label>District</mat-label>
                    <input matInput formControlName="district" autocomplete="off" readonly id="ap-0206">
                </mat-form-field>
            </td>
            <td *ngIf="this.rejectStat=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 50px; ">
                    <mat-label>State</mat-label>
                    <input matInput formControlName="state" autocomplete="off" readonly id="ap-0207">
                </mat-form-field>
            </td>
            </tr>
            <tr>
            <td *ngIf="this.rejectStat=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 70px; ">
                    <mat-label>Pincode</mat-label>
                    <input matInput formControlName="pincode" autocomplete="off" readonly id="ap-0208">
                </mat-form-field>
            </td>   
        </tr>
        <tr>
            <td>
                <mat-form-field style="width: 200px;margin-left: 180px; ">
                    <mat-label>Remarks</mat-label>
                    <input matInput formControlName="remarks" autocomplete="off"  id="ap-0209">
                </mat-form-field>
            </td>      
            <td>
                <button type="button" style="border-radius:40px;margin-left:10px;margin-bottom: 20px;"
                                        class="btn btn-outline-primary" (click)="rejectChgStatus()" id="ap-0210">
                                        Save</button>
                <button type="button" style="border-radius:40px;margin-left:10px;margin-bottom: 20px"
                                        class="btn btn-outline-primary" data-dismiss="modal"  id="ap-0211">
                                        Cancel</button>
            </td>
        </tr>
        </form>
    </div>
</div>
</div> -->
        <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true"
            id="ap-0004" data-backdrop = "static" data-keyboard="false" >
            <div class="modal-dialog modal-lg" style="width: 80%; height: 200%">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title">Courier Details</h3>
                        <button type="button" #courierclose class="close" data-dismiss="modal" aria-label="Close" id="ap-0198">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <!-- <br> -->
                    <div class="modal-body">


                        <form [formGroup]="rejectChgStatForm">
                            <div class="searchs-expand">
                                <td>
                                    <lib-vs-optiondd-cmp [InputFields]="rejmode_list" [formGroup]="rejectChgStatForm"
                                        (dataEvent)="modeselect($event)">
                                    </lib-vs-optiondd-cmp>
                                </td>
                                <!-- <mat-form-field appearance="outline">
                <mat-select placeholder="Mode" formControlName="mode" required id="ap-0199">
                    <mat-option *ngFor="let m of rejectmodeList" [value]="m.id" matTooltip="{{m.text}}" (click)="modeselect(m.text)">
                        {{m.text}}
                    </mat-option>
                </mat-select>
            </mat-form-field> -->
                                <td id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label> Date</mat-label>
                                        <input matInput [matDatepicker]="picker" formControlName="date"
                                            autocomplete="off" readonly id="ap-0200" required>
                                        <mat-datepicker-toggle matSuffix [for]="picker">
                                            <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                                        </mat-datepicker-toggle>
                                        <mat-datepicker #picker></mat-datepicker>
                                    </mat-form-field>
                                </td>
                            </div>
                            <div class="searchs-expand">
                                <td *ngIf="this.rejectStat== 1" id="matInput-size">
                                    <!-- <mat-form-field appearance="outline">
                    <mat-label>Courier</mat-label>
                    <input #courierInput placeholder="Select Courier" type="text" matInput
                        formControlName="courier" [matAutocomplete]="Courier" id="ap-0201">
                    <mat-autocomplete #Courier="matAutocomplete" [displayWith]="displayFnCourier.bind(this)"
                        (opened)="autocompletecourierScroll()">
                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                        <ng-container *ngIf="!isLoading">
                            <mat-option *ngFor="let Courier of courierlist" [value]="Courier.id">
                                {{Courier.name}}
                            </mat-option>
                        </ng-container>
                    </mat-autocomplete>
                </mat-form-field> -->

                                    <!-- <lib-vs-optiondd-cmp 
                [InputFields]="couriers_list" 
                [formGroup]="rejectChgStatForm" 
                >
                </lib-vs-optiondd-cmp> -->

                                    <lib-vs-dynamicform-cmp id="matInput-size" [InputFields]="couriers_list"
                                        [formGroup]="rejectChgStatForm"></lib-vs-dynamicform-cmp>

                                </td>
                                <td *ngIf="this.rejectStat== 1" id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>AWB No</mat-label>
                                        <input matInput formControlName="awbno" autocomplete="off" required
                                            id="ap-0202">
                                    </mat-form-field>
                                </td>
                                <td id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Name</mat-label>
                                        <input matInput formControlName="name" autocomplete="off" readonly id="ap-0203">
                                    </mat-form-field>
                                </td>
                            </div>
                            <div class="searchs-expand">
                                <td *ngIf="this.rejectStat== 1" id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>To Address</mat-label>
                                        <input matInput formControlName="address" autocomplete="off" readonly
                                            id="ap-0204">
                                    </mat-form-field>
                                </td>
                                <td *ngIf="this.rejectStat== 1" id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>City</mat-label>
                                        <input matInput formControlName="city" autocomplete="off" readonly id="ap-0205">
                                    </mat-form-field>
                                </td>
                                <td *ngIf="this.rejectStat== 1" id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>District</mat-label>
                                        <input matInput formControlName="district" autocomplete="off" readonly
                                            id="ap-0206">
                                    </mat-form-field>
                                </td>
                            </div>
                            <div class="searchs-expand">
                                <td *ngIf="this.rejectStat== 1" id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>State</mat-label>
                                        <input matInput formControlName="state" autocomplete="off" readonly
                                            id="ap-0207">
                                    </mat-form-field>
                                </td>
                                <td *ngIf="this.rejectStat== 1" id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Pincode</mat-label>
                                        <input matInput formControlName="pincode" autocomplete="off" readonly
                                            id="ap-0208">
                                    </mat-form-field>
                                </td>
                                <td id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Remarks</mat-label>
                                        <input matInput formControlName="remarks" autocomplete="off" id="ap-0209">
                                    </mat-form-field>
                                </td>
                            </div>
                            <!-- <td>
                <button type="button" style="border-radius:40px;margin-left:10px;margin-bottom: 20px;"
                                        class="btn btn-outline-primary" (click)="rejectChgStatus()" id="ap-0210">
                                        Save</button>
                <button type="button" style="border-radius:40px;margin-left:10px;margin-bottom: 20px"
                                        class="btn btn-outline-primary" data-dismiss="modal"  id="ap-0211">
                                        Cancel</button>
            </td> -->
                        </form>

                    </div>
                    <div class="modal-footer">
                        <button type="button" style="border-radius:40px;margin-left:10px;margin-bottom: 20px;"
                            class="btn btn-outline-success" (click)="rejectChgStatus()" id="ap-0210">
                            Save</button>
                            <button type="button" style="border-radius:40px;margin-left:10px;margin-bottom: 20px"
                            class="btn btn-outline-primary" data-dismiss="modal" id="ap-0211">
                            Back</button>
                        <!-- </tr> -->
                    </div>

                </div>
            </div>
        </div>
        <!-- <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" 
id="ap-0004">
<div class="modal-dialog modal-lg" style="width:80%;height:200%;">
    <div class="modal-content">
        <div class="modal-header" style="background: rgba(23, 204, 23, 0.288);">
            <h2 class="modal-title">
                Courier Details</h2>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ap-0198">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <br>
        <form [formGroup]="rejectChgStatForm">
            <tr>
            <td>
            <mat-form-field style="width:260px;;margin-left: 70px;margin-top: 20px;">
                <mat-select placeholder="Mode" formControlName="mode" required id="ap-0199">
                    <mat-option *ngFor="let m of rejectmodeList" [value]="m.id" matTooltip="{{m.text}}" (click)="modeselect(m.text)">
                        {{m.text}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            </td>
            <td>
                <mat-form-field style="width: 260px;; margin-left: 50px;">
                    <mat-label> Date</mat-label>
                    <input matInput [matDatepicker]="picker" formControlName="date" autocomplete="off" readonly id="ap-0200">
                    <mat-datepicker-toggle matSuffix [for]="picker">
                        <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                    </mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
            </td>
            </tr>
            <tr>
            <td *ngIf="this.rejectStat=='COURIER'">
                <mat-form-field style="width: 260px;; margin-left: 70px;">
                    <mat-label>Courier</mat-label>
                    <input #courierInput placeholder="Select Courier" type="text" matInput
                        formControlName="courier" [matAutocomplete]="Courier" id="ap-0201">
                    <mat-autocomplete #Courier="matAutocomplete" [displayWith]="displayFnCourier.bind(this)"
                        (opened)="autocompletecourierScroll()">
                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                        <ng-container *ngIf="!isLoading">
                            <mat-option *ngFor="let Courier of courierlist" [value]="Courier.id">
                                {{Courier.name}}
                            </mat-option>
                        </ng-container>
                    </mat-autocomplete>
                </mat-form-field>
            </td>
            <td *ngIf="this.rejectStat=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 50px; ">
                    <mat-label>AWB No</mat-label>
                    <input matInput formControlName="awbno" autocomplete="off" required id="ap-0202">
                </mat-form-field>
            </td>
            </tr>
            <tr>
            <td colspan="2">
                <mat-form-field style="width: 620px;margin-left: 70px; ">
                    <mat-label>Name</mat-label>
                    <input matInput formControlName="name" autocomplete="off" readonly id="ap-0203">
                </mat-form-field>
            </td>
            </tr>
            <tr>
            <td *ngIf="this.rejectStat=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 70px; ">
                    <mat-label>To Address</mat-label>
                    <input matInput formControlName="address" autocomplete="off" readonly id="ap-0204">
                </mat-form-field>
            </td>
            <td *ngIf="this.rejectStat=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 50px; ">
                    <mat-label>City</mat-label>
                    <input matInput formControlName="city" autocomplete="off" readonly id="ap-0205">
                </mat-form-field>
            </td> 
            </tr>
            <tr>
            <td *ngIf="this.rejectStat=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 70px; ">
                    <mat-label>District</mat-label>
                    <input matInput formControlName="district" autocomplete="off" readonly id="ap-0206">
                </mat-form-field>
            </td>
            <td *ngIf="this.rejectStat=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 50px; ">
                    <mat-label>State</mat-label>
                    <input matInput formControlName="state" autocomplete="off" readonly id="ap-0207">
                </mat-form-field>
            </td>
            </tr>
            <tr>
            <td *ngIf="this.rejectStat=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 70px; ">
                    <mat-label>Pincode</mat-label>
                    <input matInput formControlName="pincode" autocomplete="off" readonly id="ap-0208">
                </mat-form-field>
            </td>   
        </tr>
        <tr>
            <td>
                <mat-form-field style="width: 200px;margin-left: 180px; ">
                    <mat-label>Remarks</mat-label>
                    <input matInput formControlName="remarks" autocomplete="off"  id="ap-0209">
                </mat-form-field>
            </td>      
            <td>
                <button type="button" style="border-radius:40px;margin-left:10px;margin-bottom: 20px;"
                                        class="btn btn-outline-primary" (click)="rejectChgStatus()" id="ap-0210">
                                        Save</button>
                <button type="button" style="border-radius:40px;margin-left:10px;margin-bottom: 20px"
                                        class="btn btn-outline-primary" data-dismiss="modal"  id="ap-0211">
                                        Cancel</button>
            </td>
        </tr>
        </form>
       
    </div>
</div>


</div> -->
        <!-- <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
id="ap-0005">
<div class="modal-dialog modal-lg" style="width:80%;height:200%;">
    <div class="modal-content">
        <div class="modal-header text-center" style="background: rgba(23, 204, 23, 0.288);">
            <h2 class="modal-title w-100 font-weight-bold" style="color:black ;height:2px;font-family: 'Times New Roman', Times, serif;">View Dispatch Details
            </h2>
            <button type="button" class="close" #closeview data-dismiss="modal" aria-label="Close" id="ap-0212">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <form [formGroup]="dispatchviewForm">
            <tr>
            <td>
            <mat-form-field style="width:260px;;margin-left: 70px;margin-top: 20px;">
                <input placeholder="Mode" matInput formControlName="mode" type="text"  readonly id="ap-0213">
            </mat-form-field>
            </td>
            <td>
                <mat-form-field style="width: 260px;; margin-left: 50px;">
                    <mat-label> Date</mat-label>
                    <input placeholder="Date" matInput formControlName="date" type="text"  readonly id="ap-0214">
                </mat-form-field>
            </td>
            </tr>
            <tr>
            <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                <mat-form-field style="width: 260px;; margin-left: 70px;">
                    <mat-label>Courier</mat-label>
                    <input placeholder="Courier" type="text" matInput readonly
                        formControlName="courier" id="ap-0215">
                </mat-form-field>
            </td>
            <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 50px; ">
                    <mat-label>AWB No</mat-label>
                    <input matInput formControlName="awbno" readonly id="ap-0216">
                </mat-form-field>
            </td>
            </tr>
            <tr>
            <td colspan="2">
                <mat-form-field style="width: 620px;margin-left: 70px; ">
                    <mat-label>Name</mat-label>
                    <input matInput formControlName="name" readonly id="ap-0217">
                </mat-form-field>
            </td>
            </tr>
            <tr>
            <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 70px; ">
                    <mat-label>To Address</mat-label>
                    <input matInput formControlName="address" readonly id="ap-0218">
                </mat-form-field>
            </td>
            <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 50px; ">
                    <mat-label>City</mat-label>
                    <input matInput formControlName="city" readonly id="ap-0219">
                </mat-form-field>
            </td> 
            </tr>
            <tr>
            <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 70px; ">
                    <mat-label>District</mat-label>
                    <input matInput formControlName="district" readonly id="ap-0220">
                </mat-form-field>
            </td>
            <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 50px; ">
                    <mat-label>State</mat-label>
                    <input matInput formControlName="state" readonly id="ap-0221">
                </mat-form-field>
            </td>
            </tr>
            <tr>
            <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 70px; ">
                    <mat-label>Pincode</mat-label>
                    <input matInput formControlName="pincode" readonly id="ap-0222">
                </mat-form-field>
            </td>   
        </tr>
        <tr>
            <td>
                <mat-form-field style="width: 200px;margin-left: 250px; ">
                    <mat-label>Remarks</mat-label>
                    <input matInput formControlName="remarks"  id="ap-0223">
                </mat-form-field>
            </td>      
            <td>
                <button type="button" style="border-radius:40px;margin-left:10px;margin-bottom: 20px"
                                        class="btn btn-outline-primary" data-dismiss="modal"  id="ap-0224">
                                        Cancel</button>
            </td>
        </tr>
        </form>
    </div>
</div>
</div> -->

        <!-- <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" 
id="ap-0005">
<div class="modal-dialog modal-lg" style="width:80%;height:200%;">
    <div class="modal-content">
        <div class="modal-header" style="background: rgba(23, 204, 23, 0.288);">
            <h2 class="modal-title">
                View Dispatch Details</h2>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ap-0212">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <br>
        <form [formGroup]="dispatchviewForm">
            <tr>
            <td>
            <mat-form-field style="width:260px;;margin-left: 70px;margin-top: 20px;">
                <input placeholder="Mode" matInput formControlName="mode" type="text"  readonly id="ap-0213">
            </mat-form-field>
            </td>
            <td>
                <mat-form-field style="width: 260px;; margin-left: 50px;">
                    <mat-label> Date</mat-label>
                    <input placeholder="Date" matInput formControlName="date" type="text"  readonly id="ap-0214">
                </mat-form-field>
            </td>
            </tr>
            <tr>
            <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                <mat-form-field style="width: 260px;; margin-left: 70px;">
                    <mat-label>Courier</mat-label>
                    <input placeholder="Courier" type="text" matInput readonly
                        formControlName="courier" id="ap-0215">
                </mat-form-field>
            </td>
            <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 50px; ">
                    <mat-label>AWB No</mat-label>
                    <input matInput formControlName="awbno" readonly id="ap-0216">
                </mat-form-field>
            </td>
            </tr>
            <tr>
            <td colspan="2">
                <mat-form-field style="width: 620px;margin-left: 70px; ">
                    <mat-label>Name</mat-label>
                    <input matInput formControlName="name" readonly id="ap-0217">
                </mat-form-field>
            </td>
            </tr>
            <tr>
            <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 70px; ">
                    <mat-label>To Address</mat-label>
                    <input matInput formControlName="address" readonly id="ap-0218">
                </mat-form-field>
            </td>
            <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 50px; ">
                    <mat-label>City</mat-label>
                    <input matInput formControlName="city" readonly id="ap-0219">
                </mat-form-field>
            </td> 
            </tr>
            <tr>
            <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 70px; ">
                    <mat-label>District</mat-label>
                    <input matInput formControlName="district" readonly id="ap-0220">
                </mat-form-field>
            </td>
            <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 50px; ">
                    <mat-label>State</mat-label>
                    <input matInput formControlName="state" readonly id="ap-0221">
                </mat-form-field>
            </td>
            </tr>
            <tr>
            <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 70px; ">
                    <mat-label>Pincode</mat-label>
                    <input matInput formControlName="pincode" readonly id="ap-0222">
                </mat-form-field>
            </td>   
        </tr>
        <tr>
            <td>
                <mat-form-field style="width: 200px;margin-left: 250px; ">
                    <mat-label>Remarks</mat-label>
                    <input matInput formControlName="remarks"  id="ap-0223">
                </mat-form-field>
            </td>      
            <td>
                <button type="button" style="border-radius:40px;margin-left:10px;margin-bottom: 20px"
                                        class="btn btn-outline-primary" data-dismiss="modal"  id="ap-0224">
                                        Cancel</button>
            </td>
        </tr>
        </form>
    </div>
</div>


</div> -->
        <!-- <div
class="modal fade"
tabindex="-1"
role="dialog"
aria-labelledby="exampleModalLabel"
aria-hidden="true"
id="ap-0005"
>
<div class="modal-dialog modal-lg" style="width: 80%; height: 200%">
  <div class="modal-content">
    <div class="modal-header">
      <h3 class="modal-title">View Dispatch Details</h3>
      <button
        type="button"
        class="close"
        data-dismiss="modal"
        aria-label="Close"
        id="ap-0212"
      >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      
        <form [formGroup]="dispatchviewForm">
            <tr>
            <td>
            <mat-form-field style="width:260px;;margin-left: 70px;margin-top: 20px;">
                <input placeholder="Mode" matInput formControlName="mode" type="text"  readonly id="ap-0213">
            </mat-form-field>
            </td>
            <td>
                <mat-form-field style="width: 260px;; margin-left: 50px;">
                    <mat-label> Date</mat-label>
                    <input placeholder="Date" matInput formControlName="date" type="text"  readonly id="ap-0214">
                </mat-form-field>
            </td>
            </tr>
            <tr>
            <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                <mat-form-field style="width: 260px;; margin-left: 70px;">
                    <mat-label>Courier</mat-label>
                    <input placeholder="Courier" type="text" matInput readonly
                        formControlName="courier" id="ap-0215">
                </mat-form-field>
            </td>
            <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 50px; ">
                    <mat-label>AWB No</mat-label>
                    <input matInput formControlName="awbno" readonly id="ap-0216">
                </mat-form-field>
            </td>
            </tr>
            <tr>
            <td colspan="2">
                <mat-form-field style="width: 620px;margin-left: 70px; ">
                    <mat-label>Name</mat-label>
                    <input matInput formControlName="name" readonly id="ap-0217">
                </mat-form-field>
            </td>
            </tr>
            <tr>
            <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 70px; ">
                    <mat-label>To Address</mat-label>
                    <input matInput formControlName="address" readonly id="ap-0218">
                </mat-form-field>
            </td>
            <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 50px; ">
                    <mat-label>City</mat-label>
                    <input matInput formControlName="city" readonly id="ap-0219">
                </mat-form-field>
            </td> 
            </tr>
            <tr>
            <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 70px; ">
                    <mat-label>District</mat-label>
                    <input matInput formControlName="district" readonly id="ap-0220">
                </mat-form-field>
            </td>
            <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 50px; ">
                    <mat-label>State</mat-label>
                    <input matInput formControlName="state" readonly id="ap-0221">
                </mat-form-field>
            </td>
            </tr>
            <tr>
            <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                <mat-form-field style="width: 260px;;margin-left: 70px; ">
                    <mat-label>Pincode</mat-label>
                    <input matInput formControlName="pincode" readonly id="ap-0222">
                </mat-form-field>
            </td>   
        </tr>
        <tr>
            <td>
                <mat-form-field style="width: 200px;margin-left: 250px; ">
                    <mat-label>Remarks</mat-label>
                    <input matInput formControlName="remarks"  id="ap-0223">
                </mat-form-field>
            </td>      
            <td>
                <button type="button" style="border-radius:40px;margin-left:10px;margin-bottom: 20px"
                                        class="btn btn-outline-primary" data-dismiss="modal"  id="ap-0224">
                                        Cancel</button>
            </td>
        </tr>
        </form>
        
       
          </div>
          </div>
          </div>
          </div> -->
        <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true"
            id="ap-0005" data-backdrop = "static" data-keyboard="false" >
            <div class="modal-dialog modal-lg" style="width:80%;height:200%;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title">View Dispatch Details</h3>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ap-0212">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <!-- <br> -->
                    <div class="modal-body">

                        <form [formGroup]="dispatchviewForm">
                            <div class="searchs-expand">
                                <td id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <input placeholder="Mode" matInput formControlName="mode" type="text" readonly
                                            id="ap-0213">
                                    </mat-form-field>
                                </td>
                                <td id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label> Date</mat-label>
                                        <input placeholder="Date" matInput formControlName="date" type="text" readonly
                                            id="ap-0214">
                                    </mat-form-field>
                                </td>
                            </div>
                            <div class="searchs-expand">
                                <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'" id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Courier</mat-label>
                                        <input placeholder="Courier" type="text" matInput readonly
                                            formControlName="courier" id="ap-0215">
                                    </mat-form-field>
                                </td>
                                <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'" id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>AWB No</mat-label>
                                        <input matInput formControlName="awbno" readonly id="ap-0216">
                                    </mat-form-field>
                                </td>
                                <td id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Name</mat-label>
                                        <input matInput formControlName="name" readonly id="ap-0217">
                                    </mat-form-field>
                                </td>
                            </div>
                            <div class="searchs-expand">
                                <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'" id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>To Address</mat-label>
                                        <input matInput formControlName="address" readonly id="ap-0218">
                                    </mat-form-field>
                                </td>
                                <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'" id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>City</mat-label>
                                        <input matInput formControlName="city" readonly id="ap-0219">
                                    </mat-form-field>
                                </td>
                                <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'" id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>District</mat-label>
                                        <input matInput formControlName="district" readonly id="ap-0220">
                                    </mat-form-field>
                                </td>
                            </div>
                            <div class="searchs-expand">
                                <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'" id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>State</mat-label>
                                        <input matInput formControlName="state" readonly id="ap-0221">
                                    </mat-form-field>
                                </td>
                                <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'" id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Pincode</mat-label>
                                        <input matInput formControlName="pincode" readonly id="ap-0222">
                                    </mat-form-field>
                                </td>
                                <td id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <mat-label>Remarks</mat-label>
                                        <input matInput formControlName="remarks" id="ap-0223">
                                    </mat-form-field>
                                </td>
                            </div>
                            <!-- <td>
                          <button type="button" style="border-radius:40px;margin-left:10px;margin-bottom: 20px"
                                                  class="btn btn-outline-primary" data-dismiss="modal"  id="ap-0224">
                                                  Cancel</button>
                      </td> -->
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" style="border-radius:40px;margin-left:10px;margin-bottom: 20px"
                        class="btn btn-outline-primary" data-dismiss="modal" id="ap-0224">
                        Back</button>
                        <!-- </tr> -->
                    </div>
                </div>
            </div>
        </div>

        <!-- </mat-card> -->
    </div>

    <div *ngIf="APApproverForm">
        <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;">
            <p style="color:black;font-size:20px;font-family:'Times New Roman';font-weight:bold;margin-left: 10px;">
                AP Invoice Approval Search
            </p>
            <div>
                <form [formGroup]="apapprovalsummaryform">
                    <table>
                        <div>
                            <tr>
                                <td>
                                    <mat-form-field style="width:200px;margin-left: 10px;">
                                        <mat-label>Invoice Header CR No</mat-label>
                                        <input matInput formControlName="invoiceheader_crno" autocomplete="off"
                                            id="ap-0225">
                                    </mat-form-field>
                                </td>
                                <!-- <td>
                            <mat-form-field style="width:200px;margin-left: 50px;">
                                <mat-label>Batch No</mat-label>
                                <input matInput formControlName="batch_no" autocomplete="off" id="ap-0226">
                            </mat-form-field>
                        </td> -->
                                <td>
                                    <mat-form-field style="width: 200px;margin-left: 50px; ">
                                        <mat-label>Invoice No</mat-label>
                                        <input matInput formControlName="invoice_no" autocomplete="off" type="text"
                                            id="ap-0227">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width:200px;margin-left: 50px;">
                                        <mat-select placeholder="ECF Type" formControlName="aptype" id="ap-0228">
                                            <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                                {{type.text}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width:200px;margin-left: 50px;">
                                        <mat-label>Employee</mat-label>
                                        <input matInput formControlName="raiser_name" autocomplete="off" id="ap-0229">
                                    </mat-form-field>
                                </td>

                            </tr>
                            <tr>

                                <td>
                                    <mat-form-field style="width: 200px;margin-left: 10px; ">
                                        <mat-label>Invoice Amount</mat-label>
                                        <input matInput formControlName="invoice_amount" autocomplete="off"
                                            type="number" id="ap-0230">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width: 200px; margin-left: 50px;">
                                        <mat-label>Minimum Amount</mat-label>
                                        <input matInput formControlName="minamt" autocomplete="off" type="number"
                                            id="ap-0231">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width: 200px; margin-left: 50px; ">
                                        <mat-label>Maximum Amount</mat-label>
                                        <input matInput formControlName="maxamt" autocomplete="off" type="number"
                                            id="ap-0232">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width: 200px; margin-left: 50px; "
                                        (click)="getappRaiserbranch()">

                                        <input #raiserbrInput matInput formControlName="raiserbranch_id"
                                            [matAutocomplete]="matraiserAutocomplete" placeholder="Raiser Branch"
                                            id="ap-0233">
                                        <mat-autocomplete [panelWidth]="400" #matraiserAutocomplete="matAutocomplete"
                                            [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                                            <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                                    matTooltip="{{branch.code}}-{{branch.name}}">
                                                    {{branch.code}}-{{branch.name}}
                                                </mat-option>
                                            </ng-container>
                                        </mat-autocomplete>
                                    </mat-form-field>
                                </td>
                            </tr>
                            <tr>
                                <!-- <td>
                            <mat-form-field style="width: 200px; margin-left: 20px; ">
                            <mat-select placeholder="Invoice Header Status" formControlName="apinvoiceheaderstatus_id" id="ap-0234">
                                <mat-option *ngFor="let type of ecfStatusList" [value]="type.id" matTooltip="{{type.text}}">
                                    {{type.text}}
                                </mat-option>
                            </mat-select>
                            </mat-form-field>
                        </td> -->

                                <td>
                                    <button class="btn btn-outline-primary" type="submit"
                                        style="border-radius:40px;margin-left: 20px;" color="primary"
                                        (click)="apappSummarySearch()" id="ap-0235"><i matTooltip="Search"
                                            class="fa fa-search" aria-hidden="true"></i></button>
                                    <button class="btn btn-outline-primary" type="button"
                                        style="border-radius:40px;margin-left: 10px;" color="primary"
                                        (click)="resetapapp()" id="ap-0236">Reset</button>
                                </td>
                            </tr>
                        </div>
                    </table>
                </form>
            </div>

            <!-- <div  style="margin-top: 2%;margin-left: 20px; width: 77%;">
<table class="table table-bordered  padsize" style="text-align:center;" >	
    
    <thead>
        <tr class="table_header tableset " style="text-align: center;margin-left: 3%;">

 -->
            <p style="color:black;font-size:20px;font-family:'Times New Roman';font-weight:bold;margin-left: 10px;">
                AP Invoice Approval Summary
            </p>
            <!-- <div class="table-responsive ccbstable"
 style="margin-top: 2%;margin-left: 20px;overflow: auto;height:250px;margin-bottom: 1%;width:1250px">
 <table class="table table-bordered scrolltable" fixed-header>


     <thead  style="text-align: center;margin-left: 3%;">
         <tr class="table_header " fixed-header> -->

            <div style="margin-top: 2%;margin-left: 18px; width: 95%;">
                <table class="table table-bordered scrolltable" fixed-header style="text-align:center;">

                    <thead>
                        <tr class="table_header " fixed-header style="text-align: center;margin-left: 3%;">
                            <th>S.No</th>
                            <th>Invoice CR No</th>
                            <th>ECF Type</th>
                            <th>Supplier </th>
                            <th>Employee</th>
                            <th>Employee Branch</th>
                            <th>Invoice No</th>
                            <th>Invoice Amount</th>
                            <th>Invoice Date</th>
                            <th>Invoice Status</th>
                            <!-- <th>Action</th> -->
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let lists of apappSummaryData; index as i" style="text-align: center;">
                            <td style=" text-align: center;"> {{(apapppresentpage - 1)*pagesizeapapp +i+1 }} </td>
                            <td>
                                <p style="cursor: pointer;color: #3684BF;" (click)="linkView(lists,'apapproverview')">
                                    {{lists?.apinvoiceheader_crno}}</p>
                            </td>
                            <td style="white-space: nowrap;">{{lists?.aptype.text}}</td>
                            <td>{{lists?.supplier_data?.name}} - {{lists?.supplier_data?.code}}</td>
                            <td>{{lists?.raiser_name}}</td>
                            <td>{{lists?.raiserbranch_branch?.name_code }}</td>
                            <td>{{lists?.invoice_no }}</td>
                            <td style="text-align: right;">{{lists?.totalamount|currency:'INR'}}</td>
                            <td style="white-space: nowrap;">
                                <div style="color: red;" *ngIf="lists.highlight =='YES'">More than six month</div>
                                {{lists?.invoicedate | date:'dd-MMM-yyyy'}}
                            </td>
                            <td>{{lists?.apinvoicehdr_status?.text}}</td>
                            <!-- <td>
                <span matTooltip="view" class=" fa fa-eye create "
                style="color: green;cursor: pointer;padding:10px"  (click)="commonView(lists)"></span>
            </td> -->
                        </tr>
                    </tbody>
                </table>

                <div *ngIf="apappSummaryData ?.length == 0" style="margin-left: 42%;">
                    <h3>Sorry data not found!.. </h3>
                </div>
            </div>
            <div class="row" *ngIf="isapappsummarypage" style="width:85%">
                <div class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
                    <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -85%;">
                        Total Count:{{getapapptotalcount}}
                    </p>
                </div>
                <div class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left: 18%">
                    <button mat-icon-button [disabled]="has_apapppageprevious === false" color="primary"
                        (click)="previousClickapapp()" id="ap-0237">
                        <mat-icon>arrow_back</mat-icon>
                    </button> {{appresentpage}}
                    <button mat-icon-button [disabled]="has_apapppagenext === false" color="primary"
                        (click)="nextClickapapp()" id="ap-0238">
                        <mat-icon>arrow_forward</mat-icon>
                    </button>
                </div>
            </div>
        </mat-card>
    </div>

    <div *ngIf="APApproverInvoiceForm">
        <!-- <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;"> -->
       <div class="ap-summary-header">
             <h3 class="summary-title">AP Invoice Approval Summary</h3>

             <div class="summary-actions">
                <button class="circle-icon-btn-md" matTooltip="Reset" (click)="overallreset_approval()">
                <mat-icon aria-hidden="true">refresh</mat-icon>
                </button>
  
                 <button class="circle-icon-btn-md" matTooltip="Report Download" (click)="approverRptDwnld()">
                 <mat-icon aria-hidden="true">download</mat-icon>
                 </button>
            </div>
        </div>
            <!-- <h3> AP Invoice Approval</h3> -->
        <div>
            <form [formGroup]="apInvapprovalsummaryform">
                <!-- <div class="search-auto-fit">
                    <lib-vs-search-cmp id="matInput-size" [Outputtype]="searchvar" [SearchArr]="approvalsearch"
                        Tooltip="true" (dataoutput)="approvesearch($event)" [ButtonArr]="approvalbutton"
                        [ResetForm]="restfiled">
                    </lib-vs-search-cmp>
                </div> -->
                <table>
                    <div *ngIf="expand_approval" class="cus-filterSearchContainers">

                        <div class="cus-filterSearch">

                            <div class="npm-mat-edit-expand">
                                <lib-vs-sep-dates-cmp id="matInput-size" [DateInput]="ap_frtodate"
                                    [formGroup]="apInvapprovalsummaryform">
                                </lib-vs-sep-dates-cmp>
                            </div>
                            <div>
                                <lib-vs-dynamicform-cmp id="matInput-size" [formGroup]="apInvapprovalsummaryform"
                                    [InputFields]="raises"></lib-vs-dynamicform-cmp>
                            </div>
                            <lib-vs-optiondd-cmp id="matInput-size" [InputFields]="ap_type"
                                [formGroup]="apInvapprovalsummaryform"></lib-vs-optiondd-cmp>
                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Invoice No</mat-label>
                                    <input matInput formControlName="invoice_no" autocomplete="off" type="text"
                                        id="ap-0248">
                                </mat-form-field>
                            </div>
                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Invoice Amount</mat-label>
                                    <input matInput formControlName="invoice_amount" autocomplete="off" type="number"
                                        id="ap-0249">
                                </mat-form-field>
                            </div>

                            <div class="cus-filterSearch-btnDiv">
                                <button class="btn btn-outline-primary" style="border-radius:40px" color="primary"
                                    (click)="ap_reset()">
                                    Reset
                                </button>

                                <div class="btn-align">
                                    <button class="btn btn-outline-success" style="border-radius:40px" type="submit"
                                        (click)="apappInvSummarySearch($event)" color="primary">
                                        Apply
                                    </button>
                                    <button class="btn btn-outline-primary" style="border-radius:40px"
                                        (click)="ap_close()">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                </table>
                <!-- <table>
                <div>
                    <tr>
                        <td>
                            <mat-form-field style="width:170px;margin-left: 10px;">
                                <mat-label>Invoice Header CR No</mat-label>
                                <input matInput formControlName="invoiceheader_crno" autocomplete="off" id="ap-0239">
                            </mat-form-field>
                        </td> -->
                <!-- <td>
                            <mat-form-field style="width:200px;margin-left: 50px;">
                                <mat-label>Batch No</mat-label>
                                <input matInput formControlName="batch_no" autocomplete="off" id="ap-0240">
                            </mat-form-field>
                        </td> -->
                <!-- <td>
                            <mat-form-field style="width:170px;margin-left: 10px;">
                                <mat-select placeholder="ECF Type" formControlName="aptype" id="ap-0241">
                                    <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                        {{type.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                            
                        </td>
                        <td>                    
                            <button type="button" class="btn btn-outline-primary" matTooltip="Select Supplier" matTooltipClass="custom-tooltipnew" 
                            data-toggle="modal" data-target="#ap-0044"
                            style="border-radius:40px;margin-left: 15px;" id="ap-0242"><span class="fa fa-arrow-up"></span></button>  
                            <mat-form-field style="width: 155px;margin-left: 5px; " (click)="suppliernameap()">
                              
                                <mat-label>Supplier Name</mat-label>
                                <input #supplierInput  placeholder="Choose Supplier" matInput  readonly
                                formControlName="supplier_id" [matAutocomplete]="supp"  id="ap-0243">
                                <mat-autocomplete [panelWidth]="250" #supp="matAutocomplete" (opened)="supplierScroll()"
                                [displayWith]="displayFnSupplier">
                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                <ng-container *ngIf="!isLoading">
                                    <mat-option *ngFor="let supplier of supplierList"
                                    [value]="supplier" matTooltip="{{supplier.name}}">{{supplier.name}}
                                    </mat-option>
                                </ng-container>
                             </mat-autocomplete>
                           
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width: 170px; margin-left: 10px; " (click)="getappRaiserbranchap()">

                                <input #raiserbrInput matInput formControlName="raiserbranch_id"
                                    [matAutocomplete]="matraiserAutocomplete" placeholder="Raiser Branch" id="ap-0244">
                                <mat-autocomplete [panelWidth]="250" #matraiserAutocomplete="matAutocomplete"
                                    [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                        <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                            matTooltip="{{branch.code}}-{{branch.name}}">
                                            {{branch.code}}-{{branch.name}}
                                        </mat-option>
                                    </ng-container>
                                </mat-autocomplete>
                            </mat-form-field>
                        </td>
                        <td>
                             <mat-form-field  style="width:170px;margin-left: 10px;"  (click)="getraiserdropdownap()">
                                 <mat-label>Employee</mat-label>
                                 <input #raiserInput matInput
                                     formControlName="raiser_name" [matAutocomplete]="raisertyperole" 
                                     placeholder="Choose Employee" id="ap-0245">
                                 <mat-autocomplete [panelWidth]="400" #raisertyperole="matAutocomplete"
                                     [displayWith]="displayFnraiserrole" (opened)="raiserScroll()">
                                     <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                     <ng-container *ngIf="!isLoading">
                                         <mat-option *ngFor="let data of Raiserlist" [value]="data" matTooltip = "{{data.full_name}}">
                                             {{data.full_name}}
                                         </mat-option>
                                     </ng-container>
                                 </mat-autocomplete>
                             </mat-form-field>
                        </td>
                        <td>
                            <button class="btn btn-outline-primary" type="submit"
                            style="border-radius:40px;margin-left: 20px;" color="primary"
                            (click)="apappInvSummarySearch(1)" id="ap-0246"><i matTooltip="Search" class="fa fa-search"
                                aria-hidden="true"></i></button>
                            <button class="btn btn-outline-primary" type="button"
                            style="border-radius:40px;margin-left: 10px;"
                           color="primary" (click)="resetapappInv()" id="ap-0247">Reset</button>
                        </td>
                
                    </tr>
                    <tr>
                       <td>
                            <mat-form-field style="width: 170px;margin-left: 10px; ">
                                <mat-label>Invoice No</mat-label>
                                <input matInput formControlName="invoice_no" autocomplete="off" type="text" id="ap-0248">
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width: 170px;margin-left: 10px; ">
                                <mat-label>Invoice Amount</mat-label>
                                <input matInput formControlName="invoice_amount" autocomplete="off" type="number" id="ap-0249">
                            </mat-form-field>
                        </td>           
                        <td>
                            <mat-form-field style="width: 170px;margin-left: 50px;">
                                <mat-label>From Date</mat-label>
                                <input matInput readonly [matDatepicker]="picker1" placeholder="From Date"
                                    formControlName="from_date" id="ap-0250">
                                <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                <mat-datepicker #picker1></mat-datepicker>
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width: 170px;margin-left: 10px;">
                                <mat-label>To Date</mat-label>
                                <input matInput readonly [matDatepicker]="picker2" placeholder="To Date"
                                    formControlName="to_date" id="ap-0251">
                                <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                <mat-datepicker #picker2></mat-datepicker>
                            </mat-form-field>
                        </td>
                        <td>
                        <mat-form-field style="width:170px;margin-left: 10px;">
                            <mat-select placeholder="Report Status" formControlName="apinvoiceheaderstatus_id" id="ap-0252">
                                <mat-option *ngFor="let st of ecfStatusList2" [value]="st.id" (click)="statusChange(st.id)">
                                    {{st.text}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                        </td> -->

                <!-- <td>
                            <mat-form-field style="width: 200px; margin-left: 20px; ">
                            <mat-select placeholder="Invoice Header Status" formControlName="apinvoiceheaderstatus_id" id="ap-0253">
                                <mat-option *ngFor="let type of ecfStatusList" [value]="type.id" matTooltip="{{type.text}}">
                                    {{type.text}}
                                </mat-option>
                            </mat-select>
                            </mat-form-field>
                        </td> -->
                <!-- <td>
                           <button class="btn btn-outline-primary" type="button"
                           style="border-radius:40px;margin-left: 10px;"
                          color="primary" (click)="approverRptDwnld()" id="ap-0254">Report Download</button>
                        </td>
                    </tr>
                </div>
            </table> -->
            </form>
        </div>

        <!-- <div  style="margin-top: 2%;margin-left: 20px; width: 77%;">
<table class="table table-bordered  padsize" style="text-align:center;" >	
    
    <thead>
        <tr class="table_header tableset " style="text-align: center;margin-left: 3%;">

 -->
        <!-- <h3>
            AP Invoice Approval Summary
        </h3> -->
        <!-- <div class="table-responsive ccbstable"
 style="margin-top: 2%;margin-left: 20px;overflow: auto;height:250px;margin-bottom: 1%;width:1250px">
 <table class="table table-bordered scrolltable" fixed-header>


     <thead  style="text-align: center;margin-left: 3%;">
         <tr class="table_header " fixed-header> -->
        <lib-vs-cbox-summary [SummaryDetails]="SummaryapprovalData" [SummaryApiObj]="SummaryApiapprovalObjNew" 
            [FirstLastbtn]="true" #approvalSummary (dataEvent)="apapproversummarydata($event)"></lib-vs-cbox-summary>

        <!-- <div class="table-responsive" id="ap-0006"  style="margin-top: 1%;margin-left: 10px; width: 95%;">
                <table class="table scrolltable table-bordered"  style="text-align:center;" >	        
                    <thead fixed-header>
            
                        <tr class="table_header " fixed-header style="text-align: center;margin-left: 3%;">
                    <th>S.No</th>
                    <th>Invoice CR No</th>
                    <th>ECF Type</th>
                    <th>Supplier</th>
                    <th>Employee</th>
                    <th>Employee Branch</th>
                    <th>Invoice No</th>
                    <th>Invoice Amount</th>
                    <th>Invoice Date</th>
                    <th>Ageing</th>
                    <th>Invoice Status</th> -->
        <!-- <th>Action</th> -->
        <!-- </tr>
            </thead>
            <tbody>
                <tr *ngFor="let lists of apappInvSummaryData; index as i" style="text-align: center;">
                    <td  style=" text-align: center;"> {{(apappInvpresentpage - 1)*pagesizeapappInv +i+1 }} </td>
                    <td><p style="cursor: pointer;color: #3684BF;" (click)="linkView(lists,'apapproverview')">{{lists?.apinvoiceheader_crno}}</p></td>
                    <td style="white-space: nowrap;">{{lists?.aptype.text}}</td>
                    <td>{{lists?.supplier_data?.name}}</td>
                    <td>{{lists?.raiser_name}}</td>
                    <td>{{lists?.raiserbranch_branch?.name_code }}</td>
                    <td>{{lists?.invoice_no }}</td>
                    <td style="text-align: right;">{{lists?.totalamount|currency:'INR'}}</td>
                    <td style="white-space: nowrap;">
                        <div style="color: red;" *ngIf="lists.highlight =='YES'">More than six month</div>
                        {{lists?.invoicedate | date:'dd-MMM-yyyy'}}</td>
                    <td>{{lists?.ageing}}</td>
                    <td>{{lists?.apinvoicehdr_status?.text}}</td> -->
        <!-- <td>
                <span matTooltip="view" class=" fa fa-eye create "
                style="color: green;cursor: pointer;padding:10px"  (click)="commonView(lists)"></span>
            </td> -->
        <!-- </tr>
    </tbody>
</table>

<div *ngIf="apappInvSummaryData ?.length == 0" style="margin-left: 42%;">
<h3 >Sorry data not found!.. </h3>
</div>
</div> -->
        <!-- <div class="row" *ngIf="isapappInvsummarypage" style="width:85%">
<div  class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;"> -->
        <!-- <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -85%;">
        Total Count:{{getapappInvtotalcount}}
    </p>  -->
        <!-- </div>
<div  class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left: 18%"> -->
        <!-- <button mat-icon-button [disabled]="has_apappInvpageprevious === false" color="primary" (click)="previousClickapappInv()" id="ap-0255">
        <mat-icon>arrow_back</mat-icon>
    </button> {{apappInvpresentpage}}
    <button mat-icon-button [disabled]="has_apappInvpagenext === false" color="primary" (click)="nextClickapappInv()" id="ap-0256">
        <mat-icon>arrow_forward</mat-icon>
    </button> -->
        <!-- <mat-paginator
    (page)="handleapprovePageEvent($event)"
    [length]="length_approve"
    [pageSize]="pageSize_approve"
    [showFirstLastButtons]="showFirstLastButtons"
    [pageSizeOptions]="pageSizeOptions"
    [pageIndex]="pageIndex_approve"
    [hidePageSize]="true"
    aria-label="Select page">
</mat-paginator>
</div>
</div> -->
        <!-- </mat-card> -->
    </div>

    <div *ngIf="APFailedTransForm">
        <!-- <form [formGroup]="apfailedTransform"> -->
            <!-- <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;"> -->
            <div class="ap-summary-header">
                <h3 class="summary-title">
                    AP Failed Transaction Summary
                </h3>
    
                <div class="summary-actions">
                    <button class="circle-icon-btn-md" matTooltip="Reset" (click)="overallreset_failed()">
                       <mat-icon aria-hidden="true">refresh</mat-icon>
                   </button>
                </div>
                 <button class="circle-icon-btn-md" style="border-radius:50px"  (click)="failedRptDwnld()">
                        <mat-icon>download</mat-icon>
                </button>
            </div>
            <!-- <div class="search-auto-fit">
                <lib-vs-search-cmp id="matInput-size" [Outputtype]="searchvar" [SearchArr]="failedsearch"
                    (dataoutput)="failedsearchfun($event)" [ButtonArr]="failedbutton" 
                    Tooltip="true" [ResetForm]="restfiled">
                </lib-vs-search-cmp>
            </div>
            <table>
                <div *ngIf="expand_Failed" class="cus-filterSearchContainers">
                    <div class="cus-filterSearch">
                        <div id="matInput-size">
                            <mat-form-field appearance="outline">
                                <mat-label>Invoice Amount</mat-label>
                                <input matInput formControlName="invoice_amount" autocomplete="off" type="number"
                                    id="ap-0261">
                            </mat-form-field>
                        </div>
                        <div id="matInput-size">
                            <mat-form-field appearance="outline">
                                <mat-label>Minimum Amount</mat-label>
                                <input matInput formControlName="minamt" autocomplete="off" type="number" id="ap-0262">
                            </mat-form-field>
                        </div>
                        <div id="matInput-size">
                            <mat-form-field appearance="outline">
                                <mat-label>Maximum Amount</mat-label>
                                <input matInput formControlName="maxamt" autocomplete="off" type="number" id="ap-0263">
                            </mat-form-field>
                        </div>
                        <lib-vs-dynamicform-cmp id="matInput-size" [formGroup]="apfailedTransform"
                            [InputFields]="Raiser_branch"></lib-vs-dynamicform-cmp>

                        <div class="cus-filterSearch-btnDiv">
                            <button class="btn btn-outline-primary" style="border-radius:40px" color="primary"
                                (click)="failed_reset()">
                                Reset
                            </button>

                            <div class="btn-align">
                                <button class="btn btn-outline-success" style="border-radius:40px" type="submit"
                                    (click)="failedTransSummarySearch($event)" color="primary">
                                    Apply
                                </button>
                                <button class="btn btn-outline-primary" style="border-radius:40px"
                                    (click)="failed_close()">
                                    Cancel
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

            </table>
        </form> -->
        <!-- <div>
        <form [formGroup]="apfailedTransform">
            <table style="margin-left: 10px;">
                <div>
                    <tr>
                        <td>
                            <mat-form-field style="width:200px;">
                                <mat-label>Invoice Header CR No</mat-label>
                                <input matInput formControlName="invoiceheader_crno" autocomplete="off" id="ap-0257">
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width: 200px;margin-left: 50px; ">
                                <mat-label>Invoice No</mat-label>
                                <input matInput formControlName="invoice_no" autocomplete="off" type="text" id="ap-0258">
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width:200px;margin-left: 50px;">
                                <mat-select placeholder="ECF Type" formControlName="aptype" id="ap-0259">
                                    <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                        {{type.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                        <td>
                             <mat-form-field  style="width:170px;margin-left: 10px;"  (click)="getraiserdropdownftrn()">
                                 <mat-label>Employee</mat-label>
                                 <input #raiserInput matInput
                                     formControlName="raiser_name" [matAutocomplete]="raisertyperole" 
                                     placeholder="Choose Employee" id="ap-0336">
                                 <mat-autocomplete [panelWidth]="400" #raisertyperole="matAutocomplete"
                                     [displayWith]="displayFnraiserrole" (opened)="raiserScroll()">
                                     <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                     <ng-container *ngIf="!isLoading">
                                         <mat-option *ngFor="let data of Raiserlist" [value]="data" matTooltip = "{{data.full_name}}">
                                             {{data.full_name}}
                                         </mat-option>
                                     </ng-container>
                                 </mat-autocomplete>
                             </mat-form-field>
                          </td> -->
                        <!-- <td>
                            <mat-form-field style="width:200px;margin-left: 50px;">
                                <mat-label>Employee</mat-label>
                                <input matInput formControlName="raiser_name" autocomplete="off"  id="ap-0260">
                            </mat-form-field>
                        </td>
                        
                    </tr> -->
                    <!-- <tr>
                      
                        <td>
                            <mat-form-field style="width: 200px;">
                                <mat-label>Invoice Amount</mat-label>
                                <input matInput formControlName="invoice_amount" autocomplete="off" type="number" id="ap-0261">
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width: 200px; margin-left: 50px;">
                                <mat-label>Minimum Amount</mat-label>
                                <input matInput formControlName="minamt" autocomplete="off" type="number" id="ap-0262">
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width: 200px; margin-left: 50px; ">
                                <mat-label>Maximum Amount</mat-label>
                                <input matInput formControlName="maxamt" autocomplete="off" type="number" id="ap-0263">
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width: 200px; margin-left: 50px; " (click)="getRaiserbranchftran()">

                                <input #raiserbrInput matInput formControlName="raiserbranch_id"
                                    [matAutocomplete]="matraiserAutocomplete" placeholder="Raiser Branch" id="ap-0264">
                                <mat-autocomplete [panelWidth]="400" #matraiserAutocomplete="matAutocomplete"
                                    [displayWith]="displayFnbranchrole" (opened)="branchScroll()">
                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                        <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                            matTooltip="{{branch.code}}-{{branch.name}}">
                                            {{branch.code}}-{{branch.name}}
                                        </mat-option>
                                    </ng-container>
                                </mat-autocomplete>
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3">
                        </td>
                        
                        <td>
                            <button class="btn btn-outline-primary" type="submit"
                            style="border-radius:40px;" color="primary"
                            (click)="failedTransSummarySearch()" id="ap-0265"><i matTooltip="Search" class="fa fa-search"
                                aria-hidden="true"></i></button>
                            <button class="btn btn-outline-primary" type="button"
                            style="border-radius:40px;margin-left: 10px;"
                           color="primary" (click)="resetfailedTrans()" id="ap-0266">Reset</button>
                        </td>
                    </tr>
                </div>
            </table>
        </form>  -->
      

        <!-- <div  style="margin-top: 2%;margin-left: 20px; width: 77%;">
<table class="table table-bordered  padsize" style="text-align:center;" >	
    
    <thead>
        <tr class="table_header tableset " style="text-align: center;margin-left: 3%;">

 -->
        <!-- <h3>
            AP Failed Transaction Summary
        </h3> -->
        <!-- <div class="table-responsive ccbstable"
 style="margin-top: 2%;margin-left: 20px;overflow: auto;height:250px;margin-bottom: 1%;width:1250px">
 <table class="table table-bordered scrolltable" fixed-header>




     <thead  style="text-align: center;margin-left: 3%;">
         <tr class="table_header " fixed-header> -->
        <lib-vs-cbox-summary [SummaryDetails]="SummaryfailedData" [SummaryApiObj]="SummaryfailedObjNew" [FirstLastbtn]="true" #failedSummary (dataEvent)="apfailedsummarydata($event)">
        </lib-vs-cbox-summary>

        <!-- <div class="table-responsive" id="ap-0007"  style="margin-top: 1%;margin-left: 10px; width: 95%;">
                <table class="table scrolltable table-bordered"  style="text-align:center;" >	        
                    <thead fixed-header>
            
                        <tr class="table_header " fixed-header style="text-align: center;margin-left: 3%;">


                    <th>S.No</th>
                    <th>Invoice CR No</th>
                    <th>ECF Type</th>
                    <th>Supplier Name</th>
                    <th>Employee</th>
                    <th>Employee Branch</th>
                    <th>Invoice No</th>
                    <th>Invoice Date</th>
                    <th>Invoice Amount</th>
                    <th>Invoice Status</th>
                    <th>View Entry</th>
                    <th>Change Status</th>
                    <th>Repush</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let lists of failedTransSummaryData; index as i" style="text-align: center;">
                    <td  style=" text-align: center;"> {{(failedTranspresentpage - 1)*pagesizefailedTrans +i+1 }} </td>
                    <td>{{lists?.apinvoiceheader_crno}}</td>
                    <td style="white-space: nowrap;">{{lists?.aptype.text}}</td>
                    <td>{{lists?.supplier_data?.name}}</td>
                    <td>{{lists?.raiser_name}}</td>
                    <td>{{lists?.raiserbranch_branch?.name_code }}</td>
                    <td>{{lists?.invoice_no }}</td>
                    <td style="white-space: nowrap;">{{lists?.invoicedate | date:'dd-MMM-yyyy'}}</td>
                    <td style="text-align: right;">{{lists?.totalamount|currency:'INR'}}</td>
                    <td>{{lists?.apinvoicehdr_status?.text}}</td>
                    <td>
                        <i matTooltip="view entry" class=" fa fa-eye create "
                        style="color: green;cursor: pointer;padding:10px" data-toggle="modal" data-target="#ap-0033" (click)="failedViewEntry(lists?.apinvoiceheader_crno,1)"></i>
                    </td>
                    <td>
                        <button type="button" class="btn btn-outline-primary" [disabled]="lists?.apinvoicehdr_status?.id != 13 && lists?.apinvoicehdr_status?.id != 25"  matTooltip="Change Status" data-toggle="modal" data-target="#ap-0035"  
                            style="border-radius:40px;margin-left:5px;color: mediumblue;" (click)="failedChangeStat(lists)">
                           <i class="fa fa-arrow-right"></i>
                        </button>
                    </td>     
                    <td>
                        <button type="button" mat-icon-button style="color: mediumblue" matTooltip="Repush" 
                        (click)="Repushcall(lists)" id="ap-0267">
                         <mat-icon>restart_alt</mat-icon>
                    </button>
                      
                    </td>   
        </tr>
    </tbody>
 </table> -->
   
        <!-- <div *ngIf="failedTransSummaryData ?.length == 0" style="margin-left: 42%;">
        <h3 >Sorry data not found!.. </h3>
        </div> -->

        <!-- <div class="row" *ngIf="failedTransSummaryData ?.length > 0" style="width:85%">
            <div  class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
            </div>
            <div  class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left: 18%">
                <mat-paginator
                                            (page)="handlefailedTransPageEvent($event)"
                                            [length]="length_failedTrans"
                                            [pageSize]="pageSize_failedTrans"
                                            [showFirstLastButtons]="showFirstLastButtons"
                                            [pageSizeOptions]="pageSizeOptions"
                                            [pageIndex]="pageIndex_failedTrans"
                                            [hidePageSize]="true"
                                            aria-label="Select page">
                                        
                </mat-paginator>
            
        </div>
        </div> -->

    </div>

    <div *ngIf="APAdvSummaryForm">
        <!-- <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;"> -->
        <div class="ap-summary-header">
            <h3 class="summary-title">
                 AP Advance Summary
            </h3>
            <div class="summary-actions">
                <button class="circle-icon-btn-md" matTooltip="Reset"(click)="overallreset()">
                    <mat-icon>
                    refresh</mat-icon>
                </button>
            </div>
        </div>
        <!-- <div>
            <form [formGroup]="apAdvSummaryform">
                <div class="search-auto-fit">
                    <lib-vs-search-cmp id="matInput-size" [Outputtype]="searchvar" [SearchArr]="advancedsearch"
                        (dataoutput)="advancesearch($event)" [ResetForm]="restfiled" Tooltip="true"
                        >
                    </lib-vs-search-cmp>
                </div> -->
                <!-- <table>
                <div>
                    <tr>
                        <td>
                            <mat-form-field style="width:200px;margin-left: 10px;">
                                <mat-select placeholder="Pay To" formControlName="payto" id="ap-0270">
                                    <mat-option *ngFor="let type of payList" [value]="type.id">
                                        {{type.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width: 200px; margin-left: 20px; " (click)="getRaiserbranch_apadv()">

                                <input #raiserbrInput matInput formControlName="raiserbranch_id"
                                    [matAutocomplete]="matraiserAutocomplete" placeholder="Raiser Branch" id="ap-0271">
                                <mat-autocomplete [panelWidth]="400" #matraiserAutocomplete="matAutocomplete"
                                    [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                        <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                            matTooltip="{{branch.code}}-{{branch.name}}">
                                            {{branch.code}}-{{branch.name}}
                                        </mat-option>
                                    </ng-container>
                                </mat-autocomplete>
                            </mat-form-field>
                        </td>                        
                        <td>
                            <mat-form-field style="width:200px; margin-left: 20px;">
                                <mat-label>From Date</mat-label>
                                <input matInput [matDatepicker]="picker1" placeholder="From Date"
                                    formControlName="ppxheader_fromdate" [max]="todate"  id="ap-0272">
                                <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                <mat-datepicker #picker1></mat-datepicker>
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width:200px; margin-left: 20px;">
                                <mat-label>To Date</mat-label>
                                <input matInput [matDatepicker]="picker2" placeholder="To Date" 
                                    formControlName="ppxheader_todate" [max]="todate"  id="ap-0273">
                                <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                <mat-datepicker #picker2></mat-datepicker>
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3">
                        </td>
                        
                        <td>
                            <button class="btn btn-outline-primary" type="submit"
                            style="border-radius:40px;margin-left: 30px;" color="primary"
                            (click)="advanceSummarySearch(1)" id="ap-0274"><i matTooltip="Search" class="fa fa-search"
                                aria-hidden="true"></i></button>
                            <button class="btn btn-outline-primary" type="button"
                            style="border-radius:40px;margin-left: 10px;"
                           color="primary" (click)="resetAdvSummary()" id="ap-0275">Reset</button>
                        </td>
                    </tr>
                </div>
            </table> -->
            <!-- </form>
        </div>

        <h3>
            AP Advance Summary
        </h3> -->
        <lib-vs-cbox-summary [SummaryDetails]="SummaryadvancedData" [SummaryApiObj]="SummaryApiadvancedObjNew"
           #advanceSummary  [FirstLastbtn]="true" (dataEvent)="apadvancesummarydata($event)"></lib-vs-cbox-summary>

        <!-- <div class="table-responsive" id="ap-0008"  style="margin-top: 1%;margin-left: 10px; width: 95%;">
    <table class="table scrolltable table-bordered"  style="text-align:center;" >	        
        <thead fixed-header>

                        <tr class="table_header " fixed-header style="text-align: center;margin-left: 3%;">


                    <th>S.No</th>
                    <th>Invoice CR No</th>
                    <th>Branch Name and Code</th>
                    <th>PPX Header Date</th>
                    <th>Debit GL Number</th>
                    <th>PPX Header Amount</th>
                    <th>Liquidation Amount</th>
                    <th>PPX Header Balance</th>
                    <th>Advance By</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let lists of advSummaryData; index as i" style="text-align: center;">
                    <td  style=" text-align: center;"> {{(advSummarypresentpage - 1)*pagesizeadvSummary +i+1 }} </td>
                    <td>{{lists?.invoiceheader_crno}}</td>
                    <td style="white-space: nowrap;">{{lists?.raiserbranch_name }}</td>
                    <td>{{lists?.ppxheader_date | date:'dd-MMM-yyyy'}}</td>
                    <td>{{lists?.debit_glno}}</td>
                    <td>{{lists?.ppxheader_amount }}</td>
                    <td>{{lists?.ppxheader_liquidation_amt }}</td>
                    <td>{{lists?.ppxheader_balance_amt}}</td>
                    <td *ngIf="lists?.Payto =='E'">Employee</td>
                    <td *ngIf="lists?.Payto =='S'">SUPPLIER</td>
        </tr>
    </tbody>
</table>

<div *ngIf="advSummaryData ?.length == 0" style="margin-left: 42%;">
<h3 >Sorry data not found!.. </h3>
</div>
</div>
<div class="row" *ngIf="isAdvsummarypage" style="width:85%">
<div  class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;"> -->
        <!-- <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -85%;">
        Total Count:{{getadvSummarytotalcount}}
    </p>  -->
        <!-- </div> -->
        <!-- <div  class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left: 18%"> -->
        <!-- <button mat-icon-button [disabled]="has_advpageprevious === false" color="primary" (click)="previousClickAdvSummary()" id="ap-0276">
        <mat-icon>arrow_back</mat-icon>
    </button> {{advSummarypresentpage}}
    <button mat-icon-button [disabled]="has_advpagenext === false" color="primary" (click)="nextClickAdvSummary()" id="ap-0277">
        <mat-icon>arrow_forward</mat-icon>
    </button> -->
        <!-- <mat-paginator
        (page)="handleadvPageEvent($event)"
        [length]="length_adv"
        [pageSize]="pageSize_adv"
        [showFirstLastButtons]="showFirstLastButtons"
        [pageSizeOptions]="pageSizeOptions"
        [pageIndex]="pageIndex_adv"
        [hidePageSize]="true"
        aria-label="Select page">
  
    </mat-paginator>
</div>
</div>
</mat-card> -->
    </div>

    <div *ngIf="APApprovalForm">
        <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;">
            <p style="color:black;font-size:20px;font-family:'Times New Roman';font-weight:bold;margin-left: 10px;">
                AP Approval Search

                <mat-slide-toggle [(ngModel)]="isChecked" (click)="movetodtlwise()" style="margin-left:795px"
                    matTooltip="slide here to Invoice Wise">ECF Wise</mat-slide-toggle>
            </p>

            <div>
                <form [formGroup]="apECFapproverSearchForm">
                    <table>
                        <div>
                            <tr>
                                <td>
                                    <mat-form-field style="width:200px;margin-left: 20px;">
                                        <mat-label>CR No</mat-label>
                                        <input matInput formControlName="crno" autocomplete="off" id="ap-0278">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width:200px;margin-left: 50px;">
                                        <mat-select placeholder="ECF Type" formControlName="aptype" id="ap-0279">
                                            <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                                {{type.text}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width:200px;margin-left: 50px;">
                                        <mat-label>Min Amount</mat-label>
                                        <input matInput formControlName="minamt" autocomplete="off" id="ap-0280">
                                    </mat-form-field>
                                </td>

                                <td>
                                    <mat-form-field style="width:200px;margin-left: 50px;">
                                        <mat-label>Max Amount</mat-label>
                                        <input matInput formControlName="maxamt" autocomplete="off" id="ap-0281">
                                    </mat-form-field>
                                </td>

                                <!-- </tr> -->

                                <!-- <tr> -->
                                <td>
                                    <button class="btn btn-outline-primary" type="submit"
                                        style="border-radius:40px;margin-left: 50px;" color="primary"
                                        (click)="apappecfSummarySearch()" id="ap-0282"><i matTooltip="Search"
                                            class="fa fa-search" aria-hidden="true"></i></button>
                                    <button class="btn btn-outline-primary" type="button"
                                        style="border-radius:40px;margin-left: 10px;" color="primary"
                                        (click)="resetapappecf()" id="ap-0283">Reset</button>
                                </td>
                            </tr>
                        </div>
                    </table>
                </form>
            </div>

            <!-- <div  style="margin-top: 2%;margin-left: 20px; width: 77%;">
<table class="table table-bordered  padsize" style="text-align:center;" >	
    
    <thead>
        <tr class="table_header tableset " style="text-align: center;margin-left: 3%;">

 -->
            <p style="color:black;font-size:20px;font-family:'Times New Roman';font-weight:bold;margin-left: 10px;">
                AP Approval Summary
            </p>
            <!-- <div class="table-responsive ccbstable"
 style="margin-top: 2%;margin-left: 20px;overflow: auto;height:250px;margin-bottom: 1%;width:1250px">
 <table class="table table-bordered scrolltable" fixed-header>


     <thead  style="text-align: center;margin-left: 3%;">
         <tr class="table_header " fixed-header> -->

            <div style="margin-top: 2%;margin-left: 18px; width: 95%;">
                <table class="table table-bordered scrolltable" fixed-header style="text-align:center;">

                    <thead>
                        <tr class="table_header " fixed-header style="text-align: center;margin-left: 3%;">


                            <th>S.No</th>
                            <th>CR No</th>
                            <th>ECF Type</th>
                            <th>Commodity Name</th>
                            <th>ECF Date</th>
                            <th>ECF Amount</th>
                            <th>ECF Status</th>



                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let lists of apappecfSummaryData; index as i" style="text-align: center;">
                            <td  style=" text-align: center;"> {{(apappecfpresentpage - 1)*pagesizeecfapapp +i+1 }} </td>
                            <td>
                                <p style="cursor: pointer;color: #3684BF;" (click)="ecfapplinkView(lists)">
                                    {{lists?.crno}}</p>
                            </td>
                            <td style="white-space: nowrap;">{{lists?.aptype}}</td>
                            <td>{{lists?.commodity_id?.name}}</td>
                            <td style="white-space: nowrap;">{{lists?.apdate | date:'dd-MMM-yyyy'}}</td>
                            <td style="text-align: right;">{{lists?.apamount|currency:'INR'}}</td>
                            <td>{{lists?.apstatus?.text}}</td>

                            <!-- <td>
                <span matTooltip="view" class=" fa fa-eye create "
                style="color: green;cursor: pointer;padding:10px"  (click)="commonView(lists)"></span>
            </td> -->
                        </tr>
                    </tbody>
                </table>

                <div *ngIf="apappecfSummaryData ?.length == 0" style="margin-left: 42%;">
                    <h3>Sorry data not found!.. </h3>
                </div>
            </div>
            <div class="row" *ngIf="isapappecfsummarypage" style="width:85%">
                <div class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
                    <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -85%;">
                        Total Count:{{getappecfaptotalcount}}
                    </p>
                </div>
                <div class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left: 18%">
                    <button mat-icon-button [disabled]="has_apappecfpageprevious === false" color="primary"
                        (click)="previousClickapappecf()" id="ap-0284">
                        <mat-icon>arrow_back</mat-icon>
                    </button> {{appresentpage}}
                    <button mat-icon-button [disabled]="has_apappecfpagenext === false" color="primary"
                        (click)="nextClickapappecf()" id="ap-0285">
                        <mat-icon>arrow_forward</mat-icon>
                    </button>
                </div>
            </div>
        </mat-card>
    </div>

    <div *ngIf="BounceSummaryForm">
        <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;">
            <div class="col-md-12">
                <p style="color:black;font-size:20px;font-family:'Times New Roman';font-weight:bold;margin-left: 10px;">
                    AP Bounce Search
                </p>
                <form [formGroup]="bounceForm">
                    <div class="row col-md-12">
                        <div class="col-md-2">
                            <mat-form-field style="width:200px;margin-left:-10px">
                                <mat-label>CR No</mat-label>
                                <input matInput formControlName="crno" autocomplete="off" id="ap-0286">
                            </mat-form-field>
                        </div>
                        <div class="col-md-2" style="width: 200px; margin-left: 10px;">
                            <mat-form-field style="width:200px">
                                <mat-select placeholder="ECF Type" formControlName="aptype" id="ap-0287">
                                    <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                        {{type.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div class="col-md-2" style="width: 200px; margin-left: 10px;">
                            <mat-form-field style="width: 11rem;margin-left: 8px; ">
                                <mat-label>Raiser Name</mat-label>
                                <input matInput formControlName="raiser_name" autocomplete="off" type="number"
                                    id="ap-0288">
                            </mat-form-field>
                        </div>
                        <div class="col-md-2">
                            <mat-form-field style="width: 200px; margin-left: 10px; " (click)="getheaderbranch()">

                                <input #branchInput matInput formControlName="branch_id"
                                    [matAutocomplete]="matbranchAutocomplete" placeholder="Branch" id="ap-0289">
                                <mat-autocomplete [panelWidth]="400" #matbranchAutocomplete="matAutocomplete"
                                    [displayWith]="displayFnbranchrole" (opened)="branchScroll()">
                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                        <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                            matTooltip="{{branch.code}}-{{branch.name}}">
                                            {{branch.code}}-{{branch.name}}
                                        </mat-option>
                                    </ng-container>
                                </mat-autocomplete>
                            </mat-form-field>
                        </div>
                    </div>

                    <div class="row col-md-12">
                        <div class="col-md-2">
                            <mat-form-field style="width: 200px;margin-left: -10px; ">
                                <mat-label>Invoice No</mat-label>
                                <input matInput formControlName="invoice_no" autocomplete="off" id="ap-0290">
                            </mat-form-field>
                        </div>
                        <div class="col-md-2">
                            <mat-form-field style="width: 200px; margin-left: 10px; ">
                                <mat-label>Invoice Amount</mat-label>
                                <input matInput formControlName="invoice_amount1" autocomplete="off" id="ap-0291">
                            </mat-form-field>
                        </div>
                        <div class="col-md-2">
                            <mat-form-field style="width: 200px; margin-left: 10px; ">
                                <mat-label>Minimum Amount</mat-label>
                                <input matInput formControlName="minamt" autocomplete="off" type="number" id="ap-0292">
                            </mat-form-field>
                        </div>
                        <div class="col-md-2">
                            <mat-form-field style="width: 200px; margin-left: 10px; ">
                                <mat-label>Maximum Amount</mat-label>
                                <input matInput formControlName="maxamt" autocomplete="off" type="number" id="ap-0293">
                            </mat-form-field>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-outline-primary" type="submit"
                                style="border-radius:40px;margin-left: 50px;" color="primary"
                                (click)="bounceSummarySearch()" id="ap-0294"><i matTooltip="Search" class="fa fa-search"
                                    aria-hidden="true"></i></button>
                            <button class="btn btn-outline-primary" type="button"
                                style="border-radius:40px;margin-left: 10px;" color="primary" (click)="resetbounce()"
                                id="ap-0295">Reset</button>
                            <button class="btn btn-outline-primary" type="button"
                                style="border-radius:40px;margin-left: 10px;" data-toggle="modal" data-target="#ap-0042"
                                color="primary" (click)="rptDwnld(3)" id="ap-0296">Report Download</button>
                        </div>
                    </div>
                </form>
            </div>

            <p style="color:black;font-size:20px;font-family:'Times New Roman';font-weight:bold;margin-left: 10px;">
                AP Bounce Summary
            </p>
            <div style="margin-top: 2%;margin-left: 15px; width: 77%;">
                <table class="table table-bordered  padsize" fixed-header style="text-align:center;">

                    <thead>
                        <tr class="table_header" fixed-header
                            style="white-space: nowrap;text-align: center;margin-left: 3%;">


                            <th>S.No</th>
                            <th>CR No</th>
                            <th>ECF Type</th>
                            <th>Batch No</th>
                            <th>Supplier</th>
                            <th>Employee</th>
                            <th>Employee Branch</th>
                            <th>AP Date</th>
                            <th>AP Amount</th>
                            <th>Invoice Status</th>
                            <th>View</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let lists of bounceSummary; index as i"
                            style="white-space: nowrap;text-align: center;">
                            <td style=" text-align: center;"> {{(bouncepresentpage - 1)*pagesizebounce +i+1 }} </td>
                            <td>{{lists?.crno}}</td>
                            <td>{{lists?.aptype.text}}</td>
                            <td>{{lists?.batch_no}}</td>
                            <td>{{lists?.supplier_data.name}}</td>
                            <td>{{lists?.raisername}}</td>
                            <td>{{lists?.raiserbranch_branch.name }}</td>
                            <td>{{lists?.apdate | date:'dd/MM/yyyy'}}</td>
                            <td>{{lists?.apamount|currency:'INR'}}</td>
                            <td>{{lists?.apinvoicehdr_status.text}}</td>
                            <td>
                                <span matTooltip="view" class=" fa fa-eye create "
                                    style="color: green;cursor: pointer;padding:10px"
                                    (click)="bounceView(lists)"></span>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div *ngIf="bounceSummary ?.length == 0" style="margin-left: 42%;">
                    <h3>Sorry data not found!.. </h3>
                </div>
                <div class="row" *ngIf="isbouncesummarypage">
                    <div class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
                        <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -220px;">
                            Total Count:{{getbouncetotalcount}}
                        </p>
                    </div>
                    <div class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left:105px">
                        <button mat-icon-button [disabled]="has_bouncepageprevious === false" color="primary"
                            (click)="previousClickbounce()" id="ap-0297">
                            <mat-icon>arrow_back</mat-icon>
                        </button> {{bouncepresentpage}}
                        <button mat-icon-button [disabled]="has_bouncepagenext === false" color="primary"
                            (click)="nextClickbounce()" id="ap-0298">
                            <mat-icon>arrow_forward</mat-icon>
                        </button>
                    </div>
                </div>
            </div>
        </mat-card>
    </div>


    <div *ngIf="BounceDetailForm">
        <app-bounce-detail (onCancel)="bouncebackviews()"></app-bounce-detail>
    </div>



    <div *ngIf="PreparepaymentForms">
        <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;">
            <div class="col-md-12">
                <h2
                    style="color:black;font-size:20px;font-family:'Times New Roman';font-weight:bold;margin-left: 10px;">
                    Prepare Payment Search </h2>
                <form [formGroup]="PPSearchForm">
                    <table style="width: 100%;">
                        <div>
                            <tr>
                                <td>
                                    <mat-form-field style="width:200px;margin-left: 15px;">
                                        <mat-label>CR No</mat-label>
                                        <input matInput formControlName="crno" autocomplete="off" id="ap-0299">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width:200px;margin-left: 20px;">

                                        <mat-label>Invoice Header CR No</mat-label>
                                        <input matInput formControlName="apinvoiceheader_crno" autocomplete="off"
                                            id="ap-0300">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width:200px;margin-left: 20px;">
                                        <mat-select placeholder="ECF Type" formControlName="ecftype" id="ap-0301">
                                            <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                                {{type.text}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </td>
                                <td>
                                    <!-- <mat-form-field style="width:200px;margin-left: 50px;">
                                    <mat-label>Batch No</mat-label>
                                    <input matInput formControlName="batch_no" autocomplete="off" id="ap-0302">
                                </mat-form-field> -->
                                    <mat-form-field style="width: 14rem;margin-left: 20px; " (click)="ppsuppliername()">
                                        <mat-label>Supplier Name</mat-label>
                                        <input #supplierInputs placeholder="Choose Supplier" matInput
                                            formControlName="supplier_id" [matAutocomplete]="supps" id="ap-0303">
                                        <mat-autocomplete [panelWidth]="400" #supps="matAutocomplete"
                                            (opened)="PPsupplierScroll()" [displayWith]="displayFnppSupplier">
                                            <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let supplier of ppsupplierList" [value]="supplier"
                                                    matTooltip="{{supplier.name}}">{{supplier.name}}
                                                </mat-option>
                                            </ng-container>
                                        </mat-autocomplete>
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width: 14rem; margin-left: 20px; "
                                        (click)="getRaiserbranchpp()">

                                        <input #raiserbrInput matInput formControlName="raiserbranch_id"
                                            [matAutocomplete]="matraiserAutocomplete" placeholder="Raiser Branch"
                                            id="ap-0304">
                                        <mat-autocomplete [panelWidth]="400" #matraiserAutocomplete="matAutocomplete"
                                            [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                                            <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                                    matTooltip="{{branch.code}}-{{branch.name}}">
                                                    {{branch.code}}-{{branch.name}}
                                                </mat-option>
                                            </ng-container>
                                        </mat-autocomplete>
                                    </mat-form-field>

                                </td>

                            </tr>
                            <tr>
                                <td>
                                    <mat-form-field style="width:200px;margin-left: 15px;"
                                        (click)="getraiserdropdownpp()">
                                        <mat-label>Employee</mat-label>
                                        <input #raiserInput matInput formControlName="raiser_name"
                                            [matAutocomplete]="raisertyperole" placeholder="Choose Employee"
                                            id="ap-0305">
                                        <mat-autocomplete [panelWidth]="400" #raisertyperole="matAutocomplete"
                                            [displayWith]="displayFnraiserrole" (opened)="raiserScroll()">
                                            <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let data of Raiserlist" [value]="data"
                                                    matTooltip="{{data.full_name}}">
                                                    {{data.full_name}}
                                                </mat-option>
                                            </ng-container>
                                        </mat-autocomplete>
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width: 200px;margin-left: 15px; ">
                                        <mat-label>Invoice No</mat-label>
                                        <input matInput formControlName="invoice_no" autocomplete="off" type="text"
                                            id="ap-0306">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width: 200px;margin-left: 20px; ">
                                        <mat-label>Invoice Amount</mat-label>
                                        <input matInput formControlName="invoice_amount" autocomplete="off"
                                            type="number" id="ap-0307">
                                    </mat-form-field>
                                </td>

                                <td>
                                    <button class="btn btn-outline-primary" type="submit"
                                        style="border-radius:40px;margin-left: 70px;" color="primary"
                                        (click)="ppSummarySearch()" id="ap-0308"><i matTooltip="Search"
                                            class="fa fa-search" aria-hidden="true"></i></button>
                                    <button class="btn btn-outline-primary" type="button"
                                        style="border-radius:40px;margin-left: 10px;" color="primary"
                                        (click)="resetpp()" id="ap-0309">Reset</button>
                                </td>
                            </tr>
                        </div>
                    </table>
                </form>
            </div>
            <h2 style="color:black;font-size:20px;font-family:'Times New Roman';font-weight:bold;margin-left: 10px;">
                Prepare Payment Summary </h2>
            <!-- <div style="margin-top: 2%;margin-left: 20px; width: 98%;"> -->


            <!-- <table class="table table-bordered scrolltable" fixed-header style="text-align:center;" >	
                
                <thead>
                    <tr class="table_header" fixed-header> -->
            <div class="table-responsive ccbstable"
                style="margin-top: 2%;margin-left: 18px;overflow: auto;height:300px;margin-bottom: 1%;width:1250px">
                <table class="table table-bordered scrolltable" fixed-header>


                    <thead style="text-align: center;margin-left: 3%;">
                        <tr class="table_header " fixed-header>

                            <th>S.No</th>
                            <th>Batch No</th>
                            <th>CR No</th>
                            <th>Invoice CR No</th>
                            <th>ECF Type</th>
                            <th>ECF Date</th>
                            <th>ECF Amount</th>
                            <th>Invoice No</th>
                            <th>Supplier</th>
                            <th>Invoice Date</th>
                            <th>Invoice Amount</th>
                            <th>Invoice Status</th>
                            <th>Select</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let lists of ppSummary; index as i">
                            <td style=" text-align: center;"> {{(pppresentpage - 1)*pagesizepp +i+1 }} </td>
                            <td>{{lists?.batchno}}</td>
                            <td>{{lists?.crno}}</td>
                            <td>{{lists?.apinvoiceheader_crno}}</td>
                            <td style="white-space:nowrap">{{lists?.ecftype}}</td>
                            <td style="white-space:nowrap">{{lists?.ecfdate | date:'dd-MMM-yyyy'}}</td>
                            <td style="text-align: right;">{{lists?.ecfamount|currency:'INR'}}</td>
                            <td>{{lists?.invoiceno}}</td>
                            <td>{{lists?.supplier_id?.name}} - {{lists?.supplier_id?.code}}</td>
                            <td style="white-space:nowrap"> {{lists?.invoicedate | date:'dd-MMM-yyyy'}}</td>
                            <td style="text-align: right;white-space:nowrap">{{lists?.totalamount|currency:'INR'}}</td>
                            <td>{{lists?.apinvoiceheaderstatus}}</td>
                            <td>
                                <section class="example-section ecfapcheck">
                                    <mat-checkbox class="example-margin" (change)="hdrselect($event,i,lists.id)">
                                    </mat-checkbox>
                                </section>
                            </td>
                        </tr>

                    </tbody>
                </table>

                <div *ngIf="ppSummary ?.length == 0" style="margin-left: 42%;">
                    <h3>Sorry data not found!.. </h3>
                </div>
            </div>
            <div class="row" *ngIf="isppsummarypage" style="width: 85%;">
                <div class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
                    <!-- <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -84%;">
                    Total Count:{{getpptotalcount}}
                </p>  -->
                </div>
                <div class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left:18%">
                    <!-- <button mat-icon-button [disabled]="has_pppageprevious === false" color="primary" (click)="previousClickpp()" id="ap-0310">
                    <mat-icon>arrow_back</mat-icon>
                </button> {{pppresentpage}}
                <button mat-icon-button [disabled]="has_pppagenext === false" color="primary" (click)="nextClickpp()" id="ap-0311">
                    <mat-icon>arrow_forward</mat-icon>
                </button> -->
                    <mat-paginator (page)="handlepaymentPageEvent($event)" [length]="length_payment"
                        [pageSize]="pageSize_payment" [showFirstLastButtons]="showFirstLastButtons"
                        [pageSizeOptions]="pageSizeOptions" [pageIndex]="pageIndex_payment" [hidePageSize]="true"
                        aria-label="Select page">

                    </mat-paginator>
                </div>
            </div>
            <div style="margin-bottom: 3%;margin-top:-60px">
                <form [formGroup]="SubmitPreparepayForm">

                    <mat-form-field
                        style="width: 250px;font-family: 'Times New Roman', Times, serif;margin-left: 350px;">
                        <input matInput placeholder="Remarks" formControlName="remarks" autocomplete="off" id="ap-0312">
                    </mat-form-field>
                    <button type="button"
                        style="border-radius:40px;margin-left:25px;font-family: 'Times New Roman', Times, serif;margin-bottom: 0px;"
                        class="btn btn-outline-primary" (click)="preparePay()" id="ap-0313">
                        Prepare Payment</button>
                </form>
            </div>
        </mat-card>
    </div>

    <div *ngIf="paymentfileForm">
        <!-- <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;"> -->
        <h3>
            Payment File </h3>
        <form [formGroup]="PFSearchForm">
            <div class="search-auto-fit">
                <lib-vs-search-cmp id="matInput-size" [Outputtype]="searchvar" [SearchArr]="paysearch"
                    (dataoutput)="paymentsearch($event)" [ButtonArr]="paybutton" [ResetForm]="restfiled">
                </lib-vs-search-cmp>
            </div>

            <table>
                <div *ngIf="expand_Payfile" class="cus-filterSearchContainers">
                    <div class="cus-filterSearch">
                        <div>
                            <lib-vs-dynamicform-cmp id="matInput-size" [formGroup]="PFSearchForm"
                                [InputFields]="empdrop">
                            </lib-vs-dynamicform-cmp>
                        </div>
                        <div id="matInput-size">
                            <mat-form-field appearance="outline">
                                <mat-label>Invoice No</mat-label>
                                <input matInput formControlName="invoice_no" autocomplete="off" type="text"
                                    id="ap-0321">
                            </mat-form-field>
                        </div>
                        <div id="matInput-size">
                            <mat-form-field appearance="outline">
                                <mat-label>Invoice Amount</mat-label>
                                <input matInput formControlName="invoice_amount" autocomplete="off" type="number"
                                    id="ap-0322">
                            </mat-form-field>
                        </div>
                        <div class="cus-filterSearch-btnDiv">
                            <button class="btn btn-outline-primary" style="border-radius:40px" color="primary"
                                (click)="payment_reset()">
                                Reset
                            </button>
                            <div class="btn-align">
                                <button class="btn btn-outline-success" style="border-radius:40px" type="submit"
                                    (click)="PFSummarySearch($event)" color="primary">
                                    Apply
                                </button>
                                <button class="btn btn-outline-primary" style="border-radius:40px"
                                    (click)="payment_close()">
                                    Cancel
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </table>
            <!-- <div class="search-auto-fit">
                <div id="matInput-size">
                    <mat-form-field appearance="outline">
                        <mat-label>Invoice Header CR No</mat-label>
                        <input matInput formControlName="apinvoiceheader_crno" autocomplete="off" id="ap-0314">
                    </mat-form-field>
                </div> -->
            <!-- <td>
                                    <mat-form-field style="width:200px;margin-left: 50px;">
                                        <mat-label>Batch No</mat-label>
                                        <input matInput formControlName="batch_no" autocomplete="off" id="ap-0315">
                                    </mat-form-field>
                                </td> -->
            <!-- <div id="matInput-size">
                    <mat-form-field appearance="outline">
                        <mat-label>ECF Type</mat-label>
                        <mat-select formControlName="ecftype" id="ap-0316">
                            <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                {{type.text}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div id="matInput-size">
                    <button type="button" class="btn btn-outline-primary" matTooltip="Select Supplier"
                        matTooltipClass="custom-tooltipnew" data-toggle="modal" data-target="#ap-0044"
                        style="border-radius:40px;margin-bottom:20px" id="ap-0317"><i
                            class="fa fa-arrow-up"></i></button>&nbsp;
                    <mat-form-field appearance="outline" (click)="pfsuppliername()">
                        <mat-label>Supplier Name</mat-label>
                        <input #supplierInputs placeholder="Choose Supplier" matInput readonly
                            formControlName="supplier_id" [matAutocomplete]="supps" id="ap-0318">
                        <mat-autocomplete [panelWidth]="400" #supps="matAutocomplete" (opened)="PPsupplierScroll()"
                            [displayWith]="displayFnppSupplier">
                            <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                            <ng-container *ngIf="!isLoading">
                                <mat-option *ngFor="let supplier of ppsupplierList" [value]="supplier"
                                    matTooltip="{{supplier.name}}">{{supplier.name}}
                                </mat-option>
                            </ng-container>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>
                <div id="matInput-size">
                    <mat-form-field appearance="outline" (click)="getRaiserbranchpf()">
                        <mat-label>Raiser Branch</mat-label>
                        <input #raiserbrInput matInput formControlName="raiserbranch_id"
                            [matAutocomplete]="matraiserAutocomplete" id="ap-0319">
                        <mat-autocomplete [panelWidth]="400" #matraiserAutocomplete="matAutocomplete"
                            [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                            <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                            <ng-container *ngIf="!isLoading">
                                <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                    matTooltip="{{branch.code}}-{{branch.name}}">
                                    {{branch.code}}-{{branch.name}}
                                </mat-option>
                            </ng-container>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>
                <div id="matInput-size">
                    <mat-form-field appearance="outline" (click)="getraiserdropdownpf()">
                        <mat-label>Employee</mat-label>
                        <input #raiserInput matInput formControlName="raiser_name" [matAutocomplete]="raisertyperole"
                            placeholder="Choose Employee" id="ap-0320">
                        <mat-autocomplete [panelWidth]="400" #raisertyperole="matAutocomplete"
                            [displayWith]="displayFnraiserrole" (opened)="raiserScroll()">
                            <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                            <ng-container *ngIf="!isLoading">
                                <mat-option *ngFor="let data of Raiserlist" [value]="data"
                                    matTooltip="{{data.full_name}}">
                                    {{data.full_name}}
                                </mat-option>
                            </ng-container>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>
                <div id="matInput-size">
                    <mat-form-field appearance="outline">
                        <mat-label>Invoice No</mat-label>
                        <input matInput formControlName="invoice_no" autocomplete="off" type="text" id="ap-0321">
                    </mat-form-field>
                </div>
                <div id="matInput-size">
                    <mat-form-field appearance="outline">
                        <mat-label>Invoice Amount</mat-label>
                        <input matInput formControlName="invoice_amount" autocomplete="off" type="number" id="ap-0322">
                    </mat-form-field>
                </div> -->
            <!-- <div> -->
            <!-- <mat-form-field class="example-full-width" style="margin-left: 50px;">
                                            <mat-label>Is Original Invoice</mat-label>
                                            <mat-select  formControlName="is_originalinvoice"  id="ap-0323">
                                                <mat-option *ngFor="let type of yesnolist" [value]="type.id" matTooltip="{{type.text}}">
                                                    {{type.text}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field> -->
            <!-- <button class="btn btn-outline-primary" type="submit" style="border-radius:40px;" color="primary"
                        (click)="PFSummarySearch()" id="ap-0324"><i matTooltip="Search" class="fa fa-search"
                            aria-hidden="true"></i></button>
                    <button class="btn btn-outline-primary" type="button" style="border-radius:40px;margin-left: 10px;"
                        color="primary" (click)="resetpf()" id="ap-0325">Reset</button>
                </div> -->
            <!-- </div> -->
        </form>
        <!-- <h3>
            Payment File Summary </h3> -->
        <lib-vs-cbox-summary [SummaryDetails]="SummarypaymentData" [SummaryApiObj]="SummaryApipaymentObjNew"
            [FirstLastbtn]="true">
        </lib-vs-cbox-summary>
        <!-- <div  style="margin-top: 2%;margin-left: 21px; width: 98%;">
               
                <table class="table table-bordered scrolltable" fixed-header style="text-align:center;" > 
                    
                    <thead>
                        <tr class="table_header" fixed-header style="text-align: center;margin-left: 3%;"> -->
        <!-- <div class="table-responsive" id="ap-0009" style="margin-top: 1%;width: 95%;">
            <table class="table scrolltable table-bordered" style="text-align:center;">
                <thead fixed-header>
                    <tr class="table_header " fixed-header>
                        <th>S.No</th>
                        <th>Batch No</th>
                        <th>CR No</th>
                        <th>Invoice CR No</th>
                        <th>ECF Type</th>
                        <th>ECF Date</th>
                        <th>ECF Amount</th>
                        <th>Invoice No</th>
                        <th>Supplier</th>
                        <th>Invoice Date</th>
                        <th>Invoice Amount</th>
                        <th>Invoice Status</th>
                        <th>Select</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let lists of pfSummary; index as i" style="text-align: center;">
                        <td style=" text-align: center;"> {{(pfpresentpage - 1)*pfpagesize +i+1 }} </td>
                        <td>{{lists?.batchno}}</td>
                        <td>{{lists?.crno}}</td>
                        <td>{{lists?.apinvoiceheader_crno}}</td>
                        <td style="white-space:nowrap;">{{lists?.ecftype}}</td>
                        <td style="white-space:nowrap;">{{lists?.ecfdate | date:'dd-MMM-yyyy'}}</td>
                        <td style="text-align: right;">{{lists?.ecfamount|currency:'INR'}}</td>
                        <td>{{lists?.invoiceno}}</td>
                        <td>{{lists?.supplier_id?.name}} - {{lists?.supplier_id?.code}}</td>
                        <td style="white-space:nowrap;">{{lists?.invoicedate | date:'dd-MMM-yyyy'}}</td>
                        <td style="text-align: right;white-space:nowrap;">{{lists?.totalamount|currency:'INR'}}</td>
                        <td>{{lists?.apinvoiceheaderstatus}}</td>
                        <td>
                            <button mat-icon-button class="btn btn-outline-primary" style="margin-left: 1px;"
                                matTooltip="Click to Pay" (click)="pvnoget(lists)" id="ap-0326"> -->
        <!-- data-toggle="modal" data-target="#ap-0013" -->
        <!-- <mat-icon>paid</mat-icon>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
            <div *ngIf="pfSummary ?.length == 0" style="margin-left: 42%;">
                <h3>Sorry data not found!.. </h3>
            </div>
        </div> -->
        <!-- <div class="row" *ngIf="ispfsummarypage" style="width: 85%;">
            <div class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-220px;"> -->
        <!-- <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -82%;">
                        Total Count:{{getpftotalcount}}
                    </p>  -->
        <!-- </div> -->
        <!-- <div class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left:18%"> -->
        <!-- <button mat-icon-button [disabled]="has_pfpageprevious === false" color="primary" (click)="previousClickpf()" id="ap-0327">
                        <mat-icon>arrow_back</mat-icon>
                    </button> {{pfpresentpage}}
                    <button mat-icon-button [disabled]="has_pfpagenext === false" color="primary" (click)="nextClickpf()" id="ap-0328">
                        <mat-icon>arrow_forward</mat-icon>
                    </button> -->
        <!-- <mat-paginator (page)="handlepfPageEvent($event)" [length]="length_pf" [pageSize]="pageIndex"
                    [showFirstLastButtons]="showFirstLastButtons" [pageSizeOptions]="pageSizeOptions"
                    [pageIndex]="pageIndex_pf" [hidePageSize]="true" aria-label="Select page">
                </mat-paginator>
            </div> -->
        <!-- </div> -->
        <!-- </mat-card> -->
    </div>

    <div *ngIf="CommonSummaryForm">
        <!-- <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;"> -->

            <div class="ap-summary-header">
                <h3 class="summary-title">
                    Common AP Summary
                </h3>
                <div class="summary-actions">
                    <button class="circle-icon-btn-md" matTooltip="Reset"(click)="overallreset()">
                        <mat-icon >
                        refresh</mat-icon>
                    </button>
                   <button class="circle-icon-btn-md" (click)="commonRptDwnld()">
                       <mat-icon>download</mat-icon>
                   </button>
                </div>
            </div>
        <!-- <div>
            <form [formGroup]="commonForm"> -->
                <!-- <div class="search-auto-fit">
                    <lib-vs-search-cmp id="matInput-size" [Outputtype]="searchvar" [SearchArr]="commonapsearch"
                        Tooltip="true" (dataoutput)="commonsearch($event)" [ButtonArr]="commonbutton"
                        [ResetForm]="restfiled">
                    </lib-vs-search-cmp>
                </div> -->

                <!-- <table>
                    <div *ngIf="expand_Common" class="cus-filterSearchContainers">

                        <div class="cus-filterSearch">

                            <lib-vs-dynamicform-cmp id="matInput-size" [formGroup]="commonForm"
                                [InputFields]="common_Raise_branch"></lib-vs-dynamicform-cmp>
                            <lib-vs-dynamicform-cmp id="matInput-size" [formGroup]="commonForm"
                                [InputFields]="common_raise_emp"></lib-vs-dynamicform-cmp> -->
                            <!-- <mat-form-field  (click)="getRaiserbranch()" appearance="outline">

                                    <input #raiserbrInput matInput formControlName="raiserbranch_id"
                                        [matAutocomplete]="matraiserAutocomplete" placeholder="Raiser Branch" id="ap-0335">
                                    <mat-autocomplete [panelWidth]="250" #matraiserAutocomplete="matAutocomplete"
                                        [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                        <ng-container *ngIf="!isLoading">
                                            <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                                matTooltip="{{branch.code}}-{{branch.name}}">
                                                {{branch.code}}-{{branch.name}}
                                            </mat-option>
                                        </ng-container>
                                    </mat-autocomplete>
                                </mat-form-field> -->
                            <!-- <div id="matInput-size">
                                <mat-form-field   appearance="outline"  (click)="getraiserdropdown()">
                                    <mat-label>Employee</mat-label>
                                    <input #raiserInput matInput
                                        formControlName="raiser_name" [matAutocomplete]="raisertyperole" 
                                        placeholder="Choose Employee" id="ap-0336">
                                    <mat-autocomplete [panelWidth]="400" #raisertyperole="matAutocomplete"
                                        [displayWith]="displayFnraiserrole" (opened)="raiserScroll()">
                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                        <ng-container *ngIf="!isLoading">
                                            <mat-option *ngFor="let data of Raiserlist" [value]="data" matTooltip = "{{data.full_name}}">
                                                {{data.full_name}}
                                            </mat-option>
                                        </ng-container>
                                    </mat-autocomplete>
                                </mat-form-field>
                            </div> -->
                            <!-- <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Invoice No</mat-label>
                                    <input matInput formControlName="invoice_no" autocomplete="off" type="text"
                                        id="ap-0337">
                                </mat-form-field>
                            </div>
                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Invoice Amount</mat-label>
                                    <input matInput formControlName="invoice_amount" autocomplete="off" type="number"
                                        id="ap-0338">
                                </mat-form-field>
                            </div> -->

                            <!-- <div id="matInput-size">
                                <mat-form-field  appearance="outline">
                                    <mat-label>From Date</mat-label>
                                    <input matInput readonly [matDatepicker]="picker1" placeholder="From Date"
                                        formControlName="from_date" id="ap-0339">
                                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                    <mat-datepicker #picker1></mat-datepicker>
                                </mat-form-field>
                            </div>
                            
                            <div id="matInput-size">
                                <mat-form-field  appearance="outline">
                                    <mat-label>To Date</mat-label>
                                    <input matInput readonly [matDatepicker]="picker2" placeholder="To Date"
                                        formControlName="to_date" id="ap-0340">
                                    <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                    <mat-datepicker #picker2></mat-datepicker>
                                </mat-form-field>
                            </div>    -->
                            
                            <!-- <div id="matInput-size"> -->
                            <!-- <mat-form-field appearance="outline">
                                <mat-select placeholder="Invoice Status" formControlName="invoice_status"
                                 [disabled]="commonForm.value.apinvoiceheaderstatus_id != '' " id="ap-0341">
                                    <mat-option *ngFor="let st of commonStatusList" [value]="st.id">
                                        {{st.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field> -->
                            <!-- </div>    -->
                            <!-- <div id="matInput-size">
                                <mat-form-field  appearance="outline">
                                    <mat-select placeholder="Report Status" formControlName="apinvoiceheaderstatus_id"
                                    [disabled]="commonForm.value.invoice_status != '' " id="ap-0342">
                                        <mat-option *ngFor="let st of ecfStatusList2" [value]="st.id">
                                            {{st.text}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div> -->
                            <!-- <div
                                [ngStyle]="{'pointer-events': commonForm.value.invoice_status !== '' ? 'none' : 'auto', 'opacity': commonForm.value.invoice_status !== '' ? '0.6' : '1'}">

                                <lib-vs-optiondd-cmp id="matInput-size" [formGroup]="commonForm"
                                    [InputFields]="commonstatusdroptype">
                                </lib-vs-optiondd-cmp>
                            </div> -->

                            <!-- <div class="npm-mat-edit-expand">
                                <lib-vs-sep-dates-cmp id="matInput-size" [DateInput]="common_frtodate"
                                    [formGroup]="commonForm">
                                </lib-vs-sep-dates-cmp>
                            </div>

                            <div
                                [ngStyle]="{'pointer-events': commonForm.value.apinvoiceheaderstatus_id != '' ? 'none' : 'auto', 'opacity': commonForm.value.apinvoiceheaderstatus_id != '' ? '0.6' : '1'}">
                                <lib-vs-optiondd-cmp id="matInput-size" [formGroup]="commonForm"
                                    [InputFields]="commoninvoicestatusdroptype"></lib-vs-optiondd-cmp>
                            </div>
                            
                            <div class="cus-filterSearch-btnDiv">
                                <button class="btn btn-outline-primary" style="border-radius:40px" color="primary"
                                    (click)="resetcommonap($event)">
                                    Reset
                                </button>

                                <div class="btn-align">
                                    <button class="btn btn-outline-success" style="border-radius:40px" type="submit"
                                        (click)="commonSummarySearch($event)" color="primary">
                                        Apply
                                    </button>
                                    <button class="btn btn-outline-primary" style="border-radius:40px"
                                        (click)="common_close()">
                                        Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>


                </table> -->
                <!-- <table> -->
                <!-- <div style="margin-left: 10px;">
                                <tr>
                                <td>
                                    <mat-form-field style="width:170px;">
                                        <mat-label>CR No</mat-label>
                                        <input matInput formControlName="crno" autocomplete="off" id="ap-0329">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width:170px;margin-left: 10px;">
                                   
                                            <mat-label>Invoice Header CR No</mat-label>
                                            <input matInput formControlName="invoiceheader_crno" autocomplete="off" id="ap-0330">
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field style="width:170px;margin-left: 10px;">
                                            <mat-select placeholder="ECF Type" formControlName="aptype" id="ap-0331">
                                                <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                                    {{type.text}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </td>
                                    <td>                      -->
                <!-- <mat-form-field style="width:200px;margin-left: 50px;">
                                            <mat-label>Batch No</mat-label>
                                            <input matInput formControlName="batch_no" autocomplete="off" id="ap-0332">
                                        </mat-form-field> -->
                <!-- <button type="button" class="btn btn-outline-primary" matTooltip="Select Supplier" matTooltipClass="custom-tooltipnew" 
                                        data-toggle="modal" data-target="#ap-0044"
                                        style="border-radius:40px;margin-left: 15px;" id="ap-0333"><span class="fa fa-arrow-up"></span></button>  
                                        <mat-form-field style="width: 155px;margin-left: 5px; " (click)="suppliername_common()">
                              
                                            <mat-label>Supplier Name</mat-label>
                                            <input #supplierInput  placeholder="Choose Supplier" matInput readonly
                                            formControlName="supplier_id" [matAutocomplete]="supp"  id="ap-0334">
                                            <mat-autocomplete [panelWidth]="250" #supp="matAutocomplete" (opened)="supplierScroll()"
                                            [displayWith]="displayFnSupplier">
                                            <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let supplier of supplierList"
                                                [value]="supplier" matTooltip="{{supplier.name}}">{{supplier.name}}
                                                </mat-option>
                                            </ng-container>
                                         </mat-autocomplete>
                                       
                                    </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field style="width: 170px; margin-left: 10px; " (click)="getRaiserbranch()">
        
                                            <input #raiserbrInput matInput formControlName="raiserbranch_id"
                                                [matAutocomplete]="matraiserAutocomplete" placeholder="Raiser Branch" id="ap-0335">
                                            <mat-autocomplete [panelWidth]="250" #matraiserAutocomplete="matAutocomplete"
                                                [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                                <ng-container *ngIf="!isLoading">
                                                    <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                                        matTooltip="{{branch.code}}-{{branch.name}}">
                                                        {{branch.code}}-{{branch.name}}
                                                    </mat-option>
                                                </ng-container>
                                            </mat-autocomplete>
                                        </mat-form-field>
                                        
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td>
                                        <mat-form-field  style="width:170px;"  (click)="getraiserdropdown()">
                                            <mat-label>Employee</mat-label>
                                            <input #raiserInput matInput
                                                formControlName="raiser_name" [matAutocomplete]="raisertyperole" 
                                                placeholder="Choose Employee" id="ap-0336">
                                            <mat-autocomplete [panelWidth]="400" #raisertyperole="matAutocomplete"
                                                [displayWith]="displayFnraiserrole" (opened)="raiserScroll()">
                                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                                <ng-container *ngIf="!isLoading">
                                                    <mat-option *ngFor="let data of Raiserlist" [value]="data" matTooltip = "{{data.full_name}}">
                                                        {{data.full_name}}
                                                    </mat-option>
                                                </ng-container>
                                            </mat-autocomplete>
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field style="width: 170px;margin-left: 10px; ">
                                            <mat-label>Invoice No</mat-label>
                                            <input matInput formControlName="invoice_no" autocomplete="off" type="text" id="ap-0337">
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field style="width: 170px;margin-left: 10px; ">
                                            <mat-label>Invoice Amount</mat-label>
                                            <input matInput formControlName="invoice_amount" autocomplete="off" type="number" id="ap-0338">
                                        </mat-form-field>
                                    </td>        
                                    <td>
                                        <mat-form-field style="width: 170px;margin-left: 50px;">
                                            <mat-label>From Date</mat-label>
                                            <input matInput readonly [matDatepicker]="picker1" placeholder="From Date"
                                                formControlName="from_date" id="ap-0339">
                                            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                            <mat-datepicker #picker1></mat-datepicker>
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field style="width: 170px;margin-left: 10px;">
                                            <mat-label>To Date</mat-label>
                                            <input matInput readonly [matDatepicker]="picker2" placeholder="To Date"
                                                formControlName="to_date" id="ap-0340">
                                            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                            <mat-datepicker #picker2></mat-datepicker>
                                        </mat-form-field>
                                    </td> 
                                </tr>
                                <tr >   
                                    <td style="width: 170px;">
                                    <mat-form-field style="width:170px;">
                                        <mat-select placeholder="Invoice Status" formControlName="invoice_status"
                                         [disabled]="commonForm.value.apinvoiceheaderstatus_id != '' " id="ap-0341">
                                            <mat-option *ngFor="let st of commonStatusList" [value]="st.id">
                                                {{st.text}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    </td>   
                                    <td style="width: 170px;" >
                                        <mat-form-field style="width:170px;margin-left: 10px;">
                                            <mat-select placeholder="Report Status" formControlName="apinvoiceheaderstatus_id"
                                            [disabled]="commonForm.value.invoice_status != '' " id="ap-0342">
                                                <mat-option *ngFor="let st of ecfStatusList2" [value]="st.id">
                                                    {{st.text}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </td>
                                    <td colspan="1"></td>   
                                    <td >
                                        <button class="btn btn-outline-primary" type="button"
                                        style="border-radius:40px;margin-left: 50px;" 
                                       color="primary" (click)="commonRptDwnld()" id="ap-0343">Report Download</button>
                                    </td>
                                    <td>
                                        <button class="btn btn-outline-primary" type="submit"
                                        style="border-radius:40px;margin-left: 10px;" color="primary"
                                        (click)="commonSummarySearch('',1)" id="ap-0344"><i matTooltip="Search" class="fa fa-search"
                                            aria-hidden="true"></i></button>
                                        <button class="btn btn-outline-primary" type="button"
                                        style="border-radius:40px;margin-left: 10px;"
                                       color="primary" (click)="resetcommon()" id="ap-0345">Reset</button>
                                    </td>
                                </tr> -->
                <!-- <tr> -->

                <!-- <td>
                                        <mat-form-field style="width: 200px; margin-left: 50px;">
                                            <mat-label>Minimum Amount</mat-label>
                                            <input matInput formControlName="minamt" autocomplete="off" type="number" id="ap-0346">
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field style="width: 200px; margin-left: 50px; ">
                                            <mat-label>Maximum Amount</mat-label>
                                            <input matInput formControlName="maxamt" autocomplete="off" type="number" id="ap-0347">
                                        </mat-form-field>
                                    </td> -->
                <!-- </tr> -->
                <!-- <tr>
                                    <td>
                                        <mat-form-field style="width: 200px; margin-left: 20px; ">
                                        <mat-select placeholder="Invoice Header Status" formControlName="apinvoiceheaderstatus_id" id="ap-0348">
                                            <mat-option *ngFor="let type of ecfStatusList" [value]="type.id" matTooltip="{{type.text}}">
                                                {{type.text}}
                                            </mat-option>
                                        </mat-select>
                                        </mat-form-field>
                                    </td> -->

                <!-- <td>
               
                                        <mat-form-field style="width: 200px;margin-left: 50px;">
                                            <mat-label>Is Original Invoice</mat-label>
                                            <mat-select  formControlName="is_originalinvoice"  id="ap-0349">
                                                <mat-option *ngFor="let type of yesnolist" [value]="type.id" matTooltip="{{type.text}}">
                                                    {{type.text}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </td> -->

                <!-- </tr> -->
                <!-- </div>
                        </table> -->
            <!-- </form>
        </div> -->

        <!-- <div  style="margin-top: 2%;margin-left: 20px; width: 77%;">
            <table class="table table-bordered  padsize" style="text-align:center;" >	
                
                <thead>
          s          <tr class="table_header tableset " style="text-align: center;margin-left: 3%;">

             -->
        <!-- <h3>
            Common AP Summary
        </h3> -->

        <lib-vs-cbox-summary [SummaryDetails]="SummarycommonData" [SummaryApiObj]="SummaryApicommonObjNew"
            [FirstLastbtn]="true" #cboxSummary (dataEvent)="apcommonsummarydata($event)"></lib-vs-cbox-summary>

        <!-- <div class="table-responsive" id="ap-0010"  style="margin-top: 1%;margin-left: 10px; width: 95%;">
                <table class="table scrolltable table-bordered"  style="text-align:center;" >	        
                    <thead fixed-header>
                     <tr class="table_header " fixed-header>
 
                                <th>S.No</th>
                                <th> CR No</th>
                                <th>Invoice CR No</th>
                                <th>ECF Type</th> -->
        <!-- <th>Batch No</th>
                                <th>Batch Status</th> -->
        <!-- <th>Supplier</th>
                                <th>Raiser</th>
                                <th>Raiser Branch</th>
                                <th>Invoice No</th>
                                <th>Invoice Amount</th>
                                <th>Invoice Date</th>
                                <th>Invoice Status</th>
                                <th>View Entry</th>
                                <th>Download Covernote</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let lists of commonSummary; index as i" style="text-align: center;">
                                <td  style=" text-align: center;"> {{(commonpresentpage - 1)*pagesizecommon +i+1 }} </td>
                                <td>{{lists?.crno}}</td>
                                <td><p style="cursor: pointer;color: #3684BF;" (click)="linkView(lists,'apcommon')">{{lists?.apinvoiceheader_crno}}</p></td>
                                <td style="white-space: nowrap;">{{lists?.aptype.text}}</td> -->
        <!-- <td>{{lists?.batch_no}}</td>
                                <td>{{lists?.batch_status?.text}}</td> -->
        <!-- <td style="width: 250px;">{{lists?.supplier_data?.name}} - {{lists?.supplier_data?.code}}</td>
                                <td>{{lists?.raiser_name}}</td>
                                <td style="width: 250px;">{{lists?.raiserbranch_branch?.name}} - {{lists?.raiserbranch_branch?.code  }}</td>
                                <td>{{lists?.invoice_no }}</td>
                                <td style="text-align: right;">{{lists?.totalamount|currency:'INR'}}</td>
                                <td style="white-space: nowrap;">{{lists?.invoicedate | date:'dd-MMM-yyyy'}}</td>
                                <td>{{lists?.apinvoicehdr_status?.text}}</td>
                                <td *ngIf="lists?.apinvoicehdr_status?.id == 9 || lists?.apinvoicehdr_status?.id == 13 || lists?.apinvoicehdr_status?.id == 15 ">  -->
        <!-- lists?.apinvoicehdr_status?.id == 15 || lists?.apinvoicehdr_status?.id == 27 || lists?.apinvoicehdr_status?.id == 28 || 
                                lists?.apinvoicehdr_status?.id == 29 || lists?.apinvoicehdr_status?.id == 38 || lists?.apinvoicehdr_status?.id == 39"> -->
        <!-- <span matTooltip="view entry" class=" fa fa-eye create "
                                    style="color: green;cursor: pointer;padding:10px" (click)="CommonViewEntry(lists?.apinvoiceheader_crno,1)"></span>
                                </td> -->
        <!-- data-toggle="modal" data-target="#ap-0043" -->
        <!-- <td  *ngIf="lists?.apinvoicehdr_status?.id != 9 && lists?.apinvoicehdr_status?.id != 13 && lists?.apinvoicehdr_status?.id != 15"> -</td> -->
        <!-- lists?.apinvoicehdr_status?.id != 15 && lists?.apinvoicehdr_status?.id != 27 && lists?.apinvoicehdr_status?.id != 28 && 
                                lists?.apinvoicehdr_status?.id != 29 && lists?.apinvoicehdr_status?.id != 38 && lists?.apinvoicehdr_status?.id != 39"> -->
        <!-- <td style="width: 20px;">
                                    <button type="button" class="btn btn-outline-success"
                                    (click)="coverNotedownload(lists.apheader_id,lists.aptype_id)"
                                    style="border-radius: 40px;margin-left: 5px;;margin-top: 15px"  id="ap-0350">
                                    <span class="fa fa-download" matTooltip="Download CoverNote" matTooltipClass="custom-tooltipnew">
                                    </span>
                                    </button>
                                </td>
                        <td> -->
        <!-- <span matTooltip="view" class=" fa fa-eye create "
                            style="color: green;cursor: pointer;padding:10px"  (click)="commonView(lists)"></span> -->
        <!-- <button mat-icon-button class="btn btn-outline-success" style="margin-left: 1px;" matTooltip="Click to Unlock"  
                                (click)="unlock(lists.id)"
                                >
                                 <mat-icon>lock_open</mat-icon>
                            </button>
                        </td>
                    </tr>
                </tbody>
        </table>
        
        <div *ngIf="commonSummary ?.length == 0" style="margin-left: 42%;">
            <h3 >Sorry data not found!.. </h3>
        </div>
    </div> -->
        <!-- <div class="row" *ngIf="iscommonsummarypage" style="width:85%">
            <div  class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;"> -->
        <!-- <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -85%;">
                    Total Count:{{getcommontotalcount}}
                </p>  -->
        <!-- </div>
            <div  class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left: 18%"> -->
        <!-- <button mat-icon-button [disabled]="has_commonpageprevious === false" color="primary" (click)="previousClickcommon()" id="ap-0351">
                    <mat-icon>arrow_back</mat-icon>
                </button> {{commonpresentpage}}
                <button mat-icon-button [disabled]="has_commonpagenext === false" color="primary" (click)="nextClickcommon()" id="ap-0352">
                    <mat-icon>arrow_forward</mat-icon>
                </button> -->
        <!-- <mat-paginator  
                (page)="handleCommonSearchPageEvent($event)"
                [length]="length_common"
                [pageSize]="pageSize_common"
                [showFirstLastButtons]="showFirstLastButtons"
                [pageSizeOptions]="pageSizeOptions"
                [pageIndex]="pageIndex_common"
                [hidePageSize]="true"
                aria-label="Select page">
                </mat-paginator>
            </div>
            </div>
            </mat-card> -->
    </div>



    <div *ngIf="commonInvViewForm">
        <div>
            <!-- <h2 style="color:black;font-size:20px;font-family:'Times New Roman';font-weight:bold;margin-left: 10px;" *ngIf="showinvoicediv">Invoice Header ({{crno}})  
                        <button type="button" class="btn btn-outline-primary" style="margin-left: 30px;border-radius:50px; font-size:medium;"
                        data-toggle="modal" data-target="#ap-0021" (click)="getquestion()"  *ngIf="backdata == 'apapproverview' " id="ap-0353">
                        Audit Checklist                                            </button> 
                        <button type="button" class="btn btn-outline-primary" style="margin-left: 30px;border-radius:50px; font-size:medium;"
                        data-toggle="modal" data-target="#ap-0019" (click)="getBounced()"  *ngIf="backdata != 'apapproverview' " id="ap-0354">
                        Audit Checklist  </button> 
                        <button type="button" class="btn btn-outline-primary" style="margin-left: 30px;border-radius:50px; font-size:medium;"
                         (click)="getChangeHistory()" id="ap-0355">
                        Change History  </button>  -->
            <!-- data-toggle="modal" data-target="#ap-0026" -->
            <!-- <button type="button" class="btn btn-outline-primary" style="border-radius:50px;height: 40px; margin-left : 30px;font-size: medium;"
                            data-toggle="modal" data-target="#ap-0014" (click)="viewtrn()" id="ap-0356">View Transaction
                            </button> 
                        <button type="button" class="btn btn-outline-primary" style="border-radius:50px;height: 40px; margin-left : 30px;font-size: medium;"
                            *ngIf="this.isCapitalizedStat == 3 && this.backdata=='apcommon'" (click)="repush()" id="ap-0357">Re Push
                                </button> 
                        <button  *ngIf="ecftypeid == 4 && invhdrstatus=='PAID'" type="button" class="btn btn-outline-primary" style="border-radius:50px;height: 40px; margin-left : 12px;font-size: medium;"
                             data-toggle="modal" data-target="#ap-0016" id="ap-0358">Liquidation Details
                                </button> 
                        <button  type="button" *ngIf="backdata == 'apapproverview'" class="btn btn-outline-primary" style="margin-left: 12px;border-radius:50px;font-size: medium;"
                                data-toggle="modal" data-target="#ap-0018" (click)="getdedup()"  id="ap-0359">Dedupe Check
                                </button> 
                    
                    </h2> -->
            <div class="header-adjust" *ngIf="showinvoicediv">
                <h3>
                    <i class="fa fa-arrow-left" aria-hidden="true" (click)="commonbackview()"></i>&nbsp;Invoice Header
                    ({{ crno }})
                </h3>

                <div class="button-div">
                    <button type="button" class="btn btn-outline-primary" style="border-radius:50px; font-size:medium;"
                        data-toggle="modal" (click)="getquestion()" *ngIf="backdata == 'apapproverview' " id="ap-0353">
                        Audit Checklist </button>
                    <!-- <button type="button" class="btn btn-outline-primary" style="border-radius:50px; font-size:medium;"
                          data-toggle="modal" (click)="getBounced()"  *ngIf="backdata != 'apapproverview' " id="ap-0354">
                          Audit Checklist  </button>  -->
                    <button type="button" class="btn btn-outline-primary" style="border-radius:50px; font-size:medium;"
                        data-toggle="modal" (click)="auditchecklistsummary()" *ngIf="backdata != 'apapproverview' "
                        id="ap-0354">
                        Audit Checklist </button>
                    <button type="button" class="btn btn-outline-primary" style="border-radius:50px; font-size:medium;"
                        data-toggle="modal" (click)="getChangeHistory()" id="ap-0355">
                        Change History </button>
                    <!-- <button type="button" class="btn btn-outline-primary" style="border-radius:50px;height: 40px;font-size: medium;"
                              data-toggle="modal" (click)="viewtrn()" id="ap-0356">View Transaction
                              </button>  -->
                    <button type="button" class="btn btn-outline-primary"
                        style="border-radius:50px;height: 40px;font-size: medium;"
                        *ngIf="this.isCapitalizedStat == 3 && this.backdata=='apcommon'" (click)="repush()"
                        id="ap-0357">Re Push
                    </button>
                    <button *ngIf="ecftypeid == 4 && invhdrstatus=='PAID'" type="button" class="btn btn-outline-primary"
                        style="border-radius:50px;height: 40px; margin-left : 12px;font-size: medium;"
                        (click)="getliquid_det()" id="ap-0358">
                        <!-- data-toggle="modal" data-target="#ap-0016" -->
                        Liquidation Details
                    </button>
                    <button type="button" *ngIf="backdata == 'apapproverview'" class="btn btn-outline-primary"
                        style="border-radius:50px;font-size: medium;" (click)="getdedup()" id="ap-0359">
                        <!-- data-toggle="modal" data-target="#ap-0018" -->
                        Dedupe Check
                    </button>
                    <!-- <div> -->
                    <button *ngIf="backdata == 'bounceview'" style="border-radius:40px;" type="button"
                        class="btn btn-outline-danger" (click)="bounceApprovePopup('reg')" id="ap-0384" #closeaddpopup>
                        <!-- data-toggle="modal"
                                data-target="#approverreject" -->
                        Reject
                    </button>
                    <button *ngIf="backdata == 'bounceview'" style="border-radius:40px;" type="button"
                        class="btn btn-outline-success" id="ap-0385" (click)="bounceApprovePopup('rep')" #closeaddpopup>
                        ReProcess
                    </button>
                    <!-- </div>  -->
                </div>
            </div>

            <div class="modal fade" id="approverreject" tabindex="-1" aria-labelledby="exampleModalLongTitle"
                aria-hidden="true" role="dialog">
                <div class="modal-dialog modal-md">
                    <div class="modal-content" style="width:550px">
                        <div class="modal-header">
                            <h3 class="modal-title mb-0"> {{popup_heading}} Submit </h3>
                            <button type="button" class="close" #closedbutton data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>

                        <div class="modal-body">
                            <div *ngIf="backdata != 'apcommon' && backdata != 'apapproverview'">
                                <form [formGroup]="APapprovesubmitform">
                                    <div style="display:flex">
                                        <div *ngIf="backdata != 'aprejectview'" id="matInput-size">
                                            <mat-form-field appearance="outline">
                                                <mat-label>Remarks</mat-label>
                                                <input matInput placeholder="Remarks" formControlName="remarks"
                                                    autocomplete="off" required id="ap-0380">
                                            </mat-form-field>
                                        </div>
                                        <div style="border:0px" *ngIf="backdata == 'bounceview'">
                                            <input #fileInput id="ap-0011" type="file" multiple style="width: 108px;"
                                                hidden (change)="uploaddata($event)">

                                            <i (click)="fileInput.click()" class="fa fa-cloud-upload"
                                                matTooltip="Upload file" aria-hidden="true"
                                                style="font-size: 25px;color: blue;margin-left: 10px;margin-top: 10px;"></i>
                                        </div>
                                        <div *ngIf="backdata == 'bounceview' && valid_arr?.length != 0">
                                            <i (click)=" attachpopup()" matTooltip="view" class=" fa fa-eye create "
                                                data-toggle="modal"
                                                style="cursor: pointer;color:blue;margin-left: 10px;margin-top:15px"></i>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <button *ngIf="(backdata == 'bounceview') && submit_btn == 1" type="button"
                                style="border-radius: 40px" class="btn btn-outline-success" (click)="apreject()"
                                id="ap-0384">
                                Submit
                            </button>
                            <button *ngIf="(backdata == 'bounceview') && submit_btn == 2" type="button"
                                style="border-radius: 40px" class="btn btn-outline-success" (click)="apreprocess()"
                                id="ap-0385">
                                Submit</button>
                            <button type="button" class="btn btn-outline-primary" data-dismiss="modal"
                                style="border-radius: 40px" id="ap-0386">
                                Back
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div style="display: flex;align-items: center;justify-content: flex-end;margin-top: 10px;"
                *ngIf="showinvoicediv">
                <i class="fa fa-clock-o" matTooltip="View Transaction" style="font-size: 28px; cursor: pointer"
                    aria-hidden="true" id="ap-0356" (click)="viewtrn()"></i>
            </div>

            <div *ngIf="showinvoicediv">

                <!-- <form [formGroup]="frmInvHdr">  
                            <table>
                            <div>
                            <tr>
                            <td *ngIf="backdata != 'bounceview' && backdata != 'apapproverview'">
                                <mat-form-field>
                                    <input type="text" matInput formControlName="rsrName" readonly placeholder="Employee" id="ap-0360">
                                    <mat-label>Employee</mat-label>
                                </mat-form-field>
                            </td>
                            
                            <td>
                                <mat-form-field *ngIf="backdata != 'bounceview' && backdata != 'apapproverview'" style="margin-left: 50px;">
                                    <input type="text" matInput formControlName="rsrBranch" readonly placeholder="Employee Branch" id="ap-0361">
                                    <mat-label>Employee Branch</mat-label>
                                </mat-form-field>
                                <mat-form-field *ngIf="backdata == 'bounceview' || backdata == 'apapproverview'">
                                    <input type="text" matInput formControlName="rsrBranch" readonly placeholder="Employee Branch" id="ap-0362">
                                    <mat-label>Employee Branch</mat-label>
                                </mat-form-field>
                            </td> 
                            <td *ngIf="payto_id =='S'" >
                                <mat-form-field style="margin-left: 50px;">
                                    <input type="text" matInput formControlName="supplier" readonly placeholder="Supplier Name" id="ap-0363">
                                    <mat-label>Supplier Name</mat-label>
                                </mat-form-field>
                            </td>
                            <td >
                                <mat-form-field style="margin-left: 50px;" *ngIf="backdata != 'bounceview'  && backdata != 'apapproverview' ">
                                    <input type="text" matInput formControlName="status" readonly placeholder="Status" id="ap-0364">
                                    <mat-label>Status</mat-label>
                                </mat-form-field>
                            </td> 
                            <td></td>
                            </tr>
                            <tr>
                            <td *ngIf="ecftypeid != 4">
                                <mat-form-field>
                                    <input type="text" matInput formControlName="gst" readonly placeholder="GST Applicable" id="ap-0365">
                                    <mat-label>GST Applicable</mat-label>
                                </mat-form-field>
                                            </td>
                                            <td *ngIf="ecftypeid == 4"></td>
                                            <td></td>
                                            <td colspan="2">
                                                <button type="button" class="btn btn-outline-primary" style="margin-left: 30px;border-radius:50px; font-size:medium;"
                                                data-toggle="modal" data-target="#ap-0021" (click)="getquestion()"  *ngIf="backdata == 'apapproverview' " id="ap-0366">
                                                Audit Checklist                                            </button> 
                                                <button type="button" class="btn btn-outline-primary" style="margin-left: 30px;border-radius:50px; font-size:medium;"
                                                data-toggle="modal" data-target="#ap-0019" (click)="getBounced()"  *ngIf="backdata != 'apapproverview' " id="ap-0367">
                                                Audit Checklist  </button> 
                                                <button type="button" class="btn btn-outline-primary" style="margin-left: 30px;border-radius:50px; font-size:medium;"
                                                data-toggle="modal" data-target="#ap-0026" (click)="getChangeHistory()" id="ap-0368">
                                                Change History  </button> 
                                                <button type="button" class="btn btn-outline-primary" style="border-radius:50px;height: 40px; margin-left : 30px;font-size: medium;"
                                                    data-toggle="modal" data-target="#ap-0014" (click)="viewtrn()" id="ap-0369">View Transaction
                                                    </button> 
                                                <button type="button" class="btn btn-outline-primary" style="border-radius:50px;height: 40px; margin-left : 30px;font-size: medium;"
                                                    *ngIf="this.isCapitalizedStat == 3 && this.backdata=='apcommon'" (click)="repush()" id="ap-0370">Re Push
                                                        </button> 
                                            </td> 
                                            <td >
                                            </td>  
                                            <td ></td> 
                        </tr>     
                        </div>  
                        </table>
                        </form> -->

                <!-- <lib-vs-cbox-summary
                        [SummaryDetails]="SummarycommoninvoiceapData"
                        [SummaryApiObj]="SummaryApicommoninvoceapObjNew"
                        [FirstLastbtn]="true"
                      ></lib-vs-cbox-summary>  -->
                <!-- <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                    <table class="table" fixed-header>
                        <thead class="table_header">
                            <tr>

                                <th>S.No</th>
                                <th style="width:20%;">Invoice CR.No</th>
                                <th>GST Applicable</th>
                                <th *ngIf="this.ecftypeid == 2 || this.payto_id == 'S' || this.ecftypeid == 14">Supplier
                                    Name</th>
                                <th *ngIf="this.ecftypeid == 2 || this.payto_id == 'S' || this.ecftypeid == 14">Supplier
                                    GST No</th>
                                <th *ngIf="this.ecftypeid == 2 || this.payto_id == 'S'  || this.ecftypeid == 14">
                                    Supplier State</th>
                                <th>Place Of Supply</th>
                                <th *ngIf="this.payto_id != 'E'">Invoice No</th>
                                <th *ngIf="this.ecftypeid == 7">Credit Ref No</th>
                                <th *ngIf="this.payto_id != 'E'">Invoice Date</th>
                                <th>Taxable Amount</th>
                                <th *ngIf="this.ecftypeid == 2 ">Tax Amount</th>
                                <th>Total Amount</th>
                                <th>Physical Verification</th>
                                <th>Is Recurring</th>
                                <th>Recurring Type</th>
                                <th *ngIf="headerdata[0]?.servicetype?.id ==2">Recurring Month</th>
                                <th *ngIf="headerdata[0]?.servicetype?.id ==3">Recurring From</th>
                                <th *ngIf="headerdata[0]?.servicetype?.id ==3">Recurring To</th>
                                <th>Invoice Status</th>
                                <th>Attachments</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let dtl of headerdata; index as i">
                                <td>{{i+1}}</td>
                                <td>{{dtl?.apinvoiceheader_crno}}</td>
                                <td *ngIf="dtl?.invoicegst =='Y'">Yes
                                </td>
                                <td *ngIf="dtl?.invoicegst =='N'">No
                                </td>
                                <td
                                    *ngIf="this.ecftypeid == 2 || this.payto_id == 'S' || this.ecftypeid == 14">
                                    {{dtl?.supplier_id?.name}}</td>
                                <td
                                    *ngIf="this.ecftypeid == 2 || this.payto_id == 'S' || this.ecftypeid == 14">
                                    {{dtl?.supplier_id?.gstno}}</td>
                                <td
                                    *ngIf="this.ecftypeid == 2 || this.payto_id == 'S'  || this.ecftypeid == 14">
                                    {{dtl?.supplierstate_id?.name}}
                                </td>
                                <td >
                                    {{dtl?.place_of_supply?.code}}-{{dtl?.place_of_supply?.name}}</td>
                                <td *ngIf="this.payto_id != 'E'">{{dtl?.invoiceno}}</td>
                                <td *ngIf="this.ecftypeid == 7">{{dtl?.credit_refno}}
                                </td>
                                <td  *ngIf="this.payto_id != 'E'">
                                    <div style="width: 130px;overflow:auto;color: red;" *ngIf="dtl?.highlight =='YES'">
                                        More than six month</div>{{dtl?.invoicedate| date:'dd-MMM-yyyy'}}
                                </td>
                                <td>{{dtl?.invoiceamount|
                                    currency:'INR'}}</td>
                                <td *ngIf="this.ecftypeid == 2 ">
                                    {{dtl?.taxamount| currency:'INR'}}</td>
                                <td>{{dtl?.totalamount|
                                    currency:'INR'}}</td>
                                <td>{{dtl?.is_originalinvoice?.text}}</td>
                                <td>{{dtl?.is_recur?.text}}</td>
                                <td>{{dtl?.servicetype?.text}}</td>
                                <td *ngIf="headerdata[0]?.servicetype?.id ==2 || headerdata[0]?.servicetype?.id ==3"
                                  >{{dtl?.recur_fromdate | date:'dd-MMM-yyyy'}}</td>
                                <td *ngIf="headerdata[0]?.servicetype?.id ==3" style="vertical-align:middle;">
                                    {{dtl?.recur_todate | date:'dd-MMM-yyyy'}}</td>
                                <td>{{dtl?.apinvoiceheader_status?.text}}</td>
                                <td>
                                    <i matTooltip="view" class=" fa fa-eye create " matTooltip="View File"
                                        style="color: blue;cursor: pointer;" (click)="filefun()"
                                        data-toggle="modal"></i>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div *ngIf="headerdata?.length == 0" style="margin-left: 42%;">
                    <h3>Sorry data not found!.. </h3>
                </div> -->

                
                <mat-accordion>
                    <mat-expansion-panel [expanded]="true" class="expansion-conatiner">
                        <mat-expansion-panel-header>
                            <!-- <h3 class="component-title ">Tour</h3> -->
                            <!-- <h3 class="expansion-title mb-0">Invoice Header</h3> -->
                        </mat-expansion-panel-header>
                        <div class="expansition-div">
                            <div>
                                <div class="card-container">
                                    <div class="card-view">
                                        <div class="card-point">
                                            <h4>Employee</h4>
                                            <p>{{ this.Emppanel }}</p>
                                        </div>
                                        <div class="card-point">
                                            <h4>Invoice No</h4>
                                            <p>{{ this.InvNopanel }}</p>
                                        </div>
                                        <div class="card-point">
                                            <h4>Branch Name</h4>
                                            <p>{{ this.BranchName }}</p>
                                        </div>
                                        <div class="card-point">
                                            <h4>Branch GST</h4>
                                            <p>{{ this.BranchGSTpanel }}</p>
                                        </div>
                                        <div *ngIf="this.headerdata[0]?.pmd_data?.location != undefined">
                                            <h4>PMD Location</h4>
                                            <p>{{ this.Pmdpanel }}</p>
                                        </div>
                                        <div class="card-point">
                                            <h4>Invoice Date</h4>
                                            <p>{{ this.InvDatepanel }}</p>
                                        </div>
                                        <div class="card-point">
                                            <h4>Invoice Amount</h4>
                                            <p>{{ this.InvAmtpanel }}</p>
                                        </div>
                                        <div class="card-point">
                                            <h4>Taxable Amount</h4>
                                            <p>{{ this.TaxableAmtpanel }}</p>
                                        </div>
                                        <div class="card-point">
                                            <h4>Invoice Status</h4>
                                            <p>{{ this.Statuspanel }}</p>
                                        </div>
                                        <!-- </div>
                                  </div> -->
                                        <!-- </mat-expansion-panel> -->
                                        <!-- </mat-accordion> -->
                                        <!-- <mat-accordion> -->
                                        <!-- <mat-expansion-panel [expanded]="true" class="expansion-conatiner"> -->
                                        <!-- <mat-expansion-panel-header>
                                    <h3 class="expansion-title mb-0">Supplier Details</h3>
                                  </mat-expansion-panel-header> -->
                                        <!-- <div class="card-container">
                                    <div class="card-view"> -->
                                        <div class="card-point" *ngIf="payto_id =='S'">
                                            <h4>Supplier</h4>
                                            <p>{{ this.Supplierpanel }}</p>
                                        </div>
                                        <div class="card-point" *ngIf="payto_id =='S'">
                                            <h4>Supplier GST</h4>
                                            <p>{{ this.SupGSTpanel }}</p>
                                        </div>
                                        <div class="card-point">
                                            <h4>Commodity Name</h4>
                                            <p>{{ this.commoditynamepanel }}</p>
                                        </div>
                                       <div class="card-point" *ngIf="ecftype_id == 7">
                                            <h4>Credit Ref No</h4>
                                            <p>{{ this.credit_ref_no }}</p>
                                        </div>
                                        <div class="card-point">
                                            <h4>Is Recurring</h4>
                                            <p>{{ this.Is_recurpanel }}</p>
                                        </div>
                                        <div class="card-point">
                                            <h4>Recurring Type</h4>
                                            <p>{{ this.Service_typepanel }}</p>
                                        </div>
                                        <div class="card-point"
                                            *ngIf="frmInvHdr.get('service_type').value == 'MONTHLY' && showRecurDates">
                                            <h4>Recurring Month</h4>
                                            <p>{{ this.Recur_fromdatepanel| date : "dd-MMM-yyyy" }}</p>
                                        </div>
                                        <div class="card-point"
                                            *ngIf="frmInvHdr.get('service_type').value == 'PERIOD' && showRecurDates">
                                            <h4>Recurring From</h4>
                                            <p>{{ this.Recur_fromdatepanel| date : "dd-MMM-yyyy" }}</p>
                                        </div>
                                        <div class="card-point"
                                            *ngIf="frmInvHdr.get('service_type').value == 'PERIOD' && showRecurDates">
                                            <h4>Recurring To </h4>
                                            <p>{{ this.Recur_todatepanel | date : "dd-MMM-yyyy" }}</p>
                                        </div>
                                        <div class="card-point" *ngIf="ecftypeid != 4">
                                            <h4>GST Applicable</h4>
                                            <p>{{ this.Gstpanel }}</p>
                                        </div>
                                        <div class="card-point" *ngIf="ecftypeid == 2">
                                            <h4>Is PCA</h4>
                                            <p>{{ this.Is_pcapanel }}</p>
                                        </div>
                                        <div class="card-point" *ngIf="this.headerdata[0]?.is_pca">
                                            <h4>PCA No</h4>
                                            <div style="display: flex; align-items: center;">
                                                <p>{{ this.Pca_nopanel }}</p>
                                                <i class="fa fa-info-circle"
                                                    style="font-size:24px;color:#0077ff;margin-left:10px"
                                                    *ngIf="this.PCA_Det.length >0"
                                                    matTooltip="{{PCA_Det[0]?.pca_no}} - {{PCA_Det[0]?.pca_bal_amt}}"
                                                    matTooltipClass="custom-tooltipnew"></i>
                                            </div>
                                        </div>
                                        <div class="card-point">
                                            <h4>View File</h4>
                                            <i class=" fa fa-eye create " matTooltip="View File"
                                                matTooltipClass="custom-tooltipnew" (click)="popupopen2()"
                                                style="color: blue;cursor: pointer;">
                                                <!-- data-toggle="modal" data-target="#ecfap-0009" -->
                                            </i>
                                        </div>
                                         <div class="card-point">
                                                <h4>Is Capitalized</h4>
                                            <p>{{ this.Is_capitalized }}</p>
                                        </div>
                                        <div *ngIf="payto_id =='S'" class="card-point">
                                                <h4>MSME</h4>
                                            <p>{{ this.msme }}</p>
                                        </div>
                                        <div *ngIf="payto_id =='S'&& showreg" class="card-point">
                                                <h4>MSME Reg No</h4>
                                            <p>{{ this.msme_reg_no }}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>


                <br>
                <!-- ----------Debit detail if aptype is advance--------- -->

                
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
data-keyboard="false" data-backdrop="static"  id="ap-0009">
    <div class="modal-dialog modal-lg " style="width: 60%;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Attachments
                </h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" #closeAttachment
                    id="ecfap-0245">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="padding:2rem">
                <!-- <div class="row"> -->
                <div class="table-responsive">
                    <!-- <lib-vs-cbox-summary
                        [SummaryDetails]="SummaryFiles"
                        [SummaryApiObj]="SummaryApiFilesObjNew"
                      ></lib-vs-cbox-summary> -->
                    <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                    <table>
                        <thead>
                            <tr>
                                <th>S.No</th>
                                <th>File Name</th>
                                <th>View</th>
                                <th>Download</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let file of pagedFiles; index as j">
                                <td>{{(pageIndexAttach * pagesize_attach) + (j + 1)}}</td>
                                <td style="width: 303px;">
                                    <div  style="width: 300px;overflow: hidden" matTooltip="{{file.file_name}}" matTooltipClass="custom-tooltipnew">
                                        {{file.file_name}}
                                    </div>
                                </td>
                                <td style="text-align: left;">
                                    <i class="fa fa-external-link" aria-hidden="true"
                                        style="color:blue;font-size: 18px;margin-left: 20px;"
                                        (click)="data1(file)"></i>
                                </td>
                                <td style="text-align: left;">
                                    <i class="fa fa-download" style="color: green;" (click)="getfiles(file)">
                                    </i>
                                    <!-- <button mat-icon-button type="button">
                                    <mat-icon style="color:green;font-size: 24px;margin-bottom:15px" aria-label="download"  (click)="getfiles(attach)">
                                        download</mat-icon>
                                </button> -->
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    </div>
                    <div  *ngIf="allFiles.length >0">
                            <mat-paginator (page)="handleAttachmentsPageEvent($event)"
                                        [length]="length_attachments"
                                        [pageSize]="pagesize_attach"
                                        [pageSizeOptions]="pageSizeOptions"
                                        [pageIndex]="pageIndexAttach"
                                        aria-label="Select page" [hidePageSize]="true" >
                            </mat-paginator>
                    </div>
                </div>
                <!-- </div> -->
            </div>
            <!-- <tr>
                <td>
                    <button type="button" class="btn btn-light" style="border-radius:7px;margin-left:300px;
                        border-color: black; margin-bottom: 20px;
                        background-color: white;" (click)=attachmentback() id="ecfap-0246">Back</button>
                </td>
            </tr> -->
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-primary" style="border-radius:40px;"
                    (click)="attachmentback() " id="ecfap-0246">
                    Back
                </button>
            </div>
    </div>
    </div>
</div>

                <div *ngIf="this.ecftypeid == 4">
                    <br>
                    <h3>Debit Details </h3>

                    <!-- &nbsp;&nbsp;&nbsp;&nbsp; -->

                    <div>
                        <form [formGroup]="DebitDetailForm">
                            <!-- <div class="card" style="margin-bottom: 3%;margin-right: 20px;margin-left: 10px;">
                                <div class="card-body">
                                <div class="tableFixHead">
                                    <table class="table table-bordered  table-sm">
                                        <thead style='font-family:"Times New Roman"'>
                                            <tr  class="table_header" fixed-header> -->
                            <div class="comp-table t-resposive t-bdr-line t-HoverZoom">
                                <table >
                                    <thead >
                                        <tr>
                                            <th>S.No</th>
                                            <th>Category</th>
                                            <th>Sub Category </th>
                                            <th>GL Number</th>
                                            <th>BS </th>
                                            <th>CC</th>
                                            <th>CCBS Percentage</th>
                                            <th>Amount</th>
                                            <th>Adjust Amount</th>
                                            <th>Debit Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let dbt of invDebitList;index as i">
                                            <td style=" text-align: center;">{{i+1}}</td>
                                            <td>{{dbt?.category_code?.name}}</td>
                                            <td>{{dbt?.subcategory_code?.name}}</td>
                                            <td>{{dbt?.glno}} - {{dbt?.subcategory_code?.gl_description}}</td>
                                            <td>{{dbt?.bs_code?.name}}</td>
                                            <td>{{dbt?.cc_code?.name}}</td>
                                            <td style="text-align:center">{{dbt?.ccbspercentage}}</td>
                                            <td style="text-align:right">{{dbt?.amount |currency :'INR'}}</td>
                                            <td style="text-align:right">{{dbt?.deductionamount}}</td>
                                            <td style="text-align:right">{{dbt?.amount |currency :'INR'}}</td>
                                        </tr>
                                    </tbody>
                                    <tr>
                                        <td class="totaldisplay" colspan="9"
                                            style="font-family: 'Times New Roman', Times, serif;;font-size:15px;text-align: end;">
                                            Net Amount:
                                        </td>
                                        <td style="text-align:right">{{debitsum | currency:'INR'}}</td>
                                    </tr>
                                </table>
                            </div>
                            <!-- </div>
                                </div> -->
                        </form>
                    </div>
                </div>
                <!-- -------------- -->

                <form [formGroup]="InvoiceDetailForm">
                    <!-- ----------Invoice detail if aptype other than advance--------- -->

                    <div *ngIf="this.ecftypeid !=4">
                        <h3>Invoice Details</h3>
                        <!-- <div class="card" style="margin-bottom: 3%;margin-right: 20px;margin-left: 10px;">
                                <div class="card-body">
                            <div class="tableFixHead">
                                <table class="table table-bordered  table-sm">
                                    <thead style='font-family:"Times New Roman"'>
                                        <tr  class="table_header" fixed-header> -->
                        <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                            <table class="table" fixed-header>
                                <thead class="table_header">
                                    <tr>
                                        <th>S.No</th>
                                        <th>Particulars</th>
                                        <th *ngIf="ecftypeid ==1">GRN Code</th>
                                        <th>Product Name</th>
                                        <th>Is RCM</th>
                                        <th>UOM</th>
                                        <th *ngIf="this.ecftypeid == 13 || this.ecftypeid == 3">Supplier</th>
                                        <th *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8">HSN Code</th>
                                        <th *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8">HSN %</th>
                                        <th>Unit Price</th>
                                        <th>Quantity</th>
                                        <th> Amount</th>
                                        <th *ngIf=" this.ecftypeid !== 4 && this.ecftypeid !== 8">Discount</th>
                                        <th>Taxable Amount</th>
                                        <th *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8">CGST</th>
                                        <th *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8">SGST</th>
                                        <th *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8">IGST</th>
                                        <th *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8">Tax Amount</th>
                                        <th>Total Amount</th>
                                        <th>Is Capitalized</th>
                                        <th>View Debit</th>
                                    </tr>
                                </thead>


                                <tbody>
                                    <tr *ngFor="let dtl of invDetailList;index as j">
                                        <td>{{j+1}}</td>
                                        <td matTooltip={{dtl?.description}}>{{dtl?.description}}</td>
                                        <td *ngIf="ecftypeid == 1">
                                        <div style="display: flex; align-items: center;">
                                            <span matTooltip="{{dtl?.grn_code}}">{{dtl?.grn_code}}</span>
                                            <ng-container *ngIf="is_component && dtl?.productname !='Tax collected at source'">
                                            <i
                                            class="fa fa-eye"
                                            style="color: green; margin-left: 10px; font-size: medium; cursor: pointer;"
                                            matTooltip="View Component"
                                            matTooltipClass="custom-tooltipnew"
                                            (click)="addpodetails(dtl)">
                                            </i>
                                            </ng-container>
                                            <ng-container *ngIf="tcsadded && dtl?.productname =='Tax collected at source'">
                                            </ng-container>
                                        </div>
                                        </td>
                                        <td>{{dtl?.productname}}</td>
                                        <td *ngIf="dtl?.is_rcmproduct == 'Y'">Yes</td>
                                        <td *ngIf="dtl?.is_rcmproduct == 'N'">No</td>
                                        <td>{{dtl?.uom}}</td>
                                        <td *ngIf="this.ecftypeid == 13 || this.ecftypeid == 3">
                                            <i  matTooltip="Supplier Details" matTooltipClass="custom-tooltipnew"
                                                class="fa fa-eye" style="color: darkviolet;padding:10px"
                                                data-toggle="modal" (click)="getsupplierindex(dtl)"></i>
                                        </td>
                                        <td *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8">{{dtl?.hsn?.code}}</td>
                                        <td style="text-align: center;"
                                            *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8">{{dtl?.hsn_percentage}}
                                        </td>
                                        <td>{{dtl?.unitprice |currency :'INR'}}</td>
                                        <td>{{dtl?.quantity}}</td>
                                        <td>{{dtl?.amount |currency :'INR'}}</td>
                                        <td *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8"
                                            >
                                            {{dtl?.discount |currency :'INR'}}</td>
                                        <td>{{dtl?.taxable_amount |currency :'INR'}}</td>
                                        <td *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8"
                                            >{{dtl?.cgst |currency :'INR'}}</td>
                                        <td *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8"
                                        >{{dtl?.sgst |currency :'INR'}}</td>
                                        <td *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8"
                                         >{{dtl?.igst |currency :'INR'}}</td>
                                        <td *ngIf="this.ecftypeid !== 4 && this.ecftypeid !== 8"
                                        >{{dtl?.taxamount |currency :'INR'}}</td>
                                        <td>{{dtl?.totalamount |currency :'INR'}}</td>
                                        <td *ngIf="dtl?.is_capitalized == true || dtl?.is_capitalized == 1"
                                        >Yes</td>
                                        <td *ngIf="dtl?.is_capitalized == false || dtl?.is_capitalized ==0"
                                        >No</td>
                                        <td>

                                            <i matTooltip="view" class=" fa fa-eye create "
                                                style="color: black;cursor: pointer;" (click)="adddebits(dtl)"></i>



                                        </td>
                                    </tr>
                                    <tr>

                                        <td class="totaldisplay" colspan="11"
                                            *ngIf="this.ecftypeid !=1 && this.ecftypeid !=4 && this.ecftypeid != 8 && this.ecftypeid !=13 && this.ecftypeid != 3"
                                            style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                            Total Taxable Amount:</td>
                                        <td class="totaldisplay" colspan="12"
                                            *ngIf="this.ecftypeid ==1 || this.ecftypeid ==13 || this.ecftypeid == 3"
                                            style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                            Total Taxable Amount:</td>
                                        <td class="totaldisplay" colspan="3"
                                            *ngIf=" this.ecftypeid ==4 || this.ecftypeid == 8"
                                            style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                            Total Taxable Amount:</td>
                                        <td style="text-align:right">{{taxableamt| currency:'INR'}}</td>

                                        <td class="totaldisplay" colspan="4"
                                            *ngIf="this.ecftypeid !=1 && this.ecftypeid !=4 && this.ecftypeid != 8 && this.ecftypeid !=13 && this.ecftypeid != 3"
                                            style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                            Other Adjustment:</td>
                                        <td class="totaldisplay" colspan="4"
                                            *ngIf="this.ecftypeid ==1 || this.ecftypeid ==13 || this.ecftypeid == 3"
                                            style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                            Other Adjustment:</td>
                                        <td class="totaldisplay" colspan="7"
                                            *ngIf=" this.ecftypeid ==4 || this.ecftypeid == 8"
                                            style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                            Other Adjustment:</td>
                                        <td style="text-align:right">{{OtherAmount| currency:'INR'}}</td>
                                    </tr>
                                    <tr>

                                        <td class="totaldisplay" colspan="16"
                                            *ngIf="this.ecftypeid !=1 && this.ecftypeid !=4 && this.ecftypeid != 8 && this.ecftypeid !=13 && this.ecftypeid != 3"
                                            style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                            Rounding Off:</td>
                                        <td class="totaldisplay" colspan="17"
                                            *ngIf=" this.ecftypeid ==1 || this.ecftypeid ==13 || this.ecftypeid == 3"
                                            style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                            Rounding Off:</td>
                                        <td class="totaldisplay" colspan="7"
                                            *ngIf=" this.ecftypeid ==4 || this.ecftypeid == 8"
                                            style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                            Rounding Off:</td>
                                        <td style="text-align:right">{{Roundoffamount| currency:'INR'}}</td>
                                    </tr>
                                    <tr>
                                        <td class="totaldisplay" colspan="16"
                                            *ngIf="this.ecftypeid !=1 && this.ecftypeid !=4 && this.ecftypeid != 8 && this.ecftypeid !=13 && this.ecftypeid != 3"
                                            style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                            Net Amount:</td>
                                        <td class="totaldisplay" colspan="17"
                                            *ngIf="this.ecftypeid ==1 || this.ecftypeid ==13 || this.ecftypeid == 3"
                                            style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                            Net Amount:</td>
                                        <td class="totaldisplay" colspan="7"
                                            *ngIf="this.ecftypeid ==4 || this.ecftypeid == 8"
                                            style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                            Net Amount:</td>
                                        <td style="text-align:right">{{INVsum | currency:'INR'}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </form>


                <!-- ----------credit detail --------- -->

                <br><br>
                <h3>Credit Details</h3>
                    <form [formGroup]="CreaditDetailForm">
                        <tr>
                            <td *ngIf="istdsapplic != undefined || this.ecftypeid == 14" id="matInput-size">
                               <!-- <span style="margin-left: 10px"> Is TDS Applicable : {{istdsapplic}}</span> -->
    
                                 <mat-form-field appearance="outline">                  
                                    <mat-label>Is TDS Applicable <label style="color:red">*</label></mat-label>
                                    <!-- <mat-select placeholder="Is TDS Applicable" formControlName="is_tds_applicable" 
                                    [class.disabled]="istdsapplic != undefined || this.ecftypeid == 14" 
                                    [disabled]="istdsapplic != undefined || this.ecftypeid == 14" id="invoice-detail-0106">
                                        <mat-option *ngFor="let tds of tdslist" [value]="tds.id">
                                            {{tds.text}}
                                        </mat-option>
                                    </mat-select> -->
                                    <input type="text" formControlName="is_tds_applicable" matInput
                                    readonly id="invoice-detail-0106">
                                </mat-form-field> 
                            </td>
                            <td *ngIf="paymentInstr != undefined" id="matInput-size">
                                <!-- <div style="margin-left: 50px;">
                                Payment Instructions : {{paymentInstr}}
                                </div> -->
    
                            <mat-form-field appearance="outline">
                                <mat-label>Payment Instructions</mat-label>
                                <input type="text" matInput formControlName="payment_instruction" autocomplete="off" 
                                    placeholder="Payment Instructions" maxlength="60"  matTooltipClass="custom-tooltipnew" id="invoice-detail-0108">
                            </mat-form-field>
                            </td>
                        </tr>
                    </form>
                <form [formGroup]="creditdetForm">
                    <!-- <div>
                        <div class=" row col-md-12" *ngIf="paytoid=='SUPPLIER'">
                            <div class="col-md-3">
                                <mat-form-field style="margin-left: 5%;width:220px">
                                    <input type="text" formControlName="supName" matInput readonly placeholder="Supplier Name" id="ap-0371">
                                    <mat-label>Supplier Name</mat-label>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3">
                                <mat-form-field style="margin-left: 5%;width:220px">
                                    <input type="text" formControlName="isexcempted" matInput readonly placeholder="Is Exempted" id="ap-0372">
                                    <mat-label>Is Exempted</mat-label>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3" *ngIf="showthreshold">
                                <mat-form-field style="margin-left: 5%;width:220px">
                                    <input type="text" formControlName="TDSSection" matInput readonly placeholder="TDS Section" id="ap-0373">
                                    <mat-label>TDS Section</mat-label>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3" *ngIf="showthreshold">
                                <mat-form-field style="margin-left: 5%;width:220px">
                                    <input type="text" formControlName="TDSRate" matInput readonly placeholder="TDS Rate" id="ap-0374">
                                    <mat-label>TDS Rate</mat-label>
                                </mat-form-field>
                            </div>
                        </div>    
                        <div class=" row col-md-12" *ngIf="paytoid=='S'">
                            <div class="col-md-3" *ngIf="showthreshold">
                                <mat-form-field style="margin-left: 5%;width:220px">
                                    <input type="text" formControlName="thresholdValue" matInput readonly placeholder="Threshold Value" id="ap-0375">
                                    <mat-label>Threshold Value</mat-label>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3" *ngIf="showthreshold">
                                <mat-form-field style="margin-left: 5%;width:220px">
                                    <input type="text" matInput formControlName="amountPaid" readonly placeholder="Amount Paid" id="ap-0376">
                                    <mat-label>Amount Paid</mat-label>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3" *ngIf="showthreshold">
                                <mat-form-field style="margin-left: 5%;width:220px">
                                    <input type="text" matInput formControlName="balThroAmt" readonly placeholder="Balance Threshold Amount" id="ap-0377">
                                    <mat-label>Balance Threshold Amount</mat-label>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3" *ngIf="showthreshold">
                                <mat-form-field style="margin-left: 5%;width:220px">
                                    <input type="text" matInput formControlName="normaltdsRate" readonly placeholder="Normal TDS Rate" id="ap-0378">
                                    <mat-label>Normal TDS Rate</mat-label>
                                </mat-form-field>
                            </div>
                        </div>  
                    </div> -->
                </form>
                <!-- <div class="card" style="margin-bottom: 3%;margin-right: 20px;margin-left: 10px;">
                    <div class="card-body">
                    <div class="tableFixHead">
                        <table class="table table-bordered  table-sm"> -->
                <!-- <thead style='font-family:"Times New Roman"'>
                                <tr  class="table_header" fixed-header> -->
                <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                    <table class="table" fixed-header>
                        <thead class="table_header">
                            <tr>
                                <th>S.No</th>
                                <th>Paymode</th>
                                <th>Account Detail/GL</th>
                                <!-- <th>Transaction Branch</th> -->
                                <th>Ref No</th>
                                <th *ngIf="this.payto_id != 'E' && this.payto_id != 'B'">Bank Name</th>
                                <th *ngIf="this.payto_id != 'E' && this.payto_id != 'B'">Branch Name</th>
                                <th *ngIf="this.payto_id != 'E' && this.payto_id != 'B'">IFSC Code</th>
                                <th>Beneficiary Name</th>
                                <th>Tax Type</th>
                                <th>Tax Rate</th>
                                <th>TDS Excempt</th>
                                <th>Taxable Amount</th>
                                <th>GL No</th>
                                <th>Amount</th>
                                <!-- <th>Amount change</th> -->
                            </tr>
                        </thead>

                        <tbody>
                            <tr *ngFor="let cdt of invCreditList;index as i">
                                <td>{{i+1}}</td>
                                <td>{{cdt?.paymode?.name}}</td>
                                <td>{{cdt?.refno}}</td>
                                <!-- <td style="text-align: center;">{{this.transaction_branch}}</td> -->
                                <td>{{cdt?.refno}}</td>

                                <td *ngIf="this.payto_id == 'S'"><ng-container
                                        *ngFor="let cdtdtl of cdt?.supplierpayment_details?.data">{{cdtdtl?.bank_id?.name}}</ng-container>
                                </td>
                                <td *ngIf="this.payto_id == 'S'"><ng-container
                                        *ngFor="let cdtdtl of cdt?.supplierpayment_details?.data">{{cdtdtl?.branch_id?.name}}</ng-container>
                                </td>
                                <td *ngIf="this.payto_id == 'S'"><ng-container
                                        *ngFor="let cdtdtl of cdt?.supplierpayment_details?.data">{{cdtdtl?.branch_id?.ifsccode}}</ng-container>
                                </td>
                                <td *ngIf="this.payto_id == 'S'"><ng-container
                                        *ngFor="let cdtdtl of cdt?.supplierpayment_details?.data">{{cdtdtl?.beneficiary}}</ng-container>
                                </td>

                                <!-- <td *ngIf="this.payto_id == 'E'"><ng-container *ngFor="let cdtdtl of cdt?.employeeaccount_details?.data">{{cdtdtl?.bank_name}}</ng-container></td>
                                        <td *ngIf="this.payto_id == 'E'"><ng-container *ngFor="let cdtdtl of cdt?.employeeaccount_details?.data">{{cdtdtl?.bankbranch?.name}}</ng-container></td>
                                        <td *ngIf="this.payto_id == 'E'"><ng-container *ngFor="let cdtdtl of cdt?.employeeaccount_details?.data">{{cdtdtl?.bankbranch?.ifsccode}}</ng-container></td> -->
                                <td *ngIf="this.payto_id == 'E'"><ng-container
                                        *ngFor="let cdtdtl of cdt?.employeeaccount_details?.data">{{cdtdtl?.beneficiary_name}}</ng-container>
                                </td>
                                <td *ngIf="this.payto_id == 'B'"><ng-container
                                        *ngFor="let cdtdtl of cdt?.employeeaccount_details?.data">{{cdtdtl?.beneficiary_name}}</ng-container>
                                </td>
                                <td>{{cdt?.suppliertaxtype}}</td>
                                <td>{{cdt?.suppliertaxrate == "0.0" ? "-" :cdt?.suppliertaxrate }}</td>
                                <td *ngIf="cdt?.taxexcempted == 'Y' || cdt?.taxexcempted == 'Yes'">Yes</td>
                                <td *ngIf="cdt?.taxexcempted == 'N' || cdt?.taxexcempted == 'No'">No</td>
                                <td >{{cdt?.taxableamount == "0.0" ? "-":cdt?.taxableamount| currency:'INR'}}</td>
                                <td>{{cdt?.glno}}</td>
                                <td>{{cdt?.amount | currency:'INR'}}</td>

                            </tr>
                        </tbody>



                        <tr>
                            <td *ngIf="this.payto_id == 'S'" class="totaldisplay" colspan="13"
                                style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                Net Amount:</td>
                            <td *ngIf="this.payto_id != 'S'" class="totaldisplay" colspan="10"
                                style="font-family: 'Times New Roman', Times, serif;text-align: end;">
                                Net Amount:</td>
                            <td style="text-align:right">{{cdtsum | currency:'INR'}}</td>
                        </tr>
                    </table>
                </div>
                <br>
                <div>

                    <!-- <button *ngIf="backdata == 'apcommon' || backdata == 'apapproverview'" type="button"
                    style="border-radius:40px;margin-left: 47%;margin-bottom: 25px;" class="btn btn-outline-primary"
                    (click)="commonbackview()" id="ap-0379">
                    Back</button> -->
                    <!-- <div *ngIf="backdata != 'apcommon' && backdata != 'apapproverview'" >
                        <form [formGroup]="APapprovesubmitform">
                        <table>
                            <tr>
                                <td *ngIf="backdata != 'aprejectview'" id="matInput-size">
                                    <mat-form-field appearance="outline">
                                        <input matInput placeholder="Remarks" formControlName="remarks" autocomplete="off" required id="ap-0380">
                                    </mat-form-field>
                                </td>
                                <td style="border:0px" *ngIf="backdata == 'bounceview'">
                                    <input #fileInput id="ap-0011" type="file" multiple style="width: 108px;" hidden (change)="uploaddata($event)">
    
                                    <i (click)="fileInput.click()"  class="fa fa-cloud-upload" matTooltip="Upload file" aria-hidden="true" style="font-size: 25px;color: blue;margin-left: 10px;margin-bottom: 25px;"></i>
                                </td>
                                <td *ngIf="backdata == 'bounceview' && valid_arr?.length != 0">
                                    <i (click)=" attachpopup()"matTooltip="view" class=" fa fa-eye create "
                                      data-toggle="modal"
                                   style="cursor: pointer;color:blue;margin-left: 5px;margin-bottom:25px" ></i>
                                </td> -->
                    <!-- data-target="#ap-0038" -->


                    <!-- <button *ngIf="backdata == 'apapproverview'" type="button"
                                    style="border-radius:40px;margin-left: 25px;margin-bottom: 25px;" class="btn btn-outline-success" (click)="approveap('Y')" id="ap-0381">
                                    Approve & Pay</button>
                                <button *ngIf="backdata == 'apapproverview'" type="button"
                                    style="border-radius:40px;margin-left: 25px;margin-bottom: 25px;" class="btn btn-outline-success" (click)="reauditap()" id="ap-0382">
                                    Re-Audit</button>
                                
                                <button *ngIf="backdata == 'apapproverview'" type="button"
                                    style="border-radius:40px;margin-left: 25px;margin-bottom: 25px;" class="btn btn-outline-primary"
                                    (click)="commonbackview()" id="ap-0383">
                                    Back</button> -->


                    <!-- <button *ngIf="backdata == 'bounceview'" type="button"
                                    style="border-radius:40px;margin-left: 25px;margin-bottom: 25px;" class="btn btn-outline-primary"
                                    (click)="apreject()" id="ap-0384">
                                    Reject</button>
                                    <button *ngIf="backdata == 'bounceview'" type="button"
                                    style="border-radius:40px;margin-left: 25px;margin-bottom: 25px;" class="btn btn-outline-primary"
                                    (click)="apreprocess()" id="ap-0385">
                                    ReProcess</button>
                                <button *ngIf="backdata == 'bounceview'" type="button"
                                    style="border-radius:40px;margin-left: 25px;margin-bottom: 25px;" class="btn btn-outline-primary"
                                    (click)="commonbackview()" id="ap-0386">
                                    Back</button> -->




                    <!-- <button *ngIf="backdata == 'apcommon'" type="button"
                                    style="border-radius:40px;margin-left: 777%;margin-bottom: 25px;" class="btn btn-outline-primary"
                                    (click)="commonbackview()" id="ap-0387">
                                    Back</button> -->

                    <!-- <button *ngIf="backdata == 'aprejectview'" type="button"
                                    style="border-radius:40px;margin-left: 550px;margin-bottom: 25px;" class="btn btn-outline-primary"
                                    (click)="commonbackview()" id="ap-0388">
                                    Back</button> -->
                    <!-- </tr>
                        </table>
                    </form>

                    </div> -->

                </div>
            </div>

            <!-- Debit Div starts---- -->
            <div class="header-adjust" *ngIf="showdebitdiv">
                <!-- <h3>
                    <i class="fa fa-arrow-left" aria-hidden="true" (click)="debitbacks()"></i>&nbsp;Invoice Header ({{
                    crno }})
                </h3> -->

            </div>
            <div *ngIf="showdebitdiv">


                <h3>
                    <i class="fa fa-arrow-left" aria-hidden="true" (click)="debitbacks()"></i>&nbsp;Debit Details (Total Amount :
                    {{invtotamount | currency:'INR'}})</h3>

                <!-- &nbsp;&nbsp;&nbsp;&nbsp; -->

                <div>
                    <form [formGroup]="DebitDetailForm">
                        <!-- <div class="card" style="margin-bottom: 3%;margin-right: 20px;margin-left: 10px;">
                                <div class="card-body">
                                <div class="tableFixHead">
                                    <table class="table table-bordered  table-sm">
                                        <thead style='font-family:"Times New Roman"'>
                                            <tr  class="table_header" fixed-header> -->
                        <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                            <table class="table" fixed-header>
                                <thead class="table_header">
                                    <tr>
                                        <th>S.No</th>
                                        <th>Category</th>
                                        <th>Sub Category </th>
                                        <th>GL Number</th>
                                        <th>BS </th>
                                        <th>CC</th>
                                        <th>CCBS Percentage</th>
                                        <th>Amount</th>
                                        <th>Adjust Amount</th>
                                        <th>Debit Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let dbt of invDebitList;index as i">
                                        <td >{{i+1}}</td>
                                        <td>{{dbt?.category_code?.name}}</td>
                                        <td>{{dbt?.subcategory_code?.name}}</td>
                                        <td>{{dbt?.glno}} - {{dbt?.subcategory_code?.gl_description}}</td>
                                        <td>{{dbt?.bs_code?.name}}</td>
                                        <td>{{dbt?.cc_code?.name}}</td>
                                        <td>{{dbt?.ccbspercentage}}</td>
                                        <td>{{dbt?.amount |currency :'INR'}}</td>
                                        <td>{{dbt?.deductionamount |currency :'INR'}}</td>
                                        <td>{{dbt?.amount |currency :'INR'}}</td>
                                    </tr>
                                </tbody>
                                <tr>
                                    <td class="totaldisplay" colspan="9"
                                        style="font-family: 'Times New Roman', Times, serif;;font-size:15px;text-align: end;">
                                        Net Amount:
                                    </td>
                                    <td style="text-align:right">{{debitsum | currency:'INR'}}</td>
                                </tr>
                                <!-- <tr>
                                            <td colspan="10">
                                                <button type="button" #debitclosebtn
                                                    style="border-radius:40px;margin-left:625px;font-family: 'Times New Roman', Times, serif;"
                                                    class="btn btn-outline-primary" (click)="debitbacks()" id="ap-0389">
                                                    Back</button>
                                            </td>
                                        </tr> -->
                            </table>
                        </div>
                        <!-- </div>
                                </div> -->
                    </form>
                </div>
            </div>


            <!-- Debit div ends -->
        </div>
    </div>

    <!-- </mat-card> -->
    <!-- </div> -->





    <div *ngIf="showapprovepop">
        <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
            aria-hidden="true" data-backdrop="static" data-keyboard="false" id="ap-0012">
            <div class="modal-dialog modal-xl " style="width: 40%;">
                <div class="modal-content">
                    <div class="modal-header text-center" style="background: rgba(23, 204, 23, 0.288);">
                        <h2 class="modal-title w-100 font-weight-bold"
                            style="color:black ;height:2px;font-family: 'Times New Roman', Times, serif;">Approver
                            Details
                        </h2>
                        <button type="button" class="close" #closedbutton data-dismiss="modal" aria-label="Close"
                            id="ap-0390">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>

                    <div style="margin-left: 70px;margin-right: 80%;margin-top: 2%; width: 80%;">

                        <span style="margin-left:-45px">Commodity Name : <p [ngStyle]="{'color': 'blue'}"
                                style="margin-left:100px;margin-top:-24px">{{commodityname}}</p></span>
                        <form [formGroup]="ApproverForm">
                            <table>
                                <div>

                                    <tr>
                                        <!-- <td>
                                        <mat-form-field
                                            style="width:250px;font-family: 'Times New Roman', Times, serif;">
                                            <input matInput placeholder="Approver Branch" formControlName="approvedbranch"
                                                autocomplete="off"  id="ap-0391">
                                        </mat-form-field>
                                    </td> -->
                                        <td>
                                        <td>
                                            <mat-form-field
                                                style="width: 250px;margin-left: 50px;font-family: 'Times New Roman', Times, serif;"
                                                (click)="approvername()">
                                                <mat-label>Approver Name</mat-label>
                                                <input #appInput placeholder="Choose Approver" matInput
                                                    formControlName="approvedby" [matAutocomplete]="approver"
                                                    id="ap-0392">
                                                <mat-autocomplete [panelWidth]="400" #approver="matAutocomplete"
                                                    (opened)="autocompleteapproverScroll()"
                                                    [displayWith]="displayFnApprover">
                                                    <mat-option *ngIf="isLoading"
                                                        class="is-loading">Loading...</mat-option>
                                                    <ng-container *ngIf="!isLoading">
                                                        <mat-option *ngFor="let app of approverList"
                                                            [value]="app?.employee_id"
                                                            matTooltip="{{app?.employee_id?.name}}">{{app?.employee_id?.name}}
                                                        </mat-option>
                                                    </ng-container>
                                                </mat-autocomplete>
                                            </mat-form-field>
                                        </td>

                                    </tr>
                                </div>
                            </table>
                            <br>
                            <tr>
                                <div style="margin-bottom: 5%;">
                                    <td>
                                        <button type="submit"
                                            style="border-radius:40px;margin-left: 100px;font-family: 'Times New Roman', Times, serif;"
                                            class="btn btn-outline-success" (click)="batchsubmit()" id="ap-0393">
                                            Save</button>

                                    </td>

                                    <td>
                                        <button type="button"
                                            style="border-radius:40px;margin-left:10px;font-family: 'Times New Roman', Times, serif;"
                                            class="btn btn-outline-success" (click)="appback()" id="ap-0394">
                                            Back</button>

                                    </td>
                                </div>
                            </tr>
                        </form>
                    </div>

                    <!-- <div  style="margin-top: 2%;margin-left: 90px; width: 85%;">
                    <table class="table table-bordered  padsize" style="text-align:center;" >	
                        
                        <thead>
                            <tr class="table_header tableset " style="text-align: center;margin-left: 3%;">
                
                                <th>S.No</th>
                                <th>CR NO</th>
                                <th>ECF Type</th>
                                <th>Commodity Name</th>
                                <th>ECF Date</th>
                                <th>ECF Amount</th>
                                <th>ECF Status</th>
                                <th>Payment For</th>
                                <th>View</th>
                                <th>Download</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor ="let ab of batchviewlist;index as i">
                                <td>{{(bvpresentpage - 1)*pagesizebview +i+1 }}</td>
                                <td>{{(ab?.crno !== null)?(ab?.crno):"-"}}</td>
                                <td>{{ab?.aptype}}</td>
                                <td>{{ab?.commodity_id?.name}}</td>
                                <td>{{ (ab?.apdate !== "None") ? (ab?.apdate | date: 'dd/MM/yyyy') : "-" }}</td>
                                <td>{{ab?.apamount|currency:'INR'}}</td>
                                <td>{{ab?.apstatus}}</td>
                                <td>{{ab?.payto}}</td>
                                <td>
                                    
                                    <span matTooltip="view" class=" fa fa-eye create "
                                        style="color: green;cursor: pointer;padding:10px" (click)="showecfview(ab)"></span>
                               
                            </td>
                            <td>
                               
                                    <button type="button" class="btn btn-outline-success"
                                        (click)="coverNotedownload(ab?.id,ab?.aptype_id)"
                                        style="border-radius: 40px;margin-left: 3%;" >
                                        <span class="fa fa-download" matTooltip="Download CoverNote">
                                        </span>
                                    </button>
                                </td>
                
                            </tr>
                        </tbody>
                    </table>
                    <div *ngIf="batchviewlist ?.length == 0" style="margin-left: 42%;">
                        <h3 >Sorry data not found!.. </h3>
                    </div>
                    <div class="row" *ngIf="isbatchviewpage">
                      <div  class="col-sm-12" style="margin-bottom: 5%;font-size: small;text-align:right;">
                            <button mat-icon-button [disabled]="has_bviewpageprevious === false" color="primary" (click)="previousClickbview()" id="ap-0395">
                                <mat-icon>arrow_back</mat-icon>
                            </button> {{bvpresentpage}}
                            <button mat-icon-button [disabled]="has_bviewpagenext === false" color="primary" (click)="nextClickbview()" id="ap-0396">
                                <mat-icon>arrow_forward</mat-icon>
                            </button>
                        </div>
                    </div>
                   </div> -->

                </div>
            </div>
        </div>
    </div>

<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
    aria-hidden="true" data-backdrop="static" data-keyboard="false" id="ap-0013">
    <div class="modal-dialog modal-xs">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    Payment Details
                </h3>
                <button type="button" class="close" #closedpaybutton data-dismiss="modal" aria-label="Close"
                    id="ap-0397">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">


                <form [formGroup]="PaymentFileForm">
                
                    <div id="matInput-size">
                        <mat-form-field appearance="outline">
                            <mat-label>UTR No</mat-label>
                            <input matInput formControlName="callbackrefno"
                                autocomplete="off" id="ap-0398">
                        </mat-form-field>
                    </div>

                </form>
            </div>

            
            <!-- <div  style="margin-top: 2%;margin-left: 90px; width: 85%;">
            <table class="table table-bordered  padsize" style="text-align:center;" >	
                
                <thead>
                    <tr class="table_header tableset " style="text-align: center;margin-left: 3%;">
        
                        <th>S.No</th>
                        <th>CR NO</th>
                        <th>ECF Type</th>
                        <th>Commodity Name</th>
                        <th>ECF Date</th>
                        <th>ECF Amount</th>
                        <th>ECF Status</th>
                        <th>Payment For</th>
                        <th>View</th>
                        <th>Download</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor ="let ab of batchviewlist;index as i">
                        <td>{{(bvpresentpage - 1)*pagesizebview +i+1 }}</td>
                        <td>{{(ab?.crno !== null)?(ab?.crno):"-"}}</td>
                        <td>{{ab?.aptype}}</td>
                        <td>{{ab?.commodity_id?.name}}</td>
                        <td>{{ (ab?.apdate !== "None") ? (ab?.apdate | date: 'dd/MM/yyyy') : "-" }}</td>
                        <td>{{ab?.apamount|currency:'INR'}}</td>
                        <td>{{ab?.apstatus}}</td>
                        <td>{{ab?.payto}}</td>
                        <td>
                            
                            <span matTooltip="view" class=" fa fa-eye create "
                                style="color: green;cursor: pointer;padding:10px" (click)="showecfview(ab)"></span>
                       
                    </td>
                    <td>
                       
                            <button type="button" class="btn btn-outline-success"
                                (click)="coverNotedownload(ab?.id,ab?.aptype_id)"
                                style="border-radius: 40px;margin-left: 3%;" >
                                <span class="fa fa-download" matTooltip="Download CoverNote">
                                </span>
                            </button>
                        </td>
        
                    </tr>
                </tbody>
            </table>
            <div *ngIf="batchviewlist ?.length == 0" style="margin-left: 42%;">
                <h3 >Sorry data not found!.. </h3>
            </div>
            <div class="row" *ngIf="isbatchviewpage">
              <div  class="col-sm-12" style="margin-bottom: 5%;font-size: small;text-align:right;">
                    <button mat-icon-button [disabled]="has_bviewpageprevious === false" color="primary" (click)="previousClickbview()" id="ap-0401">
                        <mat-icon>arrow_back</mat-icon>
                    </button> {{bvpresentpage}}
                    <button mat-icon-button [disabled]="has_bviewpagenext === false" color="primary" (click)="nextClickbview()" id="ap-0402">
                        <mat-icon>arrow_forward</mat-icon>
                    </button>
                </div>
            </div>
           </div> -->
           
        <div class="modal-footer">
            <button type="submit"
                style="border-radius:40px;"
                class="btn btn-outline-success" (click)="utrsubmit()" id="ap-0399">
                Submit</button>

            <button type="button"
            style="border-radius:40px;"
            class="btn btn-outline-primary" (click)="utrback()" id="ap-0400">
            Back</button>
            
        </div>
        </div>
    </div>
</div>

    <!-- View Trancation -->
    <!-- <div
class="modal fade"
 tabindex="-1" role="dialog"
  aria-labelledby="exampleModalLabel"
   aria-hidden="true"
   id="ap-0014">
          <div class="modal-dialog modal-xl" style="width:80%;height:200%;">
              <div class="modal-content">
                  <div class="modal-header">
                   <h3 class="modal-title">View Transaction</h3>
                      <button
                      type="button"
                      class="close"
                       data-dismiss="modal"
                      aria-label="Close"
                      id="ecfap-0236">
                          <span aria-hidden="true">&times;</span>
                      </button>
                  </div> -->
    <!-- <br> -->
    <!-- <div class="modal-body">
                   <div class="container">
                     <div class="row">
                       <div class="table-responsive" style="width: 100%; margin-top: 1%">
                 <div class="table-responsive">
                   <lib-vs-cbox-summary
                     [SummaryDetails]="SummaryviewData"
                     [SummaryApiObj]="SummaryApiviewObjNew"
                   ></lib-vs-cbox-summary>
                 </div>
                 <br />
                 <table style="width: 100%; text-align: center">
                   <tr>
                     <td>Employee Name: &nbsp;{{ this.name }}</td>
                     <td>Designation: &nbsp;{{ this.designation }}</td>
                     <td>Branch Name : &nbsp;{{ this.branch }}</td>
                   </tr>
                 </table> -->
    <!-- <h2 class="modal-title" style="text-align:center;margin-left:42%">View Transaction</h2>
           <button class="close" type="button" data-dismiss="modal" id="ap-0403">x</button>
           </div>
           <div class="table-responsive" id="ap-0015">
               <table class="table scrolltable table-bordered" style="text-align: center;">
                   <thead class="table_header">
                   <tr>
                       <th>S.NO</th>
                       <th>Type</th>
                       <th>Status</th>
                       <th>From Date</th>
                       <th>Remarks</th>
                       <th>Employee Name</th>
                       <th>Approver Name</th>
                   </tr>
                   </thead>
                   <tr *ngFor="let dt of viewtrnlist;let i=index">
                       <td  style=" text-align: center;">{{i+1}}</td>
                       <td>{{dt.Type}}</td>
                       <td>{{dt.comments}}</td>
                       <td>{{dt.created_date}}</td>
                       <td>{{dt.remarks}}</td>
                       <td>{{dt.from_user.name}}
                       <br>
                       <div *ngIf="dt.from_user_id==-1; else deta"></div>
                           <ng-template #deta>
                               <a style="color: green;cursor: pointer;"  (click)="view(dt)">View Details</a>
                           </ng-template>
                       </td>
                       <td>{{dt.to_user.name}}
                       <br>
                       <div *ngIf="dt.to_user_id==-1; else deta1"></div>
                           <ng-template #deta1>
                               <a style="color: green;cursor: pointer;"  (click)="viewto(dt)">View Details</a>
                           </ng-template>
                       </td>
                   </tr>
               </table> -->
    <!-- </div> -->
    <!-- <div class="modal-footer" >
               <table  style="width: 100%;text-align: center;">
                   <tr>
                       <td>Employee Name: &nbsp;{{this.name}}</td>
                       <td>Designation: &nbsp;{{this.designation}}</td>
                       <td>Branch Name : &nbsp;{{this.branch}}</td>
                    </tr>
                    <tr><td colspan="3"><button type="button" class="btn btn-outline-primary" style="border-radius:40px;height: 44px; margin-top: 12px;" data-dismiss="modal"  id="ap-0404">Back</button></td></tr>
               </table> -->
    <!-- <div style="margin-left: 950px; margin-top: 10px">
                   <button
                     type="button"
                     class="btn btn-outline-primary"
                     style="border-radius: 40px"
                     data-dismiss="modal"
                     id="ap-0404"
                   >
                     Back
                   </button>
                 </div> -->
    <!-- </div>
               </div>
             </div>
             <div class="modal-footer">
               <button
                type="button"
                 data-dismiss="modal"
                 style="border-radius: 40px; margin-left: 10px"
                 class="btn btn-outline-primary"
                 id="ap-0404">
                Back</button> -->
    <!-- </tr> -->
    <!-- </div>
           </div>
       </div>
   </div> -->


    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
    data-backdrop = "static" data-keyboard="false" id="ap-0014">
        <div class="modal-dialog modal-xl" style="width: 70%">
            <div class="modal-content">
                <div class="modal-header">
                    <h3> View Transaction</h3>
                    <button class="close" type="button" data-dismiss="modal" id="ecfap-0236">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="table-responsive" style="width: 100%; margin-top: 1%">
                        <div class="table-responsive">
                            <lib-vs-cbox-summary [SummaryDetails]="SummaryviewData"
                                [SummaryApiObj]="SummaryApiviewObjNew" [FirstLastbtn]="true"></lib-vs-cbox-summary>
                        </div>
                        <br />
                        <table style="width: 100%; text-align: center">
                            <tr>
                                <td>Employee Name: &nbsp;{{ this.name }}</td>
                                <td>Designation: &nbsp;{{ this.designation }}</td>
                                <td>Branch Name : &nbsp;{{ this.branch }}</td>
                            </tr>
                        </table>

                        <!-- <h2 class="modal-title" style="text-align:center;margin-left:42%">View Transaction</h2>
        <button class="close" type="button" data-dismiss="modal" id="ap-0403">x</button>      
        </div>
        <div class="table-responsive" id="ap-0015">
            <table class="table scrolltable table-bordered" style="text-align: center;">
                <thead class="table_header">
                <tr>
                    <th>S.NO</th>
                    <th>Type</th>
                    <th>Status</th>
                    <th>From Date</th>
                    <th>Remarks</th>
                    <th>Employee Name</th>
                    <th>Approver Name</th>
                </tr>
                </thead>
                <tr *ngFor="let dt of viewtrnlist;let i=index">
                    <td>{{i+1}}</td>
                    <td>{{dt.Type}}</td>
                    <td>{{dt.comments}}</td>
                    <td>{{dt.created_date}}</td>
                    <td>{{dt.remarks}}</td>
                    <td>{{dt.from_user.name}}
                    <br>
                    <div *ngIf="dt.from_user_id==-1; else deta"></div>
                        <ng-template #deta>
                            <a style="color: green;cursor: pointer;"  (click)="view(dt)">View Details</a>
                        </ng-template>
                    </td>
                    <td>{{dt.to_user.name}}
                    <br>
                    <div *ngIf="dt.to_user_id==-1; else deta1"></div>
                        <ng-template #deta1>
                            <a style="color: green;cursor: pointer;"  (click)="viewto(dt)">View Details</a>
                        </ng-template>
                    </td>
                </tr>
            </table> -->
                    </div>
                    <!-- <div class="modal-footer" >
            <table  style="width: 100%;text-align: center;">
                <tr>
                    <td>Employee Name: &nbsp;{{this.name}}</td>
                    <td>Designation: &nbsp;{{this.designation}}</td>
                    <td>Branch Name : &nbsp;{{this.branch}}</td>
                 </tr>
                 <tr><td colspan="3"><button type="button" class="btn btn-outline-primary" style="border-radius:40px;height: 44px; margin-top: 12px;" data-dismiss="modal"  id="ap-0404">Back</button></td></tr>
            </table> -->
            <!-- <div *ngIf="viewtrnlist?.length == 0" style="margin-left: 42%;">
                <h3 >Sorry data not found!.. </h3>
            </div>
            <div class="row" *ngIf="viewtrnlist?.length > 0">
                <div class="col-sm-8" style="margin-bottom: 0%;font-size: small;text-align: right;margin-top: 18px;font-weight:bold">
                Page: {{viewtrnCurrentPage}}
                </div>
                <div  class="col-sm-4" style="margin-bottom: 0%;font-size: small;text-align:right;">
                    <mat-paginator  style="margin-top: 0%;width: 350px;"
                                (page)="handleViewtrn($event)"
                                [length]="length_viewtrn"
                                [pageSize]="pageSize_Viewtrn"
                                [showFirstLastButtons]="showFirstLastButtons"
                                [pageSizeOptions]="pageSizeOptions"
                                [pageIndex]="pageIndexViewtrn"
                                [hidePageSize]="true"
                                aria-label="Select page">                            
                    </mat-paginator>
                </div>
            </div>
            <div style="margin-left: 45%;width: 100%;margin-bottom: 10px;"><button type="button" class="btn btn-outline-danger" style="border-radius:40px;height: 44px; 
                margin-top: 12px;" data-dismiss="modal"  id="ap-0404">Back</button>
            </div> -->
                 

                </div>
                <div class="modal-footer" >
                    <button type="button" class="btn btn-outline-primary" style="border-radius: 40px"
                        data-dismiss="modal" id="ap-0404">
                        Back
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Liquidation Details -->
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
    data-backdrop = "static" data-keyboard="false"  id="ap-0016">
        <div class="modal-dialog modal-xl" style="width:80%;height:200%;">
            <div class="modal-content">
                <div class="modal-header" style="text-align:center">
                    <h2 class="modal-title" style="text-align:center;margin-left:42%">Liquidation Details</h2>
                    <button class="close" type="button" data-dismiss="modal" id="ap-0405">x</button>
                </div>
                <form [formGroup]="frmLiq">
                    <table style="margin-left: 10px;">
                        <div style="margin-left: 10px;">
                            <tr>
                                <td>
                                    <mat-form-field>
                                        <input type="text" matInput formControlName="advno" readonly
                                            placeholder="Advance No" id="ap-0406">
                                        <mat-label>Advance No</mat-label>
                                    </mat-form-field>
                                </td>
                                <td *ngIf="payto_id =='S'">
                                    <mat-form-field style="margin-left: 50px;">
                                        <input type="text" matInput formControlName="supplier" readonly
                                            placeholder="Supplier Name" id="ap-0407">
                                        <mat-label>Supplier Name</mat-label>
                                    </mat-form-field>
                                </td>
                                <td *ngIf="payto_id !='S'">
                                    <mat-form-field style="margin-left: 50px;">
                                        <input type="text" matInput formControlName="supplier" readonly
                                            placeholder="Employee Name" id="ap-0408">
                                        <mat-label>Employee Name</mat-label>
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="margin-left: 50px;">
                                        <input type="text" matInput formControlName="amount" readonly
                                            placeholder="Advance Amount" id="ap-0409">
                                        <mat-label>Advance Amount</mat-label>
                                    </mat-form-field>
                                </td>
                            </tr>
                        </div>
                    </table>
                </form>
                <div>
                    <table class="table table-bordered" style="width: 95%; margin-left: 25px;text-align: center;">
                        <thead class="table_header">
                            <tr>
                                <th>S.No</th>
                                <th>CR No</th>
                                <th>Invoice Header Status</th>
                                <th>AP Status</th>
                                <th>Date</th>
                                <th>PPX Amount</th>
                                <th>PPX Balance</th>
                                <th>ECF Amount</th>
                                <th>AP Amount</th>
                            </tr>
                        </thead>

                        <tr *ngFor="let dt of liqDetails;let i=index">
                            <td style=" text-align: center;">{{i+1}}</td>
                            <td>{{dt.current_crno}}</td>
                            <td>{{dt.apinvoicehdr_status.text}}</td>
                            <td>{{dt.apstatus?.text}}</td>
                            <td>{{dt.ppxheader_date | date: 'dd/MM/yyyy' }}</td>
                            <td>{{dt.ppxdetails_amount}}</td>
                            <td>{{dt.ppxdetails_balance}}</td>
                            <td>{{dt.ecf_amount}}</td>
                            <td>{{dt.ap_amount}}</td>
                        </tr>
                    </table>
                    <div *ngIf="liqDetails ?.length == 0" style="margin-left: 42%;">
                        <h3>Sorry data not found!.. </h3>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- <pre>{{ecfradioForm.value|json}}</pre> -->


    <div>
        <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
            data-backdrop="static" data-keyboard="false" id="ap-0017">
            <div class="modal-dialog modal-xl " style="width: 90%;">
                <div class="modal-content">
                    <div class="modal-header text-center" style="background: rgba(23, 204, 23, 0.288);">
                        <h2 class="modal-title w-100 font-weight-bold" style="color:black ;height:2px">Transaction
                            Details
                        </h2>
                        <button type="button" class="close" data-dismiss="modal" #closetranbutton aria-label="Close"
                            id="ap-0410">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>

                    <div style="margin-left: 50px;margin-right: 80%;margin-top: 2%; width: 90%;">
                        <div class="container">
                            <div class="row">
                                <div class="table-responsive" style="width:100%;margin-top: 1%;">
                                    <table class="table table-bordered" fixed-header
                                        style="width: 99%;margin-top: 10px;">
                                        <thead class="table_header" style="text-align: left;">


                                            <tr>

                                                <th>S.No</th>
                                                <th>Status</th>
                                                <th>Date</th>
                                                <th>Remarks</th>
                                                <th>Employee Name</th>
                                                <th>Approver Name</th>
                                                <th>Approved By</th>



                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let dtl of tranrecords; index as i">
                                                <td style=" text-align: center;">{{i+1}}</td>
                                                <td>{{dtl?.status}}</td>
                                                <td>{{dtl?.created_date|date:'dd/MM/yyyy'}}</td>
                                                <td>{{dtl?.remarks}}</td>
                                                <td>{{dtl?.from_user?.name}}</td>
                                                <td>{{dtl?.to_user?.name}}</td>
                                                <td>{{dtl?.to_user?.name}}</td>

                                            </tr>
                                        </tbody>
                                    </table>
                                    <div *ngIf="tranrecords ?.length == 0" style="margin-left: 42%;">
                                        <h3>Sorry data not found!.. </h3>
                                    </div>



                                </div>
                                <tr>
                                    <td>

                                        <button type="button" class="btn btn-light" style="border-radius:7px;margin-left:450px;
                                    border-color: black; margin-bottom: 20px;
                                    background-color: white;" (click)="tranback()" id="ap-0411">Back</button>

                                    </td>
                                </tr>
                            </div>


                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
    data-backdrop = "static" data-keyboard="false"    id="ap-0018">
        <div class="modal-dialog modal-xl" style="width:80%;height:200%;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title" style="text-align:center;margin-left:45%">Dedupe</h2>
                    <button class="close" type="button" data-dismiss="modal" id="ap-0412">x</button>
                </div>
                <div class="modal-body">
                    <h3>EXACT MATCH</h3>
                    <div class="table-responsive" class="tablescroll"
                        style="margin-top: 10px;width: 100%;margin-left: 10px;">
                        <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                            <thead class="table_header " fixed-header>
                                <tr>
                                    <th>S.No</th>
                                    <th>Invoice Number</th>
                                    <th>Invoice Header Amount</th>
                                    <th>Status</th>
                                    <th>CR Number</th>
                                    <th>Supplier Name</th>
                                    <th>Branch Name</th>
                                    <th>Employee Name</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let value of exactList; index as i;">
                                    <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                    <td>{{value.invoiceno}}</td>
                                    <td style="text-align: right;">{{value.invoiceamount}}</td>
                                    <td>{{value['status'].text}}</td>
                                    <td>{{value.crno}}</td>
                                    <td>{{value['supplier'].name}}</td>
                                    <td>{{value['branch'].name}}</td>
                                    <td>{{value.raised_empname}}</td>
                                </tr>
                            </tbody>
                        </table>
                        <div *ngIf="exactList ?.length == 0" style="margin-left: 42%;">
                            <h3 style="font-family: 'Times New Roman', Times, serif;">No Records found!..</h3>
                        </div>
                    </div>
                    <br>

                    <h3>WITHOUT SUPPLIER</h3>
                    <div class="table-responsive" class="tablescroll"
                        style="margin-top: 10px;width: 100%;margin-left: 10px;">
                        <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                            <thead class="table_header " fixed-header>
                                <tr>
                                    <th>S.No</th>
                                    <th>Invoice Number</th>
                                    <th>Invoice Header Amount</th>
                                    <th>Status</th>
                                    <th>CR Number</th>
                                    <th>Supplier Name</th>
                                    <th>Branch Name</th>
                                    <th>Employee Name</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let value of withoutSuppList; index as i;">
                                    <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                    <td>{{value.invoiceno}}</td>
                                    <td style="text-align: right;">{{value.invoiceamount}}</td>
                                    <td>{{value['status'].text}}</td>
                                    <td>{{value.crno}}</td>
                                    <td>{{value['supplier'].name}}</td>
                                    <td>{{value['branch'].name}}</td>
                                    <td>{{value.raised_empname}}</td>
                                </tr>
                            </tbody>
                        </table>
                        <div *ngIf="withoutSuppList ?.length == 0" style="margin-left: 42%;">
                            <h3 style="font-family: 'Times New Roman', Times, serif;">No Records found!..</h3>
                        </div>
                    </div>
                    <br>

                    <h3>WITHOUT INVOICE_AMOUNT</h3>
                    <div class="table-responsive" class="tablescroll"
                        style="margin-top: 10px;width: 100%;margin-left: 10px;">
                        <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                            <thead class="table_header " fixed-header>
                                <tr>
                                    <th>S.No</th>
                                    <th>Invoice Number</th>
                                    <th>Invoice Header Amount</th>
                                    <th>Status</th>
                                    <th>CR Number</th>
                                    <th>Supplier Name</th>
                                    <th>Branch Name</th>
                                    <th>Employee Name</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let value of withoutInvAmtList; index as i;">
                                    <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                    <td>{{value.invoiceno}}</td>
                                    <td style="text-align: right;">{{value.invoiceamount}}</td>
                                    <td>{{value['status'].text}}</td>
                                    <td>{{value.crno}}</td>
                                    <td>{{value['supplier'].name}}</td>
                                    <td>{{value['branch'].name}}</td>
                                    <td>{{value.raised_empname}}</td>
                                </tr>
                            </tbody>
                        </table>
                        <div *ngIf="withoutInvAmtList ?.length == 0" style="margin-left: 42%;">
                            <h3 style="font-family: 'Times New Roman', Times, serif;">No Records found!..</h3>
                        </div>
                    </div>
                    <br>

                    <h3>WITHOUT INVOICE_NUMBER</h3>
                    <div class="table-responsive" class="tablescroll"
                        style="margin-top: 10px;width: 100%;margin-left: 10px;">
                        <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                            <thead class="table_header " fixed-header>
                                <tr>
                                    <th>S.No</th>
                                    <th>Invoice Number</th>
                                    <th>Invoice Header Amount</th>
                                    <th>Status</th>
                                    <th>CR Number</th>
                                    <th>Supplier Name</th>
                                    <th>Branch Name</th>
                                    <th>Employee Name</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let value of withoutInvNoList; index as i;">
                                    <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                    <td>{{value.invoiceno}}</td>
                                    <td style="text-align: right;">{{value.invoiceamount}}</td>
                                    <td>{{value['status'].text}}</td>
                                    <td>{{value.crno}}</td>
                                    <td>{{value['supplier'].name}}</td>
                                    <td>{{value['branch'].name}}</td>
                                    <td>{{value.raised_empname}}</td>
                                </tr>
                            </tbody>
                        </table>
                        <div *ngIf="withoutInvNoList ?.length == 0" style="margin-left: 42%;">
                            <h3 style="font-family: 'Times New Roman', Times, serif;">No Records found!..</h3>
                        </div>
                    </div>
                    <br>

                    <pre>WITHOUT INVOICE DATE</pre>
                    <div class="table-responsive" class="tablescroll"
                        style="margin-top: 10px;width: 100%;margin-left: 10px;">
                        <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                            <thead class="table_header " fixed-header>
                                <tr>
                                    <th>S.No</th>
                                    <th>Invoice Number</th>
                                    <th>Invoice Header Amount</th>
                                    <th>Status</th>
                                    <th>CR Number</th>
                                    <th>Supplier Name</th>
                                    <th>Branch Name</th>
                                    <th>Employee Name</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let value of withoutInvDtList; index as i;">
                                    <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                    <td>{{value.invoiceno}}</td>
                                    <td style="text-align: right;">{{value.invoiceamount}}</td>
                                    <td>{{value['status'].text}}</td>
                                    <td>{{value.crno}}</td>
                                    <td>{{value['supplier'].name}}</td>
                                    <td>{{value['branch'].name}}</td>
                                    <td>{{value.raised_empname}}</td>
                                </tr>
                            </tbody>
                        </table>
                        <div *ngIf="withoutInvDtList ?.length == 0" style="margin-left: 42%;">
                            <h3 style="font-family: 'Times New Roman', Times, serif;">No Records found!..</h3>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-primary" style="border-radius:40px;"
                        data-dismiss="modal" id="ap-0413">Back</button>
                </div>

            </div>
        </div>

    </div>
    <!-- Auditchecklist -->
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true"
    data-backdrop = "static" data-keyboard="false"   id="ap-0019">
        <div class="modal-dialog modal-xl" style="width:80%;height:200%;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Audit Checklist</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ap-0414">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <!-- <br> -->
                <div class="modal-body">
                    <div>
                        <lib-vs-cbox-summary [SummaryDetails]="SummaryauditchecklistviewData"
                            [SummaryApiObj]="SummaryApiauditchecklistviewObjNew"></lib-vs-cbox-summary>
                        <!-- <table  id="customers" style="text-align: center;">
                          <thead >
                          <tr >
                              <th style="text-align: center;color: black;">S.NO</th>
                              <th  style="text-align: center;color: black;">Question</th>
                              <th style="text-align: center;color: black;">OK/NOT-OK</th>
                          </tr>
                          </thead>
                          <tr *ngFor="let dt of checklist;let i=index">
                          <td style="height: 28px;">{{i+1}}</td>
                          <td style="height: 28px;">{{dt.question}}</td>
                          <td style="height: 28px;" [ngClass]="dt.value.text=='OK' ? 'OK': dt.value.text=='NOT_OK' ? 'NOT_OK' : 'NAP'"> {{dt.value.text}} </td>
                         </tr>
     
                      </table>
     
                 <div *ngIf="checklist?.length==0;" style="margin-left: 450px;margin-top: 10px;">No Records Found...</div> -->
                    </div>
                    <!-- <div>
                     <button  data-dismiss="modal" class="btn btn-outline-primary" style="border-radius:35px;height: 40px;margin-top: 1%;margin-bottom: 2%; margin-left: 500px;" id="ap-0415">Back</button> 
                 </div> -->
                </div>
                <div class="modal-footer">

                    <button type="button" data-dismiss="modal" style="border-radius: 40px; margin-left: 10px"
                        class="btn btn-outline-primary" id="ap-0415">
                        Back</button>
                    <!-- </tr> -->
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true"
    data-backdrop = "static" data-keyboard="false"  id="ap-0021">
        <div class="modal-dialog modal-xl" style="width:80%;height:200%;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Audit Checklist</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ap-0416">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <!-- <br> -->
                <div class="modal-body">
                    <div>
                        <table id="customers" style="text-align: center;">
                            <thead>
                                <tr>
                                    <th style="text-align: center;color: black;">S.No</th>
                                    <th style="text-align: center;color: black;">Question</th>
                                    <th style="text-align: center;color: black;">OK/NOT-OK</th>
                                </tr>
                            </thead>
                            <tr *ngFor="let dt of checklist;let i=index">
                                <td style=" text-align: center;height: 28px;">{{i+1}}</td>
                                <td style="height: 28px;">{{dt.question}}</td>
                                <td style="height: 28px;">
                                    <div class="btn-group btn-group-toggle" data-toggle="buttons">
                                        <label class="btn btn-outline-success" [ngClass]="(dt.value==1)? 'active': ''"
                                            style="height: 28px;padding:4px;font-size: 13px">
                                            <input type="radio" name="options" id="option1" autocomplete="off"
                                                (change)="ok(i,dt)" style="height: 28px"> OK
                                        </label>
                                        <label class="btn btn-outline-danger " [ngClass]="(dt.value==2)? 'active': ''"
                                            style="height: 28px;padding:4px;font-size: 13px">
                                            <input type="radio" name="options" id="option2" autocomplete="off" checked
                                                (change)="notok(i,dt)" style="height: 28px"> NOT-OK
                                        </label>
                                        <label class="btn btn-outline-secondary"
                                            style="height: 28px;padding:4px;font-size: 13px">
                                            <input type="radio" name="options" id="option3" autocomplete="off"
                                                (change)="nap(i,dt)" style="height: 28px;"> N/A
                                        </label>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div>
                        <mat-form-field style="width: 20rem;margin-left: 30px; margin-top: 2%;margin-bottom: 2%;">
                            <mat-label>Solution</mat-label>
                            <mat-select placeholder="Solution" [formControl]="rem" required id="ap-0417">
                                <mat-option *ngFor="let sol of checklist" [value]="sol.solution"
                                    matTooltip="{{sol.solution}}" matTooltipClass="custom-tooltipnew">
                                    {{sol.solution}}
                                </mat-option>
                            </mat-select>
                            <!-- <input matInput [formControl]="rem" autocomplete="off" required id="ap-0418"> -->
                        </mat-form-field>
                        <mat-form-field *ngIf="rem.value === 'other' || rem.value === 'Other'|| rem.value === 'OTHER'"
                            style="width: 20rem; margin-left: 30px; margin-top: 2%; margin-bottom: 2%;">
                            <mat-label>Remarks</mat-label>
                            <input matInput [formControl]="purpose" autocomplete="off" required id="ap-0419">
                        </mat-form-field>
                        <!-- <mat-form-field style="width: 20rem;margin-left: 30px; margin-top: 2%;margin-bottom: 2%;">
                         <mat-label>Remarks</mat-label>
                         <input matInput [formControl]="rem" autocomplete="off" required id="ap-0420">
                     </mat-form-field> -->
                        <button type="submit" data-dismiss="modal"
                            [disabled]="((rem.invalid==true) || (chklstValid==true) )" class="btn btn-outline-success"
                            style="border-radius:35px;height: 40px;margin-left: 10px;" (click)="bounce()"
                            id="ap-0421">Bounce</button>
                        <button class="btn btn-outline-primary"
                            style="border-radius:35px;height: 40px;margin-left: 100px;"
                            [disabled]="chklstValid == false" (click)="submitted()" id="ap-0422">Submit</button>
                        <button data-dismiss="modal" class="btn btn-outline-success"
                            style="border-radius:35px;height: 40px;margin-left: 10px;" id="ap-0423">Back</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true"
    data-backdrop = "static" data-keyboard="false"   id="ap-0026">
        <div class="modal-dialog modal-xl" style="width:80%;height:200%;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Change History</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ap-0424">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <!-- <br> -->
                <div class="modal-body">
                    <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                        <h3>Invoice Header</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th >S.No</th>
                                    <th>Type</th>
                                    <th >CR No</th>
                                    <th>Invoice No</th>
                                    <th>Is GST</th>
                                    <th>Invoice Amount</th>
                                    <th>Taxable Amount</th>
                                    <th>Supplier Name</th>
                                    <th>Branch Name</th>
                                    <th>Invoice Date</th>
                                    <th>Purpose</th>
                                    <th>Invoice Status</th>
                                    <th>Transaction By</th>
                                </tr>
                            </thead>
                            <tr *ngFor="let hdr of changeHistoryInvHdr;let i=index">
                                <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{(presentpageHdrChgHist - 1)*10 +i+1 }}</td>
                                <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{hdr?.module_type?.text}}</td>
                                <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{hdr?.apinvoiceheader_crno}}</td>
                                <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{hdr?.invoiceno}}</td>
                                <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'" *ngIf="hdr?.invoicegst == 'Y'">
                                    Yes                     </td>
                                <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'" *ngIf="hdr?.invoicegst == 'N'">
                                    No                     </td>
                                <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{hdr?.totalamount}}</td>
                                <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{hdr?.totalamount - hdr?.taxamount}}</td>
                                <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{hdr?.supplier_id}}</td>
                                <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{hdr?.branch}}
                                </td>
                                <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{hdr?.invoicedate}}</td>
                                <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{hdr?.remarks}}
                                </td>
                                <td *ngIf="hdr.module_type.text == 'ECF'"
                                    [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{hdr?.invoice_status}}</td>
                                <td *ngIf="hdr.module_type.text == 'AP'"
                                    [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{hdr?.apinvoiceheader_status}}</td>
                                <td [ngClass]="hdr.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{hdr?.transaction_by?.name}} - {{hdr?.transaction_by?.code}}</td>
                            </tr>
                        </table>

                        <div *ngIf="changeHistoryInvHdr.length == 0" style="margin-left: 42%;">
                            <h3>Sorry data not found!.. </h3>
                        </div>
                        <div class="row" *ngIf="changeHistoryInvHdr.length > 0" style="width:85%">
                            <div class="col-sm-3" style="font-size: small;text-align:left;right:-225px;">
                            </div>
                            <div class="col-sm-9" style="font-size: small;text-align:right;left: 18%">
                                <mat-paginator (page)="handleHdrChgHistPageEvent($event)" [length]="length_HdrChgHist"
                                    [pageSize]="pageSize_HdrChgHist" [showFirstLastButtons]="showFirstLastButtons"
                                    [pageSizeOptions]="pageSizeOptions" [pageIndex]="pageIndex_HdrChgHist"
                                    [hidePageSize]="true" aria-label="Select page">
                                </mat-paginator>
                            </div>
                        </div>

                    </div>


                    <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                        <h3>Invoice Detail</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>S.No</th>
                                    <th>Type</th>
                                    <th>Particulars</th>
                                    <th>Product Name</th>
                                    <th>Is Capitalized</th>
                                    <th>UOM</th>
                                    <th>HSN Code</th>
                                    <th>HSN %</th>
                                    <th>Unit Price</th>
                                    <th>Quantity</th>
                                    <th>Amount</th>
                                    <th>CGST</th>
                                    <th>SGST</th>
                                    <th>IGST</th>
                                    <th>Tax Amount</th>
                                    <th>Discount</th>
                                    <th>Total Amount</th>
                                    <th>Transaction By</th>
                                </tr>
                            </thead>
                            <tr *ngFor="let dtl of changeHistoryInvdtl;let i=index">
                                <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{(presentpageDtlChgHist - 1)*10 +i+1 }}</td>
                                <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{dtl?.module_type?.text}}</td>
                                <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{dtl?.description}}</td>
                                <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{dtl?.productname}}</td>
                                <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                                    *ngIf="dtl?.is_capitalized==0">No</td>
                                <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                                    *ngIf="dtl?.is_capitalized==1">Yes</td>
                                <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dtl?.uom}}</td>
                                <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dtl?.hsn}}</td>
                                <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{dtl?.hsn_percentage}}</td>
                                <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{dtl?.unitprice}}</td>
                                <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dtl?.quantity}}
                                </td>
                                <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dtl?.amount}}
                                </td>
                                <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dtl?.cgst}}
                                </td>
                                <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dtl?.sgst}}
                                </td>
                                <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dtl?.igst}}
                                </td>
                                <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{dtl?.taxamount}}</td>
                                <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dtl?.discount}}
                                </td>
                                <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{dtl?.totalamount}}</td>
                                <td [ngClass]="dtl.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{dtl?.transaction_by?.name}} - {{dtl?.transaction_by?.code}}</td>
                            </tr>
                        </table>

                        <div *ngIf="changeHistoryInvdtl.length == 0" style="margin-left: 42%;">
                            <h3>Sorry data not found!.. </h3>
                        </div>
                        <div class="row" *ngIf="changeHistoryInvdtl.length > 0" style="width:85%">
                            <div class="col-sm-3" style="font-size: small;text-align:left;right:-225px;">
                            </div>
                            <div class="col-sm-9" style="font-size: small;text-align:right;left: 18%">
                                <mat-paginator (page)="handleDtlChgHistPageEvent($event)" [length]="length_DtlChgHist"
                                    [pageSize]="pageSize_DtlChgHist" [showFirstLastButtons]="showFirstLastButtons"
                                    [pageSizeOptions]="pageSizeOptions" [pageIndex]="pageIndex_DtlChgHist"
                                    [hidePageSize]="true" aria-label="Select page">
                                </mat-paginator>
                            </div>
                        </div>

                    </div>
                    <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                        <h3>Debit Detail</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>S.No</th>
                                    <th>Type</th>
                                    <th>Category</th>
                                    <th>Sub Category </th>
                                    <th>GL Number</th>
                                    <th>BS </th>
                                    <th>CC</th>
                                    <th>CCBS Percentage</th>
                                    <th>Amount</th>
                                    <th>Adjust Amount</th>
                                    <th>Debit Amount</th>
                                    <th>Transaction By</th>
                                </tr>
                            </thead>
                            <tr *ngFor="let dbt of changeHistoryDbtdtl;let i=index">
                                <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{(presentpageDebChgHist - 1)*10 +i+1 }}</td>
                                <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{dbt?.module_type?.text}}</td>
                                <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dbt?.category}}
                                </td>
                                <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{dbt?.subcategory?.name}}</td>
                                <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dbt?.glno}} -
                                    {{dbt?.subcategory?.gl_description}}</td>
                                <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dbt?.bs_name}}
                                </td>
                                <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{dbt?.cc_name}}
                                </td>
                                <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                                    style="text-align:center">{{dbt?.ccbspercentage}}</td>
                                <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                                    style="text-align:right">{{dbt?.amount}}</td>
                                <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                                    style="text-align:right">{{dbt?.deductionamount}}</td>
                                <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                                    style="text-align:right">{{dbt?.amount}}</td>
                                <td [ngClass]="dbt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{dbt?.transaction_by?.name}} - {{dbt?.transaction_by?.code}}</td>
                            </tr>
                        </table>

                        <div *ngIf="changeHistoryDbtdtl.length == 0" style="margin-left: 42%;">
                            <h3>Sorry data not found!.. </h3>
                        </div>
                        <div class="row" *ngIf="changeHistoryDbtdtl.length > 0" style="width:85%">
                            <div class="col-sm-3" style="font-size: small;text-align:left;right:-225px;">
                            </div>
                            <div class="col-sm-9" style="font-size: small;text-align:right;left: 18%">
                                <mat-paginator (page)="handleDebChgHistPageEvent($event)" [length]="length_DebChgHist"
                                    [pageSize]="pageSize_DebChgHist" [showFirstLastButtons]="showFirstLastButtons"
                                    [pageSizeOptions]="pageSizeOptions" [pageIndex]="pageIndex_DebChgHist"
                                    [hidePageSize]="true" aria-label="Select page">
                                </mat-paginator>
                            </div>
                        </div>

                    </div>
                    <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                        <h3>Credit Detail</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>S.No</th>
                                    <th>Type</th>
                                    <th>Paymode</th>
                                    <th>Account Detail/GL</th>
                                    <!-- <th style="text-align: center;color: black;">Transaction Branch</th> -->
                                    <th>Ref No</th>
                                    <th
                                        *ngIf="this.payto_id != 'E' && this.payto_id != 'B'">Bank Name</th>
                                    <th
                                        *ngIf="this.payto_id != 'E' && this.payto_id != 'B'">Branch Name</th>
                                    <th
                                        *ngIf="this.payto_id != 'E' && this.payto_id != 'B'">IFSC Code</th>
                                    <th>Beneficiary Name</th>
                                    <th>Tax Type - GL No</th>
                                    <th>Tax Rate</th>
                                    <th >TDS Excempt</th>
                                    <th>Taxable Amount</th>
                                    <th>GL No</th>
                                    <th>Amount</th>
                                    <th>Transaction By</th>
                                </tr>
                            </thead>
                            <tr *ngFor="let cdt of changeHistoryCreddtl;let i=index">
                                <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{(presentpageCredChgHist - 1)*10 +i+1 }}</td>
                                <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{cdt?.module_type?.text}}</td>
                                <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{cdt?.paymode}}
                                </td>
                                <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{cdt?.refno}}
                                </td>
                                <!-- <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'" style="text-align: center;">-</td> -->
                                <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{cdt?.refno}}
                                </td>

                                <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                                    *ngIf="this.payto_id == 'S'"><ng-container
                                        *ngFor="let cdtdtl of cdt?.supplierpayment_details?.data">{{cdtdtl?.bank_id?.name}}</ng-container>
                                </td>
                                <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                                    *ngIf="this.payto_id == 'S'"><ng-container
                                        *ngFor="let cdtdtl of cdt?.supplierpayment_details?.data">{{cdtdtl?.branch_id?.name}}</ng-container>
                                </td>
                                <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                                    *ngIf="this.payto_id == 'S'"><ng-container
                                        *ngFor="let cdtdtl of cdt?.supplierpayment_details?.data">{{cdtdtl?.branch_id?.ifsccode}}</ng-container>
                                </td>
                                <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                                    *ngIf="this.payto_id == 'S'"><ng-container
                                        *ngFor="let cdtdtl of cdt?.supplierpayment_details?.data">{{cdtdtl?.beneficiary}}</ng-container>
                                </td>

                                <!-- <td *ngIf="this.payto_id == 'E'"><ng-container *ngFor="let cdtdtl of cdt?.employeeaccount_details?.data">{{cdtdtl?.bank_name}}</ng-container></td>
                                <td *ngIf="this.payto_id == 'E'"><ng-container *ngFor="let cdtdtl of cdt?.employeeaccount_details?.data">{{cdtdtl?.bankbranch?.name}}</ng-container></td>
                                <td *ngIf="this.payto_id == 'E'"><ng-container *ngFor="let cdtdtl of cdt?.employeeaccount_details?.data">{{cdtdtl?.bankbranch?.ifsccode}}</ng-container></td>
                                <td *ngIf="this.payto_id == 'E'"><ng-container *ngFor="let cdtdtl of cdt?.employeeaccount_details?.data">{{cdtdtl?.beneficiary_name}}</ng-container></td> -->
                                <!-- <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'" *ngIf="this.payto_id == 'E'">{{cdt?.employeeaccount_details?.data[0]?.bank_name}}</td> -->
                                <!-- <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'" *ngIf="this.payto_id == 'E'">{{cdt?.employeeaccount_details?.data[0]?.bankbranch?.name}}</td> -->
                                <!-- <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'" *ngIf="this.payto_id == 'E'">{{cdt?.employeeaccount_details?.data[0]?.bankbranch?.ifsccode}}</td> -->
                                <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                                    *ngIf="this.payto_id == 'E'">
                                    {{cdt?.employeeaccount_details?.data[0]?.beneficiary_name}}</td>

                                <!-- <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'" *ngIf="this.payto_id == 'B'">KARUR VYSYA BANK</td> -->
                                <!-- <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'" *ngIf="this.payto_id == 'B'">EXPENSES MANAGEMENT CELL</td> -->
                                <!-- <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'" *ngIf="this.payto_id == 'B'">KVBL0001903</td> -->
                                <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                                    *ngIf="this.payto_id == 'B'">EXPENSES MANAGEMENT CELL</td>
                                <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{cdt?.suppliertaxtype}}</td>
                                <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{cdt?.suppliertaxrate}}</td>
                                    <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'" *ngIf="cdt?.taxexcempted == 'Y' || cdt?.taxexcempted == 'Yes'">Yes</td>
                                    <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'" *ngIf="cdt?.taxexcempted == 'N' || cdt?.taxexcempted == 'No'">No</td>                        
                                <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"style="text-align:right">{{cdt?.taxableamount}}</td>
                                <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">{{cdt?.glno}}
                                </td>
                                <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'"
                                    style="text-align:right">{{cdt?.amount}}</td>
                                <td [ngClass]="cdt.module_type.text == 'ECF' ? 'ECFColor' : 'APColor'">
                                    {{cdt?.transaction_by?.name}} - {{cdt?.transaction_by?.code}}</td>

                            </tr>
                        </table>

                        <div *ngIf="changeHistoryCreddtl.length == 0" style="margin-left: 42%;">
                            <h3>Sorry data not found!.. </h3>
                        </div>
                        <div class="row" *ngIf="changeHistoryCreddtl.length > 0" style="width:85%">
                            <div class="col-sm-3" style="font-size: small;text-align:left;right:-225px;">
                            </div>
                            <div class="col-sm-9" style="font-size: small;text-align:right;left: 18%">
                                <mat-paginator (page)="handleCredChgHistPageEvent($event)" [length]="length_CredChgHist"
                                    [pageSize]="pageSize_CredChgHist" [showFirstLastButtons]="showFirstLastButtons"
                                    [pageSizeOptions]="pageSizeOptions" [pageIndex]="pageIndex_CredChgHist"
                                    [hidePageSize]="true" aria-label="Select page">
                                </mat-paginator>
                            </div>
                        </div>

                    </div>

                </div>
                <!-- <br><br> -->
                <div class="modal-footer">

                    <button type="button" data-dismiss="modal" style="border-radius: 40px; margin-left: 10px"
                        class="btn btn-outline-primary" id="ap-0425">
                        Back</button>
                    <!-- </tr> -->
                </div>
            </div>
        </div>


    </div>

    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
    data-backdrop = "static" data-keyboard="false" id="ap-0031">
        <div class="modal-dialog modal-xl " style="width: 85%;">
            <div class="modal-content">
                <div class="modal-header" style="text-align:center;background:#DDEFDD;">
                    <h2 class="modal-title" style="text-align:center;margin-left:38%">Audit Checklist</h2>
                    <button type="button" class="close" #auditclose data-dismiss="modal" aria-label="Close"
                        id="ap-0426">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div>
                    <table id="customers" style="text-align: center;">
                        <thead>
                            <tr>
                                <th style="text-align: center;color: black;">S.No</th>
                                <th style="text-align: center;color: black;">Question</th>
                                <th style="text-align: center;color: black;">OK/NOT-OK</th>
                            </tr>
                        </thead>
                        <tr *ngFor="let dt of checklist;let i=index">
                            <td style=" text-align: center;height: 28px;">{{i+1}}</td>
                            <td style="height: 28px;">{{dt.question}}</td>
                            <td style="height: 28px;"
                                [ngClass]="dt.value.text=='OK' ? 'OK': dt.value.text=='NOT_OK' ? 'NOT_OK' : 'NAP'">
                                {{dt.value.text}} </td>
                        </tr>
                    </table>
                </div>
                <div>
                    <button data-dismiss="modal" class="btn btn-outline-primary"
                        style="border-radius:35px;height: 40px;margin-top: 1%;margin-bottom: 2%; margin-left: 500px;"
                        id="ap-0427">Back</button>
                </div>
            </div>
        </div>
    </div>


    <!-- VIEW ENTRY -->
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
    data-backdrop = "static" data-keyboard="false"   id="ap-0033">
        <div class="modal-dialog modal-xl" style="width:80%;height:100%;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>View Entry - {{failedTransCrno}}
                    </h3>
                    <button type="button" class="close" #submitclosebutton
                        (click)="viewerrorBack();closeErrorDescription();" data-dismiss="modal" aria-label="Close"id="ap-0428">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <br>
                <div class="modal-body">
                    <lib-vs-cbox-summary [SummaryDetails]="SummaryviewfailedData"
                        [SummaryApiObj]="SummaryApiviewfailedObjNew" [FirstLastbtn]="true"></lib-vs-cbox-summary>
                </div>

                <!-- <table class="table table-bordered" style="width: 100%;text-align: center;">
                <thead class="table_header">
                <tr>
                    <th>S.No</th>
                    <th>Type</th>
                    <th>GL No</th>
                    <th>GL Description</th>
                    <th>Module</th>
                    <th>Entry Status</th>
                    <th>Transaction Date</th>
                    <th>Amount</th>
                    <th>Error</th>
                </tr>
                </thead>
                <tr *ngFor="let dt of failedViewEntrySummary;let i=index">
                    <td>{{ (failedViewEntrypresentpage -1)*10 + (i+1)}}</td>
                    <td>{{dt?.type}}</td>
                    <td>{{dt?.gl}}</td>
                    <td>{{dt?.glnodescription}}</td>
                    <td>{{dt?.module}}</td>
                    <td>{{dt?.entry_new_status}}</td>
                    <td>{{dt?.transactiondate | date: 'dd-MMM-yyyy'}} {{dt?.transactiontime}}</td>
                    <td>{{dt?.amount}}</td>
                    <td>

                        <span matTooltip="view error" class=" fa fa-eye create "
                        style="color: green;cursor: pointer;padding:10px" data-toggle="modal" data-target="#viewerror"  (click)="viewEntryError(dt?.errordescription,i)">
                    </span>

                    </td>
                </tr>

            
            </table> -->
                <!-- <br><br> -->
                <div *ngFor="let dt of failedViewEntrySummary; let i=index">
                    <div *ngIf="showNewLine && i === selectedRowIndex" style="margin-left:20px">

                        <div style="align-items: center;">
                            <h3 class="error-text" style="color: red;">Error Description:</h3>
                            <h3 class="error-text" style="margin-left:10px" *ngIf="dt?.errordescription == 0">-</h3>
                            <br>
                            <b><textarea name="comment" style="overflow-y: scroll; overflow-x: hidden;
                                max-height: fit-content; max-width:98%;width:98%"
                                     [disabled]="true" class="ng-binding" *ngIf="dt?.errordescription != 0" id="ap-0429">
                            {{dt?.errordescription}}</textarea></b>
                        </div>

                        <!-- <b><p style="align-items: center;margin-left: 25px;">
                            <span class="error-text">Error Description:</span>
                            <span style="margin-left: 100px;" class="error-text" *ngIf="dt?.errordescription == 0">-</span>
                            <br><b><textarea name="comment" style="overflow-y: scroll; height: 60px;width:98%"
                                 disabled="" class="ng-binding" *ngIf="dt?.errordescription != 0" id="ap-0429">
                        {{dt?.errordescription}}</textarea></b></p></b> -->

                    </div>
                </div>
                <!-- <div *ngIf="failedViewEntrySummary?.length == 0" style="margin-left: 42%;">
                <h3 >Sorry data not found!.. </h3>
                </div>
                    <div class="col-sm-8" style="margin-bottom: 0%;font-size: small;text-align: right;margin-top: 18px;font-weight:bold">
                 Page: {{failedViewEntrypresentpage}}
                 </div> -->
                 <!-- <div  class="col-sm-4" style="margin-bottom: 0%;font-size: small;text-align:right;">
                    <mat-paginator  style="margin-top: 0%; width: 350px;"
                                (page)="handleFailedViewEntry($event)"
                                [length]="length_FailedViewEntry"
                                [pageSize]="pageSize_FailedViewEntry"
                                [showFirstLastButtons]="showFirstLastButtons"
                                [pageSizeOptions]="pageSizeOptions"
                                [pageIndex]="pageIndexFailedViewEntry"
                                [hidePageSize]="true"
                                aria-label="Select page">                            
                    </mat-paginator>
                </div> -->
                <!-- <tr>
                    <td>
                        <button type="button" style="border-radius:40px;margin-left :530px;margin-bottom: 20px"
                                                class="btn btn-outline-primary" (click)="viewerrorBack();closeErrorDescription();" id="ap-0432">
                                                Back</button>
                    </td>
                </tr> -->
                <br>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-primary" style="border-radius:40px;"
                        (click)="viewerrorBack() " id="ap-0432">
                        Back
                    </button>
                </div>
            </div>
        </div>
    </div>


<!-- View Error Details in Failed Transaction -->
<!-- <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
id="ap-0034">
<div class="modal-dialog modal-xl" style="width:80%;height:200%;">
    <div class="modal-content">
        <div class="modal-header text-center" style="background: rgba(23, 204, 23, 0.288);">
            <h2 class="modal-title w-100 font-weight-bold" style="color:black ;height:2px;font-family: 'Times New Roman', Times, serif;">Error Description
            </h2>
            <button type="button" class="close" #closeErrView data-dismiss="modal" aria-label="Close" id="ap-0433">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
       <br>
       <div class="row">
        <div class="col-md-1"></div>
        <div class="col-md-10">
            <textarea rows="25%" cols="140%" name="comment" disabled="" class="ng-binding"  id="ap-0434">
            </textarea>
        </div>
    </div>
    <br>
        <tr>
            <td>
                <button type="button" style="border-radius:40px;margin-left:530px;margin-bottom: 20px"
                    class="btn btn-outline-primary" (click)="viewerrorBack()"  id="ap-0435">
                Back</button>
            </td>
        </tr>
    </div>
</div>
</div> -->

<!-- Failed Transaction Change Status -->
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
    data-backdrop="static" data-keyboard="false" id="ap-0035">
    <div class="modal-dialog modal-lg" style="width:80%;height:100%;overflow-y: hidden;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Change Status - {{failedInitTypestat}}
                </h3>
                <button type="button" class="close" #failedclosedbutton (click)="apinitiatereset()" data-dismiss="modal"
                    aria-label="Close" id="ap-0436">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form [formGroup]="frmFailedChg">
                    <div>
                        <td style="font-weight: bold;">
                            CR No: {{failedTransCrno}}
                        </td>
                    </div>
                    <div class="searchs-expand">
                        <div id="matInput-size">
                            <lib-vs-optiondd-cmp [InputFields]="failed_field" [formGroup]="frmFailedChg"
                                (dataEvent)="statusChange($event)">
                            </lib-vs-optiondd-cmp>
                            <!-- <mat-form-field appearance="outline">
                        <mat-select placeholder="Change Status To" formControlName="TransChangeStat" required id="ap-0437">
                            <mat-option *ngFor="let st of FailedInitStat" [value]="st.id" (click)="statusChange(st.id)">
                                {{st.text}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field> -->
                        </div>
                        <div *ngIf="showcbsrefno" id="matInput-size">
                            <mat-form-field appearance="outline">
                                <mat-label>CBS Ref No</mat-label>
                                <input matInput formControlName="cbsrefno" autocomplete="off" required id="ap-0438">
                            </mat-form-field>
                        </div>
                        <div *ngIf="!showcbsrefno" id="matInput-size">
                            <mat-form-field appearance="outline">
                                <mat-label>CBS Ref No</mat-label>
                                <input matInput formControlName="cbsrefno" autocomplete="off" id="ap-0439" [readonly]="neftinitiated">
                            </mat-form-field>
                        </div>
                        <div id="matInput-size">
                            <mat-form-field appearance="outline">
                                <mat-label>Remarks</mat-label>
                                <input matInput formControlName="remarks" autocomplete="off" required id="ap-0440">
                            </mat-form-field>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" style="border-radius:40px;" class="btn btn-outline-success"
                    (click)="SubmitChangeStatus()" id="ap-0441">
                    Save</button>
                <button type="button" style="border-radius:40px;" class="btn btn-outline-primary" data-dismiss="modal"
                    (click)="apinitiatereset()" id="ap-0442">
                    Back</button>
            </div>
        </div>
    </div>
</div>
<!-- <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
id="ap-0035">
<div class="modal-dialog modal-xl" style="width:80%;height:200%;">
    <div class="modal-content">
        <div class="modal-header text-center" style="background: rgba(23, 204, 23, 0.288);">
            <h2 class="modal-title w-100 font-weight-bold" style="color:black ;height:2px;font-family: 'Times New Roman', Times, serif;">Change Status - {{failedInitTypestat}}
            </h2>
            <button type="button" class="close" #closedbutton data-dismiss="modal" aria-label="Close" (click)="apinitiatereset()" id="ap-0436">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <form [formGroup]="frmFailedChg">
        <tr style="margin-left: 25px;margin-top: 10px;">
            <td style="font-weight: bold;">
                CR No: {{failedTransCrno}}
            </td>
        </tr>
        <tr>
            <td style="margin-left: 300px;">
            <mat-form-field style="width:200px;margin-left: 200px;">
                <mat-select placeholder="Change Status To" formControlName="TransChangeStat" required id="ap-0437">
                    <mat-option *ngFor="let st of FailedInitStat" [value]="st.id" (click)="statusChange(st.id)">
                        {{st.text}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            </td>
            <td style="margin-left: 10px;" *ngIf="showcbsrefno">
                <mat-form-field style="width: 200px;margin-left: 30px; ">
                    <mat-label>CBS Ref No</mat-label>
                    <input matInput formControlName="cbsrefno" autocomplete="off" required id="ap-0438">
                </mat-form-field>
            </td>
            <td style="margin-left: 10px;" *ngIf="!showcbsrefno">
                <mat-form-field style="width: 200px;margin-left: 30px; ">
                    <mat-label>CBS Ref No</mat-label>
                    <input matInput formControlName="cbsrefno" autocomplete="off" id="ap-0439">
                </mat-form-field>
            </td>
            <td style="margin-left: 10px;">
                <mat-form-field style="width: 200px;margin-left: 30px; ">
                    <mat-label>Remarks</mat-label>
                    <input matInput formControlName="remarks" autocomplete="off" required id="ap-0440">
                </mat-form-field>
            </td>
        </tr>
        <tr>
            <td>
                <button type="button" style="border-radius:40px;margin-left:450px;margin-bottom: 20px;"
                                        class="btn btn-outline-success" (click)="SubmitChangeStatus()" id="ap-0441">
                                        Save</button>
                <button type="button" style="border-radius:40px;margin-left:20px;margin-bottom: 20px"
                                        class="btn btn-outline-danger" data-dismiss="modal" (click)="apinitiatereset()" id="ap-0442">
                                        Cancel</button>
            </td>
        </tr>
        </form>
    </div>
</div>
</div> -->
<!-- View Error Description -->
<!-- <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
id="ap-0036"  data-backdrop="static" data-keyboard="false"  #myModal [ngClass]="error == true ?'openpopup':'closepop' ">
<div class="modal-dialog modal-xl" style="width:80%;height:200%;">
    <div class="modal-content">
        <div class="modal-header text-center" style="background: rgba(23, 204, 23, 0.288);">
            <h2 class="modal-title w-100 font-weight-bold" style="color:black ;height:2px;font-family: 'Times New Roman', Times, serif;">Error Description
            </h2>
            <button type="button" class="close" #closeErrView data-dismiss="modal" aria-label="Close" id="ap-0443">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <br><br>
        <div class="row">
            <div class="col-md-1"></div>
            <div class="col-md-10">
              <textarea rows="25%" cols="140%" name="comment" disabled="" class="ng-binding" id="ap-0444">
                {{errordescrip}}
            </textarea>
            </div>
        </div>
          <br>
        <tr>
            <td>
                <button type="button" style="border-radius:40px;margin-left :530px;margin-bottom: 20px"
                                        class="btn btn-outline-primary" (click)="viewerrorBack()" id="ap-0445">
                                        Back</button>
            </td>
        </tr>
    </div>
</div>
</div> -->

<!-- File View -->
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-backdrop = "static" data-keyboard="false"  id="ap-0037">
    <div class="modal-dialog modal-lg" style="width:80%;height:200%;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Attached Files</h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ap-0446">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <!-- <br> -->
            <div class="modal-body">

                <div class="table-responsive" style="width:100%;margin-top: 1%;">
                    <!-- <div
                        *ngFor="let files of InvoiceHeaderForm?.value?.invoiceheader[this.fileindex]?.filevalue; let index = index">
                        <p (click)="filepreview(files)" data-toggle="modal"
                            data-target="#ap-0040"
                            style="color: #0000EE;cursor: pointer;">
                            {{index+1}}.{{files?.name}} </p>
                        <span
                            (click)="deletefileUpload(InvoiceHeaderForm?.value?.invoiceheader[this.fileindex],index)"
                            [class.disabled]="readinvhdrdata != false">
                            <mat-icon matTooltip="Delete">delete
                            </mat-icon>
                        </span>

                    </div> -->
                    <lib-vs-cbox-summary [SummaryDetails]="SummaryattachedFileData"
                        [SummaryApiObj]="SummaryApiattachedFileObjNew"></lib-vs-cbox-summary>
                    <!-- <h3 style="font-weight: bold;"> Attached Files</h3> -->
                    <!-- <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                                <thead class="table_header" style="text-align: left;">

                                    <tr>
                                        <th style="text-align: center;">S.No</th>
                                        <th style="text-align: center;">File Name</th>
                                        <th style="text-align: center;">View</th>
                                        <th style="text-align: center;">Download</th>   
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let attach of attachedFile.value; index as i">
                                        <td style="text-align: center;">{{i+1}}</td>
                                        <td>{{attach.file_name}}</td>
                                        <td style="text-align: center;" >
                                            <i class="fa fa-external-link" aria-hidden="true" style="color:blue;font-size: 24px;margin-left: 20px;" (click)="data1(attach)"></i>
                                        </td>

                                        <td style="text-align: center;">
                                            <button class="btn btn-outline-primary" type="submit"
                                                (click)="getfiles(attach)"
                                                style="border-radius:40px;margin-left: 15px;" color="primary" id="ap-0447">
                                                <i matTooltip="Download" class="fa fa-download"
                                                    aria-hidden="true"></i>
                                            </button>
                                        </td>
                                    </tr>  
                                </tbody>
                            </table> -->
                    <!-- <tr>
                                <td>

                                    <button type="button" class="btn btn-light" style="border-radius:7px;margin-left:300px;
                                    border-color: black; margin-bottom: 20px;
                                    background-color: white;" (click)="fileback()" id="ap-0448">Back</button>

                                </td>
                            </tr> -->
                </div>








            </div>
            <div class="modal-footer">

                <button type="button" data-dismiss="modal" style="border-radius: 40px; margin-left: 10px"
                    class="btn btn-outline-primary" (click)="fileback()" id="ap-0448">
                    Back</button>
                <!-- </tr> -->
            </div>
        </div>
    </div>
</div>

<div>
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
    data-backdrop = "static" data-keyboard="false" id="ap-0038">
        <div class="modal-dialog modal-lg ">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Attachments
                    </h3>
                    <button type="button" class="close" data-dismiss="modal" #closedbuttonss aria-label="Close"
                        id="ap-0449">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="table-responsive">
                        <h3> Attached Files</h3>
                        <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                            <thead class="table_header" style="text-align: left;">
                                <tr>
                                    <th style="text-align: center;">S.No</th>
                                    <th style="text-align: center;">File Name</th>
                                    <th style="text-align: center;">View</th>
                                    <th style="text-align: center;">Delete</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let files of valid_arr; let index = index">
                                    <td>{{index+1}}</td>
                                    <td style="width: 303px;">
                                        <div  style="width: 300px;overflow: hidden" matTooltip="{{files?.name}}" matTooltipClass="custom-tooltipnew">
                                            {{files?.name}}
                                        </div>
                                    </td>
                                    <td style="text-align: center;">
                                        <i class="fa fa-external-link" aria-hidden="true"
                                            style="color:blue;font-size: 24px;margin-left: 20px;"
                                            (click)="filepreview(files)" data-toggle="modal" data-target="#ap-0040"></i>
                                    </td>
                                    <td style="text-align: center;">
                                        <span (click)="deletefileUpload(valid_arr,index)">
                                            <mat-icon matTooltip="Delete">delete
                                            </mat-icon>
                                        </span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <!-- <div
                                *ngFor="let files of InvoiceHeaderForm?.value?.invoiceheader[this.fileindex]?.filevalue; let index = index">
                                <p (click)="filepreview(files)" data-toggle="modal"
                                    data-target="#ap-0040"
                                    style="color: #0000EE;cursor: pointer;">
                                    {{index+1}}.{{files?.name}} </p>
                                <span
                                    (click)="deletefileUpload(InvoiceHeaderForm?.value?.invoiceheader[this.fileindex],index)"
                                    [class.disabled]="readinvhdrdata != false">
                                    <mat-icon matTooltip="Delete">delete
                                    </mat-icon>
                                </span>
                            </div> -->
                    </div>
                    <!-- <div>
                                    <button type="button" class="btn btn-light" style="border-radius:7px;margin-left:220px;
                                    border-color: black; margin-bottom: 20px;
                                    background-color: white;" (click)="filebackk()" id="ap-0450">Back</button>
                                </div> -->

                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-primary" style="border-radius:40px;"
                            (click)="filebackk()" id="ap-0450">
                            Back
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div *ngIf="showimageHeaderPreview" id="ap-0040" class="modal fade" aria-labelledby="my-modalLabel"
        aria-hidden="true" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-xl" data-dismiss="modal" style="width: 60%;height: 80%;">
            <div class="modal-content">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ap-0451">
                    <span aria-hidden="true">&times;</span>
                </button>
                <div class="modal-body">
                    <img src="{{jpgUrls}}" class="img-responsive" style="width: 100%;">
                </div>
            </div>
        </div>
    </div>
    <div *ngIf="showimageHeaderPreviewPDF" id="ap-0040" class="modal fade" aria-labelledby="my-modalLabel"
        aria-hidden="true" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header" style="background: rgba(23, 204, 23, 0.288);">
                    <h2 class="modal-title"> ECF Attachments</h2>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ap-0452">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <pdf-viewer [src]="pdfurl" [original-size]="false" [render-text]='false' [show-borders]="true"
                    [fit-to-page]="true" [show-all]="true" style="display: block; height: 600px;" [fit-to-page]="true">
                </pdf-viewer>
            </div>
        </div>
    </div>
    <div style="margin-left:20px">
        <div *ngIf="AuditChecklistSummary">
            <!-- <div class="content-adjust"> -->
            <!-- <mat-card style="margin-top: 13px;margin-right: 20px;margin-bottom: 20px;margin-left: 20px;"> -->
            <form [formGroup]="AuditChecklistSummaryForm">
                <h3>Audit Checklist Summary</h3>
                <div class="search-auto-fit">
                    <!-- <lib-vs-search-cmp 
             id="matInput-size"
             [Outputtype]="searchvar"
             [SearchArr]="auditsearch"
             Tooltip="true" 
             (dataoutput)="auditysearch($event)"
             [ButtonArr]="auditbutton"
             [SeparateReset]="true"
             (ResetOutput)="resetAuditChklst($event)"
             >
         
            </lib-vs-search-cmp> -->
                   <div *ngIf="addbuttonhide === true">
                        <lib-vs-search-cmp id="matInput-size" [Outputtype]="searchvar" [SearchArr]="auditsearch"
                            Tooltip="true" (dataoutput)="auditysearch($event)" 
                            [SeparateReset]="true" (ResetOutput)="resetAuditChklst($event)" [ResetForm]="restfiled">

                        </lib-vs-search-cmp>
                    </div>
                    <div *ngIf="addbuttonhide === false">
                        <lib-vs-search-cmp id="matInput-size" [Outputtype]="searchvar" [SearchArr]="auditsearch"
                            Tooltip="true" (dataoutput)="auditysearch($event)" [ButtonArr]="auditbutton"
                            [SeparateReset]="true" (ResetOutput)="resetAuditChklst($event)" [ResetForm]="restfiled">

                        </lib-vs-search-cmp>
                    </div>
                </div>
                <!-- <table>
            <tr>
                <td>
                    <mat-form-field style="margin-left: 10px;">
                        <mat-label>ECF Type</mat-label>
                        <mat-select placeholder="ECF Type" formControlName="ecftype" id="ap-0453">
                                        <mat-option *ngFor="let type of TypeList" [value]="type.id" >
                                            {{type.text}}
                                        </mat-option>
                                    </mat-select>
                    </mat-form-field>
                </td>
                <td>
                    <button class="buttonsize btn btn-outline-primary" (click)="getAuditChksummary()" color="primary"
                    style="margin-left: 600px;" id="ap-0454"><i
                            class="fa fa-search" aria-hidden="true"></i></button>
                    <button class="buttonsize btn btn-outline-primary" (click)="resetAuditChklst()"
                        color="primary" style="margin-left: 10px;" id="ap-0455">Reset</button>
                </td>
                <td>
                    <button type="button" class="buttonsize btn btn-outline-success"
                    (click)="addclick()" style="margin-left: 10px;"
                     id="ap-0456">
                        <span class="fa fa-plus"></span></button> -->
                <!-- data-toggle="modal" data-target="#ap-0041" -->
                <!-- </td>
            </tr>
        </table> -->
            </form>
            <lib-vs-cbox-summary [SummaryDetails]="Summaryauditdata"
                [SummaryApiObj]="SummaryApiauditObjNew" [FirstLastbtn]="true" (dataEvent)="auditsummarydata($event)"></lib-vs-cbox-summary>

            <!-- <div   style="margin-top: 1%;margin-left: 10px; width: 95%;">
        <table class="table table-bordered scrolltable" fixed-header style="text-align:center;" >	
            
            <thead>
                <tr class="table_header " fixed-header style="text-align: center;margin-left: 3%;">
                    <th>S.No</th>
                    <th>Question</th>
                    <th style="width: 120px;">Action</th>

                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let lst of checklist; index as i">
                    <td style="text-align: center;">{{(currentpageAuditChklst - 1)*10 +i+1}}</td>
                    <td>{{ lst?.question }}</td>
                    <td>
                        <button mat-icon-button matTooltip=" Edit" class="iconbutton" color="primary"
                         (click)="editAuditChklst(lst)"  id="ap-0457">
                        <mat-icon style="color: green;" aria-label="Edit">edit</mat-icon>
                        </button> -->
            <!-- data-toggle="modal" data-target="#ap-0041" -->
            <!-- <button mat-icon-button type="button" matTooltip="Delete" id="ap-0458">
                        <mat-icon style="color: green;" aria-label="Edit" (click)="deleteChklst(lst)">
                            delete</mat-icon>
                        </button></td>
                </tr>
            </tbody>
        </table>
        <div *ngIf="checklist?.length==0;" class="NodataAlign">No Records Found...</div>
         <div class="row" *ngIf="checklist?.length>0" style="width:85%">
         <div  class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
         </div>
         <div  class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left: 18%">
             <mat-paginator
                 (page)="handleAuditChklstPageEvent($event)"
                 [length]="length_audit"
                 [pageSize]="pageSize_audit"
                 [showFirstLastButtons]="showFirstLastButtons"
                 [pageSizeOptions]="pageSizeOptions"
                 [pageIndex]="pageIndex_audit"
                 [hidePageSize]="true"
                 aria-label="Select page">
           
             </mat-paginator>
         </div>
         </div>
        </div> -->
            <!-- </mat-card> -->
            <!-- </div> -->
        </div>
    </div>

    <div *ngIf="APReportSummaryForm">
        <!-- <mat-card style="margin-top: 13px;margin-left: 30px;margin-right: 30px;margin-bottom: 20px;width: 96%;"> -->
            <form [formGroup]="frmAPReportSummary">
                 <h3>
            AP Report
        </h3>
                <!-- <tr>
                    <td>
                        <h2 style="margin-left: 20px;" class="headertitle">AP Report </h2>
                    </td> -->
                    <!-- <td>
                        <mat-checkbox class="example-margin" style="margin-left: 100px;width:15px;font-size:medium;"
                            [checked]="dooScoreChk" (change)="dooScoreChange($event.checked)">DOO
                            Scorecard</mat-checkbox>
                    </td> -->
                <!-- </tr> -->
                <div  *ngIf="!dooScoreChk">
                    <!-- <table> -->
                    <div class="search-auto-fit">
                        <!-- <tr> -->
                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-select placeholder="Report Type" formControlName="report_type" id="ap-0461">
                                        <mat-option *ngFor="let type of reportList" [value]="type.api_name">
                                            {{type.report_name}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div id="matInput-size">
                                <mat-form-field appearance="outline" style="margin-left:10px" (click)="getbranch()">
                                    <mat-label>Branch
                                    </mat-label>
                                    <input matInput  #raiserbrInput [matAutocomplete]="matraiserAutocomplete" formControlName="branch"
                                     placeholder="Enter Branch"
                                    matTooltip="{{frmAPReportSummary.value?.branch?.code}}-{{frmAPReportSummary.value?.branch?.name}}" 
                                    matTooltipClass="custom-tooltipnew" />
                                    <mat-autocomplete #matraiserAutocomplete="matAutocomplete"  (opened)="raisebranchScroll()" [displayWith]="displayFnbranchrole">
                                    <mat-option *ngFor="let branch of branchlist" [value]="branch"
                                    matTooltip="{{branch.code}}-{{branch.name}}" matTooltipClass="custom-tooltipnew">
                                        {{branch.code}}-{{branch.name}}
                                    </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>
                            </div>
                            <div id="matInput-size">
                                <mat-form-field appearance="outline" style="margin-left:10px" (click)="getsupplierbranch()">
                                    <mat-label>Supplier
                                    </mat-label>
                                    <input matInput  #supplierbrInput [matAutocomplete]="matsupplierAutocomplete" formControlName="supplier_id"
                                    placeholder="Enter Supplier"
                                    matTooltip="{{frmAPReportSummary.value?.supplier_id?.code}}-{{frmAPReportSummary.value?.supplier_id?.name}}" 
                                    matTooltipClass="custom-tooltipnew" />
                                    <mat-autocomplete #matsupplierAutocomplete="matAutocomplete"  (opened)="supplierBranchScroll()" [displayWith]="displayFnsupplierrole">
                                    <mat-option *ngFor="let sup of supplierlist" [value]="sup"
                                    matTooltip="{{sup.code}}-{{sup.name}}" matTooltipClass="custom-tooltipnew">
                                        {{sup.code}}-{{sup.name}}
                                    </mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>
                            </div>
                            <div id="matInput-size">
                                <mat-form-field appearance="outline"  style="margin-left:10px">
                                    <mat-label>From Date</mat-label>
                                    <input matInput readonly [matDatepicker]="picker1" placeholder="From Date" [max]="today"
                                        formControlName="from_date" id="ap-0466" (dateChange)="onDateChange()">
                                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                    <mat-datepicker #picker1></mat-datepicker>
                                </mat-form-field>
                            </div>
                            <div id="matInput-size">
                                <mat-form-field appearance="outline" style="margin-left:10px">
                                    <mat-label>To Date</mat-label>
                                    <input matInput readonly [matDatepicker]="picker2" placeholder="To Date"
                                        [min]="dooFromdate" [max]="dooTodate" formControlName="to_date" id="ap-0467">
                                    <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                    <mat-datepicker #picker2></mat-datepicker>
                                </mat-form-field>
                            </div>
                         
                            <div>
                                <!-- <button class="buttonsize btn btn-outline-primary" (click)="getDooScoresummary()"
                                    color="primary" style="margin-left: 30px;" id="ap-0454"><i class="fa fa-search"
                                        aria-hidden="true"></i></button>
                                <button class="buttonsize btn btn-outline-primary" (click)="resetDooScore()"
                                    color="primary" style="margin-left: 10px;" id="ap-0455">Reset</button>
                                <button class="buttonsize btn btn-outline-primary" type="button"
                                    matTooltip="ReportDownload" color="primary" (click)="APRptSummarydownload('')"
                                    style="margin-left: 10px;" id="ap-0473">
                                    Report Download </button> -->
                                 
                        <button class="btn btn-outline-primary" type = button [disabled]="generate_btn_disable"
                        style="border-radius: 10px;margin-left: 20px;" matTooltip="Generate" (click)="generate_report(1)"
                        >Generate</button>
                        <button class="btn btn-outline-primary" type="button" (click)="resetDooScore()"
                            style="border-radius:40px;margin-left: 10px;width: 50px"  id="ap-0059">
                           <mat-icon  style="margin-top: 3px;margin-bottom: 0px;" aria-hidden="true" matTooltip="Reset"
                           matTooltipClass="custom-tooltipnew" >refresh</mat-icon>
                        </button>
                        <!-- <div> -->
                        <span style="margin-left:10px"><b>Page Reload in : </b>{{ formatTime(count1) }}</span>
                         <!-- </div> -->
                            </div>
                        <!-- </tr> -->
                        </div>
                    <!-- </table> -->
 <!-- <lib-vs-cbox-summary [SummaryDetails]="SummaryaprepData" [SummaryApiObj]="SummaryApiaprepObjNew"
            [FirstLastbtn]="true" #cboxSummary></lib-vs-cbox-summary> -->
                <div class="table-responsive">
                  <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                        <table>
                            <thead>
                                <tr>
                                    <th *ngFor="let column of reportcolumn">{{ column }}</th>
                                </tr>
                                 <tr class="table_header" style="text-align:center;">
                                    <th>S.No</th>
                                    <th>Report Name</th>
                                    <th>Created By</th> 
                                    <th>Created Date</th>
                                    <th>From Date</th>
                                    <th>To Date</th>
                                    <th>Report Status</th>
                                    <th>Download</th>
                                    <!-- <th>Maker</th>
                                    <th>Maker Branch</th>
                                    <th>Approver</th>
                                    <th>Approver Branch</th>
                                    <th>Submitted Date</th>
                                    <th>Activity Date</th>
                                    <th>Activity Status</th>
                                    <th>TAT</th>
                                    <th>Remarks</th>
                                    <th>TAT</th> -->
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let row of reportsummary">
                                    <td *ngFor="let column of reportcolumn">{{ row[column] }}</td>
                                </tr>
                                <tr *ngFor="let dd of DooScoreSummary; index as i" style="text-align: center;">
                                    <td style="text-align: center;" scope="row">{{(presentpagerep - 1)*pageSize +i+1 }}</td>
                                    <td>{{ dd?.report_name }}</td>
                                    <td >{{ dd?.created_by?.code}}-{{ dd?.created_by?.name}}</td>    
                                    <td>{{ dd?.created_date | date:'dd-MMM-yyyy'}}</td>
                                    <td>{{ dd?.from_date | date:'dd-MMM-yyyy'}}</td>    
                                    <td>{{ dd?.to_date | date:'dd-MMM-yyyy'}}</td>    
                                    <td>{{ dd?.report_status}}</td>
                                    <td style="text-align: center;"><button [disabled]="dd?.report_status != 'Completed'" type="button" class="btn btn-outline-primary" style="border-radius: 40px;"
                                        (click)="APRptSummarydownload(dd)">
                                        <mat-icon matTooltip="Download">download</mat-icon>
                                    </button></td>    
                                    <!-- <td>{{ dd?.invoiceamount}}</td>    
                                    <td>{{ dd?.maker}}</td>
                                    <td>{{ dd?.makerbranch}}</td>
                                    <td>{{ dd?.approver}}</td>
                                    <td>{{ dd?.approverbranch}}</td>
                                    <td>{{ dd?.activitystatus}}</td>
                                    <td>{{ dd?.tat}}</td>
                                    <td>{{ dd?.remarks}}</td> -->
                                </tr>
                                     <!-- <tr *ngFor="let row of reportsummary">
                                    <td *ngFor="let column of reportcolumn">{{ row[column] }}</td>
                                    </tr> -->
                            </tbody>
                            <!--<tbody>
                                    <tr *ngFor="let row of data">
                                    <td *ngFor="let column of reportColumns">{{ row[column] || '-' }}</td>
                                    </tr>
                                </tbody> -->
                        </table>
                        <div *ngIf="DooScoreSummary?.length==0" style="text-align: center;" >No Records Found...</div>
                        <!-- <div class="row" *ngIf="DooScoreSummary?.length > 0" style="width:85%">
                            <div  class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
                            </div>
                            <p>Total Count :- {{ this.length_rep }}</p>
                            <div  class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left: 18%">
                                <mat-paginator  
                                (page)="handleReportSearchPageEvent($event)"
                                [length]="length_rep"
                                [pageSize]="pageSize_rep"
                                [showFirstLastButtons]="showFirstLastButtons"
                                [pageSizeOptions]="pageSizeOptions"
                                [pageIndex]="pageIndex_rep"
                                [hidePageSize]="true"
                                aria-label="Select page">
                                </mat-paginator>
                            </div>
                        </div> -->


                    </div>
                    </div>
                   <div *ngIf="DooScoreSummary?.length > 0" 
     style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5%;">
  
  <!-- Left: Total Count -->
  <div style="white-space: nowrap;">
    <!-- <strong>Total Count: {{ length_rep }}</strong> -->
     <p>Total Count :- {{ length_rep }}</p>
  </div>

  <!-- Right: Paginator -->
  <mat-paginator
    (page)="handleReportSearchPageEvent($event)"
    [length]="length_rep"
    [pageSize]="pageSize_rep"
    [showFirstLastButtons]="showFirstLastButtons"
    [pageSizeOptions]="pageSizeOptions"
    [pageIndex]="pageIndex_rep"
    [hidePageSize]="true"
    aria-label="Select page">
  </mat-paginator>
</div>

                </div>
                <table *ngIf="dooScoreChk">
                    <tr>
                        <td>
                            <mat-form-field style="width:200px;margin-left: 20px;">
                                <mat-select placeholder="ECF Type" formControlName="ecftype" id="ap-0461">
                                    <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                        {{type.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width: 200px;margin-left: 30px; " (click)="suppliername_mk()">

                                <mat-label>Supplier Name</mat-label>
                                <input #supplierInput placeholder="Choose Supplier" matInput
                                    formControlName="supplier_id" [matAutocomplete]="supp" id="ap-0462">
                                <mat-autocomplete [panelWidth]="250" #supp="matAutocomplete" (opened)="supplierScroll()"
                                    [displayWith]="displayFnSupplier">
                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                        <mat-option *ngFor="let supplier of supplierList" [value]="supplier"
                                            matTooltip="{{supplier.name}}">{{supplier.name}}
                                        </mat-option>
                                    </ng-container>
                                </mat-autocomplete>

                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width: 200px; margin-left: 30px; " (click)="getmakRaiserbranch()">
                                <input #raiserbrInput matInput formControlName="raiserbranch"
                                    [matAutocomplete]="matraiserAutocomplete" placeholder="Raiser Branch" id="ap-0463">
                                <mat-autocomplete [panelWidth]="250" #matraiserAutocomplete="matAutocomplete"
                                    [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                        <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                            matTooltip="{{branch.code}}-{{branch.name}}">
                                            {{branch.code}}-{{branch.name}}
                                        </mat-option>
                                    </ng-container>
                                </mat-autocomplete>
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width:200px;margin-left: 30px;">
                                <mat-select placeholder="Invoice Status" formControlName="apinvoiceheaderstatus_id"
                                    id="ap-0464">
                                    <mat-option *ngFor="let st of ecfStatusList" [value]="st.id">
                                        {{st.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mat-form-field style="width:200px;margin-left: 20px;" (click)="getraiserdropdown()">
                                <mat-label>Employee</mat-label>
                                <input #raiserInput matInput formControlName="raisedby"
                                    [matAutocomplete]="raisertyperoleInw" placeholder="Choose Employee" id="ap-0465">
                                <mat-autocomplete [panelWidth]="250" #raisertyperoleInw="matAutocomplete"
                                    [displayWith]="displayFnraiserrole" (opened)="raiserScroll()">
                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                        <mat-option *ngFor="let data of Raiserlist" [value]="data"
                                            matTooltip="{{data.full_name}}">
                                            {{data.full_name}}
                                        </mat-option>
                                    </ng-container>
                                </mat-autocomplete>
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width: 200px;margin-left: 30px;">
                                <mat-label>From Date</mat-label>
                                <input matInput readonly [matDatepicker]="picker1" placeholder="From Date"
                                    formControlName="from_date" id="ap-0466">
                                <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                <mat-datepicker #picker1></mat-datepicker>
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width: 200px;margin-left: 30px;">
                                <mat-label>To Date</mat-label>
                                <input matInput readonly [matDatepicker]="picker2" placeholder="To Date"
                                    formControlName="to_date" id="ap-0467">
                                <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                <mat-datepicker #picker2></mat-datepicker>
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="4">
                            <!-- <button type="button" mat-fab matTooltip="TDS Report" (click)="APRptSummarydownload('TDS')"
                                style="border-radius:35px;margin-left: 300px;background-color: green;" id="ap-0468">
                                <span class="fa fa-download"></span> </button>
                            <button type="button" mat-fab matTooltip="GST Report" (click)="APRptSummarydownload('GST')"
                                style="border-radius:35px;margin-left: 10px;background-color: lightpink" id="ap-0469">
                                <span class="fa fa-download"></span> </button>
                            <button type="button" mat-fab matTooltip="Success Report"
                                (click)="APRptSummarydownload('SUCCESS')"
                                style="border-radius:35px;margin-left: 10px;background-color: rgb(234, 255, 255)"
                                id="ap-0470">
                                <span class="fa fa-download"></span> </button>
                            <button type="button" mat-fab matTooltip="Day_Book Report"
                                (click)="APRptSummarydownload('DAYBOOK')"
                                style="border-radius:35px;margin-left: 10px;background-color:rgb(187, 122, 248);;"
                                id="ap-0471">
                                <span class="fa fa-download"></span> </button>
                            <button type="button" mat-fab matTooltip="GL Report" (click)="APRptSummarydownload('GL')"
                                style="border-radius:35px;margin-left: 10px;background-color:orange;" id="ap-0472">
                                <span class="fa fa-download"></span> </button>
                            <button type="button" mat-fab matTooltip="BSCC Report"
                                (click)="APRptSummarydownload('BSCC')"
                                style="border-radius:35px;margin-left: 10px;background-color:rgb(114, 239, 239);"
                                id="ap-0473">
                                <span class="fa fa-download"></span> </button>
                            <button type="button" mat-fab matTooltip="Reset" (click)="ResetAPRptSummary()"
                                style="border-radius:35px;margin-left: 10px;background-color: white;" id="ap-0474">
                                <mat-icon> clear</mat-icon> </button> -->
                        </td>
                    </tr>
                </table>
            </form>
        <!-- </mat-card> -->
    </div>

    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
    data-backdrop = "static" data-keyboard="false" id="ap-0041">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Add Audit Checklist</h3>
                    <button class="close" type="button" data-dismiss="modal" #closedbuttons id="ap-0475">x</button>
                </div>
                <br>
                <form [formGroup]="auditchklistAddForm" class="content-adjust">
                    <div class="searchs-expand">
                        <!-- <div >
                    <mat-form-field style="width:200px;margin-left: 15px;">
                        <mat-label>ECF Type<label style="color:red">&nbsp;*</label></mat-label>
                        <mat-select placeholder="ECF Type" formControlName="ecftype" id="ap-0476">
                            <mat-option *ngFor="let type of TypeList" [value]="type.id" >
                                {{type.text}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>  -->
                        <div id="matInput-size">
                            <lib-vs-optiondd-cmp [InputFields]="ecf_field" [formGroup]="auditchklistAddForm"
                                (dataEvent)="audit_get_ecftype($event)">
                            </lib-vs-optiondd-cmp>
                        </div>
                        <div id="matInput-size">
                            <mat-form-field appearance="outline">
                                <mat-label>Group<label style="color:red">&nbsp;*</label></mat-label>
                                <input type="text" matInput formControlName="group" autocomplete="off" id="ap-0477">
                            </mat-form-field>
                        </div>
                        <div id="matInput-size">
                            <mat-form-field appearance="outline">
                                <mat-label>Solution<label style="color:red">&nbsp;*</label></mat-label>
                                <input type="text" matInput formControlName="solution" autocomplete="off" id="ap-0479">
                            </mat-form-field>
                        </div>
                    </div>
                    <div id="matInput-size">
                        <mat-form-field appearance="outline">
                            <mat-label>Question<label style="color:red">&nbsp;*</label></mat-label>
                            <input type="text" matInput formControlName="question" autocomplete="off" id="ap-0478">
                        </mat-form-field>
                    </div>


                    <div class="modal-footer">
                        <button type="submit" style="border-radius:40px;" data-dismiss="modal"
                            (click)="addAuditChklst()" class="btn btn-outline-success" id="ap-0480">
                            Submit</button>


                        <button type="button" class="btn btn-outline-primary" data-dismiss="modal"
                            (click)="addAudChkBack()" style="border-radius:40px;" id="ap-0481">
                            Back</button>
                    </div>

                </form>
            </div>
        </div>
    </div>
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
    data-backdrop = "static" data-keyboard="false" id="ap-0042">
        <div class="modal-dialog modal-xl" style="width:50%;">
            <div class="modal-content">
                <div class="modal-header text-center" style="background: rgba(23, 204, 23, 0.288);">
                    <h2 class="modal-title w-100 font-weight-bold"
                        style="color:black ;height:2px;font-family: 'Times New Roman', Times, serif;">Report Download
                    </h2>
                    <button type="button" class="close" #closeRptDwnld data-dismiss="modal" aria-label="Close"
                        id="ap-0482">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form [formGroup]="frmRptDownld">
                    <tr>
                        <td>
                            <mat-form-field style="margin-left: 50px;">
                                <mat-label>From Date</mat-label>
                                <input matInput readonly [matDatepicker]="picker1" placeholder="From Date"
                                    formControlName="from_date" id="ap-0483">
                                <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                <mat-datepicker #picker1></mat-datepicker>
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="margin-left: 10px;">
                                <mat-label>To Date</mat-label>
                                <input matInput readonly [matDatepicker]="picker2" placeholder="To Date"
                                    formControlName="to_date" id="ap-0484">
                                <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                <mat-datepicker #picker2></mat-datepicker>
                            </mat-form-field>
                        </td>
                        <!-- <td style="margin-left: 10px;" *ngIf="rptFormat ==1 || rptFormat ==2">
            <mat-form-field style="width:250px;margin-left: 10px;">
                <mat-select placeholder="Invoice Status" formControlName="apinvoiceheaderstatus_id" disabled id="ap-0485">
                    <mat-option *ngFor="let st of ecfStatusList" [value]="st.id" (click)="statusChange(st.id)">
                        {{st.text}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            </td> -->
                        <td style="margin-left: 10px;">
                            <mat-form-field style="width:250px;margin-left: 10px;">
                                <mat-select placeholder="Invoice Status" formControlName="apinvoiceheaderstatus_id"
                                    id="ap-0486">
                                    <mat-option *ngFor="let st of ecfStatusList2" [value]="st.id"
                                        (click)="statusChange(st.id)">
                                        {{st.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3">
                            <button type="button" style="border-radius:40px;margin-left:290px;margin-bottom: 20px;"
                                class="btn btn-outline-primary" (click)="getRptDownload()" id="ap-0487">
                                Download</button>
                            <button type="button" style="border-radius:40px;margin-left:20px;margin-bottom: 20px"
                                class="btn btn-outline-danger" data-dismiss="modal" id="ap-0488">
                                Cancel</button>
                        </td>
                    </tr>
                </form>
            </div>
        </div>
    </div>

    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
    data-backdrop = "static" data-keyboard="false"  id="ap-0043">
        <div class="modal-dialog modal-xl" style="width:80%;height:100%;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>View Entry - {{CommonTransCrno}}
                    </h3>
                    <button type="button" class="close" #closeCommonentry (click)="closeCommonEntryClick();"
                        data-dismiss="modal" aria-label="Close" id="ap-0489">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <lib-vs-cbox-summary [SummaryDetails]="SummaryviewentryData"
                        [SummaryApiObj]="SummaryApiviewentryObjNew"  [FirstLastbtn]="true"></lib-vs-cbox-summary>

                    <!-- <div>
            <table class="table table-bordered" style="width: 100%;text-align: center;">
                <thead class="table_header">
                <tr>
                    <th>S.No</th>
                    <th>Type</th>
                    <th>GL No</th>
                    <th>GL Description</th>
                    <th>Module</th>
                    <th>Entry Status</th>
                    <th>Transaction Date</th>
                    <th>Amount</th>
                </tr>
                </thead>
                <tr *ngFor="let dt of commonViewEntrySummary;let i=index">
                    <td>{{(CommonViewEntrypresentpage-1)*10 +i+1}}</td>
                    <td>{{dt?.type}}</td>
                    <td>{{dt?.gl}}</td>
                    <td>{{dt?.glnodescription}}</td>
                    <td>{{dt?.module}}</td>
                    <td>{{dt?.entry_new_status}}</td>
                    <td>{{dt?.transactiondate | date: 'dd-MMM-yyyy'}} {{dt?.transactiontime}}</td>
                    <td>{{dt?.amount}}</td>
                </tr>

            
            </table> -->
             <div *ngFor="let dt of commonViewEntrySummary; let i=index">
                 <div *ngIf="showNewLine && i === selectedRowIndex" >
                     <b><p style="align-items: center;margin-top: 10px;">
                         <span class="error-text"  style="color: red;">Error Description:</span>
                         <span style="margin-left: 100px;" class="error-text" *ngIf="dt?.errordescription == 0">-</span>
                         <br><b><textarea name="comment" style="overflow-y: hidden;overflow-x: hidden;;
                            max-height: fit-content; max-width:98%; width:98%"
                                 disabled="" class="ng-binding" *ngIf="dt?.errordescription != 0" id="ap-0429">
                        {{dt?.errordescription}}</textarea></b></p>
                    </b>
 
                 </div>
             </div>
            <!-- <br><br>
            <div *ngIf="commonViewEntrySummary?.length == 0" style="margin-left: 42%;">
                <h3 >Sorry data not found!.. </h3>
                </div>
             <div class="row" *ngIf="commonViewEntrySummary?.length > 0">
                 <div class="col-sm-8" style="margin-bottom: 0%;font-size: small;text-align: right;margin-top: 18px;font-weight:bold">
                 Page: {{CommonViewEntrypresentpage}}
                 </div>
            </div>
                <div  class="col-sm-4" style="margin-bottom: 0%;font-size: small;text-align:right;">
                     <mat-paginator  style="margin-top: 0%; width: 350px;"
                                 (page)="handleCmnViewEntry($event)"
                                 [length]="length_CmnViewEntry"
                                 [pageSize]="pageSize_CmnViewEntry"
                                 [showFirstLastButtons]="showFirstLastButtons"
                                 [pageSizeOptions]="pageSizeOptions"
                                 [pageIndex]="pageIndexCmnViewEntry"
                                 [hidePageSize]="true"
                                 aria-label="Select page">                            
                     </mat-paginator>
                 </div>
<tr>
                    <td>
                        <button type="button" style="border-radius:40px;margin-left :530px;margin-bottom: 20px"
                                                class="btn btn-outline-primary" (click)="closeCommonEntryClick();" id="ap-0492">
                                                Back</button>
                    </td>
                </tr>
                </div>
        </div> --> 
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-primary" style="border-radius:40px;"
                        (click)="closeCommonEntryClick() " id="ap-0492">
                        Back
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true"
    data-backdrop = "static" data-keyboard="false" id="ap-0044">
        <div class="modal-dialog modal-xl" style="width:80%;height:200%;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Find Supplier</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ap-0493">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <!-- <br> -->
                <div class="modal-body">
                    <!-- <form [formGroup]="SelectSupplierForm" (ngSubmit)="SelectSuppliersearch()"> -->
                    <form [formGroup]="SelectSupplierForm">
                        <div class="search-auto-fit" style="margin-left:20px">
                            <lib-vs-search-cmp id="matInput-size" [SearchArr]="suppliersearch" [Outputtype]="searchvar"
                                (dataoutput)="SelectSuppliersearch($event)" [SeparateReset]="true" Tooltip="true"
                                (ResetOutput)="dataclear($event)">
                            </lib-vs-search-cmp>
                        </div>

                        <table style="margin-left: 20px;">
                            <div>
                                <!-- <tr>
                                       <td>
                                           <mat-form-field style="width: 200px;">
                                               <mat-label>Supplier GST Number</mat-label>
                                               <input matInput placeholder="GST No" formControlName="gstno"
                                                   autocomplete="off" (keypress)="only_numalpha($event)" maxlength="15" id="ap-0494">
                                           </mat-form-field>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                       </td>
   
                                       <td>
                                           <mat-form-field style="width: 200px;">
                                               <mat-label>Supplier Code</mat-label>
                                               <input matInput placeholder="Supplier" formControlName="code"
                                                   autocomplete="off" (keypress)="only_numalpha($event)" maxlength="10" id="ap-0495">
                                           </mat-form-field>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                       </td> -->
                                <!-- [disabled]="showsuppliercode"  -->

                                <!-- <td>
                                           <mat-form-field style="width: 200px;">
                                               <mat-label>PAN Number</mat-label>
                                               <input matInput placeholder="PAN" formControlName="panno" autocomplete="off"
                                                   (keypress)="only_numalpha($event)" id="ap-0496">
                                           </mat-form-field>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                       </td> -->
                                <!--  [disabled]="true" -->
                                <!-- <button class="btn btn-outline-primary" type="submit"
                                           style="border-radius:40px;margin-left: 15px;" color="primary"
                                           (click)="SelectSuppliersearch()" id="ap-0497"><i class="fa fa-search"
                                               aria-hidden="true"></i></button>&nbsp; -->

                                <!-- <button type="button" style="border-radius:10px;margin-left: 15px; border-color: black; 
                                       background-color: white;" class="btn btn-light" (click)="dataclear()" id="ap-0498">
                                           Reset</button> -->

                                <!-- <button type="button" style="border-radius:40px;margin-left: 15px;
                                           font-family: 'Times New Roman', Times, serif;"
                                               class="btn btn-outline-primary" (click)="dataclear()" id="ap-0499">
                                               Reset</button>
   
   
                                   </tr> -->
                                <tr>
                                    <div *ngIf="default">
                                        <lib-vs-dynamicform-cmp id="matInput-size" [formGroup]="SelectSupplierForm"
                                            (dataEvent)="choosesupplierdata($event)"
                                            [InputFields]="choose_supplier_field"></lib-vs-dynamicform-cmp>
                                        <!-- <td>
                                               <mat-form-field style="width: 250px;margin-top: 5px;" (click)="getsuppdd()">
                                                   <mat-label>Choose Supplier</mat-label>
                                                   <input #suppInput placeholder="Choose Supplier" matInput
                                                       formControlName="name" [matAutocomplete]="Suppliertype" id="ap-0500">
                                                   <mat-autocomplete [panelWidth]="400" #Suppliertype="matAutocomplete"
                                                       [displayWith]="displayFn" (opened)="supplierScroll()">
   
                                                       <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                                       </mat-option>
                                                       <ng-container *ngIf="!isLoading"> -->
                                        <!-- ngDefaultControl [(ngModel)]="inputSUPPLIERValue"
                                                               [ngModelOptions]="{standalone: true}"
                                                               (ngModelChange)="inputSUPPLIERValue = $event.toUpperCase()" -->
                                        <!-- <mat-option *ngFor="let suppliername of supplierNameData"
                                                             
                                                               (onSelectionChange)="getsuppView(suppliername)" 
                                                               [value]="suppliername" matTooltip="{{suppliername.name}}" matTooltipClass="custom-tooltipnew">
                                                               {{suppliername.name}}
                                                           </mat-option>
                                                       </ng-container>
                                                   </mat-autocomplete>
                                               </mat-form-field>
                                           </td> -->
                                    </div>

                                    <div *ngIf="alternate">
                                        <lib-vs-dynamicform-cmp id="matInput-size" [formGroup]="SelectSupplierForm"
                                            (dataEvent)="choosesupplierdata1($event)"
                                            [InputFields]="choose_supplier_field_1"></lib-vs-dynamicform-cmp>
                                        <!-- <td>
                                               <mat-form-field style="width: 250px;margin-top: 5px;" (click)="getsuppdd()">
                                                   <mat-label>Choose Supplier</mat-label>
                                                   <input #name placeholder="Choose Supplier" matInput
                                                       formControlName="name" [matAutocomplete]="autosupp2" id="ap-0501">
                                                   <mat-autocomplete [panelWidth]="400" #autosupp2="matAutocomplete"
                                                       [displayWith]="displaytest"> -->
                                        <!-- [(ngModel)]="inputSUPPLIERValue" [ngModelOptions]="{standalone: true}" 
                                                       
                                                               ngDefaultControl
                                                               (ngModelChange)="inputSUPPLIERValue = $event.toUpperCase()" -->
                                        <!-- <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                                       </mat-option>
                                                       <ng-container *ngIf="!isLoading">
                                                           <mat-option *ngFor="let suppliername of selectsupplierlist"
                                                           (onSelectionChange)="getsuppView(suppliername)"
                                                               [value]="suppliername" matTooltip="{{suppliername.name}}" matTooltipClass="custom-tooltipnew">
                                                               {{suppliername.name}}
                                                           </mat-option>
                                                       </ng-container>
                                                   </mat-autocomplete>
                                               </mat-form-field>
                                           </td> -->
                                    </div>
                                </tr>
                            </div>
                        </table>

                        <!-- <form [formGroup]="supplierchooseForm"></form> -->
                        <table width="100%" style="margin-top: 2%;margin-bottom: 5%;">
                            <tbody>
                                <tr>
                                    <td valign="top">
                                        <table style="font-size:14px;margin-left: 20px;">
                                            <tbody>
                                                <tr>
                                                    <td
                                                        style="color: #808080;  width: 200px;font-size: medium;height: 50px">
                                                        Supplier Name:
                                                    </td>
                                                    <td style="width: 400px;height: 50px">
                                                        {{SupplierName }}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td
                                                        style="color: #808080; width: 200px;font-size: medium;height: 50px">
                                                        Supplier Code:
                                                    </td>
                                                    <td style="width: 400px;height: 50px">
                                                        {{SupplierCode }}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td
                                                        style="color: #808080;  width: 200px;font-size: medium;height: 50px">
                                                        Supplier GST Number:
                                                    </td>
                                                    <td style="width: 400px;height: 50px">
                                                        {{SupplierGSTNumber }}
                                                    </td>
                                                </tr>
                                                <!-- <p style="color: #808080; margin: 0px 0 4px;">
                                                           Supplier Name:
                                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
                                                               style="color: black;margin-left: 2.5em;">{{SupplierName }}
                                                           </span>
                                                       </p>
                                                       <p style="color: #808080; margin: 0px 0 4px;margin-top: 3%;">
                                                           Supplier Code:
                                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                           <span style="color: black;margin-left: 3.8em;">{{SupplierCode}}
                                                           </span>
                                                       </p>
                                                       <p style="color: #808080; margin: 0px 0 4px;margin-top: 3%;">
                                                           Supplier GST Number:
                                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                           <span
                                                               style="color: black;margin-left: 0.2em;">{{SupplierGSTNumber}}
                                                           </span>
                                                       </p> -->
                                            </tbody>
                                        </table>
                                    </td>
                                    <td valign="top">
                                        <table style="font-size:14px;margin-left:-120px;">
                                            <tbody>
                                            <tbody>
                                                <tr>
                                                    <td
                                                        style="color: #808080;  width: 120px;font-size: medium;height: 50px">
                                                        PAN Number:
                                                    </td>
                                                    <td style="width: 300px;height: 50px">
                                                        {{SupplierPANNumber }}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td
                                                        style="color: #808080; width: 120px;font-size: medium;height: 50px">
                                                        Address:
                                                    </td>
                                                    <td style="width: 300px;height: 50px">
                                                        {{line1 }},
                                                        {{line2 }},
                                                        {{line3 }}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td
                                                        style="color: #808080;  width: 120px;font-size: medium;height: 50px">
                                                        City:
                                                    </td>
                                                    <td style="width: 300px;height: 50px">
                                                        {{City }}
                                                    </td>
                                                </tr><!-- <tr>
                                                       <p style="color: #808080; margin: 0px 0 4px;">
                                                           PAN Number:
                                                           &nbsp;&nbsp;&nbsp;<span
                                                               style="color: black;margin-left: 0em;">{{SupplierPANNumber}}
                                                           </span>
                                                       </p>
                                                       <p style="color: #808080; margin: 0px 0 4px;margin-top: 3%;">
                                                           Address:
                                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                           <span style="color: black;margin-left: 0.3em;"> {{line1}},
                                                               {{line2}},
                                                               {{line3}}</span>
                                                       </p>
                                                       <p style="color: #808080; margin: 0px 0 4px;margin-top: 3%;">
                                                           City:
                                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                           <span style="color: black;margin-left: -0.4em;">{{City}} </span>
                                                       </p>
                                                   </tr> -->
                                            </tbody>
                                        </table>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </form>
                </div>
                <!-- <br><br> -->
                <div class="modal-footer">
                    <!-- <div style="margin-left: 20px; "> -->
                    <!-- <tr> -->
                    <!-- <button type="button" data-dismiss="modal" style="border-radius:10px;margin-left: 500px;border-color: #f5c68b;
                                           background-color: #f5c68b;" class="btn btn-light"
                                               (click)="Branchcallingfunction()" id="ap-0502">
                                               Submit</button> -->

                    <!-- <button type="button" data-dismiss="modal" [disabled]="!submitbutton"
                                               style="border-radius:40px;margin-left: 500px;font-family: 'Times New Roman', Times, serif;"
                                               class="btn btn-outline-primary" (click)="supplierModalSubmit()" id="ap-0503">
                                               Submit</button>
                                           <button type="button" data-dismiss="modal"
                                           style="border-radius:40px;font-family: 'Times New Roman', Times, serif;margin-left: 10px;"
                                           class="btn btn-outline-danger"  id="ap-0504">Back</button> -->

                    <button type="button" data-dismiss="modal" [disabled]="!submitbutton" style="border-radius: 40px"
                        class="btn btn-outline-success" (click)="supplierModalSubmit()" id="ap-0503">
                        Submit</button>
                    <button type="button" data-dismiss="modal" style="border-radius: 40px; margin-left: 10px"
                        class="btn btn-outline-primary" id="ap-0504">Back</button>
                    <!-- </tr> -->
                </div>
            </div>
        </div>


    </div>


    <div *ngIf="PaymentAdviceForm">
        <mat-card style="margin-top: 13px;margin-left: 20px;margin-right: 20px;margin-bottom: 20px;">
            <p style="color:black;font-size: 18px;font-weight: bold;margin-left: 10px;">
                Payment Advice Search
            </p>
            <div>
                <form [formGroup]="paymentAdviceForm">
                    <table>
                        <div>
                            <tr>
                                <td>
                                    <mat-form-field style="width:170px;margin-left: 10px;">
                                        <mat-label>CR No</mat-label>
                                        <input matInput formControlName="crno" autocomplete="off" id="ap-0505">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width:170px;margin-left: 10px;">

                                        <mat-label>Invoice Header CR No</mat-label>
                                        <input matInput formControlName="invoiceheader_crno" autocomplete="off"
                                            id="ap-0506">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width:170px;margin-left: 10px;">
                                        <mat-select placeholder="ECF Type" formControlName="aptype" id="ap-0507">
                                            <mat-option *ngFor="let type of TypeList" [value]="type.id">
                                                {{type.text}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width: 170px; margin-left: 10px; "
                                        (click)="getPaymentAdvRsrbranch()">

                                        <input #raiserbrInput matInput formControlName="raiserbranch_id"
                                            [matAutocomplete]="matraiserAutocomplete" placeholder="Employee Branch"
                                            id="ap-0508">
                                        <mat-autocomplete [panelWidth]="250" #matraiserAutocomplete="matAutocomplete"
                                            [displayWith]="displayFnbranchrole" (opened)="raiseBranchScroll()">
                                            <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let branch of Branchlist" [value]="branch"
                                                    matTooltip="{{branch.code}}-{{branch.name}}">
                                                    {{branch.code}}-{{branch.name}}
                                                </mat-option>
                                            </ng-container>
                                        </mat-autocomplete>
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width:170px;margin-left: 10px;"
                                        (click)="getPaymentAdvRaiserdropdown()">
                                        <mat-label>Employee</mat-label>
                                        <input #raiserInput matInput formControlName="raiser_name"
                                            [matAutocomplete]="raisertyperole" placeholder="Choose Employee"
                                            id="ap-0509">
                                        <mat-autocomplete [panelWidth]="400" #raisertyperole="matAutocomplete"
                                            [displayWith]="displayFnraiserrole" (opened)="raiserScroll()">
                                            <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let data of Raiserlist" [value]="data"
                                                    matTooltip="{{data.full_name}}">
                                                    {{data.full_name}}
                                                </mat-option>
                                            </ng-container>
                                        </mat-autocomplete>
                                    </mat-form-field>
                                </td>

                            </tr>
                            <tr>
                                <td>
                                    <mat-form-field style="width: 170px;margin-left: 10px; ">
                                        <mat-label>Invoice No</mat-label>
                                        <input matInput formControlName="invoice_no" autocomplete="off" type="text"
                                            id="ap-0510">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width: 170px;margin-left: 10px;">
                                        <mat-label>From Date</mat-label>
                                        <input matInput readonly [matDatepicker]="picker1" placeholder="From Date"
                                            formControlName="start_date" id="ap-0511">
                                        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                        <mat-datepicker #picker1></mat-datepicker>
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width: 170px;margin-left: 10px;">
                                        <mat-label>To Date</mat-label>
                                        <input matInput readonly [matDatepicker]="picker2" placeholder="To Date"
                                            formControlName="end_date" id="ap-0512">
                                        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                        <mat-datepicker #picker2></mat-datepicker>
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field style="width:170px;margin-left: 10px;">
                                        <mat-select placeholder="Invoice Status"
                                            formControlName="apinvoiceheaderstatus_id" id="ap-0513">
                                            <mat-option *ngFor="let st of ecfStatusList" [value]="st.id"
                                                (click)="statusChange(st.id)">
                                                {{st.text}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </td>

                                <td colspan="4" style="text-align: end;margin-left: 10px;">
                                    <button class="btn btn-outline-primary" type="submit"
                                        style="border-radius:40px;margin-left: 20px;" color="primary"
                                        (click)="paymentAdviceSearch('')" id="ap-0514"><i matTooltip="Search"
                                            class="fa fa-search" aria-hidden="true"></i></button>
                                    <button class="btn btn-outline-primary" type="button"
                                        style="border-radius:40px;margin-left: 10px;" color="primary"
                                        (click)="resetPaymentAdvice()" id="ap-0515">Reset</button>
                                    <button class="btn btn-outline-primary" type="button"
                                        style="border-radius:40px;margin-left: 10px;" color="primary"
                                        (click)="paymentAdvRptDwnld()" id="ap-0516">Report Download</button>
                                </td>
                            </tr>
                            <!-- <tr> -->

                            <!-- <td>
                            <mat-form-field style="width: 200px; margin-left: 50px;">
                                <mat-label>Minimum Amount</mat-label>
                                <input matInput formControlName="minamt" autocomplete="off" type="number" id="ap-0517">
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width: 200px; margin-left: 50px; ">
                                <mat-label>Maximum Amount</mat-label>
                                <input matInput formControlName="maxamt" autocomplete="off" type="number" id="ap-0518">
                            </mat-form-field>
                        </td> -->
                            <!-- </tr> -->
                            <!-- <tr>
                        <td>
                            <mat-form-field style="width: 200px; margin-left: 20px; ">
                            <mat-select placeholder="Invoice Header Status" formControlName="apinvoiceheaderstatus_id" id="ap-0519">
                                <mat-option *ngFor="let type of ecfStatusList" [value]="type.id" matTooltip="{{type.text}}">
                                    {{type.text}}
                                </mat-option>
                            </mat-select>
                            </mat-form-field>
                        </td> -->

                            <!-- <td>
   
                            <mat-form-field style="width: 200px;margin-left: 50px;">
                                <mat-label>Is Original Invoice</mat-label>
                                <mat-select  formControlName="is_originalinvoice"  id="ap-0520">
                                    <mat-option *ngFor="let type of yesnolist" [value]="type.id" matTooltip="{{type.text}}">
                                        {{type.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td> -->

                            <!-- </tr> -->
                        </div>
                    </table>
                </form>
            </div>

            <!-- <div  style="margin-top: 2%;margin-left: 20px; width: 77%;">
<table class="table table-bordered  padsize" style="text-align:center;" >	
    
    <thead>
        <tr class="table_header tableset " style="text-align: center;margin-left: 3%;">

    -->
            <p style="color:black;font-size: 18px;font-weight: bold;margin-left: 10px;">
                Payment Advice Summary
            </p>
            <!-- <div class="table-responsive ccbstable"
    style="margin-top: 2%;margin-left: 20px;overflow: auto;height:250px;margin-bottom: 1%;width:1250px">
    <table class="table table-bordered scrolltable" fixed-header>




        <thead  style="text-align: center;margin-left: 3%;">
            <tr class="table_header " fixed-header> -->
            <div class="table-responsive" id="ap-0045" style="margin-top: 1%;margin-left: 10px; width: 95%;">
                <table class="table scrolltable table-bordered" style="text-align:center;">
                    <thead fixed-header>

                        <tr class="table_header " fixed-header style="text-align: center;margin-left: 3%;">


                            <th>S.No</th>
                            <th>Invoice CR No</th>
                            <th>ECF Type</th>
                            <th>Supplier</th>
                            <th>Employee</th>
                            <th>Employee Branch</th>
                            <th>Invoice No</th>
                            <th>Invoice Amount</th>
                            <th>Invoice Date</th>
                            <th>Invoice Status</th>
                            <th>Payment Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let lists of paymentAdvSummary; index as i" style="text-align: center;">
                            <td style=" text-align: center;"> {{(paymentAdvPresentPage - 1)*10 +i+1 }} </td>
                            <td>{{lists?.apinvoiceheader_crno}}</td>
                            <td style="white-space: nowrap;">{{lists?.aptype?.text}}</td>
                            <td>{{lists?.supplier_data?.name}} - {{lists?.supplier_data?.code}}</td>
                            <td>{{lists?.raiser_name}}</td>
                            <td>{{lists?.raiserbranch_branch?.name_code }}</td>
                            <td>{{lists?.invoice_no }}</td>
                            <td style="text-align: right;">{{lists?.ecf_amount|currency:'INR'}}</td>
                            <td style="white-space: nowrap;">{{lists?.invoicedate | date:'dd-MMM-yyyy'}}</td>
                            <td>{{lists?.ecf_status?.text}}</td>
                            <td *ngIf="lists.payment_details?.data.length >0">
                                <span matTooltip="View Payment Details" class=" fa fa-eye create " matTooltip="View"
                                    data-toggle="modal" data-target="#ap-0048"
                                    style="color: green;cursor: pointer;padding:10px;margin-top: 10px;"
                                    (click)="viewPaymentDet(lists.payment_details.data[0])"></span>
                                <!-- <button type="button" class="btn btn-outline-primary" matTooltip="View" data-toggle="modal" data-target="#viewPaymentDetails"  
                            style="border-radius:40px;margin-left:5px;color: mediumblue;" (click)="viewPaymentDet(lists.payment_details.data[0])" id="ap-0521">
                            <span class="fa fa-arrow-right"></span>
                        </button> -->
                            </td>
                            <td *ngIf="lists.payment_details?.data.length == 0">
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div *ngIf="paymentAdvSummary ?.length == 0" style="margin-left: 42%;">
                    <h3>Sorry data not found!.. </h3>
                </div>
            </div>
            <div class="row" *ngIf="isPaymentAdvicepage" style="width:85%">
                <div class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
                </div>
                <div class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left: 18%">
                    <mat-paginator (page)="handlePaymentAdvPageEvent($event)" [length]="lengthPaymentAdv"
                        [pageSize]="pageSize_paymentAdvice" [showFirstLastButtons]="showFirstLastButtons"
                        [pageSizeOptions]="pageSizeOptions" [pageIndex]="pageIndex_paymentadv" [hidePageSize]="true"
                        aria-label="Select page">
                    </mat-paginator>
                </div>
            </div>
        </mat-card>
    </div>
    <div *ngIf="payment_q_summary">
        <app-payment-q-summary>

        </app-payment-q-summary>
    </div>

    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
    data-backdrop = "static" data-keyboard="false" id="ap-0046">
        <div class="modal-dialog modal-lg" style="width:80%;height:200%;">
            <div class="modal-content">
                <div class="modal-header text-center" style="background: rgba(23, 204, 23, 0.288);">
                    <h2 class="modal-title w-100 font-weight-bold"
                        style="color:black ;height:2px;font-family: 'Times New Roman', Times, serif;">Courier Details
                    </h2>
                    <button type="button" class="close" #closebutton data-dismiss="modal" aria-label="Close"
                        id="ap-0522">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form [formGroup]="rejectChgStatForm">
                    <tr>
                        <td>
                            <mat-form-field style="width:260px;;margin-left: 70px;margin-top: 20px;">
                                <mat-select placeholder="Mode" formControlName="mode" required id="ap-0523">
                                    <mat-option *ngFor="let m of rejectmodeList" [value]="m.id" matTooltip="{{m.text}}"
                                        (click)="modeselect(m.text)">
                                        {{m.text}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width: 260px;; margin-left: 50px;">
                                <mat-label>Date</mat-label>
                                <input matInput [matDatepicker]="picker" formControlName="date" autocomplete="off"
                                    readonly id="ap-0524">
                                <mat-datepicker-toggle matSuffix [for]="picker">
                                    <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                                </mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td *ngIf="this.rejectStat=='COURIER'">
                            <mat-form-field style="width: 260px;; margin-left: 70px;">
                                <mat-label>Courier</mat-label>
                                <input #courierInput placeholder="Select Courier" type="text" matInput
                                    formControlName="courier" [matAutocomplete]="Courier" id="ap-0525">
                                <mat-autocomplete #Courier="matAutocomplete" [displayWith]="displayFnCourier.bind(this)"
                                    (opened)="autocompletecourierScroll()">
                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                        <mat-option *ngFor="let Courier of courierlist" [value]="Courier.id">
                                            {{Courier.name}}
                                        </mat-option>
                                    </ng-container>
                                </mat-autocomplete>
                            </mat-form-field>
                        </td>
                        <td *ngIf="this.rejectStat=='COURIER'">
                            <mat-form-field style="width: 260px;;margin-left: 50px; ">
                                <mat-label>AWB No</mat-label>
                                <input matInput formControlName="awbno" autocomplete="off" required id="ap-0526">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <mat-form-field style="width: 620px;margin-left: 70px; ">
                                <mat-label>Name</mat-label>
                                <input matInput formControlName="name" autocomplete="off" readonly id="ap-0527">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td *ngIf="this.rejectStat=='COURIER'">
                            <mat-form-field style="width: 260px;;margin-left: 70px; ">
                                <mat-label>To Address</mat-label>
                                <input matInput formControlName="address" autocomplete="off" readonly id="ap-0528">
                            </mat-form-field>
                        </td>
                        <td *ngIf="this.rejectStat=='COURIER'">
                            <mat-form-field style="width: 260px;;margin-left: 50px; ">
                                <mat-label>City</mat-label>
                                <input matInput formControlName="city" autocomplete="off" readonly id="ap-0529">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td *ngIf="this.rejectStat=='COURIER'">
                            <mat-form-field style="width: 260px;;margin-left: 70px; ">
                                <mat-label>District</mat-label>
                                <input matInput formControlName="district" autocomplete="off" readonly id="ap-0530">
                            </mat-form-field>
                        </td>
                        <td *ngIf="this.rejectStat=='COURIER'">
                            <mat-form-field style="width: 260px;;margin-left: 50px; ">
                                <mat-label>State</mat-label>
                                <input matInput formControlName="state" autocomplete="off" readonly id="ap-0531">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td *ngIf="this.rejectStat=='COURIER'">
                            <mat-form-field style="width: 260px;;margin-left: 70px; ">
                                <mat-label>Pincode</mat-label>
                                <input matInput formControlName="pincode" autocomplete="off" readonly id="ap-0532">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mat-form-field style="width: 200px;margin-left: 180px; ">
                                <mat-label>Remarks</mat-label>
                                <input matInput formControlName="remarks" autocomplete="off" id="ap-0533">
                            </mat-form-field>
                        </td>
                        <td>
                            <button type="button" style="border-radius:40px;margin-left:10px;margin-bottom: 20px;"
                                class="btn btn-outline-success" (click)="rejectChgStatus()" id="ap-0534">
                                Save</button>
                            <button type="button" style="border-radius:40px;margin-left:10px;margin-bottom: 20px"
                                class="btn btn-outline-danger" data-dismiss="modal" id="ap-0535">
                                Cancel</button>
                        </td>
                    </tr>
                </form>
            </div>
        </div>
    </div>
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
    data-backdrop = "static" data-keyboard="false" id="ap-0047">
        <div class="modal-dialog modal-lg" style="width:80%;height:200%;">
            <div class="modal-content">
                <div class="modal-header text-center" style="background: rgba(23, 204, 23, 0.288);">
                    <h2 class="modal-title w-100 font-weight-bold"
                        style="color:black ;height:2px;font-family: 'Times New Roman', Times, serif;">View Dispatch
                        Details
                    </h2>
                    <button type="button" class="close" #closeview data-dismiss="modal" aria-label="Close" id="ap-0536">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form [formGroup]="dispatchviewForm">
                    <tr>
                        <td>
                            <mat-form-field style="width:260px;;margin-left: 70px;margin-top: 20px;">
                                <input placeholder="Mode" matInput formControlName="mode" type="text" readonly
                                    id="ap-0537">
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width: 260px;; margin-left: 50px;">
                                <mat-label> Date</mat-label>
                                <input placeholder="Date" matInput formControlName="date" type="text" readonly
                                    id="ap-0538">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                            <mat-form-field style="width: 260px;; margin-left: 70px;">
                                <mat-label>Courier</mat-label>
                                <input placeholder="Courier" type="text" matInput readonly formControlName="courier"
                                    id="ap-0539">
                            </mat-form-field>
                        </td>
                        <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                            <mat-form-field style="width: 260px;;margin-left: 50px; ">
                                <mat-label>AWB No</mat-label>
                                <input matInput formControlName="awbno" readonly id="ap-0540">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <mat-form-field style="width: 620px;margin-left: 70px; ">
                                <mat-label>Name</mat-label>
                                <input matInput formControlName="name" readonly id="ap-0541">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                            <mat-form-field style="width: 260px;;margin-left: 70px; ">
                                <mat-label>To Address</mat-label>
                                <input matInput formControlName="address" readonly id="ap-0542">
                            </mat-form-field>
                        </td>
                        <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                            <mat-form-field style="width: 260px;;margin-left: 50px; ">
                                <mat-label>City</mat-label>
                                <input matInput formControlName="city" readonly id="ap-0543">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                            <mat-form-field style="width: 260px;;margin-left: 70px; ">
                                <mat-label>District</mat-label>
                                <input matInput formControlName="district" readonly id="ap-0544">
                            </mat-form-field>
                        </td>
                        <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                            <mat-form-field style="width: 260px;;margin-left: 50px; ">
                                <mat-label>State</mat-label>
                                <input matInput formControlName="state" readonly id="ap-0545">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td *ngIf="dispatchdet?.dispatch_mode?.text=='COURIER'">
                            <mat-form-field style="width: 260px;;margin-left: 70px; ">
                                <mat-label>Pincode</mat-label>
                                <input matInput formControlName="pincode" readonly id="ap-0546">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mat-form-field style="width: 200px;margin-left: 250px; ">
                                <mat-label>Remarks</mat-label>
                                <input matInput formControlName="remarks" id="ap-0547">
                            </mat-form-field>
                        </td>
                        <td>
                            <button type="button" style="border-radius:40px;margin-left:10px;margin-bottom: 20px"
                                class="btn btn-outline-danger" data-dismiss="modal" id="ap-0548">
                                Cancel</button>
                        </td>
                    </tr>
                </form>
            </div>
        </div>
    </div>

    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
    data-backdrop = "static" data-keyboard="false" id="ap-0048">
        <div class="modal-dialog modal-lg" style="width:80%;height:200%;">
            <div class="modal-content">
                <div class="modal-header text-center" style="background: rgba(23, 204, 23, 0.288);">
                    <h2 class="modal-title w-100 font-weight-bold"
                        style="color:black ;height:2px;font-family: 'Times New Roman', Times, serif;">View Payment
                        Details
                    </h2>
                    <button type="button" class="close" #closeview data-dismiss="modal" aria-label="Close" id="ap-0549">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form [formGroup]="viewPaymentDetForm">
                    <tr>
                        <td>
                            <mat-form-field style="width:150px;;margin-left: 125px;margin-top: 20px;">
                                <input placeholder="UTR No" matInput formControlName="UTR_No" type="text" readonly
                                    id="ap-0550">
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width:150px;;margin-left: 50px;margin-top: 20px;">
                                <input placeholder="Paid Amount" matInput formControlName="paid_amount" type="text"
                                    readonly id="ap-0551">
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width: 150px;; margin-left: 50px;">
                                <mat-label> Paid Date</mat-label>
                                <input placeholder="Paid Date" matInput formControlName="paid_date" type="text" readonly
                                    id="ap-0552">
                            </mat-form-field>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mat-form-field style="width: 150px;; margin-left: 125px;">
                                <input placeholder="Paymode" matInput formControlName="paymode" type="text" readonly
                                    id="ap-0553">
                            </mat-form-field>
                        </td>
                        <td>
                            <mat-form-field style="width: 150px;; margin-left: 50px;">
                                <input placeholder="PV No" matInput formControlName="pvno" type="text" readonly
                                    id="ap-0554">
                            </mat-form-field>
                        </td>
                        <td>
                            <button type="button" style="border-radius:40px;margin-left:50px;margin-bottom: 20px"
                                class="btn btn-outline-danger" data-dismiss="modal" id="ap-0555">
                                Cancel</button>
                        </td>
                    </tr>
                </form>
            </div>
        </div>
    </div>

    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
data-keyboard="false" data-backdrop="static"  id="addpocomponent">
    <div class="modal-dialog modal-lg " style="width: 60%;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Component Details
                </h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" #closecomponent
                    id="ecfap-0245">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="padding:2rem">
                <div class="table-responsive">
                    <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                    <table>
                        <thead>
                            <tr>
                                <th>S.No</th>
                                    <th>Product Name</th>
                                            <th style="width:80px">
                                                HSN Code</th>
                                            <th style="width:30px">
                                                HSN %</th>
                                            <th style="width:100px">Unit Price</th>
                                            <th style="width:50px">Quantity</th>
                                            <th style="width:100px">Amount</th>
                                            <th style="width:100px">Taxable Amount</th>
                                            <th style="width:100px">
                                                CGST</th>
                                            <th style="width:100px">
                                                SGST</th>
                                            <th style="width:100px">
                                                IGST</th>
                                            <th style="width:100px">
                                                Tax Amount</th>
                                            <th style="width:100px">Total Amount</th>

                            </tr>
                        </thead>
                      <tbody>
  <tr *ngFor="let child of selectedDetail?.invoicedetail_child?.data; let j = index">
    <td>{{ j + 1 }}</td>
    <td style="width: 303px;">
      <div style="width: 300px; overflow: hidden"
          matTooltip="{{ child.productname }}"
          matTooltipClass="custom-tooltipnew">
        {{ child.productname }}
      </div>
    </td>
    <td>{{ child.hsn }}</td>
    <td>{{ child.hsn_percentage }}</td>
    <td>{{ child.unitprice }}</td>
    <td>{{ child.quantity }}</td>
    <td>{{ child.amount | currency :'INR'}}</td>
    <td>{{ child.taxable_amount | currency :'INR' }}</td>
    <td>{{ child.cgst }}</td>
    <td>{{ child.sgst }}</td>
    <td>{{ child.igst }}</td>
    <td>{{ child.taxamount | currency :'INR' }}</td>
    <td>{{ child.totalamount  | currency :'INR'}}</td>
  </tr>
</tbody>


                    </table>
                    </div>
                  
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-primary" style="border-radius:40px;"
                    (click)="compoback() " id="ecfap-0246">
                    Back
                </button>
            </div>
    </div>
    </div>
</div>

    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
        data-backdrop="static" data-keyboard="false" id="ap-0049">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title  mb-0">Supplier Details</h3>
                    <button type="button" #supclosebuttons class="close" data-dismiss="modal" aria-label="Close"
                        id="ap-0556">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form [formGroup]="SupplierDetailForm">
                        <div class="search-auto-fit">
                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Supplier Gst-No</mat-label>
                                    <input matInput placeholder="Supplier Gst-No" formControlName="suppliergst" readonly
                                        id="ap-0557">

                                </mat-form-field>
                                <!-- (input)="validationGstNo($event)" -->
                            </div>
                            <div>
                                <!-- <span class="fa fa-check-circle" style="font-size:36px;color:darkblue;margin-left:10px;cursor: pointer;" 
                                    matTooltip="validate" matTooltipClass="custom-tooltipnew" (click)="validationGstNo(SupplierDetailForm?.value?.suppliergst)"></span> -->
                            </div>
                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Supplier Name</mat-label>
                                    <input matInput placeholder="Supplier Name" formControlName="supplier_name" readonly
                                        id="ap-0558">
                                </mat-form-field>
                            </div>
                            <!-- <td *ngIf="!supdetDisable">
                                    <mat-form-field
                                        style="width:200px;margin-left:-400px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="Supplier Name" formControlName="supplier_name"
                                        autocomplete="off" readonly id="ap-0559">
                                    </mat-form-field>
                                </td> -->
                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Supplier Pin-Code</mat-label>
                                    <input matInput placeholder="Supplier Pin-Code" formControlName="pincode" readonly
                                        id="ap-0560">
                                </mat-form-field>
                            </div>
                            <!-- <td >
                                    <mat-form-field
                                        style="width:200px;margin-left:-150px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="Supplier Pin-Code" formControlName="pincode" maxlength="6"
                                        autocomplete="off" (keypress)="numberOnly($event)" readonly id="ap-0561">
                                    </mat-form-field>
                                </td> -->
                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Invoice No</mat-label>
                                    <input matInput placeholder="Invoice No" formControlName="invoiceno" readonly
                                        id="ap-0562">
                                </mat-form-field>
                            </div>
                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Date</mat-label>
                                    <input matInput placeholder="Date" formControlName="invoicedate" readonly
                                        id="ap-0563">
                                </mat-form-field>
                            </div>
                            <div id="matInput-size">
                                <mat-form-field appearance="outline">
                                    <mat-label>Supplier Address</mat-label>
                                    <input matInput placeholder="Supplier Address" formControlName="address" readonly
                                        autocomplete="off" id="ap-0564">
                                </mat-form-field>
                            </div>
                            <!-- <td *ngIf="!supdetDisable">
                                    <mat-form-field
                                        style="width:400px;margin-left:70px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="Supplier Address" formControlName="address" 
                                            autocomplete="off"  id="ap-0565">
                                    </mat-form-field>
                                </td> -->
                        </div>
                    </form>
                </div>

                <!-- <div style="margin-bottom: 5%;">
                            <td>
                                <button type="submit"
                                 style="border-radius:40px;margin-left: 410px;
                                 background-color: white;"
                                  (click)="supplierBack()"
                                   class="btn btn-outline-primary" 
                                   id="ap-0566">Back</button>
                            </td>
                        </div> -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-primary" (click)="supplierBack()" data-dismiss="modal"
                        style="border-radius: 40px" id="ap-0566">
                        Back
                    </button>
                </div>
            </div>
        </div>
    </div>

</div>