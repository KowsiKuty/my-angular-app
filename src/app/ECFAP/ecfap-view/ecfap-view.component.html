<header class="header-adjust">
  <div class="headingalign">
    <h3>
        <i
          class="fa fa-arrow-left"
          aria-hidden="true"
          (click)="back()"
        ></i
        >&nbsp; ECF & Invoice Header
    </h3>

</div>
<div  class="button-div" *ngIf="!showApprove">
 <!-- <button type="button"
 style="border-radius:40px;"
 class="btn btn-outline-primary" 
  (click)="back()"
   id="ecfap-view-0043">Back</button> -->
  </div>
</header>


    <div>
    <div class="header-container">
      <h3>ECF Header</h3>
      <div>
        <i
          class="fa fa-clock-o"
          matTooltip="View Transaction"
          style="font-size: 28px; cursor: pointer"
          aria-hidden="true"
          (click)="viewtrn()"
        ></i>
      </div>
    </div>
    
            
                <form [formGroup]="ecfheaderviewForm">
                  <div class="expansition-div">
                    <mat-accordion>
                      <mat-expansion-panel [expanded]="true" class="expansion-conatiner">
                        <mat-expansion-panel-header>
                          <!-- <h3 class="component-title ">Tour</h3> -->
                          <!-- <h3 class="expansion-title mb-0">ECF Header</h3> -->
                        </mat-expansion-panel-header>
                        <div class="card-container">
                          <div class="card-view">
                            <div class="card-point">
                              <h4>ECF Type</h4>
                              <p>{{ this.ecftype }}</p>
                            </div>
                            <div class="card-point" *ngIf="ecftypeid == 3 || ecftypeid == 13">
                              <h4>Payment For</h4>
                              <p>{{ this.payto }}</p>
                            </div>
                            <div class="card-point" *ngIf="ecftypeid == 4">
                              <h4>Payment For</h4>
                              <p>{{ this.ppx }}</p>
                            </div>
                            <div class="card-point">
                              <h4>Supplier Type</h4>
                              <p>{{ this.supplier_type }}</p>
                            </div>
                            <div class="card-point" >
                              <h4>Commodity Name</h4>
                              <p>{{ this.commodity_id }}</p>
                            </div>
                            <div class="card-point" *ngIf="ecftypeid != 3 && ecftypeid != 4 &&  ecftypeid != 13">
                              <h4>Raiser Branch</h4>
                              <p>{{ this.branch_name }}</p>
                            </div>
                            <!-- <div class="card-point">
                              <h4>ECF Date</h4>
                              <p>{{ this.ecfdate }}</p>
                            </div>
                            <div class="card-point" *ngIf="ecftypeid != 7">
                              <h4>ECF Amount</h4>
                              <p>{{ this.ecfamount }}</p>
                            </div>
                            <div class="card-point" *ngIf="ecftypeid == 7">
                              <h4>CRN Amount</h4>
                              <p>{{ this.ecfamount }}</p>
                            </div>
                            <div class="card-point">
                              <h4>Remarks</h4>
                              <p>{{ this.remark }}</p>
                            </div>
                            <div class="card-point" *ngIf="ecftypeid ==4">
                              <h4>Advance Type</h4>
                              <p>{{ this.advancetype }}</p>
                            </div>
                            <div class="card-point" *ngIf="ecftypeid == 3 || ecftypeid == 4 || ecftypeid == 13">
                              <h4>Raiser Branch</h4>
                              <p>{{ this.branch }}</p>
                            </div>
                            <div class="card-point" *ngIf="ecftypeid == 3 && this.checkhr == true">
                              <mat-radio-group formControlName="is_raisedby_self" readonly class="inputformatradiobutton">
                                  <mat-label style="margin-left:50px" >Behalf of Self</mat-label>
                                  <mat-radio-button *ngFor="let n of behalfyesorno" [value]="n.value"
                                    style="margin-left:10px"  [disabled]="showgst">
                                      {{n.display}}
                                  </mat-radio-button>
                              </mat-radio-group>
                          </div>
                          <div class="card-point" *ngIf="ecftypeid == 3 && ecfheaderviewForm.value.is_raisedby_self == false">
                            <h4>Raised For</h4>
                            <p>{{ this.raised_for }}</p>
                          </div>
                          <div class="card-point" *ngIf="ecftypeid == 3 && ecfheaderviewForm.value.is_raisedby_self == false">
                            <h4>Raised By</h4>
                            <p>{{ this.raised_by }}</p>
                          </div>
                          <div class="card-point" *ngIf="this.ecfheaderviewForm?.value?.location != '' && this.ecfheaderviewForm?.value?.location != null">
                            <h4>Location</h4>
                            <p>{{ this.location }}</p>
                          </div> -->
                          <!-- </div>
                        </div>
                      </mat-expansion-panel>
                  </mat-accordion>

                  <mat-accordion>
                    <mat-expansion-panel [expanded]="true" class="expansion-conatiner">
                      <mat-expansion-panel-header>
                        <h3 class="expansion-title mb-0">ECF Details</h3>
                      </mat-expansion-panel-header>
                      <div class="card-container">
                        <div class="card-view"> -->
                           <div class="card-point">
                              <h4>ECF Date</h4>
                              <p>{{ this.ecfdate }}</p>
                            </div>
                            <div class="card-point" *ngIf="ecftypeid != 7">
                              <h4>ECF Amount</h4>
                              <p>{{ this.ecfamount }}</p>
                            </div>
                            <div class="card-point" *ngIf="ecftypeid == 7">
                              <h4>CRN Amount</h4>
                              <p>{{ this.ecfamount }}</p>
                            </div>
                            <div class="card-point">
                              <h4>Remarks</h4>
                              <p>{{ this.remark }}</p>
                            </div>
                            <div class="card-point" *ngIf="ecftypeid ==4">
                              <h4>Advance Type</h4>
                              <p>{{ this.advancetype }}</p>
                            </div>
                            <div class="card-point" *ngIf="ecftypeid == 3 || ecftypeid == 4 || ecftypeid == 13">
                              <h4>Raiser Branch</h4>
                              <p>{{ this.branch_name }}</p>
                            </div>
                            <div class="card-point" *ngIf="ecftypeid == 3 && this.checkhr == true">
                              <h4>Behalf of Self</h4>
                              <mat-radio-group style="margin-left: -10px;" formControlName="is_raisedby_self" readonly class="inputformatradiobutton">
                                  <mat-radio-button *ngFor="let n of behalfyesorno" [value]="n.value"
                                    style="margin-left:10px"  [disabled]="showgst">
                                      {{n.display}}
                                  </mat-radio-button>
                              </mat-radio-group>
                          </div>
                          <div class="card-point" *ngIf="ecftypeid == 3 && ecfheaderviewForm.value.is_raisedby_self == false">
                            <h4>Raised For</h4>
                            <p>{{ this.raised_for }}</p>
                          </div>
                          <div class="card-point" *ngIf="ecftypeid == 3 && ecfheaderviewForm.value.is_raisedby_self == false">
                            <h4>Raised By</h4>
                            <p>{{ this.raised_by }}</p>
                          </div>
                          <div class="card-point" *ngIf="this.ecfheaderviewForm?.value?.location != '' && this.ecfheaderviewForm?.value?.location != null">
                            <h4>Location</h4>
                            <p>{{ this.location }}</p>
                          </div>
                          <div class="card-point" >
                            <h4>View Notes</h4>
                            <div> 
                                <i matTooltip="View Notes" matTooltipClass="custom-tooltipnew" class="fa fa-sticky-note create"
                                (click)="Notepopup()"
                                style="cursor: pointer;color:blue;">
                                <!-- data-target="#invoice-detail-0019" data-toggle="modal" -->
                            </i>
                            </div>
                          </div>
                        </div>
                      </div>
                    </mat-expansion-panel>
                  </mat-accordion>
                  </div>
                  
                        <!-- <div> -->
                          <!-- <tr> -->
                            <!-- <div class="ecf_header_align">
                              <div id="matInput-size">
                              <mat-form-field  appearance="outline">
                                        <mat-label>ECF Type</mat-label>
                                        <input matInput  formControlName="ecftype" 
                                            autocomplete="off" readonly id="ecfap-view-0011">
                                    </mat-form-field>
                              </div>

                                <div id="matInput-size" *ngIf="ecftypeid == 3 || ecftypeid == 13">
                                    <mat-form-field  appearance="outline">
                                        <mat-label>Payment For</mat-label>
                                        <input matInput  formControlName="payto"
                                            autocomplete="off" readonly id="ecfap-view-0012">
                                    </mat-form-field>
                                  </div>

                                <div  id="matInput-size"  *ngIf="ecftypeid == 4">
                                    <mat-form-field  appearance="outline">
                                        <mat-label>Payment For</mat-label>
                                        <input matInput  formControlName="ppx"
                                            autocomplete="off" readonly id="ecfap-view-0013">
                                    </mat-form-field>
                                  </div>

                                <div id="matInput-size">
                                   <mat-form-field appearance="outline">
                                        <mat-label>Supplier Type</mat-label>
                                        <input matInput  formControlName="supplier_type"
                                            autocomplete="off" readonly id="ecfap-view-0014">
                                    </mat-form-field>
                                 </div>

                                <div id="matInput-size">
                                <mat-form-field  appearance="outline">
                                        <mat-label>Commodity Name</mat-label>
                                        <input matInput formControlName="commodity_id" 
                                        matTooltip="{{ecfheaderviewForm?.value?.commodity_id}}" matTooltipClass="custom-tooltipnew"
                                            autocomplete="off" readonly id="ecfap-view-0015">
                                    </mat-form-field>
                                  </div>

                                <div id="matInput-size" *ngIf="ecftypeid != 3 && ecftypeid != 4 &&  ecftypeid != 13">
                                    <mat-form-field
                                        appearance="outline">
                                        <mat-label>Raiser Branch</mat-label>
                                        <input matInput  formControlName="branch"
                                            autocomplete="off" readonly id="ecfap-view-0016">
                                    </mat-form-field>
                                  </div>
                             </tr> -->
                           
                            <!-- <tr> -->
                                
                                <!-- <td>
                                    <mat-form-field
                                        style="width:200px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="Client Name" formControlName="client_code"
                                            autocomplete="off" readonly id="ecfap-view-0017"> 
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field
                                        style="width:200px;margin-left: 50px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="RM Name" formControlName="rmcode"
                                            autocomplete="off" readonly id="ecfap-view-0018">
                                    </mat-form-field>
                                </td> -->
                                <!-- <div id="matInput-size">
                                    <mat-form-field
                                       appearance="outline">
                                        <mat-label>ECF Date</mat-label>
                                        <input matInput readonly 
                                            formControlName="ecfdate"   id="ecfap-view-0019">
                                       
                                    </mat-form-field>
                                  </div>

                                <div id="matInput-size" *ngIf="ecftypeid != 7">
                                    <mat-form-field
                                     appearance="outline">
                                        <mat-label>ECF Amount</mat-label>
                                        <input matInput  formControlName="ecfamount" style="text-align: right;"
                                            autocomplete="off" readonly id="ecfap-view-0020">
                                    </mat-form-field>
                                  </div>

                                <div id="matInput-size" *ngIf="ecftypeid == 7">
                                    <mat-form-field
                                         appearance="outline">
                                        <mat-label>CRN Amount</mat-label>
                                        <input matInput  formControlName="ecfamount" style="text-align: right;"
                                            autocomplete="off" readonly id="ecfap-view-0021">
                                    </mat-form-field>
                                  </div> -->

                                <!-- <td>
                                    <mat-form-field
                                    style="width: 200px;margin-left:50px;font-family: 'Times New Roman', Times, serif;">
                                    <input matInput placeholder="Is Original Document" formControlName="is_originalinvoice"
                                        autocomplete="off" readonly id="ecfap-view-0022">
                                </mat-form-field>
                                </td> -->
                                <!-- <div id="matInput-size">
                                    <mat-form-field
                                        appearance="outline">
                                        <mat-label>Remarks</mat-label>
                                        <input matInput  formControlName="remark" 
                                        [matTooltip]="ecfheaderviewForm.value.remark" matTooltipClass="custom-tooltipnew"
                                            autocomplete="off" readonly id="ecfap-view-0023">
                                    </mat-form-field>
                                  </div>

                                <div id="matInput-size" *ngIf="ecftypeid ==4">
                                    <mat-form-field
                                        appearance="outline">
                                        <mat-label>Advance Type</mat-label>
                                        <input matInput  formControlName="advancetype" readonly id="ecfap-view-0024">
                                    </mat-form-field>
                                  </div> -->
                                
                            <!-- </tr> -->

                            <!-- <tr> -->
                                <!-- <div  id="matInput-size" *ngIf="ecftypeid == 3 || ecftypeid == 4 || ecftypeid == 13">
                                    <mat-form-field
                                    appearance="outline">
                                    <mat-label>Raiser Branch</mat-label>
                                    <input matInput  formControlName="branch"
                                        autocomplete="off" readonly id="ecfap-view-0025">
                                </mat-form-field>
                              </div>
                               
                                <div style="white-space:nowrap;" *ngIf="ecftypeid == 3 && this.checkhr == true">
                                 <mat-radio-group formControlName="is_raisedby_self" readonly class="inputformatradiobutton">
                                        <mat-label style="margin-left:50px" >Behalf of Self</mat-label>
                                        <mat-radio-button *ngFor="let n of behalfyesorno" [value]="n.value"
                                          style="margin-left:10px"  [disabled]="showgst">
                                            {{n.display}}
                                        </mat-radio-button>
                                    </mat-radio-group>
                                  </div>
                                
                                <div id="matInput-size" *ngIf="ecftypeid == 3 && ecfheaderviewForm.value.is_raisedby_self == false">
                                    <mat-form-field
                                        appearance="outline">
                                        <mat-label>Raised For</mat-label>
                                        <input matInput  formControlName="raised_for"
                                            autocomplete="off" readonly id="ecfap-view-0026">
                                    </mat-form-field>
                                  </div>

                                <div id="matInput-size" *ngIf="ecftypeid == 3 && ecfheaderviewForm.value.is_raisedby_self == false">
                                    <mat-form-field
                                         appearance="outline">
                                        <mat-label>Raised By</mat-label>
                                        <input matInput  formControlName="raised_by"
                                            autocomplete="off" readonly id="ecfap-view-0027">
                                    </mat-form-field>
                                  </div> -->
    
                                <!-- </tr> -->
                                <!-- <tr> -->
                                  <!-- <div id="matInput-size" *ngIf="this.ecfheaderviewForm?.value?.location != '' && this.ecfheaderviewForm?.value?.location != null">
                                      <mat-form-field appearance="outline">
                                        <mat-label>Location</mat-label>
                                        <input matInput  formControlName="location"
                                            autocomplete="off" readonly id="ecfap-view-0028">
                                       </mat-form-field> 
                                      </div>

                                      <div class="btn-align">
                                        <h3 
                                    (click)="Notepopup()"
                                      style=" cursor: pointer; color: blue; font-family: 'Montserrat'; margin-left: -35px;margin-left:10px "
                                      class="btn btn-link" matTooltip="View Notes" matTooltipClass="custom-tooltipnew"
                                    >
                                      data-toggle="modal"
                                    data-target=".bd-example-modal-xl" -->
                                      <!-- View Notes
                                    </h3> -->
                                
                                    <!-- <h3
                                      style="cursor: pointer;color: blue;font-family: 'Montserrat';margin-left: -35px;"
                                      class="btn btn-link"matTooltip="View Transaction"matTooltipClass="custom-tooltipnew"(click)="viewtrn(ecfheaderid)"
                                    > -->
                                      <!-- data-toggle="modal"
                                    data-target=".bd-example-modal-xl" -->
                                      <!-- data-toggle="modal"
                                    data-target="#ecfap-view-0009" -->
                                      <!-- View Transaction
                                    </h3> -->
                                 <!-- </div>   --> 
                           <!-- </div>                          -->
                                  <!-- <td *ngIf="!editorDisabled">                               
                                <button type="submit"
                                style="border-radius:40px;margin-left:40px;"
                                class="btn btn-outline-primary" (click)="headersubmit()" id="ecfap-view-0029">
                                Save</button>
                            </td> -->
                                <!-- <td>
                                    <h3  (click)="gettrandata()" data-toggle="modal"
                                     data-target="#showtrandetails" style="cursor: pointer;color:blue;font-family: 'Montserrat';" class="btn btn-link" matTooltip="Transaction View">View Transaction Details</h3>
                                </td> -->

                                     <!-- -------notepad------ -->

                                     <div class="modal fade bd-example-modal-xl" tabindex="-1" role="dialog"
                                     data-keyboard="false" data-backdrop="static" aria-labelledby="myExtraLargeModalLabel" aria-hidden="true" 
                                     >
                                     <div class="modal-dialog modal-lg">
                                         <div class="modal-content">
                                             <div class="modal-header">
                                                 <h3 id="ecfap-view-0001">
                                                     Note Pad
                                                  </h3>
                                                  <button
                                                  type="button"
                                                  class="close"
                                                  data-dismiss="modal"
                                                  aria-label="Close"
                                                  id="create-ecf-0044"
                                                >
                                                  <span aria-hidden="true">&times;</span>
                                                </button>
                                                     <!-- <button 
                                                     type="button"
                                                      style="border-radius:40px;margin-left: 980px; border-color: black; 
                                                     background-color: white;color:black" class="btn btn-light"
                                                         data-dismiss="modal" id="ecfap-view-0030">
                                                         X</button> -->
                                             </div>
                                             <br>
                                             <div style="margin-left: 50px;width:90%;height: 70%;">
                                                 <div>

                                                     <div [ngxSummernote]="config"
                                                         [ngxSummernoteDisabled]="editorDisabled" (blur)="onBlur()"
                                                         (mediaDelete)="onDelete($event)"
                                                         (summernoteInit)="summernoteInit($event)"
                                                         formControlName="notename">
                                                     </div>

                                                 </div>
                                             </div>
                                             <br>
                                             <div class="modal-footer">
                                                 <!-- <button type="button" style="border-radius: 40px;margin-left: 10px;"
                                                     class="btn btn-outline-primary"
                                                     data-dismiss="modal" id="ecfap-view-0031">Close</button> -->

                                                 <!-- <button *ngIf="!editorDisabled" style="border-radius:40px;margin-left: 10px; border-color: blue; 
                                                     background-color: white;color:blue" class="btn btn-light" type="button"
                                                     data-dismiss="modal" (click)="notessave()" id="ecfap-view-0032">
                                                     Submit</button> -->

                                                     <!-- <button
                                                     *ngIf="!editorDisabled"
                                                     type="button"
                                                     style="border-radius: 40px"
                                                     class="btn btn-outline-success"
                                                     data-dismiss="modal"
                                                     id="ecfap-view-0032"
                                                     (click)="notessave()"
                                                   >
                                                     Submit
                                                   </button> -->

                                                <!-- <button type="button" style="border-radius:40px;margin-left: 10px; border-color: blue; 
                                                     background-color: white;color:blue" class="btn btn-light" 
                                                     data-dismiss="modal" id="ecfap-view-0033">
                                                     Back</button> -->

                                                     <button
                                                     type="button"
                                                     style="border-radius: 40px"
                                                     class="btn btn-outline-primary"
                                                     data-dismiss="modal"
                                                     id="ecfap-view-0033"
                                                   >
                                                     Back
                                                   </button>

                                             </div>
                                         </div>
                                     </div>
                                 </div>

                                <!-- <td>
                            <span class="material-icons" type="button" data-toggle="modal"
                                style="margin-left: 50px;" data-target=".bd-example-modal-xl"
                                formControlName="notename">description</span>Add Note
                        </td> -->
                            <!-- </tr> -->

                       
                </form>
          

            
            <h3 *ngIf="ecftypeid != 7">Invoice Header</h3>
            <h3 *ngIf="ecftypeid == 7">Credit Note Header</h3>
            <!-- <div>
                <form [formGroup]="InvoiceHeaderForm">
                <table>
                    <tr>
                        <mat-radio-group formControlName="invoicegst" readonly class="inputformatradiobutton">
                            <mat-label > GST Applicable</mat-label>
                            <mat-radio-button *ngFor="let n of yesorno" [value]="n.value"
                                style="margin-left: 10px;" [disabled]="showgst">
                                {{n.display}}
                            </mat-radio-button>
                        </mat-radio-group>
                    </tr>
                </table>
                </form>
            </div> -->
            <div>

                <div class="table-responsive">
                  <div class="comp-table t-resposive t-bdr-line t-HoverZoom" id="summary-table">
                    <table>
                        <thead>
                            <tr>

                                <th>S.No</th>
                                <th  style="width:225px;">Invoice CR.No</th>
                                <th>GST Applicable</th>
                                <th *ngIf="ecftypeid == 3 && this.InvoiceHeaderForm.value.invoicegst == 'Y'">Supplier GST</th>
                                <th *ngIf="ecftypeid == 3 && this.InvoiceHeaderForm.value.invoicegst == 'Y'">Supplier Name</th>
                                <th *ngIf="ecftypeid == 2 || this.ppxid == 'S' || ecftypeid == 14">Supplier Name</th>
                                <th *ngIf="ecftypeid == 2 || this.ppxid == 'S' || ecftypeid == 14">Supplier GST No</th>
                                <th *ngIf="ecftypeid == 2 || this.ppxid == 'S'  || ecftypeid == 14">Supplier State</th>
                                <th>MSME</th>
                                <th *ngIf="showreg">MSME Reg No</th>
                                <th>Branch</th>
                                <th *ngIf="invheaderdata[0]?.pmd_data != undefined">Is PMD</th>
                                <th *ngIf="invheaderdata[0]?.pmd_data != undefined">PMD Location</th>
                                <th *ngIf="this.ppxid != 'E' && this.ecftypeid != 13">Invoice No</th>
                                <th *ngIf="ecftypeid == 7">Credit Ref No</th>
                                <th *ngIf="this.ppxid != 'E' && this.ecftypeid != 13">Invoice Date</th>
                                <th *ngIf="ecftypeid == 2 || ecftypeid ==1">Is PCA</th>
                                <th *ngIf="invheaderdata[0]?.is_pca">PCA No.</th>
                                <th>Taxable Amount</th>
                                <!-- <th *ngIf="(ecftypeid == 2 || ecftypeid == 7 ||ecftypeid == 14 ||ecftypeid == 3) && this.InvoiceHeaderForm.value.invoicegst == 'Y'">Tax Amount</th> -->
                                <!-- <th>Roundoff Amount</th>
                                <th>Other Adjustment</th> -->

                                <th>Total Amount</th>
                                <th >Purpose</th>
                                <th>Is Recurring</th>
                                <th>Recurring Type</th>
                                <th *ngIf ="showRecurDates && showRecurMonth == true">Recurring Month</th>
                                <th *ngIf ="showRecurDates && showRecurMonth == false">Recurring From</th>
                                <th *ngIf ="showRecurDates && showRecurMonth == false">Recurring To</th>
                                <th>Invoice Status</th>
                                <th *ngIf="ap_statusflag == true">AP Status</th>
                                <th>Attachments</th>
                                <!-- <th *ngIf="ecftypeid == 2">Is Capitalized</th>  -->
                                <!-- <th *ngIf="showApprove">Audit Checklist</th>
                                <th *ngIf="showApprove">Dedupe Check</th>
                                <th>View Transaction</th> -->
                                 <th>Action</th>

                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let dtl of invheaderdata; index as i">
                                <!-- <td> {{(ecfpresentpage - 1)*pagesizeecf +i+1 }} </td>  -->
                                <td>{{i+1}}</td>
                                <td  style="width:20%;">{{dtl?.apinvoiceheader_crno}}</td>
                                <td style="text-align: center;" *ngIf="dtl?.invoicegst == 'Y'">Yes</td>
                                <td style="text-align: center;" *ngIf="dtl?.invoicegst == 'N'">No</td>
                                <td *ngIf="ecftypeid == 3 && this.InvoiceHeaderForm.value.invoicegst == 'Y'">{{dtl?.manual_gstno}}</td>
                                <td *ngIf="ecftypeid == 3 && this.InvoiceHeaderForm.value.invoicegst == 'Y'">{{dtl?.manualsupp_name}}</td>
                                <td *ngIf="ecftypeid == 2 || this.ppxid == 'S' || ecftypeid == 14">{{dtl?.supplier_id?.name}}</td>
                                <td *ngIf="ecftypeid == 2 || this.ppxid == 'S' || ecftypeid == 14">{{dtl?.supplier_id?.gstno}}</td>
                                <td *ngIf="ecftypeid == 2 || this.ppxid == 'S'  || ecftypeid == 14">{{dtl?.supplierstate_id?.name}}</td>
                                <td>{{dtl?.is_msme == true ? 'YES':'NO'}}</td>
                                <td *ngIf="showreg">{{dtl?.msme_reg_no}}</td>
                                <td>{{dtl?.branchdetails_id?.code}}-{{dtl?.branchdetails_id?.name}}</td>                                
                                <td *ngIf="dtl?.pmd_data != undefined">Yes</td>
                                <td *ngIf="dtl?.pmd_data != undefined">{{dtl?.pmd_data?.location}}</td>
                                <td *ngIf="this.ppxid != 'E' && this.ecftypeid != 13">{{dtl?.invoiceno}}</td>
                                <td *ngIf="ecftypeid == 7">{{dtl?.creditrefno}}</td>
                                <td *ngIf="this.ppxid != 'E' && this.ecftypeid != 13">{{dtl?.invoicedate| date:'dd-MMM-yyyy'}}</td>
                                <td *ngIf="(ecftypeid == 2 || ecftypeid ==1) && dtl?.is_pca">Yes</td>
                                <td *ngIf="(ecftypeid == 2 || ecftypeid ==1) && !dtl?.is_pca">No</td>
                                <td *ngIf="dtl?.is_pca">{{dtl?.pca_no }}</td>
                                <td style="text-align: right;">{{dtl?.invoiceamount| currency:'INR'}}</td>
                                <!-- <td  style="text-align: right;" *ngIf="(ecftypeid == 2 || ecftypeid == 7 ||ecftypeid == 14 ||ecftypeid == 3) && this.InvoiceHeaderForm.value.invoicegst == 'Y'">{{dtl?.taxamount| currency:'INR'}}</td> -->
                                <!-- <td>{{dtl.roundoffamt}}</td>
                                <td>{{dtl.otheramount}}</td> -->
                   
                                <td style="text-align: right;">{{dtl?.totalamount| currency:'INR'}}</td>
                                <!-- <td>{{ (dtl?.apinvoiceheaderstatus_id !== null) ? (dtl?.apinvoiceheaderstatus) : (dtl?.invoice_status)}}</td> -->
                                <td  matTooltip="{{dtl?.remarks}}" matTooltipClass="custom-tooltipnew">
                                   {{dtl?.remarks}}
                                    <!-- <div style="width: 200px;overflow: hidden;">
                                    </div> -->
                                </td>
                                <td style="text-align: center;">{{dtl?.is_recur?.text}}</td>
                                <td style="text-align: center;">{{dtl?.servicetype?.text}}</td>
                                <td *ngIf ="showRecurDates && showRecurMonth == true">{{dtl?.recur_fromdate| date:'dd-MMM-yyyy'}}</td>
                                <td *ngIf ="showRecurDates && showRecurMonth == false">{{dtl?.recur_fromdate| date:'dd-MMM-yyyy'}}</td>
                                <td *ngIf ="showRecurDates && showRecurMonth == false">{{dtl?.recur_todate| date:'dd-MMM-yyyy'}}</td>
                                <td>{{dtl?.invoice_status}}</td>
                                <td *ngIf="ap_statusflag == true && invheaderdata[0]?.apinvoiceheader_status != null && invheaderdata[0]?.apinvoiceheader_status != undefined && invheaderdata[0]?.apinvoiceheader_status != ''">{{dtl?.apinvoiceheader_status}}</td>
                                <td style="text-align:center" *ngIf="ap_statusflag == true && (invheaderdata[0]?.apinvoiceheader_status == null || invheaderdata[0]?.apinvoiceheader_status == undefined || invheaderdata[0]?.apinvoiceheader_status == '')">-</td>
                                <td style="text-align:center">
                            <!-- <tr *ngFor="let file of dtl.file_data; index as j">
                                <td>
                                    {{j+1}}
                                </td>
                                <td>
                                    <a (click)="data(file)" class="btn btn-link" style="cursor: pointer;color:blue;"
                                        matTooltip="View File"  data-target="#my-modal" data-toggle="modal">{{ file.file_name}}</a>
                                </td>
                                <td>
                                    <i class="material-icons" (click)="getfiles(file)">
                                        get_app
                                    </i>
                                </td>
                            </tr> -->
                               
                            <i
                            class="fa fa-eye create"
                            matTooltip="View File"
                            matTooltipClass="custom-tooltipnew"
                            style="color: blue; cursor: pointer"
                            (click)="attachment_view(dtl)"

                          ></i>
                          <!-- data-toggle="modal"
                          data-target="#ecfap-view-0010" -->
                        </td>
        

                                <!-- <td style="text-align: center;">
                                    <span matTooltip="view File" class=" fa fa-file-image-o "
                                        style="color: hsl(0, 0%, 0%);cursor: pointer;" data-toggle="modal"
                                        (click)="getfiledetails()" data-target="#showattachmentpopup"></span>

                                </td> -->
                                <!-- <td *ngIf="showApprove">
                                    <button type="button" class="btn btn-outline-primary" style="border-radius:50px;height: 53px; margin-top: 12px;font-size:medium;"
                                    data-toggle="modal" data-target="#ccbsModal" (click)="getquestion(i, dtl.id, dtl.invoicedate)"  >Audit Checklist
                                                                  </button> 
                                </td>
                                <td *ngIf="showApprove">
                                    <button type="button" class="btn btn-outline-primary" style="border-radius:50px;height: 53px; margin-top: 12px;font-size: medium;"
                                    data-toggle="modal" data-target="#data" (click)="getdedup(i, dtl.id)">Dedupe Check
                                    </button> 
                                </td>
                                <td>
                                    <button type="button" class="btn btn-outline-primary" style="border-radius:40px;height: 70px; margin-top: 12px;font-size: medium;"
                                    data-toggle="modal" data-target="#viewtran" (click)="viewtrn(i, dtl.id)">View Transaction
                                    </button> 
                                </td> -->
                                <!-- <td style="text-align: center;" *ngIf="ecftypeid == 2 && dtl?.captalisedflag =='Y'">   Yes</td>
                                <td style="text-align: center;" *ngIf="ecftypeid == 2 && dtl?.captalisedflag =='N'">   No</td> -->
                                <td style="text-align: center;">
                                    <i matTooltip="view" matTooltipClass="custom-tooltipnew" class=" fa fa-eye create "
                                        style="color: black;cursor: pointer;"  (click)="Movetodetail(dtl)"></i>
                                       

                                </td>
                            </tr>
                            <tr *ngIf = "ecftypeid == 2 && invheaderdata[0]?.pmd_data == undefined  && ! invheaderdata[0]?.is_pca">
                                <td class="totaldisplay" colspan="11"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                            <tr *ngIf = "ecftypeid == 2 && invheaderdata[0]?.pmd_data == undefined &&  invheaderdata[0]?.is_pca">
                              <td class="totaldisplay" colspan="12"  style="text-align: end;">
                                  Net Amount:</td>
                                  <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>
                          </tr>
                            <tr *ngIf = "ecftypeid == 2 && invheaderdata[0]?.pmd_data != undefined  && ! invheaderdata[0]?.is_pca">
                                <td class="totaldisplay" colspan="13"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>

                            <tr *ngIf = "ecftypeid == 2 && invheaderdata[0]?.pmd_data != undefined &&  invheaderdata[0]?.is_pca">
                              <td class="totaldisplay" colspan="14"  style="text-align: end;">
                                  Net Amount:</td>
                                  <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>
                          </tr>
                            <!-- <tr *ngIf = "ecftypeid == 2  && this.InvoiceHeaderForm?.value?.invoicegst == 'N'">
                                <th class="totaldisplay" colspan="7"  style="text-align: end;">
                                    Net Amount:</th>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr> -->
                            <tr *ngIf = "ecftypeid == 7 && invheaderdata[0]?.pmd_data != undefined">
                                <td class="totaldisplay" colspan="10"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                            <tr *ngIf = "ecftypeid == 7 && invheaderdata[0]?.pmd_data == undefined">
                                <td class="totaldisplay" colspan="8"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                            <!-- <tr *ngIf = "ecftypeid == 7 && this.InvoiceHeaderForm?.value?.invoicegst == 'N'">
                                <th class="totaldisplay" colspan="7"  style="text-align: end;">
                                    Net Amount:</th>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr> -->
                            
                            <tr *ngIf = "ecftypeid == 14 && invheaderdata[0]?.pmd_data == undefined">
                                <td class="totaldisplay" colspan="10"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                            <tr *ngIf = "ecftypeid == 14  && invheaderdata[0]?.pmd_data != undefined ">
                                <td class="totaldisplay" colspan="12"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                            <!-- <tr *ngIf = "ecftypeid == 14  && this.InvoiceHeaderForm?.value?.invoicegst == 'Y'">
                                <th class="totaldisplay" colspan="10"  style="text-align: end;">
                                    Net Amount:</th>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr> -->
                            <tr *ngIf = "ecftypeid == 13 && invheaderdata[0]?.pmd_data == undefined">
                                <td class="totaldisplay" colspan="5"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                            <tr *ngIf = "ecftypeid == 13 && invheaderdata[0]?.pmd_data != undefined">
                                <td class="totaldisplay" colspan="7"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                            <tr *ngIf = "ecftypeid == 4 && ppxid == 'S' && invheaderdata[0]?.pmd_data == undefined">
                                <td class="totaldisplay" colspan="10"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>
    
                            </tr>
                            <tr *ngIf = "ecftypeid == 4 && ppxid == 'S' && invheaderdata[0]?.pmd_data != undefined">
                                <td class="totaldisplay" colspan="12"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>
    
                            </tr>
                            <tr *ngIf = "ecftypeid == 4 && ppxid == 'E' && invheaderdata[0]?.pmd_data == undefined" >
                                <td class="totaldisplay" colspan="5"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                            <tr *ngIf = "ecftypeid == 4 && ppxid == 'E' && invheaderdata[0]?.pmd_data != undefined" >
                                <td class="totaldisplay" colspan="7"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                            <tr *ngIf = "ecftypeid == 3  && invheaderdata[0]?.pmd_data == undefined">
                                <td class="totaldisplay" colspan="7"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                            <tr *ngIf = "ecftypeid == 3  && invheaderdata[0]?.pmd_data != undefined">
                                <td class="totaldisplay" colspan="9"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                            
                        </tbody>
                    </table>
                    </div>
                    <div *ngIf="invheaderdata ?.length == 0" style="margin-left: 42%;">
                        <h3>Sorry data not found!.. </h3>
                    </div>
                    <!-- <div class="row" *ngIf="issummarypage">
            <div class="col-sm-12" style="font-size: small;text-align: right; margin-bottom: 50px;">
                <button mat-icon-button [disabled]="has_pageprevious === false" color="primary"
                    (click)="previousClickPayment()" id="ecfap-view-0034">
                    <mat-icon>arrow_back</mat-icon>
                </button>
                {{ecfpresentpage}}
                <button mat-icon-button [disabled]="has_pagenext === false" color="primary" (click)="nextClickPayment()" id="ecfap-view-0035">
                    <mat-icon>arrow_forward</mat-icon>
                </button>
            </div>
        </div>  -->
                </div>
                <br>
                <div *ngIf="showApprove">
                    <form [formGroup]="SubmitECFApproverForm">


                      <lib-vs-dynamicform-cmp
                      id="matInput-size"
                      [formGroup]="SubmitECFApproverForm"
                      [InputFields]="approvernames"
                    ></lib-vs-dynamicform-cmp>  
                    
                        <tr>
                            <td>
                                <mat-form-field style="width: 250px;margin-left:38px;font-family: 'Times New Roman', Times, serif;" (click)="approvername()">
                                    <mat-label>Approver Name</mat-label>
                                    <input #appInput  placeholder="Choose Approver" matInput 
                                    formControlName="approvedby" [matAutocomplete]="approver"  id="ecfap-view-0036">
                                    <mat-autocomplete [panelWidth]="400" #approver="matAutocomplete" (opened)="autocompleteapproverScroll()"
                                    [displayWith]="displayFnApprover">
                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                        <mat-option *ngFor="let app of approverList" matTooltip="{{app.name}} -{{app.code}}-{{app.limit}}-{{app.designation}}" matTooltipClass="custom-tooltipnew" [value]="app">
                                            {{app.name}}-{{app.code}} - {{app.limit}} - {{app.designation}}
                                </mat-option>
                             </ng-container>
                                 </mat-autocomplete>
                                </mat-form-field>
                            </td>
                        <td>
      
                        <mat-form-field style="width: 250px;font-family: 'Times New Roman', Times, serif;margin-left: 40px;">
                            <input matInput placeholder="Remarks" formControlName="remark" autocomplete="off" required id="ecfap-view-0037">
                        </mat-form-field>
                    </td>
                
                   <button type="button"    class="btn btn-outline-success" style="border-radius:40px;margin-left:50px;
                    margin-bottom: 0px; 
                    background-color: white;" (click)="ecfApprove()" id="ecfap-view-0038">Approve</button> 
                     <button
                     style="border-radius:40px;margin-left: 10px;margin-bottom: 0px;"
                     class="btn btn-outline-success" (click)="forward()" id="ecfap-view-0039">
                     Approve and Forward</button>
                    <button type="button"    class="btn btn-outline-success" style="border-radius:40px;margin-left:10px;
                     margin-bottom: 0px; 
                     background-color: white;" (click)="ecfReject()" id="ecfap-view-0040">Reject</button> 
                      <!-- <button type="submit"
                      style="border-radius:40px;margin-left: 10px;margin-bottom: 0px;"
                      class="btn btn-outline-success"  id="ecfap-view-0041">
                      Return</button> -->
                   <button type="button"  class="btn btn-outline-primary" style="border-radius:40px;margin-left:10px;
                     margin-bottom: 0px;" (click)="back()" id="ecfap-view-0042">Back</button>
                </tr>
                </form>
                </div>

                <!-- <div *ngIf="!showApprove">

                <button type="button" class="btn btn-outline-primary" style="border-radius:40px;margin-left:555px;
                margin-bottom: 50px;" (click)="back()" id="ecfap-view-0043">Back</button>
                </div> -->

            </div>

            <div style="display: flex; align-items: center; justify-content: center;">
                <button type="button" class="btn btn-outline-primary" style="border-radius:40px;" (click)="back()" id="ecfap-view-0043">Back</button>
            </div>
        </div>




<div *ngIf="showimageHeaderAPI" id="ecfap-view-0002" class="modal fade" aria-labelledby="my-modalLabel" aria-hidden="true" 
    tabindex="-1" role="dialog">
    <div class="modal-dialog modal-xl" data-dismiss="modal" style="width: 60%;height: 80%;">
        <div class="modal-content">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ecfap-view-0044">
                <span aria-hidden="true">&times;</span>
            </button>
            <div class="modal-body">
                <img src="{{jpgUrlsAPI}}" class="img-responsive" style="width: 100%;">

            </div>
        </div>
    </div>
</div>

<div *ngIf="showimagepdf" id="ecfap-view-0003" class="modal fade" aria-labelledby="my-modalLabel" aria-hidden="true" 
data-keyboard="false" data-backdrop="static" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header" style="background: rgba(23, 204, 23, 0.288);">
                <h3 class="modal-title">Attachments</h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="ecfap-view-0045">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <pdf-viewer [src]="pdfurl" [original-size]="false" [render-text]='false' [show-borders]="true"
                [fit-to-page]="true" [show-all]="true" style="display: block; height: 600px;" [fit-to-page]="true">
            </pdf-viewer>
        </div>
    </div>

</div>
 <!-- Auditchecklist -->
<!-- <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true" 
id="ecfap-view-0004">
<div class="modal-dialog modal-xl " style="width: 85%;">
    <div class="modal-content">
        <div class="modal-header" style="text-align:center">
            <h2 class="modal-title" style="text-align:center;margin-left:36%">Audit Checklist</h2>
            <button type="button" class="close" #auditclose data-dismiss="modal" aria-label="Close" id="ecfap-view-0046">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div>
            <table class="table table-bordered" style="width: 100%;text-align: center;">
                <thead class="table_header">
                <tr>
                    <th>S.NO</th>
                    <th>Question</th>
                    <th>Ok/Not.Ok</th>
                </tr>
                </thead>
                <tr *ngFor="let dt of checklist;let i=index">
                <td>{{i+1}}</td>
                <td>{{dt.question}}</td>
                <td>  <div class="btn-group btn-group-toggle" data-toggle="buttons"  >
                    <label class="btn btn-outline-success" [ngClass]="(dt.value==1)? 'active': ''">
                      <input type="radio" name="options" id="ecfap-view-0005" autocomplete="off"   (click)="ok(i,dt)" > Ok
                      </label>
                    <label class="btn btn-outline-danger ">
                      <input type="radio" name="options" id="ecfap-view-0006" autocomplete="off" checked   (click)="notok(i,dt)"> Not-OK
                    </label>
                    <label class="btn btn-outline-secondary">
                      <input type="radio" name="options" id="ecfap-view-0007"  autocomplete="off"  (click)="nap(i,dt)"> N/A
                    </label>
                  </div> </td>
            </tr>
            </table>
        </div>
        <div>
       <div>
        <mat-form-field style="width: 20rem;margin-left: 30px; ">
            <mat-label>Remarks</mat-label>
            <input matInput [formControl]="rem" autocomplete="off" required id="ecfap-view-0047">
        </mat-form-field>
        <button type="submit" data-dismiss="modal" [disabled]="((rem.invalid==true) || (cli==true))" class="btn btn-outline-danger"  style="border-radius:35px;height: 40px;margin-left: 10px;" (click)="bounce()" id="ecfap-view-0048">Bounce</button> 
       
        <button  class="btn btn-outline-primary" style="border-radius:35px;height: 40px;margin-left: 100px;" [disabled] = "disables()" (click)="submitted()" id="ecfap-view-0049">Submit</button>
        <button  data-dismiss="modal" class="btn btn-outline-primary" style="border-radius:35px;height: 40px;margin-left: 10px;" id="ecfap-view-0050">Back</button> 
       </div>
</div>
</div>
</div>
</div> -->

<!-- Dedupe Check -->
<!-- <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true" id="ecfap-view-0008">
    <div class="modal-dialog modal-xl" style="width:80%;height:200%;">
        <div class="modal-content">
            <div class="modal-header">
            <h2 class="modal-title" style="text-align:center;margin-left:45%">Dedupe</h2>
            <button class="close" type="button" data-dismiss="modal" id="ecfap-view-0051">x</button>                
            </div>
            <div class="modal-body">
                <pre>EXACT_MATCH</pre>
                <div class="table-responsive" class="tablescroll" style="margin-top: 10px;width: 100%;margin-left: 10px;">
                    <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                        <thead class="table_header " fixed-header>
                            <tr>
                                <th>S.No</th> 
                                <th>Invoice Number</th>                             
                                <th>Invoice Header Amount</th>
                                <th>Status</th>          
                                <th>CR Number</th>                
                                <th>Supplier Name</th>
                                <th>Branch Name</th>             
                                <th>Employee Name</th>                                      
                            </tr>
                        </thead>
                        <tbody>                    
                            <tr *ngFor="let value of exactList; index as i;">
                                <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                <td>{{value.invoiceno}}</td>
                                <td style="text-align: right;">{{value.invoiceamount}}</td>     
                                <td>{{value['status'].text}}</td>
                                <td>{{value.crno}}</td>                         
                                <td>{{value['supplier'].name}}</td>
                                <td>{{value['branch'].name}}</td>
                                <td>{{value.raised_empname}}</td>    
                            </tr>
                        </tbody>
                    </table>
                    <div *ngIf="exactList ?.length == 0" style="margin-left: 42%;">
                        <h3 style="font-family: 'Times New Roman', Times, serif;">No Records found!..</h3>
                    </div>
                </div>
                <br>

                <pre>WITHOUT_SUPPLIER</pre>
                <div class="table-responsive" class="tablescroll" style="margin-top: 10px;width: 100%;margin-left: 10px;">
                    <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                        <thead class="table_header " fixed-header>
                            <tr>
                                <th>S.No</th> 
                                <th>Invoice Number</th>                             
                                <th>Invoice Header Amount</th>
                                <th>Status</th>          
                                <th>CR Number</th>                
                                <th>Supplier Name</th>
                                <th>Branch Name</th>             
                                <th>Employee Name</th>                                      
                            </tr>
                        </thead>
                        <tbody>                    
                            <tr *ngFor="let value of withoutSuppList; index as i;">
                                <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                <td>{{value.invoiceno}}</td>
                                <td style="text-align: right;">{{value.invoiceamount}}</td>     
                                <td>{{value['status'].text}}</td>
                                <td>{{value.crno}}</td>                         
                                <td>{{value['supplier'].name}}</td>
                                <td>{{value['branch'].name}}</td>
                                <td>{{value.raised_empname}}</td>    
                            </tr>
                        </tbody>
                    </table>
                    <div *ngIf="withoutSuppList ?.length == 0" style="margin-left: 42%;">
                        <h3 style="font-family: 'Times New Roman', Times, serif;">No Records found!..</h3>
                    </div>
                </div>
                <br>

                <pre>WITHOUT_INVOICE_AMOUNT</pre>
                <div class="table-responsive" class="tablescroll" style="margin-top: 10px;width: 100%;margin-left: 10px;">
                    <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                        <thead class="table_header " fixed-header>
                            <tr>
                                <th>S.No</th> 
                                <th>Invoice Number</th>                             
                                <th>Invoice Header Amount</th>
                                <th>Status</th>          
                                <th>CR Number</th>                
                                <th>Supplier Name</th>
                                <th>Branch Name</th>             
                                <th>Employee Name</th>                                      
                            </tr>
                        </thead>
                        <tbody>                    
                            <tr *ngFor="let value of withoutInvAmtList; index as i;">
                                <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                <td>{{value.invoiceno}}</td>
                                <td style="text-align: right;">{{value.invoiceamount}}</td>     
                                <td>{{value['status'].text}}</td>
                                <td>{{value.crno}}</td>                         
                                <td>{{value['supplier'].name}}</td>
                                <td>{{value['branch'].name}}</td>
                                <td>{{value.raised_empname}}</td>    
                            </tr>
                        </tbody>
                    </table>
                    <div *ngIf="withoutInvAmtList ?.length == 0" style="margin-left: 42%;">
                        <h3 style="font-family: 'Times New Roman', Times, serif;">No Records found!..</h3>
                    </div>
                </div>
                <br>

                <pre>WITHOUT_INVOICE_NUMBER</pre>
                <div class="table-responsive" class="tablescroll" style="margin-top: 10px;width: 100%;margin-left: 10px;">
                    <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                        <thead class="table_header " fixed-header>
                            <tr>
                                <th>S.No</th> 
                                <th>Invoice Number</th>                             
                                <th>Invoice Header Amount</th>
                                <th>Status</th>          
                                <th>CR Number</th>                
                                <th>Supplier Name</th>
                                <th>Branch Name</th>             
                                <th>Employee Name</th>                                      
                            </tr>
                        </thead>
                        <tbody>                    
                            <tr *ngFor="let value of withoutInvNoList; index as i;">
                                <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                <td>{{value.invoiceno}}</td>
                                <td style="text-align: right;">{{value.invoiceamount}}</td>     
                                <td>{{value['status'].text}}</td>
                                <td>{{value.crno}}</td>                         
                                <td>{{value['supplier'].name}}</td>
                                <td>{{value['branch'].name}}</td>
                                <td>{{value.raised_empname}}</td>    
                            </tr>
                        </tbody>
                    </table>
                    <div *ngIf="withoutInvNoList ?.length == 0" style="margin-left: 42%;">
                        <h3 style="font-family: 'Times New Roman', Times, serif;">No Records found!..</h3>
                    </div>
                </div>
                <br>

                <pre>WITHOUT_INVOICE_DATE</pre>
                <div class="table-responsive" class="tablescroll" style="margin-top: 10px;width: 100%;margin-left: 10px;">
                    <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                        <thead class="table_header " fixed-header>
                            <tr>
                                <th>S.No</th> 
                                <th>Invoice Number</th>                             
                                <th>Invoice Header Amount</th>
                                <th>Status</th>          
                                <th>CR Number</th>                
                                <th>Supplier Name</th>
                                <th>Branch Name</th>             
                                <th>Employee Name</th>                                      
                            </tr>
                        </thead>
                        <tbody>                    
                            <tr *ngFor="let value of withoutInvDtList; index as i;">
                                <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                <td>{{value.invoiceno}}</td>
                                <td style="text-align: right;">{{value.invoiceamount}}</td>     
                                <td>{{value['status'].text}}</td>
                                <td>{{value.crno}}</td>                         
                                <td>{{value['supplier'].name}}</td>
                                <td>{{value['branch'].name}}</td>
                                <td>{{value.raised_empname}}</td>    
                            </tr>
                        </tbody>
                    </table>
                    <div *ngIf="withoutInvDtList ?.length == 0" style="margin-left: 42%;">
                        <h3 style="font-family: 'Times New Roman', Times, serif;">No Records found!..</h3>
                    </div>
                </div>
            </div>
            <div class="modal-footer"  class="col-md-12 text-center" style="margin-bottom: 2%;">
                <button type="button" class="btn btn-outline-primary" style="border-radius:40px;height: 44px; margin-top: 12px;text-align:center ;" data-dismiss="modal"  id="ecfap-view-0052">Back</button>
            </div>

        </div>
    </div>

</div> -->

  <!-- View Trancation -->
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
  id="ecfap-view-0009">
  <div class="modal-dialog modal-xl" style="width: 70%">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title"> Transaction Details </h3>
        <!-- <button
          class="close"
          type="button"
          data-dismiss="modal"
          id="ecfap-view-0053"
        >
          x
        </button> -->
        <button class="close" type="button" data-dismiss="modal" id="ecfap-view-0053">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container">
          <div class="row">
            <div class="table-responsive" style="width: 100%; margin-top: 1%">
              <div class="table-responsive">
                <lib-vs-cbox-summary [SummaryDetails]="SummarytransactionData"
                  [SummaryApiObj]="SummaryApitransactionObjNew" [FirstLastbtn]="true"></lib-vs-cbox-summary>
              </div>
              <br />
              <table style="width: 100%; text-align: center">
                <tr>
                  <td>Employee Name: &nbsp;{{ name }}</td>
                  <td>Designation: &nbsp;{{ this.designation }}</td>
                  <td>Branch Name : &nbsp;{{ this.branch }}</td>
                </tr>
              </table>
              <!-- <table
          class="table table-bordered"
          style="width: 100%; text-align: center"
        >
          <thead class="table_header">
            <tr>
              <th>S.NO</th>
              <th>Type</th>
              <th>Status</th>
              <th>From Date</th>
              <th>Remarks</th>
              <th>Employee Name</th>
              <th>Approver Name</th>
            </tr>
          </thead>
          <tr *ngFor="let dt of viewtrnlist; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ dt?.Type }}</td>
            <td>{{ dt?.comments }}</td>
            <td>{{ dt?.created_date }}</td>
            <td>{{ dt?.remarks }}</td>
            <td>
              {{ dt?.from_user.name }}
              <br />
              <div *ngIf="dt.from_user_id == -1; else deta"></div>
              <ng-template #deta>
                <a style="color: green; cursor: pointer" (click)="view(dt)"
                  >View Details</a
                >
              </ng-template>
            </td>
            <td>
              {{ dt?.to_user?.name }}
              <br />
              <div *ngIf="dt.to_user_id == -1; else deta1"></div>
              <ng-template #deta1>
                <a style="color: green; cursor: pointer" (click)="viewto(dt)"
                  >View Details</a
                >
              </ng-template>
            </td>
          </tr>

          <div class="row" *ngIf="tranrecords?.length > 0">
              <div class="col-sm-8" style="margin-bottom: 0%;font-size: small;text-align: right;margin-top: 18px;font-weight:bold">
              Page: {{tranrecordsCurrentPage}}
              </div>
              <div  class="col-sm-4" style="margin-bottom: 0%;font-size: small;text-align:right;">
                  <mat-paginator  style="margin-top: 0%;width: 350px;"
                              (page)="handleTranrecords($event)"
                              [length]="length_tranrecords"
                              [pageSize]="pageSize_tranrecords"
                              [showFirstLastButtons]="showFirstLastButtons"
                              [pageSizeOptions]="pageSizeOptions"
                              [pageIndex]="pageIndextranrecords"
                              [hidePageSize]="true"
                              aria-label="Select page">                            
                  </mat-paginator>
              </div>
          </div>
        </table> -->
            </div>
            <!-- <div class="modal-footer"> -->
            <!-- <table style="width: 100%; text-align: center">
          <tr>
            <td>Employee Name: &nbsp;{{ name }}</td>
            <td>Designation: &nbsp;{{ this.designation }}</td>
            <td>Branch Name : &nbsp;{{ branch }}</td>
          </tr>
        </table> -->
          </div>
        </div>
      </div>
      <div class="modal-footer" >
        <button type="button" class="btn btn-outline-primary" style="border-radius: 40px" data-dismiss="modal"
              id="ecfap-view-0054">
              Back
            </button>
          </div>
    </div>
  </div>
  <!-- <div>
    <div
      class="modal fade"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLongTitle"
      aria-hidden="true"
      id="ecfap-view-0010"
    >
      <div class="modal-dialog modal-lg" style="width: 70%">
        <div class="modal-content">
          <div class="modal-header">
            <h3 >Attachments</h3>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              #closedbuttons
              aria-label="Close"
              id="ecfap-view-0055"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="table-responsive" style="width: 100%; margin-top: 1%">
              <div class="table-responsive">
                <lib-vs-cbox-summary
                  [SummaryDetails]="SummaryattachData"
                  [SummaryApiObj]="SummaryApiattachObjNew"
                ></lib-vs-cbox-summary>
              </div> -->
  <!-- <table
              class="table table-bordered"
              fixed-header
              style="width: 99%; margin-top: 10px"
            >
              <thead class="table_header" style="text-align: left">
                <tr>
                  <th style="text-align: center">S.No</th>
                  <th style="text-align: center">File Name</th>
                  <th style="text-align: center">View</th>
                  <th style="text-align: center">Download</th>
                </tr>
              </thead>
              <tbody *ngFor="let dtl of invheaderdata; index as i">
                <tr *ngFor="let attach of dtl.file_data; index as i">
                  <td style="text-align: center">{{ i + 1 }}</td>
                  <td>{{ attach.file_name }}</td>
                  <td style="text-align: center">
                    <i
                      class="fa fa-external-link"
                      aria-hidden="true"
                      style="color: blue; font-size: 24px; margin-left: 20px"
                      (click)="data1(attach)"
                    ></i>
                  </td>
                  <td style="text-align: center">
                    <i class="material-icons" (click)="getfiles(attach)">
                      get_app
                    </i>
                  </td>
                </tr>
              </tbody>
            </table> -->
  <!-- </div> -->
  <!-- <tr> -->
  <!-- <br />
            <div style="margin-left: 700px"> -->
  <!-- <button
              type="button"
              class="btn btn-light"
              style="
                border-radius: 7px;
                margin-left: 300px;
                border-color: black;
                margin-bottom: 20px;
                background-color: white;
              "
              (click)="fileback()"
              id="ecfap-view-0056"
            >
              Back
            </button> -->
  <!-- <button
                type="button"
                class="btn btn-outline-primary"
                style="border-radius: 40px"
                data-dismiss="modal"
                aria-label="Close"
                (click)="fileback()"
                id="ecfap-view-0056"
              >
                Back
              </button>
            </div> -->
  <!-- </tr> -->
  <!-- </div>
        </div>
      </div>
    </div>
  </div> -->
</div>
<div>
    <div
      class="modal fade"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLongTitle"
      aria-hidden="true"
      id="ecfap-view-0010"
    >
      <div class="modal-dialog modal-lg" style="width: 70%">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Attachments</h3>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              #closedbuttons
              aria-label="Close"
              id="ecfap-view-0055"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="table-responsive" style="width: 100%; margin-top: 1%">
              <div class="table-responsive">
                <lib-vs-cbox-summary
                  [SummaryDetails]="SummaryattachData"
                  [SummaryApiObj]="SummaryApiattachObjNew"
                ></lib-vs-cbox-summary>
              </div>
              <!-- <table
              class="table table-bordered"
              fixed-header
              style="width: 99%; margin-top: 10px"
            >
              <thead class="table_header" style="text-align: left">
                <tr>
                  <th style="text-align: center">S.No</th>
                  <th style="text-align: center">File Name</th>
                  <th style="text-align: center">View</th>
                  <th style="text-align: center">Download</th>
                </tr>
              </thead>
              <tbody *ngFor="let dtl of invheaderdata; index as i">
                <tr *ngFor="let attach of dtl.file_data; index as i">
                  <td style="text-align: center">{{ i + 1 }}</td>
                  <td>{{ attach.file_name }}</td>
                  <td style="text-align: center">
                    <i
                      class="fa fa-external-link"
                      aria-hidden="true"
                      style="color: blue; font-size: 24px; margin-left: 20px"
                      (click)="data1(attach)"
                    ></i>
                  </td>
                  <td style="text-align: center">
                    <i class="material-icons" (click)="getfiles(attach)">
                      get_app
                    </i>
                  </td>
                </tr>
              </tbody>
            </table> -->
            </div>
            <!-- <tr> -->
            <br />
            <div style="margin-left: 700px">
              <!-- <button
              type="button"
              class="btn btn-light"
              style="
                border-radius: 7px;
                margin-left: 300px;
                border-color: black;
                margin-bottom: 20px;
                background-color: white;
              "
              (click)="fileback()"
              id="ecfap-view-0056"
            >
              Back
            </button> -->
              <button
                type="button"
                class="btn btn-outline-primary"
                style="border-radius: 40px"
                data-dismiss="modal"
                aria-label="Close"
                (click)="fileback()"
                id="ecfap-view-0056"
              >
                Back
              </button>
            </div>
            <!-- </tr> -->
          </div>
        </div>
      </div>
    </div>
  </div>
        