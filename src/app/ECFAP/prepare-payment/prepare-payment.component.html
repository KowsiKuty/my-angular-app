<div class="container" style="max-width: 100%;">
    <!-- <div  *ngIf="showBatchSummary">
    <div class="col-md-12">
        <h2 style="margin-left: 8px;font-family:'Times New Roman';font-weight:bold;">Batch Summary </h2>
        <form [formGroup]="batchSearchForm">
            <div class="row col-md-12">
                <div class="col-md-2">
                    <mat-form-field style="width: 11rem;margin-left: 8px; ">
                        <mat-label>Batch No</mat-label>
                        <input matInput formControlName="batchno" autocomplete="off" id="preparepayment-0004">
                    </mat-form-field>
                </div>
                <div class="col-md-2" style="margin-left: 14px;">
                    <mat-form-field style="width: 9rem;">
                        <mat-label>From Date</mat-label>
                        <input matInput [matDatepicker]="picker" formControlName="fromdate" autocomplete="off" id="preparepayment-0005">
                        <mat-datepicker-toggle matSuffix [for]="picker">
                            <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                        </mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>
                </div>
                <div class="col-md-2" style="margin-left: 14px;">
                    <mat-form-field style="width: 9rem; ">
                        <mat-label>To date</mat-label>
                        <input matInput [matDatepicker]="picker1" formControlName="todate" autocomplete="off" id="preparepayment-0006">
                        <mat-datepicker-toggle matSuffix [for]="picker1">
                            <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                        </mat-datepicker-toggle>
                        <mat-datepicker #picker1></mat-datepicker>
                    </mat-form-field>
                </div>
                <div class="col-md-2">
                    <mat-form-field style="width: 11rem;margin-left: 8px; ">
                        <mat-label>ECF Count</mat-label>
                        <input matInput formControlName="batchcount" autocomplete="off" id="preparepayment-0007">
                    </mat-form-field>
                </div>
                <div class="col-md-3">                
                        <button class="btn btn-outline-primary" type="submit"
                        style="border-radius:40px;margin-left: 50px;" color="primary"
                        (click)="batchSummarySearch()" id="preparepayment-0008"><i matTooltip="Search" class="fa fa-search"
                            aria-hidden="true"></i></button>
                        <button class="btn btn-outline-primary" type="button"
                        style="border-radius:40px;margin-left: 10px;"
                       color="primary" (click)="resetbatch()" id="preparepayment-0009">Reset</button>
                </div>
            </div>
        </form> 
    </div>   
    
    <div  style="margin-top: 2%;margin-left: 50px; width: 77%;">
        <table class="table table-bordered  padsize" style="text-align:center;" >	
            
            <thead>
                <tr class="table_header tableset " style="white-space: nowrap;text-align: center;margin-left: 3%;">
        
        
                    <th>S.No</th>
                    <th>Batch No</th>
                    <th>Batch Date</th>
                    <th>Batch Amount</th>
                    <th>ECF Count</th>
                    <th>Lock</th>
                    <th>View</th>
                    <th>Edit</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let lists of batchSummary; index as i" style="white-space: nowrap;text-align: center;">
                    <td> {{(batchpresentpage - 1)*pagesizebatch +i+1 }} </td>
                    <td>{{lists?.batchno}}</td>
                    <td>{{lists?.batch_date | date:'dd/MM/yyyy'}}</td>
                    <td>{{lists?.batchamount|currency:'INR'}}</td>
                    <td>{{lists?.batchcount}}</td>
                    <td><span class="material-icons">lock</span></td>
                    <td>  
                        <span matTooltip="view" class=" fa fa-eye create "
                        style="color: green;cursor: pointer;padding:10px"  (click)="batchView(lists)"></span>
                    </td>
                    <td>
                        <button mat-icon-button matTooltip=" Edit" class="iconbutton" color="primary" id="preparepayment-0010">
                            <mat-icon style="color: grey;" aria-label="Edit" (click)="batchEdit(lists)">edit</mat-icon>
                        </button>
                    </td>
                </tr>
            </tbody>
    </table>
    
    <div *ngIf="batchSummary ?.length == 0" style="margin-left: 42%;">
        <h3 >Sorry data not found!.. </h3>
    </div>
    <div class="row" *ngIf="isbatchsummarypage">
        <div  class="col-sm-3" style="margin-bottom: 5%;font-size: small;text-align:left;right:-225px;">
            <p style="color:black;font-size: 18px;font-weight: 500;margin-left: -220px;">
                Total Count:{{getbatchtotalcount}}
            </p> 
        </div>
        <div  class="col-sm-9" style="margin-bottom: 5%;font-size: small;text-align:right;left:105px">
            <button mat-icon-button [disabled]="has_batchpageprevious === false" color="primary" (click)="previousClickbatch()" id="preparepayment-0011">
                <mat-icon>arrow_back</mat-icon>
            </button> {{batchpresentpage}}
            <button mat-icon-button [disabled]="has_batchpagenext === false" color="primary" (click)="nextClickbatch()" id="preparepayment-0012">
                <mat-icon>arrow_forward</mat-icon>
            </button>
        </div>
        </div>
    </div>
    </div> -->

    <div *ngIf="showBatchView"> 
        <p style="color:black;font-size: 22px;font-weight: 500;margin-left: 3%;margin-top: 20px;">
        Batch View
    </p>
    <div>
        <form [formGroup]="batchForm" style="margin-left:4%;" >
            <table style="margin-bottom: 2%;">
            <tr>
            <td>
                <mat-form-field style="width:200px;">
                    <input matInput placeholder="Batch No" formControlName="batchno" 
                        autocomplete="off" readonly id="preparepayment-0013">
                </mat-form-field>
            </td>

            <td>
                <mat-form-field style="width:200px;margin-left: 50px;">
                    <input matInput placeholder="Batch Date" formControlName="batchdate"
                        autocomplete="off" readonly id="preparepayment-0014">
                </mat-form-field>
            </td>
            <td>
                <mat-form-field style="width:200px;margin-left: 50px;">
                    <input matInput placeholder="Batch Amount" formControlName="batchamt"
                        autocomplete="off" readonly id="preparepayment-0015">
                </mat-form-field>
            </td>
            </tr>
            </table>
        </form>
    </div>
    <div  style="margin-top: 2%;margin-left: 50px; width: 85%;">
        <table class="table table-bordered table-responsive padsize" style="text-align:center;" >	
            
            <thead>
                <tr class="table_header tableset " style="white-space: nowrap;text-align: center;margin-left: 3%;">
    
                    <th>S.No</th>
                    <th>CR No</th>
                    <th>ECF Type</th>
                    <th>Commodity Name</th>
                    <th>ECF Date</th>
                    <th>ECF Amount</th>
                    <th>ECF Status</th>
                    <th>Payment For</th>
                    <th>View</th>
                    <th>Download</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor ="let ab of batchviewlist;index as i">
                    <td>{{(bvpresentpage - 1)*pagesizebview +i+1 }}</td>
                    <td>{{(ab?.crno !== null)?(ab?.crno):"-"}}</td>
                    <td>{{ab?.aptype}}</td>
                    <td>{{ab?.commodity_id?.name}}</td>
                    <td>{{ (ab?.apdate !== "None") ? (ab?.apdate |date:'dd-MMM-yyyy ') : "-" }}</td>
                    <td style="text-align: right;">{{ab?.apamount|currency:'INR'}}</td>
                    <td>{{ab?.apstatus}}</td>
                    <td>{{ab?.payto}}</td>
                    <td>
                        
                        <span matTooltip="view" matTooltipClass="custom-tooltipnew" class=" fa fa-eye create "
                            style="color: green;cursor: pointer;padding:10px" (click)="headerview(ab)"></span>
                   
                </td>
                <td>
                   
                        <button type="button" class="btn btn-outline-success"
                            style="border-radius: 40px;margin-left: 3%;"  id="preparepayment-0016">
                            <span class="fa fa-download" matTooltip="Download CoverNote" matTooltipClass="custom-tooltipnew">
                            </span>
                        </button>
                    </td>
    
                </tr>
            </tbody>
        </table>
        <div *ngIf="batchviewlist ?.length == 0" style="margin-left: 42%;">
            <h3 >Sorry data not found!.. </h3>
        </div>
        <div class="row" *ngIf="isbatchviewpage">
          <div  class="col-sm-12" style="margin-bottom: 5%;font-size: small;text-align:right;">
                <button mat-icon-button [disabled]="has_bviewpageprevious === false" color="primary" (click)="previousClickbview()" id="preparepayment-0017">
                    <mat-icon>arrow_back</mat-icon>
                </button> {{bvpresentpage}}
                <button mat-icon-button [disabled]="has_bviewpagenext === false" color="primary" (click)="nextClickbview()" id="preparepayment-0018">
                    <mat-icon>arrow_forward</mat-icon>
                </button>
            </div>
        </div>
    </div>    
    </div> 


    <mat-card style="margin-top: 13px;margin-left: 20px;margin-right: 20px;margin-bottom: 20px;" *ngIf="showheaderform">
        <div style="margin-left: 10px;margin-top: 1%; width: 100%;" >

            <h2 style="font-weight:bold;">ECF Header</h2>
           
            <div>
                <form [formGroup]="ecfheaderviewForm" style="margin-left:2%;" >
                    <table style="margin-bottom: 2%;">
                        <div>
                            <tr>
                                <td>


                                    <mat-form-field style="width:200px;">
                                        <input matInput placeholder="ECF Type" formControlName="ecftype" 
                                            autocomplete="off" readonly id="preparepayment-0019">
                                    </mat-form-field>
                                </td>

                                <td *ngIf="this.ecftypeid == 3 || this.ecftypeid == 13">
                                    <mat-form-field style="width:200px;margin-left: 50px;">
                                        <input matInput placeholder="Payment For" formControlName="payto"
                                            autocomplete="off" readonly id="preparepayment-0020">
                                    </mat-form-field>
                                </td>
                                <td *ngIf="this.ecftypeid == 4">
                                    <mat-form-field style="width:200px;margin-left: 50px;">
                                        <input matInput placeholder="Payment For" formControlName="ppx"
                                            autocomplete="off" readonly id="preparepayment-0021">
                                    </mat-form-field>
                                </td>
                                <td>



                                    <mat-form-field style="width:200px;margin-left: 50px;">
                                        <input matInput placeholder="Supplier Type" formControlName="supplier_type"
                                            autocomplete="off" readonly id="preparepayment-0022">
                                    </mat-form-field>


                                </td>
                                <td>


                                    <mat-form-field style="width:200px;margin-left: 50px;">
                                        <input matInput placeholder="Commodity Name" formControlName="commodity_id"
                                            autocomplete="off" readonly id="preparepayment-0023">
                                    </mat-form-field>
                                </td>
                                <td *ngIf="this.ecftypeid != 3 && this.ecftypeid != 4 &&  this.ecftypeid != 13">
                                    <mat-form-field
                                        style="width:300px;margin-left: 50px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="Raiser Branch" formControlName="branch"
                                            autocomplete="off" readonly id="preparepayment-0024">
                                    </mat-form-field>
                                </td>
                            </tr>
                           
                            <tr>
                                
                                <!-- <td>
                                    <mat-form-field
                                        style="width:200px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="Client Name" formControlName="client_code"
                                            autocomplete="off" readonly id="preparepayment-0025"> 
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field
                                        style="width:200px;margin-left: 50px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="RM Name" formControlName="rmcode"
                                            autocomplete="off" readonly id="preparepayment-0026">
                                    </mat-form-field>
                                </td> -->
                                <td>
                                    <mat-form-field
                                        style="width: 200px;font-family: 'Times New Roman', Times, serif;">
                                        <mat-label>ECF Date</mat-label>
                                        <input matInput readonly  placeholder="ECF Date"
                                            formControlName="ecfdate"   id="preparepayment-0027">
                                       
                                    </mat-form-field>
                                </td>
                                <td *ngIf="this.ecftypeid != 7">
                                    <mat-form-field
                                        style="width: 200px;margin-left:50px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="ECF Amount" formControlName="ecfamount"
                                            autocomplete="off" readonly id="preparepayment-0028">
                                    </mat-form-field>
                                </td>
                                <td *ngIf="this.ecftypeid == 7">
                                    <mat-form-field
                                        style="width: 200px;margin-left:50px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="CRN Amount" formControlName="ecfamount"
                                            autocomplete="off" readonly id="preparepayment-0029">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field
                                        style="width: 200px;margin-left:50px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="Purpose" formControlName="remark"
                                            autocomplete="off" readonly id="preparepayment-0030">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field
                                    style="width: 200px;margin-left:50px;font-family: 'Times New Roman', Times, serif;">
                                    <input matInput placeholder="Is Original Invoice" formControlName="is_originalinvoice"
                                        autocomplete="off" readonly id="preparepayment-0031">
                                </mat-form-field>
                                </td>
                                <td *ngIf="this.ecftypeid == 3 || this.ecftypeid == 4 || this.ecftypeid == 13">
                                    <mat-form-field
                                    style="width:200px;margin-left: 50px;font-family: 'Times New Roman', Times, serif;">
                                    <input matInput placeholder="Raiser Branch" formControlName="branch"
                                        autocomplete="off" readonly id="preparepayment-0032">
                                </mat-form-field>
                                </td>
                            </tr>

                            <tr>
                               
                               
                               
                                <td style="white-space:nowrap;" *ngIf="this.ecftypeid == 3 && this.checkhr == true">

                                    <mat-radio-group formControlName="is_raisedby_self" readonly class="inputformatradiobutton">
                                        <mat-label >Behalf of Self</mat-label>
                                        <mat-radio-button *ngFor="let n of behalfyesorno" [value]="n.value"
                                          style="margin-left:10px"  [disabled]="showgst">
                                            {{n.display}}
                                        </mat-radio-button>
                                    </mat-radio-group>
    
    
                                </td>
                                
                                <td *ngIf="this.ecftypeid == 3 && ecfheaderviewForm.value.is_raisedby_self == false">
                                    <mat-form-field
                                        style="width:200px;margin-left: 50px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="Raised For" formControlName="raised_for"
                                            autocomplete="off" readonly id="preparepayment-0033">
                                    </mat-form-field>
                                </td>
                                <td *ngIf="this.ecftypeid == 3 && ecfheaderviewForm.value.is_raisedby_self == false">
                                    <mat-form-field
                                        style="width:200px;font-family: 'Times New Roman', Times, serif;margin-left: 50px;">
                                        <input matInput placeholder="Raised By" formControlName="raised_by"
                                            autocomplete="off" readonly id="preparepayment-0034">
                                    </mat-form-field>
                                </td>
    
                                </tr>
                                <tr *ngIf="this.ecfheaderviewForm?.value?.location != '' && this.ecfheaderviewForm?.value?.location != null">
                                  <td>
                                      <mat-form-field
                                        style="width:200px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="Location" formControlName="location"
                                            autocomplete="off" readonly id="preparepayment-0035">
                                       </mat-form-field> 
                                </td>
                            </tr>
                                <tr>
                                <td>
                                    
                                    
                                        <h3   data-toggle="modal"
                                        data-target=".bd-example-modal-xl" style="cursor: pointer;color:blue;font-family: 'Montserrat';" class="btn btn-link" 
                                        matTooltip="View Notes" matTooltipClass="custom-tooltipnew">View Notes</h3>
                                    
                                </td>
                                <!-- <td>
                                    <h3  (click)="gettrandata()" data-toggle="modal"
                                     data-target="#showtrandetails" style="cursor: pointer;color:blue;font-family: 'Montserrat';" class="btn btn-link" matTooltip="Transaction View">View Transaction Details</h3>
                                </td> -->

                                     <!-- -------notepad------ -->

                                     <div class="modal fade bd-example-modal-xl" tabindex="-1" role="dialog"
                                     aria-labelledby="myExtraLargeModalLabel" aria-hidden="true">
                                     <div class="modal-dialog modal-xl">
                                         <div class="modal-content">
                                             <div class="modal-header">
                                                 <h2 class="modal-title" id="preparepayment-0001">
                                                     Note Pad
                                                 </h2>
                                             </div>
                                             <br>
                                             <div style="margin-left: 50px;width:90%;height: 70%;">
                                                 <div>

                                                     <div [ngxSummernote]="config"
                                                         [ngxSummernoteDisabled]="editorDisabled" (blur)="onBlur()"
                                                         (mediaDelete)="onDelete($event)"
                                                         (summernoteInit)="summernoteInit($event)"
                                                         formControlName="notename">
                                                     </div>

                                                 </div>
                                             </div>
                                             <br>
                                             <div class="modal-footer">
                                                 <!-- <button type="button" style="border-radius: 40px;margin-left: 10px;"
                                                     class="btn btn-outline-primary"
                                                     data-dismiss="modal" id="preparepayment-0036">Close</button> -->

                                                 <button type="button" style="border-radius:10px;margin-left: 10px; border-color: black; 
                                                     background-color: white;" class="btn btn-light"
                                                     data-dismiss="modal" id="preparepayment-0037">
                                                     Close</button>

                                             </div>
                                         </div>
                                     </div>
                                 </div>

                                <!-- <td>
                            <span class="material-icons" type="button" data-toggle="modal"
                                style="margin-left: 50px;" data-target=".bd-example-modal-xl"
                                formControlName="notename">description</span>Add Note
                        </td> -->
                            </tr>

                        </div>
                    </table>
                </form>
            </div>

            
            <h2 *ngIf="this.ecftypeid != 7" style="margin-left: 1px;font-weight:bold;">Invoice Header</h2>
            <h2 *ngIf="this.ecftypeid == 7" style="margin-left: 1px;font-weight:bold;">Credit Note Header</h2>
            <div>
                <form [formGroup]="InvoiceHeaderForm">
                <table>
                    <tr>
                        <mat-radio-group formControlName="invoicegst" readonly class="inputformatradiobutton">
                            <mat-label > GST Applicable</mat-label>
                            <mat-radio-button *ngFor="let n of yesorno" [value]="n.value"
                                style="margin-left: 10px;" [disabled]="showgst">
                                {{n.display}}
                            </mat-radio-button>
                        </mat-radio-group>
                    </tr>
                </table>
                </form>
            </div>
            <div>

                <div class="table-responsive" style="width:100%;margin-top: 1%;">
                    <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                        <thead class="table_header" style="text-align: left;">
                            <tr style="white-space: nowrap;">

                                <th>S.No</th>
                                <!-- <th  style="width:20%;">Invoice CR.No</th> -->
                                <th *ngIf="this.ecftypeid == 2 || this.ppxid == 'S' || this.ecftypeid == 14">Supplier Name</th>
                                <th *ngIf="this.ecftypeid == 2 || this.ppxid == 'S' || this.ecftypeid == 14">Supplier GST No</th>
                                <th *ngIf="this.ecftypeid == 2 || this.ppxid == 'S'  || this.ecftypeid == 14">Supplier State</th>
                                <th>Place Of Supply</th>
                                <th *ngIf="this.ppxid != 'E'">Invoice No</th>
                                <th *ngIf="this.ecftypeid == 7">Credit Ref No</th>
                                <th *ngIf="this.ppxid != 'E'">Invoice Date</th>
                                <th>Taxable Amount</th>
                                <th *ngIf="this.ecftypeid == 2 ">Tax Amount</th>
                                <!-- <th>Roundoff Amount</th>
                                <th>Other Adjustment</th> -->
                                <th>Total Amount</th>
                                <th>Invoice Status</th>
                                <th>Attached PDF</th>
                                  
                                <th>Select</th>
                                <th>Action</th>

                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let dtl of invheaderdata; index as i">
                                <!-- <td> {{(ecfpresentpage - 1)*pagesizeecf +i+1 }} </td>  -->
                                <td>{{i+1}}</td>
                                <!-- <td  style="width:20%;">{{dtl?.inv_crno}}</td> -->
                                <td *ngIf="this.ecftypeid == 2 || this.ppxid == 'S' || this.ecftypeid == 14">{{dtl?.supplier_id?.name}}</td>
                                <td *ngIf="this.ecftypeid == 2 || this.ppxid == 'S' || this.ecftypeid == 14">{{dtl?.supplier_id?.gstno}}</td>
                                <td *ngIf="this.ecftypeid == 2 || this.ppxid == 'S'  || this.ecftypeid == 14">{{dtl?.supplierstate_id?.name}}
                                </td>
                                <td>{{dtl?.place_of_supply?.code}}-{{dtl?.place_of_supply?.name}}</td>
                                <td *ngIf="this.ppxid != 'E'">{{dtl?.invoiceno}}</td>
                                <td *ngIf="this.ecftypeid == 7">{{dtl?.credit_refno}}</td>
                                <td *ngIf="this.ppxid != 'E'">{{dtl?.invoicedate| date:'dd-MMM-yyyy'}}</td>
                                <td style="text-align: right;">{{dtl?.invoiceamount| currency:'INR'}}</td>
                                <td  style="text-align: right;" *ngIf="this.ecftypeid == 2 ">{{dtl?.taxamount| currency:'INR'}}</td>
                                <!-- <td>{{dtl.roundoffamt}}</td>
                                <td>{{dtl.otheramount}}</td> -->
                                <td style="text-align: right;">{{dtl?.totalamount| currency:'INR'}}</td>
                                <td>{{ (dtl?.apinvoiceheaderstatus_id !== null) ? (dtl?.apinvoiceheaderstatus) : (dtl?.invoice_status)}}</td>
                                <td>
                            <tr *ngFor="let file of dtl.file_data; index as j">
                                <td>
                                    {{j+1}}
                                </td>
                                <td>
                                    <a (click)="data(file)" class="btn btn-link" style="cursor: pointer;color:blue;"
                                        matTooltip="View File" matTooltipClass="custom-tooltipnew"  data-target="#my-modal" data-toggle="modal">{{ file.file_name}}</a>
                                </td>
                                <td>
                                    <i class="material-icons" (click)="getfiles(file)">
                                        get_app
                                    </i>
                                </td>
                            </tr>
                            </td>

                                <!-- <td style="text-align: center;">
                                    <span matTooltip="view File" class=" fa fa-file-image-o "
                                        style="color: hsl(0, 0%, 0%);cursor: pointer;" data-toggle="modal"
                                        (click)="getfiledetails()" data-target="#showattachmentpopup"></span>

                                </td> -->
                                <td *ngIf=getpayment(i)>
                                    <section class="example-section">
                                        <mat-checkbox class="example-margin" (change)="hdrselect($event,i)"></mat-checkbox>
                                    </section>
                                </td>
                                <td *ngIf=!getpayment(i)>

                                </td>
                                <td style="text-align: center;">
                                    <span matTooltip="view" matTooltipClass="custom-tooltipnew" class=" fa fa-eye create "
                                        style="color: black;cursor: pointer;"  (click)="Movetodetail(dtl)"></span>
                                       
                                </td>
                            </tr>
                            <tr *ngIf = "this.ecftypeid == 2 ">
                                <td class="totaldisplay" colspan="9"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                            <tr *ngIf = "this.ppxid == 'S'">
                                <td class="totaldisplay" colspan="8"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>
    
                            </tr>
                            <tr *ngIf = "this.ecftypeid == 4 && this.ppxid == 'E'" >
                                <td class="totaldisplay" colspan="3"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                            <tr *ngIf = "this.ecftypeid == 3" >
                                <td class="totaldisplay" colspan="5"  style="text-align: end;">
                                    Net Amount:</td>
                                    <td style="text-align: right;">{{headertotalamt| currency:'INR'}}</td>

                            </tr>
                        </tbody>
                    </table>
                    <div *ngIf="invheaderdata ?.length == 0" style="margin-left: 42%;">
                        <h3>Sorry data not found!.. </h3>
                    </div>
                   
                </div><br>

                <div style="margin-bottom:3%" *ngIf="apstatusid != 14">
                    <mat-form-field style="width: 20rem;margin-left: 400px; ">
                        <mat-label>Remarks</mat-label>
                        <input matInput [formControl]="rem" autocomplete="off" required id="preparepayment-0038">
                    </mat-form-field>
                    <button type="button" class="btn btn-outline-primary" style="border-radius:40px;margin-left:10px;
                      margin-bottom: 5px; 
                     background-color: white;" (click)="preparePay()" [disabled]="!hdrApproveEnabled" id="preparepayment-0039">Prepare Payment</button> 
                    <button type="button" class="btn btn-outline-primary"style="border-radius:40px;margin-left:10px;
                    margin-bottom: 5px;
                    background-color: white;" (click)="back()" id="preparepayment-0040">Back</button>
                </div>
                <div *ngIf="apstatusid == 14">
                    <button type="button" class="btn btn-outline-primary" style="border-radius:10px;margin-left:10px;
                    margin-bottom: 50px;
                    background-color: white;" (click)="back()" id="preparepayment-0041">Back</button>
                </div>


            </div>  
        </div>
    </mat-card>


</div>
    
<div *ngIf="showimageHeaderAPI" id="preparepayment-0002" class="modal fade" aria-labelledby="my-modalLabel" aria-hidden="true"
tabindex="-1" role="dialog">
<div class="modal-dialog modal-xl" data-dismiss="modal" style="width: 60%;height: 80%;">
    <div class="modal-content">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="preparepayment-0042">
            <span aria-hidden="true">&times;</span>
        </button>
        <div class="modal-body">
            <img src="{{jpgUrlsAPI}}" class="img-responsive" style="width: 100%;">

        </div>
    </div>
</div>
</div>

<div *ngIf="showimagepdf" id="preparepayment-0002" class="modal fade" aria-labelledby="my-modalLabel" aria-hidden="true"
tabindex="-1" role="dialog">
<div class="modal-dialog modal-xl">
    <div class="modal-content">
        <div class="modal-header" style="background: rgba(23, 204, 23, 0.288);">
            <h2 class="modal-title">Attachments</h2>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="preparepayment-0043">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <pdf-viewer [src]="pdfurl" [original-size]="false" [render-text]='false' [show-borders]="true"
            [fit-to-page]="true" [show-all]="true" style="display: block; height: 600px;" [fit-to-page]="true">
        </pdf-viewer>
    </div>
</div>

</div>

