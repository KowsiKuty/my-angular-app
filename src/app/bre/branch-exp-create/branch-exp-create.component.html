<div *ngIf="BranchExpCreateForm">
<mat-card style="margin-top: 13px;margin-left: 20px;margin-right: 20px;margin-bottom: 20px;">
<h2 style="margin-left: 20px;">Branch Expense Create</h2>
<div style="margin-top: 10px;margin-bottom: 5px;">
    <form [formGroup]="expencecreate">
        <table>
            <div>
            <tr>
            <td>
                <mat-form-field
                style="margin-left: 20px;">
                <mat-label>Expense Type<label style="color:red">&nbsp;*</label></mat-label>
                <input #exptypeInput placeholder="Select Expense Type" matInput style="width:150px"
                    formControlName="expense_type_id" [matAutocomplete]="exptype"  [readonly]="showCCBS" id="branch-exp-create-0008">
                <mat-autocomplete [panelWidth]="200" #exptype="matAutocomplete"
                    [displayWith]="displayFnexptype">
                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                    <ng-container *ngIf="!isLoading">
                        <mat-option *ngFor="let exp of expenseTypeList" [value]="exp" (click)="getExpColumns(exp)" 
                        matTooltip="{{exp.expense_name}}" matTooltipClass="custom-tooltipnew">
                            {{exp.expense_name}}
                        </mat-option>
                    </ng-container>
                </mat-autocomplete>
            </mat-form-field>
        </td>
        <td>
                <mat-form-field style="margin-left: 25px;">
                <mat-label>Select Supplier<label style="color:red">&nbsp;*</label></mat-label>
                <input matInput placeholder="Supplier" formControlName="supplier" 
                [matTooltip]="expencecreate.value.supplier" matTooltipClass="custom-tooltipnew"
                                                    readonly autocomplete="off"  style="width:175px" id="branch-exp-create-0009">

                                            </mat-form-field>
                                            <button type="button" class="btn btn-outline-primary"
                                            matTooltip="Select Supplier" matTooltipClass="custom-tooltipnew" data-toggle="modal" 
                                            data-target="#branch-exp-create-0005"  [disabled]="showCCBS"
                                            style="border-radius:40px;;margin-left: 5px;" id="branch-exp-create-0010"><span
                                                class="fa fa-arrow-up"></span></button>
                                            </td>
                                           
                                            <td>
                <mat-checkbox  formControlName="is_gst" value="checkedgst" (change)="changeValuegst(checkedgst)" [disabled]="showCCBS"
                 style="margin-top: 2px;width: 20px;height:20px;margin-left: 15px;" >Gst Applicable</mat-checkbox>
                                            </td> 
                                            <td  *ngIf="expencecreate.value.is_gst == true">
                                                <mat-form-field
                                                    style="margin-left: 25px;">
        
                                                    <mat-label>HSN Code<label style="color:red">&nbsp;*</label></mat-label>
                                                    <input #hsnInput placeholder="HSN" matInput formControlName="hsn" [readonly]="!checkedgst || showCCBS"
                                                        [matAutocomplete]="hsntype" id="branch-exp-create-0011">
                                                    <mat-autocomplete [panelWidth]="200" #hsntype="matAutocomplete" [displayWith]="displayFnhsn"
                                                        (opened)="hsnScroll()" >
                                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                                        </mat-option>
                                                        <ng-container *ngIf="!isLoading">
                                                            <mat-option *ngFor="let hsn of hsnList" [value]="hsn" (click)="chkFormValid()">
                                                                {{hsn.code}}
                                                            </mat-option>
                                                        </ng-container>
                                                    </mat-autocomplete>
                                                </mat-form-field>
                                            </td> <td  *ngIf="expencecreate.value.is_gst == false">
                                                <mat-form-field
                                                    style="margin-left: 25px;">
        
                                                    <input #hsnInput placeholder="HSN" matInput formControlName="hsn" [readonly]="!checkedgst || showCCBS"
                                                        [matAutocomplete]="hsntype" id="branch-exp-create-0012">
                                                    <mat-autocomplete [panelWidth]="200" #hsntype="matAutocomplete" [displayWith]="displayFnhsn"
                                                        (opened)="hsnScroll()" >
                                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                                        </mat-option>
                                                        <ng-container *ngIf="!isLoading">
                                                            <mat-option *ngFor="let hsn of hsnList" [value]="hsn" (click)="chkFormValid()">
                                                                {{hsn.code}}
                                                            </mat-option>
                                                        </ng-container>
                                                    </mat-autocomplete>
                                                </mat-form-field>
                                            </td>
                                            <td>
                                                <mat-form-field style="margin-left: 25px;"  >
                                                    <mat-label>Expense Amount<label style="color:red">&nbsp;*</label></mat-label>
                                                    <input matInput (keypress)="numberOnly($event)"
                                                    type="text" (input)="onTextChange($event)" autocomplete="off" formControlName="amount" placeholder="Enter Amount" style="width:150px;" [readonly]="showCCBS"
                                                   >
                                                </mat-form-field>
                                            </td>
                                            <td style="border:0px">
                                                <div style="margin-left: 25px;">
                                                <input #fileInput id="branch-exp-create-0001" type="file" multiple style="width: 108px;" hidden (change)="uploaddata($event);chkFormValid();" [disabled]="showCCBS">
                                
                                                <i (click)="fileInput.click()"  class="fa fa-cloud-upload" matTooltip="Upload file" matTooltipClass="custom-tooltipnew" aria-hidden="true" style="font-size: 28px;color: blue;" ></i>   
                                                <label style="color:red">&nbsp;*</label>
                                                <span matTooltip="view" matTooltipClass="custom-tooltipnew" class=" fa fa-eye create " *ngIf="filearr?.length > 0 "
                                               data-target="#branch-exp-create-0002" data-toggle="modal"
                                               style="cursor: pointer;color:blue;margin-left: 30px;"></span>
                                            </div>
                                          </td>
                                        </tr>
                                        <tr >
          
            <td>
                <mat-form-field style="margin-left: 20px;">
                    <mat-label>Branch<label style="color:red">&nbsp;*</label></mat-label>
                    <input type="text" matInput autocomplete="off" #branchidInput [matAutocomplete]="branchref" formControlName="branch_id" 
                    [matTooltip]="expencecreate.value.branch_id" matTooltipClass="custom-tooltipnew"
                    style="width: 250px;" (keypress)="kyenbdata($event)"  [readonly]="showCCBS" id="branch-exp-create-0014" />
                    <mat-autocomplete [panelWidth]="200" #branchref="matAutocomplete" [displayWith]="branchintreface" (opened)="autocompletebranchname()">
                        <mat-option *ngIf="isLoading" >Loading..</mat-option>
                        <ng-container *ngIf="!isLoading">
                            <mat-option  title="{{d.code+' - '+d.name}}" *ngFor="let d of branchList" [value]="d" (click)="chkFormValid()"
                            matTooltip="{{d.code+' - '+d.name}}" matTooltipClass="custom-tooltipnew">{{d.code+' - '+d.name}}</mat-option>
                        </ng-container>
                    </mat-autocomplete>
                </mat-form-field>   
            </td>
            <td>
                <mat-form-field
                                    style="margin-left: 25px;">
                                    <mat-label>Commodity Type<label style="color:red">&nbsp;*</label></mat-label>
                                    <input #commodityInput placeholder="Select Commodity Type" matInput  [readonly]="showCCBS"
                                        formControlName="commodity_id" [matAutocomplete]="commoditytype"  id="branch-exp-create-0015">
                                    <mat-autocomplete [panelWidth]="200" #commoditytype="matAutocomplete"
                                        [displayWith]="displayFncommodity">
                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                        <ng-container *ngIf="!isLoading">
                                            <mat-option *ngFor="let commodity of commodityList" [value]="commodity" (click)="chkFormValid()">
                                                {{commodity.text}}
                                            </mat-option>
                                        </ng-container>
                                    </mat-autocomplete>

                                </mat-form-field>
                            </td>
                            <td>
                <mat-checkbox  formControlName="is_tds" value="checkedtds" (change)="changeValuetds(checkedtds)" [disabled]="showCCBS || this.taxlist?.length ==0" 
                style="margin-top: 2p
                x;width: 20px;height:20px;;margin-left: 15px;">TDS Applicable</mat-checkbox>
                            </td>
                            <td *ngIf="expencecreate.value.is_tds == true">
                                <mat-form-field style="margin-left: 25px;">
                                    <mat-label>Tax Type<label style="color:red">&nbsp;*</label></mat-label>
                                    <input #taxtypeInput placeholder="Tax type" matInput [readonly]="!checkedtds || showCCBS"
                                        formControlName="suppliertaxtype" [matAutocomplete]="taxtype" id="branch-exp-create-0016">
                                    <mat-autocomplete  [panelWidth]="200" #taxtype="matAutocomplete"
                                        [displayWith]="displayFnFilter" (opened)="gettaxtypeScroll()">
                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                        <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let tax of taxlist" [value]="tax" (click)="gettaxdet(tax);chkFormValid()">
                                                    {{tax.subtax.name}} - {{tax.taxrate?.rate}}
                                                </mat-option>
                                        </ng-container>
                                    </mat-autocomplete>
                                </mat-form-field>
                                <div style="margin-left: 25px;width: 230px;font-family:Verdana, Geneva, Tahoma, sans-serif;font-size: small;
                                                    font-weight: bold;align-items: start;color: darkslateblue;" 
                                                    *ngIf="this.expencecreate.value.suppliertaxtype != undefined &&this.expencecreate.value.suppliertaxtype != null &&  this.expencecreate.value.suppliertaxtype != ''"> 
                                                     Section Type: {{taxname}} <br>
                                                     Tax Name : {{ratename}} <br>
                                                            Tax Rate : {{taxrate}}  <br>
                                                            Is Excempted : {{isexcempted=='Y' ? 'Yes' : 'No' }}  <br>
                                                           <div  *ngIf="isexcempted=='Y'"> Threshold : {{threshold}}  <br>
                                                            Excempt Rate : {{excemrate}}  <br>
                                                            </div>
                                    </div>
                            </td>
                            <td *ngIf="expencecreate.value.is_tds == false">
                                <mat-form-field style="margin-left: 25px;">
                                    <input #taxtypeInput placeholder="Tax type" matInput [readonly]="!checkedtds || showCCBS"
                                        formControlName="suppliertaxtype" [matAutocomplete]="taxtype" id="branch-exp-create-0017">
                                    <mat-autocomplete  [panelWidth]="200" #taxtype="matAutocomplete"
                                        [displayWith]="displayFnFilter" (opened)="gettaxtypeScroll()">
                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                        <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let tax of taxlist" [value]="tax" (click)="gettaxdet(tax);chkFormValid()">
                                                    {{tax.subtax.name}} - {{tax.taxrate?.rate}}
                                                </mat-option>
                                        </ng-container>
                                    </mat-autocomplete>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field style="width:200px;margin-left: 25px;">
                                    <mat-label>Paymode<label style="color:red"> &nbsp;*</label></mat-label>
                                    <mat-select placeholder="Paymode" formControlName="payment_detail"  [disabled]="showCCBS" id="branch-exp-create-0013">
                                        <mat-option *ngFor="let pp of PayDetailList" [value]="pp" 
                                        matTooltip="{{pp.paymode_id.name}}" matTooltipClass="custom-tooltipnew" (click)="getsuppaydet(pp);chkFormValid()">
                                            {{pp.paymode_id.name }} - {{pp.account_no}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <div  style="margin-left: 25px;width: 230px;margin-top: 0px;font-family:Verdana, Geneva, Tahoma, sans-serif;font-size: small;
                                font-weight: bold;align-items: start;color: darkslateblue;" 
                                *ngIf="this.expencecreate.value.payment_detail != undefined &&this.expencecreate.value.payment_detail != null &&  this.expencecreate.value.payment_detail != ''"> 
                                        Acc No : {{accno}} <br>
                                        Bank Name : {{bankname}} <br>
                                        IFSC Code : {{ifsccode}}
                    </div>
                            </td>
                            
                        </tr>
            </div>
        </table>
    </form>
    <form [formGroup]="brexpcolumns">
        <tr *ngIf="brexpColdet1.length >0 ">
            <ng-container *ngFor="let exp of brexpColdet1; let i as index">
                <td  *ngIf="exp.column_type_id == '1' && i== 0" style="margin-left: 0px;">
                    <mat-form-field>
                        <mat-label>{{exp.column_name}}<label style="color:red">&nbsp;*</label></mat-label>
                        <input autocomplete="off" type="text" matInput [formControlName]=exp.column_name  style="width:150px"  (keyup)="chkFormValid()"  [readonly]="showCCBS" id="branch-exp-create-0018">
                    </mat-form-field>
                </td>
                <td  *ngIf="exp.column_type_id == '1' &&  (i!= 0)" style="margin-left: 0px;">  
                    <mat-form-field style="margin-left: 25px;">
                        <mat-label>{{exp.column_name}}<label style="color:red">&nbsp;*</label></mat-label>
                        <input autocomplete="off" type="text" matInput [formControlName]=exp.column_name  style="width:150px"  (keyup)="chkFormValid()" [readonly]="showCCBS" id="branch-exp-create-0019">
                    </mat-form-field>
                </td>
                <!-- <td  *ngIf="exp.column_type_id == '1' && i== 2">
                    <mat-form-field style="margin-left: 50px;">
                        <mat-label>{{exp.column_name}}</mat-label>
                        <input type="text" matInput [formControlName]=exp.column_name  style="width:150px"  (keyup)="chkFormValid()" [readonly]="showCCBS" id="branch-exp-create-0020">
                    </mat-form-field>
                </td> -->
    
                <td *ngIf="exp.column_type_id == '2' && i== 0" style="margin-left: 0px;">
                    <mat-form-field style ="width:180px">
                        <mat-label>{{exp.column_name}}<label style="color:red">&nbsp;*</label></mat-label>
                        <input matInput [matDatepicker]="picker" [formControlName]=exp.column_name autocomplete="off" style="width:150px" (dateChange)="chkFormValid()" readonly id="branch-exp-create-0021">
                        <mat-datepicker-toggle matSuffix [for]="picker">
                            <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                        </mat-datepicker-toggle>
                        <mat-datepicker #picker  [disabled]="showCCBS"></mat-datepicker>
                    </mat-form-field>
                </td>
                <td *ngIf="exp.column_type_id == '2' &&  (i!= 0)" style="margin-left: 0px;">
                    <mat-form-field style="margin-left: 25px;width: 180px;">
                        <mat-label>{{exp.column_name}}<label style="color:red">&nbsp;*</label></mat-label>
                        <input matInput [matDatepicker]="picker" [formControlName]=exp.column_name autocomplete="off" style="width:140px"  (dateChange)="chkFormValid()" readonly id="branch-exp-create-0022">
                        <mat-datepicker-toggle matSuffix [for]="picker">
                            <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                        </mat-datepicker-toggle>
                        <mat-datepicker #picker [disabled]="showCCBS"></mat-datepicker>
                    </mat-form-field>
                </td>
                <!-- <td *ngIf="exp.column_type_id == '2' && i== 2" style="margin-left: 0px;">
                    <mat-form-field style="margin-left: 50px;width: 180px;">
                        <mat-label>{{exp.column_name}}</mat-label>
                        <input matInput [matDatepicker]="picker" [formControlName]=exp.column_name autocomplete="off" style="width:140px"  (dateChange)="chkFormValid()" readonly id="branch-exp-create-0023">
                        <mat-datepicker-toggle matSuffix [for]="picker">
                            <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                        </mat-datepicker-toggle>
                        <mat-datepicker #picker [disabled]="showCCBS"></mat-datepicker>
                    </mat-form-field>
                </td> -->
            </ng-container>
            </tr>

            <tr *ngIf="brexpColdet2.length >0 ">
            <ng-container *ngFor="let exp of brexpColdet2; let i as index">
                <td  *ngIf="exp.column_type_id == '1' && i== 0" style="margin-left: 0px;">
                    <mat-form-field>
                        <mat-label>{{exp.column_name}}<label style="color:red">&nbsp;*</label></mat-label>
                        <input autocomplete="off" type="text" matInput [formControlName]=exp.column_name  style="width:150px"  (keyup)="chkFormValid()"  [readonly]="showCCBS" id="branch-exp-create-0024">
                    </mat-form-field>
                </td>
                <td  *ngIf="exp.column_type_id == '1' &&  (i!= 0)" style="margin-left: 0px;">
                    <mat-form-field style="margin-left: 25px;">
                        <mat-label>{{exp.column_name}}<label style="color:red">&nbsp;*</label></mat-label>
                        <input autocomplete="off" type="text" matInput [formControlName]=exp.column_name  style="width:150px"  (keyup)="chkFormValid()" [readonly]="showCCBS" id="branch-exp-create-0025">
                    </mat-form-field>
                </td>
                <!-- <td  *ngIf="exp.column_type_id == '1' && i== 2">
                    <mat-form-field style="margin-left: 50px;">
                        <mat-label>{{exp.column_name}}</mat-label>
                        <input type="text" matInput [formControlName]=exp.column_name  style="width:150px"  (keyup)="chkFormValid()" [readonly]="showCCBS" id="branch-exp-create-0026">
                    </mat-form-field>
                </td> -->
    
    
                <td *ngIf="exp.column_type_id == '2' && i== 0" style="margin-left: 0px;">
                    <mat-form-field style ="width:180px">
                        <mat-label>{{exp.column_name}}<label style="color:red">&nbsp;*</label></mat-label>
                        <input matInput [matDatepicker]="picker" [formControlName]=exp.column_name autocomplete="off" style="width:150px" (dateChange)="chkFormValid()" readonly id="branch-exp-create-0027">
                        <mat-datepicker-toggle matSuffix [for]="picker">
                            <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                        </mat-datepicker-toggle>
                        <mat-datepicker #picker  [disabled]="showCCBS"></mat-datepicker>
                    </mat-form-field>
                </td>
                <td *ngIf="exp.column_type_id == '2' &&  (i!= 0)" style="margin-left: 0px;">
                    <mat-form-field style="margin-left: 25px;width: 180px;">
                        <mat-label>{{exp.column_name}}<label style="color:red">&nbsp;*</label></mat-label>
                        <input matInput [matDatepicker]="picker" [formControlName]=exp.column_name autocomplete="off" style="width:140px"  (dateChange)="chkFormValid()" readonly id="branch-exp-create-0028">
                        <mat-datepicker-toggle matSuffix [for]="picker">
                            <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                        </mat-datepicker-toggle>
                        <mat-datepicker #picker [disabled]="showCCBS"></mat-datepicker>
                    </mat-form-field>
                </td>
                <!-- <td *ngIf="exp.column_type_id == '2' && i== 2" style="margin-left: 0px;">
                    <mat-form-field style="margin-left: 50px;width: 180px;">
                        <mat-label>{{exp.column_name}}</mat-label>
                        <input matInput [matDatepicker]="picker" [formControlName]=exp.column_name autocomplete="off" style="width:140px"  (dateChange)="chkFormValid()" readonly id="branch-exp-create-0029">
                        <mat-datepicker-toggle matSuffix [for]="picker">
                            <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                        </mat-datepicker-toggle>
                        <mat-datepicker #picker [disabled]="showCCBS"></mat-datepicker>
                    </mat-form-field>
                </td> -->
            </ng-container>
            </tr>
            <tr *ngIf="brexpColdet3.length >0 ">
            <ng-container *ngFor="let exp of brexpColdet3; let i as index">
                <td  *ngIf="exp.column_type_id == '1' && i== 0" style="margin-left: 0px;">
                    <mat-form-field>
                        <mat-label>{{exp.column_name}}<label style="color:red">&nbsp;*</label></mat-label>
                        <input autocomplete="off" type="text" matInput [formControlName]=exp.column_name  style="width:150px"  (keyup)="chkFormValid()"  [readonly]="showCCBS" id="branch-exp-create-0030">
                    </mat-form-field>
                </td>
                <td  *ngIf="exp.column_type_id == '1' &&  (i!= 0)" style="margin-left: 0px;">
                    <mat-form-field style="margin-left: 25px;">
                        <mat-label>{{exp.column_name}}<label style="color:red">&nbsp;*</label></mat-label>
                        <input autocomplete="off" type="text" matInput [formControlName]=exp.column_name  style="width:150px"  (keyup)="chkFormValid()" [readonly]="showCCBS" id="branch-exp-create-0031">
                    </mat-form-field>
                </td>
                <!-- <td  *ngIf="exp.column_type_id == '1' && i== 2">
                    <mat-form-field style="margin-left: 50px;">
                        <mat-label>{{exp.column_name}}</mat-label>
                        <input type="text" matInput [formControlName]=exp.column_name  style="width:150px"  (keyup)="chkFormValid()" [readonly]="showCCBS" id="branch-exp-create-0032">
                    </mat-form-field>
                </td>
     -->
    
                <td *ngIf="exp.column_type_id == '2' && i== 0" style="margin-left: 0px;">
                    <mat-form-field style ="width:180px">
                        <mat-label>{{exp.column_name}}<label style="color:red">&nbsp;*</label></mat-label>
                        <input matInput [matDatepicker]="picker" [formControlName]=exp.column_name autocomplete="off" style="width:150px" (dateChange)="chkFormValid()" readonly id="branch-exp-create-0033">
                        <mat-datepicker-toggle matSuffix [for]="picker">
                            <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                        </mat-datepicker-toggle>
                        <mat-datepicker #picker  [disabled]="showCCBS"></mat-datepicker>
                    </mat-form-field>
                </td>
                <td *ngIf="exp.column_type_id == '2' && (i!= 0)" style="margin-left: 0px;">
                    <mat-form-field style="margin-left: 25px;width: 180px;">
                        <mat-label>{{exp.column_name}}<label style="color:red">&nbsp;*</label></mat-label>
                        <input matInput [matDatepicker]="picker" [formControlName]=exp.column_name autocomplete="off" style="width:140px"  (dateChange)="chkFormValid()" readonly id="branch-exp-create-0034">
                        <mat-datepicker-toggle matSuffix [for]="picker">
                            <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                        </mat-datepicker-toggle>
                        <mat-datepicker #picker [disabled]="showCCBS"></mat-datepicker>
                    </mat-form-field>
                </td>
                <!-- <td *ngIf="exp.column_type_id == '2' && i== 2" style="margin-left: 0px;">
                    <mat-form-field style="margin-left: 50px;width: 180px;">
                        <mat-label>{{exp.column_name}}</mat-label>
                        <input matInput [matDatepicker]="picker" [formControlName]=exp.column_name autocomplete="off" style="width:140px"  (dateChange)="chkFormValid()" readonly id="branch-exp-create-0035">
                        <mat-datepicker-toggle matSuffix [for]="picker">
                            <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                        </mat-datepicker-toggle>
                        <mat-datepicker #picker [disabled]="showCCBS"></mat-datepicker>
                    </mat-form-field>
                </td> -->
            </ng-container>
            </tr>
        <tr>
            <td colspan="2" style="width: 400px;"></td>
            <td >
                <button type="button" class="btn btn-outline-primary" style="border-radius:50px;margin-left: 100px;" [disabled]="!brFormValid || showCCBS" (click)="showccbs()" id="branch-exp-create-0036">
                    <i class="fa fa-arrow-up" aria-hidden="true" matTooltip="Add BS-CC">ADD BS-CC</i>
                </button> 
            <!-- <button type="button" class="btn btn-outline-primary" style="border-radius:40px;margin-left: 10px;"  [disabled]="!ccbsFormValid" (click)="showPay()"
                data-toggle="modal" data-target="#paymentDetailsid" id="branch-exp-create-0037"><i class="fa fa-plus" aria-hidden="true">ADD</i>
            </button>  -->
            
            </td>
            <td></td>
        </tr>       
    </form>
</div>
<div *ngIf="showCCBS" style="margin-top: 5px;">
                
    <div class="col-md-12 row">    
        <div class="col-md-12">
            <br>
            <h2 style="margin-top: 5px;"> {{this.expensetype}} - Allocation BSCC
            <button type="button" class="btn btn-outline-success" matTooltip="Add Allocation BSCC details" matTooltipClass="custom-tooltipnew"
            style="border-radius:30px;margin-left:5px;" (click)="addAllocccbsSection()" id="branch-exp-create-0038">
            <span class="fa fa-plus"></span>
            </button> 
            </h2>                       
        </div>
       
    </div>  
    <div>
        <form [formGroup]="allocationBSCCForm">
            <div class="table-responsive" style="width: 93%;align-self: center;margin-left: 20px;">
                <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                    <thead class="table_header" style="text-align: center;">
                        <tr  class="table_header" fixed-header style="background: #a7e4ab;">
                            <th style="width: 80px;">S.No</th>
                            <th style="width: 200px;">Category</th>
                            <th style="width: 200px;">Sub Category</th>
                            <th style="width: 80px;">GLNo </th>
                            <th style="width: 200px;">BS </th>
                            <th style="width: 200px;">CC</th>
                            <th style="width: 110px;">Percentage</th>
                            <th style="width: 100px;">Action</th>

                        </tr>
                    </thead>
                    <ng-container formArrayName="ccbsdtl"
                        *ngFor="let section of getAllocccbsSections(allocationBSCCForm); let i = index">
                        <tr [formGroupName]="i">
                            <td>{{i+1}}</td>
                            <td>
                                <mat-form-field  style="width: 200px;"
                                    (click)="getcat('')">
                                    <mat-label>Category<label style="color:red">&nbsp;*</label></mat-label>
                                    <input #categoryInput placeholder="Category" matInput [readonly]="ccbsSubmit"
                                        formControlName="category_code" [matAutocomplete]="cattype" style="width: 160px;" id="branch-exp-create-0039">
                                        <button *ngIf="section.get('category_code')?.value" 
                                        mat-icon-button 
                                        matSuffix 
                                        aria-label="Clear"
                                        (click)="clearField(i, 'category_code')">
                                    <mat-icon  style="color:red">close</mat-icon>
                                    </button>
                                    <mat-autocomplete  [panelWidth]="200" #cattype="matAutocomplete"
                                        [displayWith]="displaycatFn" (opened)="categoryScroll()">
                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                        </mat-option>
                                        <ng-container *ngIf="!isLoading">
                                            <mat-option *ngFor="let categoryname of categoryNameData" matTooltip="{{categoryname.code}}" matTooltipClass="custom-tooltipnew"
                                                (click)="cidAlloc(categoryname, '',i)" [value]="categoryname">
                                                {{categoryname.code}}
                                            </mat-option>
                                        </ng-container>
                                    </mat-autocomplete>
                                </mat-form-field>
                                  
                            </td>
                            <td>
                                <mat-form-field  style="width: 200px;" (click)="getsubcat(section.get('category_code')?.value.id,'')">
                                    <mat-label>Sub Category<label style="color:red">&nbsp;*</label></mat-label>
                                    <input #subcategoryInput placeholder="Sub Category" matInput 
                                        formControlName="subcategory_code" [readonly]="ccbsSubmit"
                                        [matAutocomplete]="subcategorytype" style="width: 160px;" id="branch-exp-create-0040">
                                        <button *ngIf="section.get('subcategory_code')?.value" 
                                        mat-icon-button 
                                        matSuffix 
                                        aria-label="Clear"
                                        (click)="clearField(i, 'subcategory_code')">
                                    <mat-icon  style="color:red">close</mat-icon>
                                    </button>
                                    <mat-autocomplete  [panelWidth]="200" #subcategorytype="matAutocomplete"
                                        [displayWith]="displaysubcatFn">
                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                        </mat-option>
                                        <ng-container *ngIf="!isLoading">
                                            <mat-option *ngFor="let subcategoryname of subcategoryNameData"
                                                [value]="subcategoryname"  matTooltip="{{subcategoryname.code}}" matTooltipClass="custom-tooltipnew"
                                                (focusout)="getGLNumber(subcategoryname,i)">
                                                {{subcategoryname.code}}
                                            </mat-option>
                                        </ng-container>
                                </mat-autocomplete>
                                </mat-form-field>
                                
                            </td>
                            <td>
                                <mat-form-field
                                    style="width:120px;">
                                    <input matInput placeholder="GLNo" formControlName="glno" readonly
                                        autocomplete="off" id="branch-exp-create-0041">

                                </mat-form-field>
                            </td>
                             <td>
                                <mat-form-field
                                    style="width:200px;"
                                    (click)="getbsdropdown()">
                                    <mat-label>BS<label style="color:red">&nbsp;*</label></mat-label>
                                    <input #bsInput placeholder="BS" matInput formControlName="bs_code"
                                        [matAutocomplete]="bstype"  [readonly]="ccbsSubmit" id="branch-exp-create-0042">
                                        <button *ngIf="section.get('bs_code')?.value" 
                                        mat-icon-button 
                                        matSuffix 
                                        aria-label="Clear"
                                        (click)="clearField(i, 'bs_code')">
                                    <mat-icon style="color:red">close</mat-icon>
                                    </button>
                                    <mat-autocomplete  [panelWidth]="200" #bstype="matAutocomplete" [displayWith]="displaybsFn"
                                        (opened)="bsScroll()">
                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                        </mat-option>
                                        <ng-container *ngIf="!isLoading">
                                            <mat-option *ngFor="let bsname of bsNameData" [value]="bsname" matTooltip="{{bsname.name}}" matTooltipClass="custom-tooltipnew"
                                                (click)="bsid(bsname,bsname.code)">
                                                {{bsname.name}}
                                            </mat-option>
                                        </ng-container>
                                    </mat-autocomplete>
                                </mat-form-field>
                                
                            </td>                                      
                            <td>
                                <mat-form-field
                                    style="width:200px;">
                                    <mat-label>CC<label style="color:red">&nbsp;*</label></mat-label>
                                    <input #ccinput placeholder="CC" matInput formControlName="cc_code"
                                        [matAutocomplete]="cctype"  [readonly]="ccbsSubmit" id="branch-exp-create-0043">
                                        <button *ngIf="section.get('cc_code')?.value" 
                                        mat-icon-button 
                                        matSuffix 
                                        aria-label="Clear"
                                        (click)="clearField(i, 'cc_code')">
                                    <mat-icon  style="color:red">close</mat-icon>
                                    </button>
                                    <mat-autocomplete  [panelWidth]="200" #cctype="matAutocomplete" [displayWith]="displayccFn"
                                        (opened)="ccScroll()">
                                        <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                        </mat-option>
                                        <ng-container *ngIf="!isLoading">
                                            <mat-option *ngFor="let ccname of ccNameData" [value]="ccname" matTooltip="{{ccname.name}}" matTooltipClass="custom-tooltipnew"
                                                (click)="getccdata(ccname.code,ccname.id)">
                                                {{ccname.name}}
                                            </mat-option>
                                        </ng-container>
                                    </mat-autocomplete>
                                </mat-form-field>
                               
                            </td>
                            <td>
                                <mat-form-field
                                    style="width:50px;">
                                    <mat-label>Percentage<label style="color:red">&nbsp;*</label></mat-label>
                                    <input matInput placeholder="Percentage" formControlName="ccbspercentage"  (keypress)="numberOnly($event)" 
                                        autocomplete="off" [readonly]="ccbsSubmit" id="branch-exp-create-0044">

                                </mat-form-field>
                            </td>
                                                            
                            
                            <td>
                                <button mat-icon-button type="button" [disabled]="ccbsSubmit" id="branch-exp-create-0045">
                                    <mat-icon style="color: green;" aria-label="Edit" matTooltip="Delete" matTooltipClass="custom-tooltipnew"
                                        (click)="deleteallocccbs(section,i)">
                                        delete</mat-icon>
                                </button>
                            </td>
                        </tr>
                    </ng-container>

                    <tr>
                        <td colspan="9" style="align-items: center;">
                            <button type="button" style="border-radius:40px;margin-left: 630px;"
                                class="btn btn-outline-primary" (click)="ccbsform()"  [disabled]="ccbsSubmit" id="branch-exp-create-0046" matTooltip="Add Expense Details" matTooltipClass="custom-tooltipnew">        
                                Add Expense Details
                            </button>
                            <!-- <button type="button"
                                style="border-radius:40px;margin-left:15px;"
                                class="btn btn-outline-primary" data-dismiss="modal" (click)="ccbsbacks()" id="branch-exp-create-0047">
                                Back</button> -->
                        </td>
                    </tr>
                </table>
            </div>                        
        </form>
    </div>
</div>
<div *ngIf="ccbsSubmit">
    <h2  style="margin-top: 10px;margin-left: 20px;"> {{this.expensetype}} - Expense Details</h2>

    <br>
    <form [formGroup]="paymentDetForm">
        <table>
        <tr >
            <td>
                <mat-form-field style="margin-left: 20px;">
                    <mat-label>From Date<label style="color:red">&nbsp;*</label></mat-label>
                    <input matInput [matDatepicker]="picker1" formControlName="from_date" autocomplete="off" style="width:150px;" 
                    (change)="fromdateChange()" readonly id="branch-exp-create-0048" [disabled]="is_submit">
                    <mat-datepicker-toggle matSuffix [for]="picker1">
                        <!-- <mat-icon matDatepickerToggleIcon >keyboard_arrow_down</mat-icon> -->
                    </mat-datepicker-toggle>
                    <mat-datepicker #picker1></mat-datepicker>
                </mat-form-field>
            </td>
            <!-- <td *ngIf="recurCalc">
                <mat-form-field style="margin-left: 40px;">
                    <mat-label>From Date</mat-label>
                    <input matInput formControlName="from_date" style="width:150px"  readonly id="branch-exp-create-0049">                                
                </mat-form-field>
            </td> -->
            <td>
                <mat-form-field style="margin-left: 20px;">
                    <mat-label>To Date<label style="color:red">&nbsp;*</label></mat-label>
                    <input matInput [matDatepicker]="picker2" formControlName="to_date" autocomplete="off" style="width:150px" (change)="chkPayFormValid()"
                    [min]="this.paymentDetForm.value.from_date" readonly id="branch-exp-create-0050" [disabled]="is_submit">
                    <mat-datepicker-toggle matSuffix [for]="picker2">
                        <!-- <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon> -->
                    </mat-datepicker-toggle>
                    <mat-datepicker #picker2 ></mat-datepicker>
                </mat-form-field>
            </td>
            <!-- <td *ngIf="recurCalc">
                <mat-form-field style="margin-left: 20px;">
                    <mat-label>To Date</mat-label>
                    <input matInput formControlName="to_date" style="width:150px" readonly id="branch-exp-create-0051">
                </mat-form-field>
            </td> -->
            <td>
                <mat-form-field style="width:200px;margin-left: 20px;">
                    <mat-label>Recurring Period<label style="color:red">&nbsp;*</label></mat-label>
                    <mat-select placeholder="Recurring Period" formControlName="recurring_period" id="branch-exp-create-0053" [disabled]="is_submit">
                        <mat-option *ngFor="let pp of recurringPeriodList" [value]="pp.id" matTooltip="{{pp.text}}" matTooltipClass="custom-tooltipnew" (click)="chkPayFormValid()">
                            {{pp.text}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </td>
            <!-- <td>
                <mat-form-field
                    style="margin-left: 20px;">
                    <mat-label>Amount</mat-label>
                    <label style="color:red">&nbsp;*</label>
                    <input matInput placeholder="Amount" readonly formControlName="amount" type="number" autocomplete="off"  (keyup)="chkPayFormValid()" id="branch-exp-create-0052">
                </mat-form-field>
            </td> -->
        </tr>
        <tr>
            <td *ngIf="paymentDetForm.value.recurring_period == 1">
                <mat-form-field  style="margin-left: 20px;width:200px">
                    <mat-label>Recurring Day</mat-label>
                    <mat-select placeholder="Recurring Day" formControlName="recurring_date" disabled id="branch-exp-create-0054" >
                        <mat-option *ngFor="let pp of recurring_day_list" [value]="pp.value" matTooltip="{{pp.value}}" matTooltipClass="custom-tooltipnew" (click)="chkPayFormValid()">
                            {{pp.value}}
                        </mat-option>
                    </mat-select>              
                </mat-form-field>
            </td>
            <td *ngIf="paymentDetForm.value.recurring_period != 1">
                <mat-form-field  style="margin-left: 20px;width:200px">
                    <mat-label>Recurring Day<label style="color:red">&nbsp;*</label></mat-label>
                    <mat-select placeholder="Recurring Day" formControlName="recurring_date" id="branch-exp-create-0055" [disabled]="is_submit">
                        <mat-option *ngFor="let pp of recurring_day_list" [value]="pp.value" matTooltip="{{pp.value}}" matTooltipClass="custom-tooltipnew" (click)="chkPayFormValid()">
                            {{pp.value}}
                        </mat-option>
                    </mat-select>              
                </mat-form-field>
            </td>
           <td style="margin-left: 20px;">
                <button class="btn btn-outline-primary" type="submit" [disabled]="!payFormValid || brexpSubmitEnab "
                style="border-radius:40px;margin-left: 50px;" color="primary" matTooltipClass="custom-tooltipnew" matTooltip="Save"
                (click)="paymentSchedule()" id="branch-exp-create-0056">Add</button>
                <button class="btn btn-outline-primary" type="button" [disabled]="!brexpSubmitEnab" matTooltip="Delete"
                style="border-radius:40px;margin-left: 10px;" color="primary" matTooltipClass="custom-tooltipnew"
                (click)="deletePayment()" id="branch-exp-create-0057">Delete</button>
            </td>
        </tr>
    </table>
    </form>

    <div *ngIf="paySchedule?.length >0" style="width: 93%;align-self: center;margin-left: 20px;">
        <form [formGroup]="paymentScheduleForm">
            <div >
                <table class="table table-bordered" style="margin-top: 10px;"  >
                    <thead class="table_header" style="text-align: center;">
                        <tr  class="table_header" fixed-header style="background:#a7e4ab">
                            <th>S.No</th>
                            <th>Category </th>
                            <th>Amount</th>
                            <th>Sub Category</th>
                            <th>BS </th>
                            <th>CC</th>
                            <th>CCBS Amount</th>
                            <th>On Date</th>
                            <!-- <th>BS </th> 
                            <th>Action</th>-->
                            
                        </tr>
                    </thead>
                    <tbody>
                        <ng-container  *ngFor="let ss of paySchedule; index as i;">
                            <tr *ngFor="let data of ss; index as j">
                            <td *ngIf="j==0" [attr.rowspan]= "ss.length" style="text-align: center;vertical-align: middle;">{{(presentpagePaymentSch - 1)*10 +i+1 }} </td> 
                            <td style="text-align: center;">
                             {{data.category}} 
                            </td>
                            <td *ngIf="j==0" [attr.rowspan]= "ss.length"  style="text-align: center;vertical-align: middle;">
                                {{getamount(data.detail_amount)}} 
                               </td>
                            <td style="text-align: center;">
                             {{data.subcategory}} 
                            </td>
                            <td style="text-align: center;">
                             {{data.bs}} 
                            </td>
                            <td style="text-align: center;">
                             {{data.cc}} 
                            </td>
                            <td style="text-align: center;">
                             {{getamount(data.amount)}} 
                            </td>
                            <td *ngIf="j==0" [attr.rowspan]= "ss.length" style="text-align: center;vertical-align: middle;">
                                {{data.on_date | date:'dd-MMM-yyyy'}} 
                            </td>
                            </tr>
                        </ng-container>                           
                    </tbody>
                </table>
                <div *ngIf="!isPaymentSchpage" class="NodataAlign" style="margin-left: 20%;">No Records Found...</div>
                <div class="d-flex cntr" *ngIf="isPaymentSchpage">

                    <div class="col-md-6" style="margin-bottom: 0%;font-size: small;text-align: left;font-weight:bold;">
                        Page: {{presentpagePaymentSch}}
                    </div>
                     <div class="col-md-6" style="margin-bottom: 0%;font-size: small;text-align: right;">

                        <mat-paginator  
                                                    (page)="handlePageEventSchedule($event)"
                                                    [length]="length_PaymentSch"
                                                    [pageSize]="pageSize_paymentSch"
                                                    [showFirstLastButtons]="showFirstLastButtons"
                                                    [pageSizeOptions]="pageSizeOptions"
                                                    [pageIndex]="pageIndexPayment"
                                                    [hidePageSize]="true"
                                                    aria-label="Select page">
                                                </mat-paginator>
                                               
                    </div>
                    <!-- <div style="font-size: small;text-align:right; margin-bottom:100px;">
                        <button mat-icon-button [disabled]="has_previousbrexp === false" color="primary"
                            (click)="previousClickbrexp()" id="branch-exp-create-0058">
                            <mat-icon>arrow_back
                            </mat-icon>
                        </button>
                        {{presentpagebrexp}}
                        <button mat-icon-button [disabled]="has_nextbrexp === false" color="primary" (click)="nextClickbrexp()" id="branch-exp-create-0059">
                            <mat-icon>arrow_forward
                            </mat-icon>
                        </button>
                    </div> -->
                </div>
            </div>   
            <tr>                         
              
            <td>
                <mat-form-field style="width: 200px;margin-left: 200px;" (click)="getbranchname()">
                    <mat-label> Branch</mat-label>
                    <input #brInput placeholder="Branch" matInput formControlName="branch_id"
                        [matAutocomplete]="branchmatAuto"  [readonly]="!brexpSubmitEnab" id="branch-exp-create-0060">
                    <mat-autocomplete [panelWidth]="400" #branchmatAuto="matAutocomplete" (opened)="branchScroll()"
                        [displayWith]="displayFnBranch">
                        <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                        <ng-container *ngIf="!isLoading">
                            <mat-option *ngFor="let br of brList" matTooltip="{{br.code}}-{{br.name}}" matTooltipClass="custom-tooltipnew" [value]="br">
                                {{br.code}}-{{br.name}}
                            </mat-option>
                        </ng-container>
                    </mat-autocomplete>
                </mat-form-field>
            </td>
            <td>
                <mat-form-field style="margin-left: 20px;width: 300px;" (click)="approvername()">
                    <mat-label>Approver Name<label style="color:red">&nbsp;*</label></mat-label>
                    <input #appInput  placeholder="Choose Approver" matInput 
                    formControlName="approvedby" [matAutocomplete]="approver" [readonly]="!brexpSubmitEnab" id="branch-exp-create-0061">
                    <mat-autocomplete [panelWidth]="300" #approver="matAutocomplete" (opened)="autocompleteapproverScroll()"
                    [displayWith]="displayFnApprover">
                    <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                    <ng-container *ngIf="!isLoading">
                    <mat-option *ngFor="let app of approverList"  (click)="chkPayFormValid()"
                    [value]="app" matTooltip="{{app.name}}-{{app.code}} - {{app.limit}} - {{app.designation}}" matTooltipClass="custom-tooltipnew">{{app.name}}-{{app.code}} - {{app.limit}} - {{app.designation}}
                    </mat-option>
                    </ng-container>
                 </mat-autocomplete>
                </mat-form-field>
            </td>
            <td>
                <mat-form-field style="margin-left: 20px; ">
                    <mat-label>Remarks<label style="color:red">&nbsp;*</label></mat-label>
                    <input matInput placeholder="Enter Remarks" formControlName="remarks" autocomplete="off" (keyup)="chkPayFormValid()"  [readonly]="!brexpSubmitEnab" id="branch-exp-create-0062">
                </mat-form-field>
            </td>
            <td style="margin-left: 20px;">
                <button class="btn btn-outline-success" type="submit" [disabled]="!brexpSubmitEnab" matTooltip="Submit"
                style="border-radius:40px;margin-left: 20px;" color="primary" matTooltipClass="custom-tooltipnew"
                (click)="brexpSubmitForm()" id="branch-exp-create-0063">Submit</button>
                    <button type="button"
                    style="border-radius:40px;margin-left:10px;" (click)="brexpCancel()" matTooltipClass="custom-tooltipnew" matTooltip="Cancel"
                    class="btn btn-outline-primary" id="branch-exp-create-0064">   
                    Cancel</button>
                </td>
            </tr>                     
        </form>
    </div>
      

</div>
<div class="modal fade" tabindex="-1" role="dialog" data-backdrop="static" aria-labelledby="exampleModalLongTitle" aria-hidden="true" 
        id="branch-exp-create-0002">
        <div class="modal-dialog modal-lg " style="width: 70%;">
            <div class="modal-content">
                <div class="modal-header" style="background: rgba(23, 204, 23, 0.288);">
                    <h2 class="modal-title" style="color:black ;text-align: center;font-weight: bold;">Attachments
                    </h2>
                    <button type="button" class="close" data-dismiss="modal" #closedbuttons aria-label="Close" id="branch-exp-create-0065">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div style="margin-top: 2%; width: 99%;">
                    <div class="container">
                        <div >
                            <div class="table-responsive" style="width:100%;margin-top: 1%;">
                                <!-- <h3 style="font-weight: bold;">Attached Files</h3> -->
                                <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                                    <thead class="table_header" style="text-align: left;">
                                    <tr>
                                        <th style="text-align: center;">S.No</th>
                                        <th style="text-align: center;">File Name</th>
                                        <th style="text-align: center;">View</th>
                                        <th style="text-align: center;">Delete</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                         <tr  *ngFor="let files of filearr; let index = index">
                                            <td>{{index+1}}</td>
                                            <td>
                                                {{files?.name}} 
                                            </td>
                                            <td style="text-align: center;" >
                                            <i class="fa fa-external-link" aria-hidden="true" style="color:blue;font-size: 24px;margin-left: 20px;" (click)="filepreview(files)" data-toggle="modal"
                                            data-target="#branch-exp-create-0003"></i>
                                            </td>
                                            <td style="text-align: center;">
                                                
                                                <span (click)="deletefileUpload(files)">
                                                    <mat-icon matTooltip="Delete" matTooltipClass="custom-tooltipnew">delete
                                                    </mat-icon>
                                                </span>
                                            </td>
                                         </tr>
                                        
                                    </tbody>
                                </table>
                            </div>
                            <div>
                                <td class="d-flex justify-content-center">

                                    <button type="button" class="btn btn-outline-primary" style="border-radius:40px;
                                                            margin-bottom: 10px;
                                                           " (click)="fileback()" matTooltip="Back" id="branch-exp-create-0066">Back</button>

                                </td>
                            </div>
                        </div>
                    </div>


                </div>
            </div>
        </div>
</div>

<div *ngIf="showimageHeaderPreview" id="branch-exp-create-0003" class="modal fade" aria-labelledby="my-modalLabel"
    aria-hidden="true" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-xl" data-dismiss="modal" style="width: 60%;height: 80%;">
        <div class="modal-content">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="branch-exp-create-0067">
                <span aria-hidden="true">&times;</span>
            </button>
            <div class="modal-body">
                <img src="{{jpgUrls}}" class="img-responsive" style="width: 100%;">

            </div>
        </div>
    </div>
</div>

<div *ngIf="showimageHeaderPreviewPDF" id="branch-exp-create-0003" class="modal fade" aria-labelledby="my-modalLabel"
    aria-hidden="true" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header" style="background: rgba(23, 204, 23, 0.288);">
                <h2 class="modal-title"> ECF Attachments</h2>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="branch-exp-create-0068">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <pdf-viewer [src]="pdfurl" [original-size]="false" [render-text]='false' [show-borders]="true"
                [fit-to-page]="true" [show-all]="true" style="display: block; height: 600px;" [fit-to-page]="true">
            </pdf-viewer>
        </div>
    </div>
</div>

<div class="modal fade" tabindex="-1" data-backdrop="static" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" 
id="branch-exp-create-0005">
<div class="modal-dialog modal-xl" style="width:80%;height:200%;">
    <div class="modal-content">
        <div class="modal-header" style="background: rgba(23, 204, 23, 0.288);">
            <h2 class="modal-title">
                Find Supplier</h2>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close" id="branch-exp-create-0069">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <br>
        <div>
            <form [formGroup]="SelectSupplierForm" (ngSubmit)="SelectSuppliersearch()">
                <table style="margin-left: 20px;">
                    <div>
                        <tr>
                            <td>
                                <mat-form-field style="width: 200px;">
                                    <mat-label>Supplier GST Number</mat-label>
                                    <input matInput placeholder="GST No" formControlName="gstno"
                                        autocomplete="off" (keypress)="only_numalpha($event)" maxlength="15" id="branch-exp-create-0070">
                                </mat-form-field>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            </td>

                            <td>
                                <mat-form-field style="width: 200px;">
                                    <mat-label>Supplier Code</mat-label>
                                    <input matInput placeholder="Supplier" formControlName="code"
                                        autocomplete="off" (keypress)="only_numalpha($event)" maxlength="10" id="branch-exp-create-0071">
                                </mat-form-field>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            </td>
                            <!-- [disabled]="showsuppliercode"  -->

                            <td>
                                <mat-form-field style="width: 200px;">
                                    <mat-label>PAN Number</mat-label>
                                    <input matInput placeholder="PAN" formControlName="panno" autocomplete="off"
                                        (keypress)="only_numalpha($event)" id="branch-exp-create-0072">
                                </mat-form-field>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            </td>
                            <!--  [disabled]="true" -->
                            <button class="btn btn-outline-primary" type="submit"
                                style="border-radius:40px;margin-left: 15px;" color="primary" matTooltip="Search"
                                (click)="SelectSuppliersearch()" id="branch-exp-create-0073"><i class="fa fa-search"
                                    aria-hidden="true"></i></button>&nbsp;

                            <!-- <button type="button" style="border-radius:10px;margin-left: 15px; border-color: black; 
                            background-color: white;" class="btn btn-light" (click)="dataclear()" id="branch-exp-create-0074">
                                Reset</button> -->

                                <button type="button" style="border-radius:40px;margin-left: 15px;" matTooltip="Reset"
                                    class="btn btn-outline-primary" (click)="dataclear()" id="branch-exp-create-0075">
                                    Reset</button>


                        </tr>
                        <tr>
                            <div *ngIf="default">
                                <td>
                                    <mat-form-field style="width: 250px;margin-top: 5px;">
                                        <mat-label>Choose Supplier</mat-label>
                                        <input #suppInput placeholder="Choose Supplier" matInput
                                            formControlName="name" [matAutocomplete]="Suppliertype" id="branch-exp-create-0076">
                                        <mat-autocomplete [panelWidth]="400" #Suppliertype="matAutocomplete"
                                            [displayWith]="displayFn" (opened)="supplierScroll()">

                                            <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                            </mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let suppliername of supplierNameData"
                                                    ngDefaultControl [(ngModel)]="inputSUPPLIERValue"
                                                    [ngModelOptions]="{standalone: true}"
                                                    (ngModelChange)="inputSUPPLIERValue = $event.toUpperCase()"
                                                    (onSelectionChange)="getsuppView(suppliername)"
                                                    [value]="suppliername" matTooltip="{{suppliername.name}}" matTooltipClass="custom-tooltipnew">
                                                    {{suppliername.name}}
                                                </mat-option>
                                            </ng-container>
                                        </mat-autocomplete>
                                    </mat-form-field>
                                </td>
                            </div>

                            <div *ngIf="alternate">
                                <td>
                                    <mat-form-field style="width: 250px;margin-top: 5px;">
                                        <mat-label>Choose Supplier</mat-label>
                                        <input #name placeholder="Choose Supplier" matInput
                                            formControlName="name" [matAutocomplete]="autosupp2" id="branch-exp-create-0077">
                                        <mat-autocomplete [panelWidth]="400" #autosupp2="matAutocomplete"
                                            [displayWith]="displaytest">
                                            <!-- [(ngModel)]="inputSUPPLIERValue" [ngModelOptions]="{standalone: true}" -->
                                            <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                            </mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let suppliername of selectsupplierlist"
                                                    ngDefaultControl
                                                    (ngModelChange)="inputSUPPLIERValue = $event.toUpperCase()"
                                                    (focusout)="getsuppView(suppliername)"
                                                    [value]="suppliername" matTooltip="{{suppliername.name}}" matTooltipClass="custom-tooltipnew">
                                                    {{suppliername.name}}
                                                </mat-option>
                                            </ng-container>
                                        </mat-autocomplete>
                                    </mat-form-field>
                                </td>
                            </div>
                        </tr>
                    </div>
                </table>

                <!-- <form [formGroup]="supplierchooseForm"></form> -->
                <table width="100%" style="margin-top: 2%;margin-bottom: 5%;">
                    <tbody>
                        <tr>
                            <td valign="top">
                                <table style="font-size:14px;margin-left: 20px;">
                                    <tbody>
                                        <tr>
                                            <td style="color: #808080;  width: 200px;font-size: medium;height: 50px">
                                                Supplier Name:
                                            </td>
                                            <td style="width: 400px;height: 50px">
                                                {{SupplierName }}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="color: #808080; width: 200px;font-size: medium;height: 50px">
                                                Supplier Code:
                                            </td>
                                            <td style="width: 400px;height: 50px">
                                                {{SupplierCode }}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="color: #808080;  width: 200px;font-size: medium;height: 50px">
                                                Supplier GST Number:
                                            </td>
                                            <td style="width: 400px;height: 50px">
                                                {{SupplierGSTNumber }}
                                            </td>
                                        </tr>
                                            <!-- <p style="color: #808080; margin: 0px 0 4px;">
                                                Supplier Name:
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
                                                    style="color: black;margin-left: 2.5em;">{{SupplierName }}
                                                </span>
                                            </p>
                                            <p style="color: #808080; margin: 0px 0 4px;margin-top: 3%;">
                                                Supplier Code:
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                <span style="color: black;margin-left: 3.8em;">{{SupplierCode}}
                                                </span>
                                            </p>
                                            <p style="color: #808080; margin: 0px 0 4px;margin-top: 3%;">
                                                Supplier GST Number:
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                <span
                                                    style="color: black;margin-left: 0.2em;">{{SupplierGSTNumber}}
                                                </span>
                                            </p> -->
                                    </tbody>
                                </table>
                            </td>
                            <td valign="top">
                                <table style="font-size:14px;margin-left:-120px;">
                                    <tbody>
                                        <tbody>
                                            <tr>
                                                <td style="color: #808080;  width: 120px;font-size: medium;height: 50px">
                                                    PAN Number:
                                                </td>
                                                <td style="width: 300px;height: 50px">
                                                    {{SupplierPANNumber }}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="color: #808080; width: 120px;font-size: medium;height: 50px">
                                                    Address:
                                                </td>
                                                <td style="width: 300px;height: 50px">
                                                    {{line1 }},
                                                    {{line2 }},
                                                    {{line3 }}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="color: #808080;  width: 120px;font-size: medium;height: 50px">
                                                    City:
                                                </td>
                                                <td style="width: 300px;height: 50px">
                                                    {{City }}
                                                </td>
                                            </tr><!-- <tr>
                                            <p style="color: #808080; margin: 0px 0 4px;">
                                                PAN Number:
                                                &nbsp;&nbsp;&nbsp;<span
                                                    style="color: black;margin-left: 0em;">{{SupplierPANNumber}}
                                                </span>
                                            </p>
                                            <p style="color: #808080; margin: 0px 0 4px;margin-top: 3%;">
                                                Address:
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                <span style="color: black;margin-left: 0.3em;"> {{line1}},
                                                    {{line2}},
                                                    {{line3}}</span>
                                            </p>
                                            <p style="color: #808080; margin: 0px 0 4px;margin-top: 3%;">
                                                City:
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                <span style="color: black;margin-left: -0.4em;">{{City}} </span>
                                            </p>
                                        </tr> -->
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                        <br><br>
                        <div *ngIf="submitbutton" style="margin-left: 20px; ">
                            <tr>
                                <!-- <button type="button" data-dismiss="modal" style="border-radius:10px;margin-left: 500px;border-color: #f5c68b;
                                background-color: #f5c68b;" class="btn btn-light"
                                    (click)="Branchcallingfunction()" id="branch-exp-create-0078">
                                    Submit</button> -->

                                <button type="submit" data-dismiss="modal" matTooltip="Submit" matTooltipClass="custom-tooltipnew"
                                    style="border-radius:40px;margin-left: 500px;"
                                    class="btn btn-outline-primary" (click)="Branchcallingfunction()" id="branch-exp-create-0079">
                                    Submit</button>


                            </tr>
                        </div>
                    </tbody>
                </table>
            </form>
        </div>
    </div>
</div>


</div>

    <!-- <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
    id="branch-exp-create-0006">
        <div class="modal-dialog modal-xl " style="width: 85%;">
            <div class="modal-content">
                <div class="modal-header" style="background:#a7e4ab">
                  
                    <button type="button" class="close" #ccbsclose data-dismiss="modal" aria-label="Close" id="branch-exp-create-0080">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <br>
               
            </div>
        </div>
    </div> -->


    <!-- <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true" *ngIf="showPaymentpopup"
    id="branch-exp-create-0007">
        <div class="modal-dialog modal-xl ">
            <div class="modal-content">
                <div class="modal-header" style="background:#a7e4ab">
                
                    <button type="button" class="close" #payclose data-dismiss="modal" aria-label="Close" id="branch-exp-create-0081">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
 
            </div>
        </div>
    </div> -->
</mat-card>
</div>
                <div *ngIf="BranchExpViewForm" >
                    <app-branch-expense-view (onSubmit)="viewBacks()" (onCancel)="viewBacks()"></app-branch-expense-view>
                </div>