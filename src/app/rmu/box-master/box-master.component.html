<div style="padding: 1%;">
    <br>
    <h2>Box Master</h2>

    <form [formGroup]="boxsearch">
        <div class="col-md-12">
            <div class="row">
                <div class="col-md-3" class="npm-mat-edit">
                <mat-form-field appearance="outline" style="width: 100%;">
                    <mat-label>Box Name</mat-label>
                    <input matInput formControlName="box">
                </mat-form-field>
                </div>
                <!-- <div class="col-md-1" style="margin-top: 1%;">
                    <button type="submit" style="border-radius: 40px;" class="btn btn-outline-primary"
                        (click)="box_summary(boxsearch.value)">Search</button>
                </div>
                <div class="col-md-1" style="margin-top: 1%;">
                    <button type="submit" style="border-radius: 40px;" class="btn btn-outline-primary"
                        (click)="box_reset()">Reset</button>
                </div>
                <div class="col-md-1" style="margin-top: 1%;">
                    <button type="submit" style="border-radius: 40px;" class="btn btn-outline-primary"
                        (click)="nex_box_create()">Add</button>
                </div> -->
                <div class="col-md-4">
                    <!-- <div id="rmubtngrp"> -->
                    <button matTooltip="Search Records" matTooltipClass="rmutooltip"  (click)="box_summary(boxsearch.value)"
                        class="btn btn-outline-success" style="margin-left:5%" id="rmubtn" color="primary" matTooltipClass="rmutooltip"><i
                            class="fa fa-search" aria-hidden="true"></i></button>
                    <button class="btn btn-warning" matTooltipClass="rmutooltip"(click)="box_reset()"
                        [matTooltip]="'Clear Entries'" style="margin-left:20px" id="rmubtn" matTooltipClass="rmutooltip">Clear</button>
                    <button matTooltip="Add Product" matTooltipClass="rmutooltip" type="button" matTooltipClass="rmutooltip"
                    (click)="nex_box_create()" class="btn btn-outline-success" id="rmubtn"
                        style="margin-left: 20px;"><span class="fa fa-plus"></span>
                        ADD</button>
                    <!-- </div> -->
                </div>
                
            </div>
        </div>
    </form>
    <form [formGroup]="box_form">
        <div style="margin-top: 1%;" id="rmucontent" class="table-responsive"
            formArrayName="box_form_arr">
            <table class="table table-bordered" id="rmutable">
                <thead style="background-color: #ddefdd;">
                    <th>S.No</th>
                    <th>Code</th>
                    <th>Name</th>
                    <th>Status</th>
                    <th>Action</th>
                </thead>            
                <tbody >
                    <ng-container *ngIf="box_form.controls.box_form_arr['controls'].length > 0; else noData">
                        <tr *ngFor="let boxsearch_level of box_form.controls.box_form_arr['controls']; let ind=index" [formGroupName]="ind">
                        <td>{{(presentpage_sum - 1)*10 + ind+1 }}</td>
                        <td>
                            <div
                                *ngIf="boxsearch_level.value.box_code=='' || boxsearch_level.value.box_code==null || boxsearch_level.value.box_code==undefined;else expcodeelse ">
                                --
                            </div>
                            <ng-template #expcodeelse>
                                {{boxsearch_level.value.box_code}}
                            </ng-template>
                        </td>
                        <td>
                            <div *ngIf="boxsearch_level.value.isEditable==true;else expnameelse">
                                {{boxsearch_level.value.box_name}}
                            </div>
                            <ng-template #expnameelse>
                                <mat-form-field [appearance]="boxsearch_level.value.isEditable ? 'none' : 'outline'"
                                    style="width: 100%;">
                                    <mat-label>Box Name</mat-label>
                                    <input matInput formControlName="box_name" maxlength="100">
                                </mat-form-field>
                            </ng-template>
                        </td>
                        <td>
                            <div *ngIf="boxsearch_level.value.box_status==1;else statuselseif">Active</div>
                            <ng-template #statuselseif>
                                <div *ngIf="boxsearch_level.value.box_status==0;else statuselse">In-Active</div>
                            </ng-template>
                            <ng-template #statuselse>
                                <div>--</div>
                            </ng-template>
                        </td>
                        <td style="font-size: 13px;">
                            <button mat-icon-button class="material-icons app-toolbar-menu save-button"
                                matTooltip="Save Changes" (click)="save_box_mapping(boxsearch_level,ind)" matTooltipClass="rmutooltip"
                                *ngIf="!boxsearch_level.value.isEditable" style="color:'#0297ff'">
                                <mat-icon>check_circle</mat-icon>
                            </button>

                            <button mat-icon-button class="material-icons app-toolbar-menu cancel-button"
                                matTooltip="Cancel Changes" color="warn" matTooltipClass="rmutooltip"
                                (click)="cancel_box_mapping(boxsearch_level,ind)"
                                *ngIf="!boxsearch_level.value.isEditable">
                                <mat-icon>cancel</mat-icon>
                            </button>

                            <button mat-icon-button class="material-icons app-toolbar-menu save-button"
                                [hidden]="boxsearch_level.value.box_status == 0" matTooltipClass="rmutooltip"
                                *ngIf="boxsearch_level.value.isEditable" matTooltip="Edit" style="color:green"
                                (click)="edit_box_mapping(boxsearch_level,ind)">
                                <mat-icon>edit</mat-icon>
                            </button>

                            <button mat-icon-button class="material-icons app-toolbar-menu delete-button"
                                (click)="deleteexpgrp_mapping(boxsearch_level,ind)"
                                *ngIf="boxsearch_level.value.isEditable" matTooltipClass="rmutooltip"
                                [ngStyle]="{'color':boxsearch_level.value.box_status == 0 ? '#66bb6a' : 'red' }"
                                [matTooltip]="boxsearch_level.value.box_status == 0 ? 'Active' : 'In-Active' "
                                color="warn">
                                <mat-icon>delete</mat-icon>
                            </button>
                        </td>
                    </tr>
                    </ng-container>
                    <ng-template #noData>
                        <tr>
                          <td colspan="5" style="text-align: center;">
                            <h3>No Data Found...</h3>
                          </td>
                        </tr>
                      </ng-template>
                </tbody>               
            </table>
        </div>
    </form>
    <div style="margin-bottom: 5%;font-size: small;text-align:right;">
        <button mat-icon-button [disabled]="has_previous_sum === false" color="primary" (click)="previousClick()">
            <mat-icon>arrow_back</mat-icon>
        </button> {{presentpage_sum}}
        <button mat-icon-button [disabled]="has_next_sum === false" color="primary" (click)="nextClick()">
            <mat-icon>arrow_forward</mat-icon>
        </button>
    </div>
</div>