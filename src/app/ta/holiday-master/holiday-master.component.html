<div class="row">
  <div style="margin-left: 22px" class="col-12">
    <form [formGroup]="holidaySearchForm">
        <mat-form-field style="width: 250px">
          <mat-label>Holiday Date</mat-label>
          <input matInput [matDatepicker]="picker1" formControlName="dates">
          <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
          <mat-datepicker #picker1></mat-datepicker>
        </mat-form-field>
        <mat-form-field style="margin-left: 22px;width: 200px">
          <mat-label>State</mat-label>
          <input placeholder="Select State" matInput formControlName="state_id"
          [matAutocomplete]="statetype">
      <mat-autocomplete #statetype="matAutocomplete" [displayWith]="displayFnstate"
     >
          <!-- <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
          <ng-container *ngIf="!isLoading"> -->
              <mat-option *ngFor="let state of stateList" [value]="state">
                  {{state.name}}
              </mat-option>
          <!-- </ng-container> -->
      </mat-autocomplete>
        </mat-form-field>
        <mat-form-field style="margin-left: 22px;width: 200px">
          <mat-label>Holiday Name</mat-label>
          <input matInput formControlName="name">
        </mat-form-field>

      <td>
        <button class="btn btn-outline-success" type="submit" style="border-radius:40px;margin-left: 15px;"
          color="success"><i class="fa fa-search" (click)="holidaySearch()" aria-hidden="true"></i></button>
        <button class="btn btn-outline-success" type="clear" (click)="resetform()" 
          style="border-radius:40px;margin-left: 15px;" color="success">Clear</button>

        <button type="button" class="btn btn-outline-success" data-toggle="modal" data-target="#holidayaddmodal"
          style="border-radius:40px;margin-left: 15px"><span class="fa fa-plus"></span>
        </button>
      </td>
    </form>
  </div>
</div>

<div *ngIf="holidaysumm">

  <div style="margin-left: 22px;margin-top: 20px; " class="col-md-12">



    <div class="table-responsive" style="width:98%;margin-top: 1%;">
      <table class="table" style="margin-top: 10px;width: 100%;" id='commonstyle'>
        <thead class="table_header">
          <tr>
            <th>S.No</th>
            <th>Holiday Date</th>
            <th>Holiday Name</th>
            <th>State</th>
            <th>Edit</th>
            <th>Delete</th>

          </tr>
        </thead>
        <tr *ngFor="let holiday of holidaysummary;index as i">
          <td> {{(currentpage-1)*pagesize+i+1}}</td>
          <td>{{holiday.date | date: 'dd/MM/yyyy' }}</td>
          <td>{{holiday.holidayname}}</td>
          <td>{{holiday.state_data.name}}</td>
          <td>
            <button mat-icon-button (click)="editholiday(holiday)" data-toggle="modal" data-target="#holidaygetmodal">
              <mat-icon>edit</mat-icon>
            </button>
          </td>
          <td>
            <button mat-icon-button (click)="deleteholiday(holiday.id)">
              <mat-icon>delete</mat-icon>
            </button>
          </td>

        </tr>
        <tr *ngIf="holidaysummary?.length==0; else gstpagination" class="NodataAlign"><td colspan="19" style="text-align: center;">No Records Found...</td></tr>
                    <ng-template #gstpagination>
                   <tr>
                    <td colspan="4">Total Count:{{this.totalcount}}</td>
                   <td colspan="15">
                   <div style="text-align:right;">
                       <button mat-icon-button [disabled]="has_previous=== false" color="primary" (click)="previousClick()">
                           <mat-icon>arrow_back
                           </mat-icon>
                       </button>  {{currentpage}}
                       <button mat-icon-button [disabled]="has_next === false" color="primary" (click)="nextClick()">
                           <mat-icon>arrow_forward
                           </mat-icon>
                       </button>
                   </div>
                   </td>
                   </tr>
                   </ng-template>


      </table>
      <!-- <div *ngIf="holidaysummary?.length==0; else paginationsummary" class="NodataAlign text-center">No Records
        Found...
      </div> -->
      <!-- <div class="col-sm-12" style="font-size:x-small;text-align:right;padding-right:2%;">
        <button (click)="prevpage()" mat-icon-button [disabled]="pagination.has_previous === false" color="primary">
          <mat-icon class="customIconSize">arrow_back</mat-icon>
        </button>
        {{pagination.index}}
        <button (click)="nextpage()" mat-icon-button [disabled]="pagination.has_next === false" color="primary">
          <mat-icon class="customIconSize">arrow_forward</mat-icon>
        </button>

      </div> -->
      <br>
      <br>
      <br>
      
    </div>

  </div>
</div>
<div *ngIf="holidaysearchsumm">
<div style="margin-left: 22px;margin-top: 20px; " class="col-md-12">


  <div>
    <div class="table-responsive" style="width:98%;margin-top: 1%;">
      <table class="table" style="margin-top: 10px;width: 100%;" id='commonstyle'>
        <thead class="table_header">
          <tr>
            <th>S.No</th>
            <th>Holiday Date</th>
            <th>Holiday Name</th>
            <th>State</th>
            <th>Edit</th>
            <th>Delete</th>

          </tr>
        </thead>
        <tr *ngFor="let holiday of holidaysummarysearch;index as i">
          <td> {{(paginations.index-1)*limit+i+1}}</td>
          <td>{{holiday.date | date: 'dd/MM/yyyy' }}</td>
          <td>{{holiday.holidayname}}</td>
          <td>{{holiday.state_data.name}}</td>
          <td>
            <button mat-icon-button (click)="editholiday(holiday)" data-toggle="modal" data-target="#holidaygetmodal">
              <mat-icon>edit</mat-icon>
            </button>
          </td>
          <td>
            <button mat-icon-button (click)="deleteholiday(holiday.id)">
              <mat-icon>delete</mat-icon>
            </button>
          </td>

        </tr>
        <tr *ngIf="holidaysummarysearch?.length==0; else gstpagination" class="NodataAlign"><td colspan="19" style="text-align: center;">No Records Found...</td></tr>
                    <ng-template #gstpagination>
                   <tr>
                    <td colspan="4">Total Count:{{this.totalcount}}</td>
                   <td colspan="15">
                   <div style="text-align:right;">
                       <button mat-icon-button [disabled]="has_previous=== false" color="primary" (click)="previousClick()">
                           <mat-icon>arrow_back
                           </mat-icon>
                       </button>  {{currentpage}}
                       <button mat-icon-button [disabled]="has_next === false" color="primary" (click)="nextClick()">
                           <mat-icon>arrow_forward
                           </mat-icon>
                       </button>
                   </div>
                   </td>
                   </tr>
                   </ng-template>


      </table>
      
      <!-- <div class="col-sm-12" style="font-size:x-small;text-align:right;padding-right:2%;">
        <button (click)="previousClick()" mat-icon-button [disabled]="paginations.has_previous === false" color="primary">
          <mat-icon class="customIconSize">arrow_back</mat-icon>
        </button>
        {{paginations.index}}
        <button (click)="nextClick()" mat-icon-button [disabled]="paginations.has_next === false" color="primary">
          <mat-icon class="customIconSize">arrow_forward</mat-icon>
        </button>

      </div> -->
    </div>

  </div>
</div>
</div>

<div class="modal" id="holidaygetmodal" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">

      <div class="modal-header" style="background:#DDEFDD">
        <h4 class="modal-title" style="color: black;font-weight: 500;font-size: large;">Edit Holiday Master</h4>
        <button type="button" class="close" (click)="resetform()" data-dismiss="modal">&times;</button>
      </div>

      <div class="modal-body">
        <form [formGroup]="holidayeditform">
          <table style="width: 100%;">
            <tr>
              <td>
                <mat-label> Holiday Date</mat-label><br>
                <mat-form-field style="width: 300px;">
                  <input matInput [matDatepicker]="picker3" placeholder="Holiday Date" formControlName="date" required>
                  <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                  <mat-datepicker #picker3></mat-datepicker>
                </mat-form-field>
              </td>
              <td>
                <mat-label>Holiday Name</mat-label><br>
                <mat-form-field style="width:300px;">
                  <input #holidayinput matInput placeholder="Holiday Name" formControlName="holidayname">
                </mat-form-field>
              </td>

            </tr>
          </table>
          <table style="margin: 4% 0% 2% 0%">
            <tr>
              <td>
                <button type="submit" style="margin-left: 10px;" id='primarybtn' (click)="editsubmitform()"
                  class="btn btn-light" >Update</button>
                <button type="button" class="btn btn-light" id="secondarybtn" data-dismiss="modal" (click)="resetform()"
                  style="margin-left: 10px;" #closefilepopup>cancel</button>
              </td>
            </tr>
          </table>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="modal" id="holidayaddmodal" data-backdrop="static" data-keyboard="false">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">

      <div class="modal-header" style="background:#DDEFDD">
        <h4 class="modal-title" style="font-weight: 700;font-size: large;">Add Holidays </h4>
        <button type="button" class="close" (click)="resetform()" #holidayaddclose data-dismiss="modal">&times;</button>
      </div>

      <div class="modal-body">
        <form [formGroup]="holidayform">
          <table style="width: 100%;">
            <tr>
              <td>

                <mat-form-field style="width: 200px;">
                  <mat-label> Holiday Date</mat-label>
                  <input matInput [matDatepicker]="picker2" placeholder="Holiday Date" formControlName="date" required>
                  <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                  <mat-datepicker #picker2></mat-datepicker>
                </mat-form-field>
              </td>
              <td>

                <mat-form-field style="width:200px;margin-left: -7%;">
                  <mat-label>Holiday Name</mat-label>
                  <input matInput placeholder="Holiday Name" formControlName="holidayname">
                </mat-form-field>
              </td>

              <td>
                <button type="submit" style="margin-left: 10px;border-radius: 25px;" id='primarybtn'
                  (click)="submitform()" class="btn btn-outline-success">Submit</button>
                <button type="button" class="btn btn-outline-success" id="secondarybtn" data-dismiss="modal"
                  (click)="resetform()" style="margin-left: 10px; border-radius: 25px;">cancel</button>
              </td>
            </tr>


          </table>
          <!-- <table>
              <tr>
                <td>
                  <button type="submit" style="margin-left: 10px;" id='primarybtn' (click)="submitform()"
                    class="btn btn-light">Submit</button>
                  <button type="button" class="btn btn-light" id="secondarybtn" data-dismiss="modal"
                    (click)="resetform()" style="margin-left: 10px;">cancel</button>
                </td>
              </tr>
            </table> -->
          <hr>
          <table style="width: 100%;">
            <tr>
              <td>
                <input type="file" style="width: 300px; " class="textarea" formControlName="file"
                  (change)="onFileSelected($event)" #fileUpload>
              </td>

              <td>
                <button type="submit" style="margin-left: -31%; border-radius: 25px;" id='primarybtn'
                  (click)="onUpload()" class="btn btn-outline-warning">
                  <mat-icon style="font-size: large;">upload</mat-icon>
                  Upload
                </button>
                <button type="button" class="btn btn-outline-success" id="secondarybtn" data-dismiss="modal"
                  (click)="resetform()" #closefilepopup style="margin-left: 10px;border-radius: 25px;">cancel</button>
              </td>
              <!--<td>
                <button style="width: 150px;" id="primarybtn" class="btn btn-light">
                  <mat-icon>upload</mat-icon>
                  Upload File
                </button>
              </td>-->
            </tr>
          </table>

          <div class="row">
            <div class="col-md">
              <h3 style="margin-top: 4%;">Example Excel Format:</h3>
              <table id="holidaysample" style="width: 75%;">
                <tr>
                  <th></th>
                  <th>Holiday Date</th><br>
                  <th>Holiday Name</th>
                </tr>
                <tr>
                  <td></td>
                  <td>01:01:2022</td><br>
                  <td>New Year</td>
                </tr>
                <tr>
                  <td></td>
                  <td>26:01:2022</td><br>
                  <td>Republic Day</td>
                </tr>
                <tr>
                  <td></td>
                  <td>15:04:2022</td><br>
                  <td>Good Friday</td>
                </tr>
                <tr>
                  <td></td>
                  <td>01:05:2022</td><br>
                  <td>Labour Day</td>
                </tr>
                <tr>
                  <td></td>
                  <td>15:08:2022</td><br>
                  <td>Independence Day</td>
                </tr>
              </table>
            </div>
          </div>


          <!-- <table style="margin: 4% 0% 2% 0%">
              <tr>
                <td>
                  <button type="submit" style="margin-left: 10px;" id='primarybtn' (click)="onUpload()"
                    class="btn btn-light">
                    <mat-icon>upload</mat-icon>
                    Upload
                  </button>
                  <button type="button" class="btn btn-light" id="secondarybtn" data-dismiss="modal"
                    (click)="resetform()" #closefilepopup style="margin-left: 10px;">cancel</button>
                </td>
              </tr>
            </table> -->
        </form>
      </div>
    </div>
  </div>
</div>