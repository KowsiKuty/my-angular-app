<div id="tamain" >


<h3 style="margin-left: 44px;margin-top: 30px; font-size: 22px;font-weight: 500;">
  eClaim Expense Approval
</h3>
<hr>
<div  style="margin-left: 50px;margin-top: 2%; width: 100%;">
  <h3 style="color:rgb(0, 0, 0);font-size: 18px;font-weight: 500px;margin-top: 1%;">
    Tour Details
  </h3>
  <form [formGroup]="expenceform">
    <div>

      <table>
        <tr>
          <td>
            <mat-form-field style="width: 175px;">
              <mat-label>Tour No</mat-label>
              <input matInput placeholder="Tour No" name="requestno" [value]="reqtourno" [disabled]="true"
                autocomplete="off" required>
            </mat-form-field>
          </td>
          <td>
            <mat-form-field style="width:250px;padding-left: 50px;">
              <mat-label>Tour Reason</mat-label>
              <input matInput placeholder="Tour Reason" name="reason" [value]="reason" [disabled]="true"
                autocomplete="off" required>
            </mat-form-field>
          </td>
          <td>
            <mat-form-field style="width: 175px;padding-left: 50px;">
              <mat-label>Start Date</mat-label>
              <input matInput placeholder="Start Date" name="startdate" [value]="startdate" [disabled]="true"
                autocomplete="off" required>
            </mat-form-field>
          </td>
          <td>
            <mat-form-field style="width: 175px;margin-left: 50px;">
              <mat-label>End Date</mat-label>
              <input [disabled]='true' matInput placeholder="End Date" name="enddate" [value]="enddate"
                autocomplete="off" required>
            </mat-form-field>
          </td>
          <td *ngIf= "this.statusId == 3" style="padding-left:60px;">
            <span (click)="pdfapuserdownload()" style="cursor:pointer">
              <mat-icon matTooltip="APUser PDF" style="font-size: 40px;"> insert_drive_file</mat-icon>
            </span>
          </td>
        </tr>
        <h3 style="color:rgb(0, 0, 0);font-size: 18px;font-weight: 500px;margin-top: 2%;">
          Employee Details
        </h3>
        <tr>
          <td>
            <mat-form-field style="width: 175px;">
              <mat-label>Employee Code</mat-label>
              <input matInput placeholder="Employee Code" name="code" [value]="employee_code" [disabled]="true"
                autocomplete="off" required>
            </mat-form-field>
          </td>
          <td>
            <mat-form-field style="width: 175px;padding-left: 50px;">
              <mat-label>Employee Name</mat-label>
              <input matInput placeholder="Employee Name" name="Name" [value]="employee_name" [disabled]="true"
                autocomplete="off" required>
            </mat-form-field>
          </td>
          <td>
            <mat-form-field style="width: 175px;padding-left: 50px;">
              <mat-label>Designation</mat-label>
              <input matInput placeholder="Designation" name="designation" [value]="empdesignation" [disabled]="true"
                autocomplete="off" required>
            </mat-form-field>
          </td>
          <td>
            <mat-form-field style="width: 175px;margin-left: 50px;">
              <mat-label>Employee Grade</mat-label>
              <input disabled matInput placeholder="Employee Grade" name="empgrade" [value]="empgrade"
                autocomplete="off" required>
            </mat-form-field>
          </td>
          <td *ngIf="applevel == 2">
            <mat-form-field style="width: 175px;margin-left: 50px;">
              <mat-label>Employee Branch</mat-label>
              <input  matInput disabled autocomplete="off" placeholder="Employee Branch" name="emp_branch_name_code" [value]="emp_branch_name_code">
            </mat-form-field>
          </td>
          <td>
            <button type="button" class="btn btn-outline-success" data-toggle="modal" data-target="#ccbsModal"
              style="border-radius:40px; margin-left: 50px;">
              CCBS</button>
          </td>
          <td *ngIf="statusId == 3" style="padding-left:30px;">  
            <mat-form-field style="width: 175px;">
              <mat-label>CR NO</mat-label>
              <fieldset [disabled]="true">
                <input matInput placeholder="CR No" [value]="crnno" autocomplete="off">
              </fieldset>
            </mat-form-field>
          </td>
        </tr>



      </table>
      <div class="table-responsive" style="width:100%;margin-top: 1%; overflow-x: hidden;">
        <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
          <thead class="table_header" style="text-align: left;">
            <tr>
              <th>S.No</th>
              <th>Expense Type</th>
              <th>Physical Submission</th>
              <th>Eligible Amount</th>
              <th>Claim Amount</th>
              <th *ngIf="applevel==2">Approved Amount</th>
              <th>Request Comments</th>
              <th>Expense Details</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let getclaim of getclaimrequest;index as i">
              <td>{{i+1}}</td>
              <!-- <td>{{getclaim.expenseid}}</td> -->
              <td>
                <div *ngIf="getclaim.expenseid == 1">Travelling Expense</div>
                <div *ngIf="getclaim.expenseid == 2">Daily Diem</div>
                <div *ngIf="getclaim.expenseid == 3">Incidental Expenses</div>
                <div *ngIf="getclaim.expenseid == 4">Local Conveyance</div>
                <div *ngIf="getclaim.expenseid == 5">Lodging</div>
                <div *ngIf="getclaim.expenseid == 6">Miscellaneous Charges</div>
                <div *ngIf="getclaim.expenseid == 7">Packaging Freight</div>
                <div *ngIf="getclaim.expenseid == 8">Local Deputation</div>
                <div *ngIf="getclaim.expenseid == 9">Own Vehicle On Duty(IBA)</div>
              </td>
              <td style="text-align: center;"><b>{{getclaim.type==1?"Yes":"No"}}</b></td>
              <td>{{getclaim.eligibleamount | currency:"INR"}}</td>
              <td>{{getclaim.claimedamount | currency:"INR"}}</td>
              <td *ngIf="applevel ==2">{{getclaim.approvedamount | currency:"INR"}}</td>
              <td>{{getclaim.requestercomment}}</td>

              <td *ngIf="!(this.applevel == 1)"><button mat-icon-button matTooltip=" Edit" class="iconbutton" color="primary"
                  (click)="expenseEdit(getclaim)">

                  <mat-icon style="color:green;" aria-label="Edit">edit</mat-icon>
                </button>


              </td>
              <td *ngIf="this.applevel == 1"><button mat-icon-button matTooltip="View" class="iconbutton" color="primary"
                (click)="expenseEdit(getclaim)">

                <mat-icon style="color: green;"class="material-icons"> visibility</mat-icon>
              </button>


            </td>
          </tbody>
          <tr>

            <th class="totaldisplay" colspan="3"></th>
            <td>Total Eligible Amount:{{eligibleamt | currency:"INR"}}</td>
            <td>Total Claim Amount:{{claimedamt | currency:"INR"}}</td>
            <td *ngIf="applevel==2">
              Total Approved Amount :{{approvedamt | currency:"INR"}}
            </td>
            <td>
              <button type="button" class="btn btn-outline-primary"  *ngIf="showeditfile"
                style="border-radius: 40px;margin-left: 10px;" data-toggle="modal" data-target="#showattachmentpopup">
                Attachment</button>
            </td>
            <td><h3 *ngIf="this.applevel == 1">File Count:{{this.total_filecount}}</h3>
               <h3 *ngIf="this.applevel == 2">File Count:{{this.tour_and_expence_filecount}}</h3></td>
            <!-- <th class="totaldisplay" colspan="5"></th> -->
          </tr>
        </table>
      </div>
      <td>

        <!-- <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels"
          aria-hidden="true" id="ccbsModal">
          <div class="modal-dialog modal-xl" style="width: 70%;">
            <div class="modal-content">
              <div class="modal-header" style="background:#DDEFDD">
                <h2 class="modal-title" style="width: 250px;margin-left: 20px;">CCBS (Tour No) : {{this.reqtourno}} </h2>
                <div style="margin-left:39%">
                  <h2 *ngIf="applevel==2" class="modal-title" style="width: 250px;margin-left: 50px;">Approve Amount :
                    {{approvedamt}}</h2>
                    <h2 *ngIf="applevel==1" class="modal-title" style="width: 250px;margin-left: 50px;">Requested Amount:
                      {{claimedamt}}</h2>
                </div>
                <button type="button" #closebutton class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>

              <div style="margin-left: 40px;margin-right: 40px;margin-top: 4%; width: 100%; margin-bottom: 2%;">
                
                <fieldset [disabled]="true">
                  <table>

                    <tr *ngFor="let dt2 of ccbslist;let ind=index;">
                      <td>
                        <mat-label>BS</mat-label> <br>
                        <mat-form-field floatLabel="never" style="width: 250px;">
                          
                          <input type="text" #bsid placeholder="Select BS" matInput [value]="dt2.bs_data.name">
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-label style="margin-left:20px">CC</mat-label> <br>
                        <mat-form-field floatLabel="never" style="width: 250px;margin-left: 20px;">
                          
                          <input type="text" placeholder="Select CC" matInput [value]="dt2.cc_data.name">
                        </mat-form-field>
                      </td>

                      <td>
                        <mat-label style="margin-left:20px">Amount</mat-label><br>
                        <mat-form-field floatLabel="never" style="width: 175px;margin-left: 20px;">
                          
                          <input matInput placeholder="Amount" [value]="dt2.amount" autocomplete="off" required>
                           {{this.value1}}
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-label style="margin-left:20px">Percentage</mat-label><br>
                        <mat-form-field floatLabel="never" style="width: 175px;margin-left: 20px;">
                          
                          <input matInput placeholder="Percentage" maxlength="3" [value]="dt2.percentage"
                            autocomplete="off" required>
                           {{this.value}} 
                        </mat-form-field>
                      </td>

                    </tr>
                  </table>
                </fieldset>
                  <div class="col-md-11 text-center" style="margin-bottom: 4%;">

                    <button type="button" data-dismiss="modal" class="btn btn-outline-secondary"
                      style="border-radius: 40px;margin-left: 20px;">Close</button>

                  </div>
                
              </div>

            </div>

          </div>
        </div> -->
        <div class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog"
                  aria-labelledby="exampleModalLabels" aria-hidden="true" id="ccbsModal">
                  <div class="modal-dialog modal-xl" style="width: 80%;">
                    <div class="modal-content">
                      <div class="modal-header" style="background:#DDEFDD;">
                        <h2>CCBS (Tour No) : {{this.reqtourno}}
                        </h2>

                        <div style="width:77%">
                          <h2 *ngIf="applevel==2" class="modal-title" style="width: 250px;margin-left: 50px;">Approve Amount :
                            {{approvedamt}}</h2>
                            <h2 *ngIf="applevel==1" class="modal-title" style="width: 250px;margin-left: 50px;">Requested Amount:
                              {{claimedamt}}</h2>
                        </div>


                        <button type="button" #closebutton class="close" data-dismiss="modal" aria-label="Close" (click)="close()">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>

                      <div formArrayName='ccbs' style="margin-top: 4%; margin-bottom: 2%;">
                        <fieldset [disabled]="itemdisable">
                          <table>

                            <tr *ngFor="let dt2 of expenceform.controls.ccbs['controls'];let ind=index;"
                              [formGroupName]="ind">
                              <td>

                                <mat-form-field style="width: 250px;margin-left: 20px;">
                                  <mat-label>BS<label style="color: red;">*</label></mat-label>
                                  <input [readonly]="ccbsreadonly(dt2)" type="text" #bsid
                                    placeholder="Select BS" matInput [matAutocomplete]="bsss" (keypress)="checkind(ind) && omit_special_char($event)"
                                    formControlName="bsid">
                                  <mat-autocomplete #bssid #bsss="matAutocomplete" (opened)="bsidget()"
                                    [displayWith]="bsview">
                                    <mat-option *ngFor="let bsid of bisinesslist" (click)="getBS(bsid.id,ind)"
                                      [value]="bsid">
                                      {{bsid.code}}-{{bsid.name}}
                                    </mat-option>
                                  </mat-autocomplete>
                                </mat-form-field>
                              </td>
                              <td>

                                <mat-form-field style="width: 250px;margin-left: 20px;">
                                  <mat-label>CC<label style="color: red;">*</label></mat-label>
                                  <input [readonly]="ccbsreadonly(dt2)" type="text" placeholder="Select CC"
                                    matInput (keypress)="checkccind(ind) && omit_special_char($event)" [matAutocomplete]="csss"
                                    formControlName="ccid">
                                  <mat-autocomplete #csss="matAutocomplete" [displayWith]="csview">
                                    <mat-option *ngFor="let ccid of costlist" [value]="ccid">
                                      {{ccid.code}}-{{ccid.name}}
                                    </mat-option>
                                  </mat-autocomplete>
                                </mat-form-field>
                              </td>

                              <td>
                                <mat-form-field style="width: 175px;margin-left: 20px;">
                                  <mat-label>Claim Amount<label style="color: red;">*</label></mat-label>
                                  <input matInput placeholder="Amount" [readonly]="ccbsreadonly(dt2)"
                                    (input)="ccbs_validation(ind,'amount')" formControlName="amount"
                                    (blur)="percen_calc($event,ind)" appNumberOnly autocomplete="off">
                                  <!-- {{this.value1}} -->
                                </mat-form-field>
                              </td>
                              <td>
                                <mat-form-field style="width: 175px;margin-left: 20px;">
                                  <mat-label>Percentage<label style="color: red;">*</label></mat-label>
                                  <input matInput placeholder="Percentage" [readonly]="ccbsreadonly(dt2)" maxlength="4"
                                    appNumberOnly formControlName="percentage" (input)="ccbs_validation(ind)" style="text-align:right"
                                    (blur)="amount_calc($event,ind)" pattern="^(?:100|[1-9][0-9]?|[1-9])$">
                                  <!-- {{this.value}} -->
                                </mat-form-field>
                              </td>
                              <td>
                                <div style="width: 175px;margin-left: 35px;">
                                  <button type="button" class="btn btn-outline-danger"
                                    [disabled]='ccbsreadonly(dt2)|| applevel ==1 || itemdisable || expenceform.value.ccbs.length == 1'
                                    (click)="removeSection2(ind,dt2)" style="border-radius:40px;"><span
                                      class="fa fa-trash"></span>
                                  </button>
                                  <button *ngIf="ind ==  expenceform.value?.ccbs?.length-1" type="button"
                                    class="btn btn-outline-success"
                                    [disabled]=' applevel ==1 || itemdisable || ccbsbtn() >= 100'
                                    (click)="addccbs()" style="border-radius:40px;margin-left:10%"><span
                                      class="fa fa-plus"></span>
                                  </button>
                                </div>
                              </td>
                            </tr>
                          </table>
                        </fieldset>
                        <div class="col-md-11 text-center" style="margin-bottom: 4%;">

                          <button type="submit" style="border-radius: 40px;margin-left: 10px;" (click)="submitccbs1()"
                            [disabled]="itemdisable || ccbsbtn() != 100" class="btn btn-outline-success">Submit</button>

                          <button type="button" data-dismiss="modal" class="btn btn-outline-secondary"
                            style="border-radius: 40px;margin-left: 20px;" (click)="close()" >Close</button>

                        </div>

                      </div>

                    </div>

                  </div>
                </div>
      </td>
      <div>
        <table align="center" style="margin-top: 3%;" *ngIf="applevel==2">
          <tr>
          
            <div style="border: 1px solid black;">
              <div style="margin: 10px 10px 10px 10px;">
                <td>
                  Total Claimed Amount : {{claimedamt | currency:"INR"}}
                </td>
                <td style="padding-left: 50px;">
                  Advance to be Adjusted : {{sumadvance | currency:"INR"}}

                </td>

                <br>

          <tr>
            <td>

            </td>
            <td>
              Total Approved Amount : {{approvedamt | currency:"INR"}}
            </td>
            <td style="padding-left: 50px; padding-top: 4px;">
              <h3 style="color:blue;"> Net Payable : {{netpay | currency:"INR"}}</h3>
            </td>
          </tr>
          <br>
          <tr>
            <td style="padding-left: 145px; padding-top: 4px;">
              <button (click)="check_advance()" type="button" class="btn btn-outline-primary"  *ngIf="showeditfile"
                style="border-radius:40px; margin-left: 20px;" data-toggle="modal" data-target="#CheckAdvance">
                Check For Advance</button>
            </td>
          </tr>
      </div>
    </div>
    </table>
</div>
<br><br>

      <h2 style="font-weight:bold;">Credit Details </h2>

      <div class="table-responsive" style="width:100%;margin-top: 1%;">
        <form [formGroup]="expenceformview">
          <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
              <thead class="table_header" style="text-align: center;">
                  <tr>
                          <th>S.No</th>
                          <th>Paymode<span style="color:red">*</span></th>
                          <th>Account Detail/GL<span style="color:red">*</span></th>
                          <th>Ref No</th>
                          <th>Bank Name</th>
                          <th>Branch Name</th>
                          <th>IFSC Code</th>
                          <th>Beneficiary Name</th>
                          <th>GL No</th>
                          <th>Amount<span style="color:red">*</span></th>
                          
                      </tr>
                  </thead>
                  <tbody>
                      <ng-container formArrayName="creditdtl"
                      *ngFor="let section of getCreditSections(expenceformview); let creditindex = index">
                      <tr [formGroupName]="creditindex">
                          <td>{{creditindex+1}}</td>
                          <td>
                              <mat-form-field (click)="getPaymode(creditindex)" style="width:100px">
  
                              <mat-label>Paymode</mat-label>
                              <input #paymodeInput placeholder="Paymode" matInput formControlName="paymode_id" readonly>
                              <!-- <mat-autocomplete [panelWidth]="200" #paymode="matAutocomplete" [displayWith]="displayPaymode">
                                  <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                  </mat-option>
                                  <ng-container *ngIf="!isLoading">
                                      <mat-option *ngFor="let pay of PaymodeList" [value]="pay"> -->
                                      <!-- (click)="CreditDessss(pay,creditindex)" > -->
                                     
                                          <!-- {{pay.name}} -->
                                      <!-- </mat-option>
                                  </ng-container>
                              </mat-autocomplete> -->
                          </mat-form-field>
                          
                          </td>
                          <td >
                              <div>
                              <mat-form-field>
                                  <mat-label>Acc no</mat-label>
                                  <input matInput placeholder="Account No" formControlName="accno"
                                  autocomplete="off" readonly>
                                
                              </mat-form-field>
                              </div>
                             
                          </td>                             

  
                          <td>
                              <mat-form-field style="width:150px">
  
                                  <input matInput placeholder="Ref No" formControlName="refno"
                                      autocomplete="off" readonly>
                              </mat-form-field>
                          </td>
  
  
  
                          <td>
                              <mat-form-field>
  
                                  <input matInput placeholder="Bank Name" formControlName="bank"
                                      autocomplete="off" readonly>
                              </mat-form-field>
  
                          </td>
  
                          <td>
                              <mat-form-field style="width:130px">
  
                                  <input matInput placeholder="Branch Name" formControlName="branch"
                                      autocomplete="off" readonly>
                              </mat-form-field>
                          </td>
  
                          <td>
                              <mat-form-field style="width:120px">
  
                                  <input matInput placeholder="IFSC code" formControlName="ifsccode"
                                      autocomplete="off" readonly>
                              </mat-form-field>
                          </td>
  
  
                          <td>
                              <mat-form-field style="width:180px">
  
                                  <input matInput placeholder="Beneficiary" formControlName="benificiary"
                                      autocomplete="off" readonly>
                              </mat-form-field>
                          </td>
                         
                          <td>
                              <mat-form-field
                                  style="width: 150px;">
  
                                  <input matInput placeholder="Credit GL" formControlName="glno"
                                      autocomplete="off" readonly>
                                      
                              </mat-form-field>
                             
                             
                          </td>
                          <td>
                              <mat-form-field
                                  style="width: 100px;">
  
                                  <input matInput placeholder="Amount" formControlName="amount" readonly style="text-align: right;">
                              </mat-form-field>
                          </td>
                         
                          
                          
  
  
                      </tr>
                     </ng-container>
                  </tbody>
  
                      <tr>
                          <th class="totaldisplay" colspan="9"
                              style="text-align: right">
                              Net Amount:</th>
                          <td style="text-align: end;">{{cdtsum | currency:'INR'}}</td>
                      </tr>
                      <!-- <tr>
                          <td colspan="7">
                              <button type="button" style="border-radius:40px;;margin-left: 2375px;" 
                                  class="btn btn-outline-primary" (click)="submitcredit()" [disabled]="creditsaved">
                                      Save</button>
                          </td>
                      </tr> -->
       </table>
      </form>
      </div>
      

<br><br>
<div class="col-md-12" style="padding:0px" > <!--*ngIf="(applevel == 2) && changeapprover == false "-->
  <h4 style="color:rgb(0, 0, 0);font-size: 18px;font-weight: 500px;">Approver Attachment</h4>
  <div class="form-group">
    <tr>
      <!-- <input type="file" name="file" style="width:250px;" (change)="fileProgress($event)" /> -->
      <td>
        <input type="file" #fileInput id="uploadFile" class="choose-file" style="width:250px;margin-top: 10px;"
          (change)="onFiles_Selected($event)" name="images" multiple="multiple" />
      </td>

      <td style="margin-left: 40px;">
        File Count: {{selectedFiles.length}}
      </td>



      <td>
        <button type="button" class="btn btn-outline-primary" style="border-radius: 40px;margin-left: 10px;"
          data-toggle="modal" data-target="#attachmentpopup" (click)="getselectedFiles()">
          Attachment</button>

      </td>
     
      <td>
      
</td>

</div>

</div>

<!-- <div *ngIf="(applevel == 1 || applevel == 2) && changeapprover == false ">
  <mat-form-field style="width: 270px;">
    <mat-label>Action</mat-label>
    <mat-select formControlName='action' [disabled]="invalidpermission">
      <mat-option *ngFor="let expencetypee of action" (click)="actionchange()" [value]="expencetypee">
        {{expencetypee}}
      </mat-option>
    </mat-select>
  </mat-form-field>

</div> -->
<br>
<br>
<br>

<div *ngIf="actionapprove && !invalidpermission && !actionkey">

  <h3 style="color:rgb(0, 0, 0);font-size: 18px;font-weight: 500px;margin-top: 2%;">
    To Approve
  </h3>
  <fieldset [disabled]="invalidpermission" style="margin-top:-1%">
    <mat-form-field class="tabranch">
      <mat-label>Branch<label style="color: red;">*</label></mat-label>
      <input type="search" #inputassetid placeholder="Select Branch" matInput [matAutocomplete]="conoffice"
        [attr.disabled]="empbrid == true ? true : null" formControlName="empbranchid"><button mat-button matSuffix
        (click)="brclear()" mat-icon-button aria-label="Clear">
        <mat-icon>close</mat-icon>
      </button>
  
      <mat-autocomplete #assetid #conoffice="matAutocomplete" (opened)="autocompleteid()">
        <mat-option *ngFor="let branch of branchlist" (click)="selectBranch(branch.id)"
          [value]="'('+(branch.code)+') '+(branch.name)">
          ({{branch.code}}) {{branch.name}}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>

    <mat-form-field class="taemployee">
      <mat-label>Employee<label style="color: red;">*</label></mat-label>
      <input type="search" placeholder="Select Employee" matInput [matAutocomplete]="empc" #empinput
        [attr.disabled]="apvl == true ? true : null" formControlName="approval">
      <button mat-button matSuffix (click)="empclear()" mat-icon-button aria-label="Clear">
        <mat-icon>close</mat-icon>
      </button>
      <mat-autocomplete #empid #empc="matAutocomplete" [displayWith]="displayFn" (opened)="empScroll()">
        <mat-option *ngFor="let emp of employeelist" [value]="emp">
          ({{emp.code}}) {{emp.full_name}}-{{emp.employee_designation}}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>

    <!-- <mat-form-field style="width: 175px;margin-left: 50px;">
                          <mat-label>Employee</mat-label>
                          <input matInput placeholder="Employee" [(ngModel)]="tourmodel.approval" name="approval" autocomplete="off" required>
                          </mat-form-field> -->


    <mat-form-field class="tatextarea">
      <mat-label>Remarks<label style="color: red;">*</label></mat-label>
      <textarea cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1" cdkAutosizeMaxRows="5"
        matInput placeholder="Remarks" (keypress)="omit_special_char($event)" (change)="remarksupdate($event)"
        formControlName="appcomment" autocomplete="off" maxlength="64"></textarea>
    </mat-form-field>

  </fieldset>
    <button [disabled]="submitvaluecheck()" type="submit"
      style="border-radius: 40px;margin-left: 40%;" class="btn btn-outline-success"
      (click)="approvefirst()">Submit</button>

      <button type="button" (click)="actionback()" class="btn btn-outline-success"
    style="border-radius: 40px;margin-left: 20px;">Back</button>
  
</div>
<div>
  <div class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
    id="showattachmentpopup">
    <div class="modal-dialog modal-xl " style="width: 70%;">
      <div class="modal-content">
        <div class="modal-header" style="background:rgba(23, 204, 23, 0.288);">
          <h2 class="modal-title" style="color:black ;text-align: center;">Expence Attachment View</h2>
          <button type="button"  data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>

        <div  style="margin-left: 50px;margin-right: 80%;margin-top: 2%; width: 80%;">
          <div class="container">
            <div class="row">
              <div class="table-responsive">
                <h2 style="margin-left: 30px;color:black">Tour Expence Maker Files</h2>
                <table class="table table-bordered" fixed-header
                  style="width: 95%;margin-top: 10px;margin-left:30px;">
                  <thead class="table_header" style="text-align: left;">
                    <tr>
                      <th style="text-align: center;">S.No</th>
                      <th style="text-align: center;">File Name</th>
                      <th style="text-align: center;">View</th>
                      <th style="text-align: center;">Download</th>


                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let attach of tourexpence_makerlist; index as i">
                      <td style="text-align: center;">{{i+1}}</td>
                      <td style="text-align: center;">{{attach?.file_name}}</td>
                      <td style="text-align: center;color:blue;">
                        <div matTooltip="View" class="fa fa-external-link"  style="color:blue;font-size: 24px;margin-left: 20px;" aria-hidden="true" data-target="#exampleModal1"
                          data-toggle="modal" (click)="commentPopup(attach?.id,attach?.file_name )">

                          <!-- (click)="getimages()" -->
                          <!-- getimagedownload(attach.url,attach.file_name)"    -->
                        </div>
                      </td>
                      <!-- (click)="openpdfimage(attach.url)" -->
                      <td style="text-align: center;">
                        <button class="btn btn-outline-primary" type="submit"
                          style="border-radius:40px;margin-left: 15px;" color="primary"
                          (click)="file_download(attach?.id,attach?.file_name)">
                          <i matTooltip="Download" class="fa fa-download" aria-hidden="true"></i>
                        </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <br>
                <div>
                  <h2 style="margin-left:30px;color:black">Tour Expence Approver Files</h2>
                  <table class="table table-bordered" fixed-header style="width: 95%;margin-left:30px;">
                    <thead class="table_header text-align:left">
                      <tr>
                        <th style="text-align: center;">S.No</th>
                        <th style="text-align: center;">File Name</th>
                        <th style="text-align: center;">View</th>
                        <th style="text-align: center;">Download</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let attach of tourexpence_applist; index as i">
                        <td style="text-align: center;">{{i+1}}</td>
                        <td style="text-align: center;">{{attach?.file_name}}</td>
                        <td style="text-align: center;color:blue;">
                          <div matTooltip="View" class="fa fa-external-link"  style="color:blue;font-size: 24px;margin-left: 20px;" aria-hidden="true" data-target="#exampleModal1"
                            data-toggle="modal" (click)="commentPopup(attach?.id,attach?.file_name )">
  
                           
                          </div>
                        </td>
                        <td style="text-align: center;">
                          <button class="btn btn-outline-primary" type="submit"
                            style="border-radius:40px;margin-left: 15px;" color="primary"
                            (click)="file_download(attach?.id,attach?.file_name)">
                            <i matTooltip="Download" class="fa fa-download" aria-hidden="true"></i>
                          </button>
                        </td>
                      </tr>
                    </tbody>


                  </table>

                </div>
                <div *ngIf="this.applevel==2">
                  <h2 style="margin-left:30px;color:black">Tour Maker  Files</h2>
                  <table class="table table-bordered" fixed-header style="width: 95%;margin-left:30px;">
                    <thead class="table_header text-align:left">
                      <tr>
                        <th style="text-align: center;">S.No</th>
                        <th style="text-align: center;">File Name</th>
                        <th style="text-align: center;">View</th>
                        <th style="text-align: center;">Download</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let attach of tour_makerlist; index as i">
                        <td style="text-align: center;">{{i+1}}</td>
                        <td style="text-align: center;">{{attach?.file_name}}</td>
                        <td style="text-align: center;color:blue;">
                          <div matTooltip="View" class="fa fa-external-link"  style="color:blue;font-size: 24px;margin-left: 20px;" aria-hidden="true" data-target="#exampleModal1"
                            data-toggle="modal" (click)="commentPopup(attach?.id,attach?.file_name )">
                          </div>
                        </td>
                        <td style="text-align: center;">
                          <button class="btn btn-outline-primary" type="submit"
                            style="border-radius:40px;margin-left: 15px;" color="primary"
                            (click)="file_download(attach?.id,attach?.file_name)">
                            <i matTooltip="Download" class="fa fa-download" aria-hidden="true"></i>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div *ngIf="this.applevel==2">
                  <h2 style="margin-left:30px;color:black">Tour Approver Files</h2>
                  <table class="table table-bordered" fixed-header style="width: 95%;margin-left:30px;">
                    <thead class="table_header text-align:left">
                      <tr>
                        <th style="text-align: center;">S.No</th>
                        <th style="text-align: center;">File Name</th>
                        <th style="text-align: center;">View</th>
                        <th style="text-align: center;">Download</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let attach of tour_app_list; index as i">
                        <td style="text-align: center;">{{i+1}}</td>
                        <td style="text-align: center;">{{attach?.file_name}}</td>
                        <td style="text-align: center;color:blue;">
                          <div matTooltip="View" class="fa fa-external-link"  style="color:blue;font-size: 24px;margin-left: 20px;" aria-hidden="true" data-target="#exampleModal1"
                            data-toggle="modal" (click)="commentPopup(attach?.id,attach?.file_name )">                           
                          </div>
                        </td>
                        <td style="text-align: center;">
                          <button class="btn btn-outline-primary" type="submit"
                            style="border-radius:40px;margin-left: 15px;" color="primary"
                            (click)="file_download(attach?.id,attach?.file_name)">
                            <i matTooltip="Download" class="fa fa-download" aria-hidden="true"></i>
                          </button>
                        </td>
                      </tr>
                    </tbody>


                  </table>

                </div>



              </div>
            </div>
          </div>


        </div>
      </div>
    </div>
  </div>
</div>



<br>
<div *ngIf="show_approvebtn" class="col-md-12 text-center" style="margin-bottom:2%;margin-top: -1%;">
  <!-- <h3 style="color:rgb(0, 0, 0);font-size: 18px;font-weight: 500px;margin-top: 2%;">
          To Reject/Return
        </h3> -->
  <mat-form-field style="width: 300px;" *ngIf="(actionreject || actionreturn || amtapprove) && !actionapprove && !actionkey">
    <mat-label>Reason<label style="color: red;">*</label></mat-label>
    <input matInput type="text" placeholder="Reason" [disabled]="invalidpermission" [value]='reasonchange'
      (keypress)="omit_special_char($event)" (change)="reasonupdate($event)">
  </mat-form-field>

  <button type="submit" *ngIf="(applevel == 1 || applevel == 2) && changeapprover == false && actionkey" style="border-radius: 40px;margin-left: 30px;"
  class="btn btn-outline-success"[disabled]="reapprove" (click)="actionchange('APPROVE')">Approve</button>

  <button type="submit"
    *ngIf="(applevel == 1 || applevel == 2) && changeapprover == false && actionkey"
    [disabled]="reapprove" style="border-radius: 40px;margin-left: 30px;" class="btn btn-outline-danger"
    (click)="actionchange('REJECT')">Reject</button>
  
  <button type="submit"
  *ngIf="(applevel == 1 || applevel == 2) && changeapprover == false && actionkey"
  [disabled]="reapprove" style="border-radius: 40px;margin-left: 30px;" class="btn btn-outline-secondary"
  (click)="actionchange('RETURN')">Return</button>

  <button type="submit"
    *ngIf="(applevel == 1 || applevel == 2) && changeapprover == false && actionkey"
    [disabled]="reapprove" style="border-radius: 40px;margin-left: 30px;" class="btn btn-outline-info"
    (click)="actionchange('MOVE TO OTHER')">Move To Other</button>

  <button type="submit" *ngIf="applevel==2 && amtapprove && !actionkey"
    style="border-radius: 40px;margin-left: 30px;" class="btn btn-outline-success" [disabled]="reapprove"
    (click)="approveclaim()">Approve</button>

  <button type="submit"
    *ngIf="actionreject && !actionkey"
    [disabled]="reapprove" style="border-radius: 40px;margin-left: 30px;" class="btn btn-outline-danger"
    (click)="rejectclaim()">Reject</button>

  <button type="submit"
    *ngIf="actionreturn && !actionkey"
    [disabled]="reapprove" style="border-radius: 40px;margin-left: 30px;" class="btn btn-outline-secondary"
    (click)="returnclaim()">Return</button>

  <button type="button" *ngIf="!actionapprove && !actionkey" (click)="actionback()" class="btn btn-outline-success"
  style="border-radius: 40px;margin-left: 20px;">Back</button>

  <button type="button" *ngIf="!actionapprove && actionkey" (click)="back()" class="btn btn-outline-success"
    style="border-radius: 40px;margin-left: 20px;">Back</button>


</div>


<div *ngIf="advance_statusid != -1" class="table-responsive" style="width:70%;margin-top: 1%; overflow-x: hidden;">
  <h2 style="color:rgb(0, 0, 0);font-size: 18px;font-weight: 500px;">Advance Adjust</h2>
  <table class="table table-bordered" fixed-header>
    <thead class="table_header" style="text-align: left;">
      <tr>
        <th>S.No</th>
        <th>CRN No</th>
        <th>Date</th>
        <th>Amount</th>
        <th>Balance</th>
      </tr>
    </thead>
    <tbody>
      <tr
        *ngFor="let advance of advancelist|paginate: { id:'advpagination',itemsPerPage: pageadsize, currentPage: presentpage }; index as i">

        <td>

        </td>
        <td>

        </td>
        <td>

        </td>
        <td>

        </td>
        <td>

        </td>
      </tr>
      <tr>
        <th colspan="7">
          <div class="pagination" style="text-align: center;">
            <pagination-controls responsive="true" id="advpagination" (pageChange)="presentpage = $event">
            </pagination-controls>
          </div>
        </th>
      </tr>
    </tbody>
  </table>
</div>
<h3 style="color:rgb(0, 0, 0);font-size: 18px;font-weight: 500px;">
  Approval Flow
</h3>
<div class="table-responsive" style="width:100%;margin-top: 1%; margin-bottom: 2%; overflow-x: hidden;">
  <table class="table table-bordered" fixed-header style="width: 80%;margin-top: 10px;">
    <thead class="table_header" style="text-align: left;">
      <tr>
        <th>S.No</th>
        <th>Date</th>
        <th>Type </th>
        <th>Employee</th>
        <th>Raised By</th>

        <th>Remarks</th>
        <th>Status</th>

      </tr>
    </thead>

    <tbody>
    <tbody>
      <tr
        *ngFor="let advanceapprove of getAdvanceapproveList|paginate: { itemsPerPage: pageSize, currentPage: p }; index as i">
        <td scope="row" style="vertical-align: middle;"> {{((p-1)*pageSize)+i+1}}</td>
        <td>{{advanceapprove.approveddate| date:'dd-MMM-yyyy'}}</td>
        <td>{{advanceapprove.apptype}}</td>
        <td>({{advanceapprove.approver_code}}) {{advanceapprove.approvedby}}</td>
        <td>({{advanceapprove.onbehalfof.code}}) {{advanceapprove.onbehalfof.full_name}}</td>

        <td style="overflow-wrap:anywhere">{{advanceapprove.comment}}</td>
        <td>
          <p *ngIf="advanceapprove.status == 1">
            REQUESTED</p>
          <p *ngIf="advanceapprove.status == 2">
            PENDING</p>
          <p *ngIf="advanceapprove.status == 3">
            APPROVED</p>
          <p *ngIf="advanceapprove.status == 4">
            REJECTED</p>
          <p *ngIf="advanceapprove.status == 5">
            RETURNED</p>
          <p *ngIf="advanceapprove.status == 6"> Tour Advance Submitted</p>
          <p *ngIf="advanceapprove.status == 17">
            Tour Advance Cancel Submitted</p>


        </td>
    </tbody>
    <tr>
      <th colspan="7">
        <div class="pagination">
          <pagination-controls responsive="true" (pageChange)="p = $event"></pagination-controls>
        </div>
      </th>
    </tr>
  </table>
</div>
</div>

<div class="modal fade" id="exampleModal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content" style="width:fit-content">
      <div class="modal-header">

        <h3 class="modal-title w-100" id="exampleModalLabel">
          <strong> Attachment View</strong>
        </h3>

        <!-- <h4> To delete the current file click here</h4> -->
        <!-- <button mat-icon-button type="button">
          <mat-icon style="color: gray;" aria-label="Edit" (click)="fileDelete()">
            delete</mat-icon>
        </button> -->
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">
            Ã—
          </span>
        </button>
      </div>


      <div class="modal-body" style="width:700px">
        <div *ngIf='this.fileextension =="pdf"'>
          <pdf-viewer [src]="jpgUrls" [original-size]="false" [render-text]='false'
          [show-borders]="true" [fit-to-page]="true" [show-all]="true"
          style="display: block; height: 400px;" [fit-to-page]="true">
        </pdf-viewer>
        </div>
        <div *ngIf='this.fileextension !="pdf"'>
          <img src="{{jpgUrls}}" class="img-responsive" style="width: 100%;">
        </div>
        <div *ngIf='this.filesystem_error'>
          <p>This File is Already Downloaded. Please check downloads.</p>
        </div>



      </div>

      <div class="modal-footer">

      </div>
    </div>
  </div>
</div>
</form>
</div>
</div>
<!--  
  <pre>
      {{expenceform.value|json}}
  </pre>
     -->
     <div >
      <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
        id="showattachmentpopup_new">
        <div class="modal-dialog modal-xl " style="width:520px;">
          <div class="modal-content">
            <div class="modal-header" style="background:rgba(23, 204, 23, 0.288);">
              <h2 class="modal-title" style="color:black ;text-align: center;">Tour Attachment View</h2>
              <button type="button" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
  
            <div style="margin-left: 50px;margin-right: 80%;margin-top: 2%; width: 80%;">
              <div class="container">
                <div class="row" *ngIf="editcount > 0">
                  <div class="table-responsive">
                    <table class="table table-bordered" fixed-header
                      style="width: 95%;margin-top: 10px;margin-left:30px;overflow-x: hidden;">
                      <thead class="table_header" style="text-align: left;">
                        <tr>
                          <th style="text-align: center;">S.No</th>
                          <th style="text-align: center;">File Name</th>
                          <th style="text-align: center;">View</th>
                          <th style="text-align: center;">Download</th>
                          <th style="text-align: center;">Remove</th>
  
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let attach of attachmentlist; index as i">
                          <td style="text-align: center;">{{i+1}}</td>
                          <td style="text-align: center;">{{attach.file_name}}</td>
                          <td style="text-align: center;color:blue;">
                            <div matTooltip="View" class="fa fa-arrow-up" aria-hidden="true" data-target="#exampleModal1"
                              data-toggle="modal" (click)="commentPopup(attach.id,attach.file_name )">
  
                              <!-- (click)="getimages()" -->
                              <!-- getimagedownload(attach.url,attach.file_name)"    -->
                            </div>
                          </td>
                          <!-- (click)="openpdfimage(attach.url)" -->
                          <td style="text-align: center;">
                            <button class="btn btn-outline-primary" type="submit"
                              style="border-radius:40px;margin-left: 15px;" color="primary"
                              (click)="getimagedownload(attach.url,attach.file_name)">
                              <i matTooltip="Download" class="fa fa-download" aria-hidden="true"></i>
                            </button>
                          </td>
                          <td style="text-align: center;">
                            <button mat-icon-button type="button">
                              <mat-icon style="color: gray;" aria-label="Edit" (click)="fileDeleted(attach.id,i)">
                                delete</mat-icon>
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
  
                  </div>
                </div>
              
                <div class="row">
                  <div class="col-lg-12 col-sm-12" fxLayoutAlign="space-between"
                    *ngFor="let files of base64textString;let ind=index">
                    <button mat-icon-button type="button">
                      <mat-icon style="color: black ;font-size: 30px;" aria-label="Edit" matTooltip="Delete Below File"
                        (click)="deleteUpload(ind)">
                        delete</mat-icon>
                    </button>
                    <!-- <pdf-viewer *ngIf="filetype_check2(ind) == 1" [src]="files" [original-size]="false"
                      [render-text]='false' [show-borders]="true" [fit-to-page]="true" [show-all]="true"
                      style="display: block; height: 400px;" [fit-to-page]="true">
                    </pdf-viewer> -->
                    
                    <embed width="100%" *ngIf="filetype_check2(ind) == 1" height="100%" src="data:application/pdf;base64,{{files}}" 
                    type="application/pdf">

                    <img *ngIf="filetype_check(ind) == 1" src="{{files}}" class="img-responsive"
                      style="display: block; height: 400px;border-width: 2px;border-style: solid;">
  
  
                    <br />
                  </div>
  
                </div>
              </div>
  
            </div>
          </div>
        </div>
      </div>
    </div>
    <div>
      <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true" 
          id="attachmentpopup">
          <div class="modal-dialog modal-lg " style="width: 70%;">
              <div class="modal-content">
                  <div class="modal-header" style="background: rgba(23, 204, 23, 0.288);">
                      <h2 class="modal-title" style="color:black ;text-align: center;font-weight: bold;">Attachments</h2>
                      <button type="button" class="close" data-dismiss="modal" #closedbuttons aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                      </button>
                 </div> 
                  <div style="margin-left: 50px;margin-right: 80%;margin-top: 2%; width: 80%;">
                      <div class="container">
                          <div class="row">
                              <div class="table-responsive" style="margin-top: 1%;">
                                  <h3 style="font-weight: bold;">Currently Attached Files</h3>
                                  <table class="table table-bordered" fixed-header style="width: 99%;margin-top: 10px;">
                                      <thead class="table_header" style="text-align: left;">
                                      <tr>
                                        
                                          <th style="text-align: center;">S.No</th>
                                          <th style="text-align: center;">File Name</th>
                                          <th style="text-align: center;">View</th>
                                          <th style="text-align: center;">Delete</th>
                                      </tr>
                                      </thead>
                                      <tbody>
                                           <tr  *ngFor="let files of selectedFiles; let i = index">
                                              <td>{{i+1}}</td>
                                              <td>{{files.name}}</td>
                                              <td style="text-align: center;" >
                                                   <button class="fa fa-external-link"  title="View" aria-hidden="true" style="color:blue;font-size: 24px;margin-left: 20px;"
                                                      (click)="filepreview(files)" data-toggle="modal" mat-icon-button data-target="#my-modalpreview">
                                                    </button>
                                                  </td>
                                             <td style="text-align: center;">                                             
                                                  <button (click)="deletefileUpload(i)" mat-icon-button>
                                                      <mat-icon title="Delete" matTooltipClass="custom-tooltipnew">delete</mat-icon>
                                                 </button>
                                              </td>
                                           </tr>                                        
                                      </tbody>
                                  </table>
                                  <br>
                              </div>
                              <tr>
                                  <td>
                                      <button type="button" class="btn btn-light" style="border-radius:7px;margin-left:400px;
                                      border-color: black;background-color: white;" (click)="fileback()">Back</button>
                                  </td>
                              </tr>
                          </div>
                      </div>  
                  </div>
              </div>
          </div>
      </div>
    </div>
    <div class="modal fade" tabindex="-1"  data-backdrop="static" role="dialog" aria-labelledby="exampleModalLabels"
    aria-hidden="true" id="CheckAdvance">
    <div class="modal-dialog modal-xl " style="width: 80%;">
      <div class="modal-content">
        <div class="modal-header"  style="background: rgba(69, 239, 69, 0.288);">
          <h2 class="modal-title" style="color:black ;text-align: center;font-weight: bold;">Advance For {{reqtourno}}</h2>
          <button type="button" class="close" data-dismiss="modal" #closefile aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
    <div class="table-responsive" style="width:100%;margin-top: 1%; margin-bottom: 2%; margin-left: 100px; overflow-x: hidden;">
      <table class="table table-bordered" fixed-header style="width: 80%;margin-top: 10px;">
        <thead class="table_header" style="text-align: left;">
          <tr>
            <th>S.No</th>
            <th>CRN NO</th>
            <th>Requested Amount </th>
            <th>Approved Amount</th>
            <th>Advance Status</th>
            <th>Paid Amount</th>
    
            <th>Payment Date</th>
            <th>Payment Status</th>
    
          </tr>
        </thead>
    
        <tbody>
          <tr
            *ngFor="let advanceapprove of advance_list|paginate: { itemsPerPage: pageSize, currentPage: p }; index as i">
            <td scope="row" style="vertical-align: middle;"> {{((p-1)*pageSize)+i+1}}</td>
            <td>{{advanceapprove.crnno}}</td>
            <td>{{advanceapprove.reqamount | currency:"INR"}}</td>
            <td>{{advanceapprove.appamount | currency:"INR"}}</td>
            <td>
              <p *ngIf="advanceapprove.advance_status == 1">
                REQUESTED</p>
              <p *ngIf="advanceapprove.advance_status == 2">
                PENDING</p>
              <p *ngIf="advanceapprove.advance_status == 3">
                APPROVED</p>
              <p *ngIf="advanceapprove.advance_status == 4">
                REJECTED</p>
              <p *ngIf="advanceapprove.advance_status == 5">
                RETURNED</p>
              <p *ngIf="advanceapprove.advance_status == 6"> Tour Advance Submitted</p>
              <p *ngIf="advanceapprove.advance_status == 17">
                Tour Advance Cancel Submitted</p>
    
    
            </td>
            <td>{{advanceapprove.paid_amount | currency:"INR"}}</td>
            <td>{{advanceapprove.ap_payment_date| date:'dd-MMM-yyyy'}}</td>
            <td><p *ngIf="advanceapprove.ap_payment_status == 1">
                Paid</p>
                <p *ngIf="advanceapprove.ap_payment_status == 0">
                  Rejected</p>
                <p *ngIf="advanceapprove.ap_payment_status != 0 && advanceapprove.ap_payment_status != 1">
                  </p></td>
                </tr>
        </tbody>
        <!-- <tr>
          <th colspan="7">
            <div class="pagination">
              <pagination-controls responsive="true" (pageChange)="p = $event"></pagination-controls>
            </div>
          </th>
        </tr> -->
      </table>
      <div *ngIf="!advance_list || advance_list.length === 0" class="text-muted text-center">
        No Data available.
      </div>
    </div>
    </div>
    </div>
    </div> 

  <div *ngIf="showimageHeaderPreview" id="my-modalpreview" class="modal fade" aria-labelledby="my-modalLabel"
  aria-hidden="true" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-xl" data-dismiss="modal" style="width: 60%;height: 80%;">
      <div class="modal-content">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
          </button>
          <div class="modal-body">
              <img src="{{jpgUrls}}" class="img-responsive" style="width: 100%;">
         </div>
      </div>
  </div>
</div>



<div *ngIf="showimageHeaderPreviewPDF" id="my-modalpreview" class="modal fade" aria-labelledby="my-modalLabel"
  aria-hidden="true" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-xl">
      <div class="modal-content">
          <div class="modal-header" style="background: rgba(23, 204, 23, 0.288);">
              <h2 class="modal-title">Attachments</h2>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <pdf-viewer [src]="pdfurl" [original-size]="false" [render-text]='false' [show-borders]="true"
              [fit-to-page]="true" [show-all]="true" style="display: block; height: 600px;" [fit-to-page]="true">
          </pdf-viewer>
      </div>
  </div>
</div>