
<main>
    <h3 style="margin-left:35px;margin-top: 4%;">Knockoff Lists
        <button class="btn" id="buttons" style="font-size: 13px;margin-left: 79%;" (click)="backHome()">BACK</button></h3>
</main>

<section>
    <form [formGroup]="searchForm" myForm="ngForm" (ngSubmit)="onSubmit()">
        <div class="row" style="width: 90%;" >
            <div class="col-sm-3">
                <mat-form-field class="example-form-field" style="margin-left: 15%;">
                    <mat-label>KnockOff Type</mat-label>
                 
                        <mat-select  matInput formControlName="code">
                            <mat-option *ngFor="let option of options" [value]="option.value">
                              {{ option.key }}
                            </mat-option> 
                            </mat-select>      
                  </mat-form-field>
    
            </div>
            <div class="col-sm-3">
                <mat-form-field class="example-form-field" style="margin-left:1%;" >
                    <mat-label>Action Code</mat-label>
                    <mat-select  matInput formControlName="account_id">
                   <mat-option     *ngFor="let columns of columnList" [value]="columns.id">{{columns.code}}</mat-option>

                    </mat-select>
                    
                </mat-form-field>
    
            </div>
            <div class="col-sm-3">
                <mat-form-field class="example-form-field" style="margin-left:1%;" >
                    <mat-label>Knockoff Code</mat-label>
                    <!-- <mat-select  matInput formControlName="knockoffcode">
                   <mat-option     *ngFor="let columns of columnList" [value]="columns.id">{{columns.code}}</mat-option>

                    </mat-select> -->
                    <input matInput formControlName="knock_code">
                    <!-- <input type="text" formControlName="knock_code">             -->
                </mat-form-field>
    
            </div>
    
            <div class="col-sm-1">
                <button class="btn btn-outline-success"  id="search"    
                style="border-radius:40px;margin-left: -43%;margin-top: -21%; 
                font-size: larger;
                " color="primary" type="submit"><i class="fa fa-search"
                    aria-hidden="true"></i></button>
            </div>
            <div class="col-sm-1">
                <button class="btn btn-outline-success"  id="clear"   (click)="clearSearch()"
                style="border-radius:40px;margin-left: -65%;margin-top: -21%;
                font-size: larger;
              " color="primary"><i class="fa fa-times"
                    aria-hidden="true"></i></button>
            </div>
           
           
        </div>
    </form>
</section>

<div class="row">

</div>
<div>

    <div class="table-responsive">
        <table class="table table-bordered" id="historytable" style="margin-left: 17px;
        width: 96%;" >
            <thead class="table_header">
                <th>S.No</th>
                <th>Knockoff Code</th>   
                <th>Date</th>      
                <th>Knockoff Type</th>
                <th>Action Code</th>
                <th>Action Description</th>
                <th>Action Ref No</th>
                <th>ARN Date</th>
                <th>View</th>
                <th>Download</th>
                <th>Scheduler Status</th>
                <!-- <th></th> -->
                


            </thead>
            <tbody *ngFor="let sum of summarylists;index as ind" style="padding:5px;">
                <td>{{(pagination.index-1)*limit+ind+1}}</td> 
                <td >{{sum.code}}</td>
                <td>{{sum.created_date | date:'dd-MM-yyyy' }}</td>
                <td>
                    <p *ngIf="sum.knockoff_type == 1">Auto KnockOff</p>
                    <p *ngIf="sum.knockoff_type == 2">Manual Knockoff</p>
                    <p *ngIf="sum.knockoff_type == 3">Action KnockOff</p>
                    
                </td>
                <td>{{sum.action_code}}</td>
                <td>{{sum.description}}</td>
                <td>{{sum.arn}}</td>
                <td>{{sum.arn_date | date:'dd-MM-yyyy'}}</td>
                <td>
                    <mat-icon (click)="viewsinglerecord(sum.id)"  data-toggle="modal" href="#myModal"
                    >visibility</mat-icon>
                </td>

                <td>
                    <mat-icon (click)="downloadrecord(sum.id, sum.code)">file_download</mat-icon>
                </td>
                <td>
                    <p *ngIf="sum.scheduler_status == 2">Intiated</p>
                    <p *ngIf="sum.scheduler_status == 3">Processing</p>
                    <p *ngIf="sum.scheduler_status == 4">Error</p>
                    <p *ngIf="sum.scheduler_status == 5">Completed</p>
                    <p *ngIf="sum.scheduler_status == 1">Completed</p>
                </td>
                <!-- <td>{{sum.debit_amount}}</td> -->

                <!-- <td *ngIf="sum.cheque_no == 'nan' ">
                </td>
                <td *ngIf="sum.cheque_no != 'nan'"> {{sum.cheque_no}}</td> -->
                <!-- <td *ngIf="sum.credit == 1" class="columnss" >Cr

                </td>
                <td *ngIf="sum.credit == 0">Dr

                </td> -->
                <!-- <td>{{sum.credit_amount}}</td>
                <td>
                    <mat-checkbox>
                    </mat-checkbox>
                </td> -->

            </tbody>
        </table>
        <!-- <div *ngIf="!summarylists.length" style="margin-left: 42%;">
            <h3>Sorry no data found!... </h3>
        </div> -->

         <div class="col-sm-12" style="font-size:x-small;text-align:right;padding-right:2%;">
            <button (click)="prevpage()" mat-icon-button [disabled]="pagination.has_previous === false"
                color="primary">
                <mat-icon class="customIconSize">arrow_back</mat-icon>
            </button>
            {{pagination.index}}
            <button (click)="nextpage()" mat-icon-button [disabled]="pagination.has_next === false"
                color="primary">
                <mat-icon class="customIconSize">arrow_forward</mat-icon>
            </button>

        </div>
      
    </div>
    <!-- <div style="text-align:center;">
        
   </div> -->
</div>

<div class="modal" id="myModal">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Knockoff Records</h4>
                <button type="button" class="close" data-dismiss="modal">Ã—</button>
            </div>
            <div class="container"></div>
            <div class="modal-body">
                <div style="margin-left:10px;">
                    <div class="row">
                        <div class="col">
                            <mat-form-field appearance="standard" style="margin-top: -8%;width: 50%;">
                                <mat-label>Filter</mat-label>
                                <input matInput (keyup)="applyFilterss($event)" placeholder="Ex. Amount" #input>
                            </mat-form-field>
                        </div>
                        </div>
                    <div class="mat-elevation-z7">
                        <table mat-table #sortCol1="matSort" [dataSource]="dataSource" matSort>

                            <ng-container matColumnDef="code">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                    style="width:110px;font-size: small;font-weight: bold;">KnockOff Code</th>
                                <td mat-cell *matCellDef="let element" class="center-text"> {{element.code}} </td>
                            </ng-container>
                            <ng-container matColumnDef="knockoff_date">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                    style="width:110px;font-size: small;font-weight: bold;">KnockOff Date</th>
                                <td mat-cell *matCellDef="let element" class="center-text"> {{element.knockoff_date |
                                    date:'dd-MM-yyyy' }} </td>
                            </ng-container>
    
                            <ng-container matColumnDef="gl_date">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                    style="width:110px;font-size: small;font-weight: bold;">GL Date</th>
                                <td mat-cell *matCellDef="let element" class="left-text"> {{element.gl_date |
                                    date:'dd-MM-yyyy' }} </td>
                            </ng-container>
                            <ng-container matColumnDef="line_description">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                    style="font-size: small;font-weight: bold;"> Line Description </th>
                                <td mat-cell *matCellDef="let element" class="left-text"> {{element.line_description}} </td>
                            </ng-container>
    
                            <ng-container matColumnDef="debit_amount_ledger">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                    style="font-size: small;font-weight: bold;">Debit</th>
                                <td mat-cell *matCellDef="let element" class="left-text"
                            
                                > {{element.debit_amount_ledger}} </td>
                            </ng-container>
                            <ng-container matColumnDef="credit_amount_ledger">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                    style="font-size: small;font-weight: bold;">Credit</th>
                                <td mat-cell *matCellDef="let element" class="left-text"> {{element.credit_amount_ledger}} </td>
                            </ng-container>
                            <ng-container matColumnDef="ref_1">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                    style="width:110px;font-size: small;font-weight: bold;">Ref 1</th>
                                <td mat-cell *matCellDef="let element" class="right-text"> {{element.ref_1}} </td>
                            </ng-container>


                            <ng-container matColumnDef="transaction_date">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                    style="width:110px;font-size: small;font-weight: bold;">Transaction Date</th>
                                <td mat-cell *matCellDef="let element" class="right-text"> {{element.transaction_date |
                                    date:'dd-MM-yyyy' }} </td>
                            </ng-container>
                            <ng-container matColumnDef="description">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                    style="font-size: small;font-weight: bold;">Bank Description </th>
                                <td mat-cell *matCellDef="let element" class="right-text"> {{element.description}} </td>
                            </ng-container>
    
                            <ng-container matColumnDef="debit_amount_statement">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                    style="font-size: small;font-weight: bold;">Debit</th>
                                <td mat-cell *matCellDef="let element" class="right-text"> {{element.debit_amount_statement}} </td>
                            </ng-container>
                            <ng-container matColumnDef="credit_amount_statement">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                    style="font-size: small;font-weight: bold;">Credit</th>
                                <td mat-cell *matCellDef="let element" class="right-text"> {{element.credit_amount_statement}} </td>
                            </ng-container>
                            <ng-container matColumnDef="header-row-first-group">
                                <th mat-header-cell *matHeaderCellDef  [attr.colspan]="2">
                                    KNOCKOFF
                                  </th>
                                  </ng-container>
                                  <ng-container matColumnDef="header-row-second-group">
                                <th mat-header-cell *matHeaderCellDef  [attr.colspan]="4">
                                  Wisefin
                                </th></ng-container>
                                <ng-container matColumnDef="header-row-third-group">
                                <th mat-header-cell *matHeaderCellDef  [attr.colspan]="5">
                                    CBS
                                  </th>
                              </ng-container>
                              <tr mat-header-row *matHeaderRowDef="['header-row-first-group','header-row-second-group','header-row-third-group']"></tr>
                           
                            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                            <tr mat-row  
                            *matRowDef="let row; columns: displayedColumns;"></tr>
                        </table>
                        <mat-paginator #pageCol1="matPaginator" [length]="10" [pageSize]="10"
                            [pageSizeOptions]="[10, 25, 50, 100]" showFirstLastButtons></mat-paginator>
                    </div>
                    <!-- <table class="table table-bordered" id="boxlevel">
                        <thead class="table_header">
                            <th>S.No</th>
                            <th>Autoknockoff code</th>
                            <th>GL Date </th>
                            <th>
                                <fieldset style="width:52vh">
                                    Line Description
                                </fieldset>
                            </th>
                            <th>Jounrnal Name</th>
                            <th>Invoice No.</th>
                            <th>Category</th>
                            <th>Debit Amount</th>
                            <th>Credit Amount</th>
                            <th>Bank Description</th>
                            <th>Debit</th>
                            <th>Credit</th>
                           
                        </thead>
                        <tbody *ngFor="let lists of knockofflists;index as ind">
                            <td>{{(pagination.index-1)*limit+ind+1}}</td>
                            <td>{{lists.code}}</td>
                      
                            <td>{{lists.gl_date}}</td>
                            <td>{{lists.line_description}}</td>
                            <td>{{lists.journal_name}}</td>
                            <td>{{lists.invoice_no}}</td>
                            <td>{{lists.category}}</td>
                            <td>{{lists.debit_amount_ledger}}</td>
                            <td>{{lists.credit_amount_ledger}}</td>
                            <td>{{lists.description}}</td>
                            <td>{{lists.debit_amount_statement}}</td>
                            <td>{{lists.credit_amount_statement}}</td>
                          

                            
                        </tbody>
                    </table>

                    <div *ngIf="!knockofflists?.length" style="margin-left: 42%;">
                        <h3>Sorry no data found!... </h3>
                    </div> -->

                  

                </div>
                <!-- <div class="col-sm-12" style="font-size: small;text-align:right;margin-bottom: 5%;">
                    <button (click)="prevpages()" mat-icon-button [disabled]="pagination.has_previous === false"
                        color="primary">
                        <mat-icon>arrow_back</mat-icon>
                    </button>
                    {{pagination.index}}
                    <button (click)="nextpages()" mat-icon-button [disabled]="pagination.has_next === false"
                        color="primary">
                        <mat-icon>arrow_forward</mat-icon>
                    </button>

                </div> -->
                
            </div>
            <div class="modal-footer">
                <a href="#" data-dismiss="modal" class="btn">Close</a>
            </div>
        </div>
    </div>
</div>