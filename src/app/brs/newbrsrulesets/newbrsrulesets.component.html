<!-- <nav id="navshow" class="cus-tmsNavContainer">
  <div class="nav nav-tabs cus-tmsNav">
    <p
      #myDiv
      class="nav-item nav-link"
      id="subname"
      data-toggle="tab"
      (click)="subModuleData(sub)"
      role="tab"
      *ngFor="let sub of Submoduledatas; index as i"
    >
      {{ sub.name }}
    </p>
  </div>
</nav> -->
<div style="margin-left: 25px;display: flex;margin-top: 5px;">
  <div><mat-icon (click)="backtosummary()" style="cursor: pointer;font-weight: 600;" >keyboard_backspace</mat-icon></div>
  <div style="font-weight: 600;font-size: 15px;margin-top: 1px;margin-left: 5px;">Rule creation</div></div>
<!-- <div *ngIf="rulecreate"> -->
<div>
  
  <!-- <button class="btn btn-outline-primary" (click)="backtosummary()"
    style="margin-left: 20px; border-radius: 25px;margin-top: 10px;">
    Back
  </button> -->
</div>
<div style="width: 100%;margin-top: -15px;">
  <header>
    <!-- <div class="menu">
    <h1 style="margin-left:20px;">Rule Engine</h1>
  </div> -->
  </header>

  <!-- <div>
    <div style="width: 92%">
      <mat-card style="margin-left: 3%; margin-bottom: 1%; margin-top: -2%"> -->
        <!-- <form [formGroup]="filedata">
          <div class="row">
            <div class="col-sm-6">
              <mat-label>Wisefin Files</mat-label>
              <mat-form-field style="width: 100%">
                <mat-select formControlName="wisefinxl">
                  <mat-option *ngFor="let type of fetchWise" [value]="type.id" (click)="getData(type.id)">
                    {{ type.file }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-sm-6">
              <mat-label>CBS Files</mat-label>
              <mat-form-field style="width: 100%">
                <mat-select formControlName="cbsxl">
                  <mat-option *ngFor="let type of fetchCBS" [value]="type.id" (click)="getData(type.id)">
                    {{ type.file }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </form> -->
        <form [formGroup]="filedata">
          <!-- <div class="row" style="display: flex; align-items: center;">
            <div class="col-md-12" style="display: flex; align-items: center;">
              <span style="margin-right: 10px;">Template:</span> -->
              <!-- <mat-form-field  style="flex-grow: 1; margin: 0;">
                <mat-select formControlName="wisefinxl">
                  <mat-option *ngFor="let type of fetchWise" [value]="type.template_name" (click)="getData(type)">

                    {{ type.template_name }}
                  </mat-option>
                </mat-select>
              </mat-form-field> -->

             
            <!-- </div>
          </div> -->
        </form>
      <!-- </mat-card>
    </div>
  </div> -->
  <form [formGroup]="newform">
    <div class="search-auto-fit" style="margin-left: 20px;">
      <div id="matInput-size">
        <mat-form-field   (click)="getWiseXLs()" appearance="outline">
          <mat-label>Template</mat-label>
          <input type="text" #template_input matInput formControlName="wisefinxl"
          [matAutocomplete]="temp_auto" (keyup)="getWiseXLs()">
          <mat-autocomplete #temp_auto="matAutocomplete" (opened)="autocompletewisefinxlScroll()"
              [displayWith]="templ_display">
              <mat-option *ngFor="let type of fetchWise" (click)="getData(type)" [value]="type">
                  {{type.template_name}}
              </mat-option>
          </mat-autocomplete>
      </mat-form-field> 
      </div>
      <div id="matInput-size">
        <mat-form-field  appearance="outline">
          <mat-label >Rule Name</mat-label>
          <input matInput formControlName="name" />
        </mat-form-field>
      </div>
      
      <div id="matInput-size">
        <mat-form-field  appearance="outline">
          <mat-label >Description</mat-label>
          <input matInput formControlName="description" />
        </mat-form-field>
      </div>
      <div id="matInput-size" >
        <mat-form-field  appearance="outline">
          <mat-label >Order</mat-label>
          <input matInput formControlName="order" />
        </mat-form-field>
      </div>
   
    </div>
    
   <div style="display: flex;margin-left: 20px;">
   
      <div >
       <button type="button"  class="btn btn-outline-info" (click)="addLesson()" style="margin-right: 10px;border-radius: 50px;">Add Rule
       </button>
       <button  type="button" class="btn btn-outline-success"
         (click)="Nwsefinrunrules()" style="margin-right: 10px;border-radius: 50px;">
         Save Rule
       </button>
   
     </div>
     
       <div style="display: flex;gap: 10px;margin-top: 5px;">
         <div >
           <mat-checkbox formControlName="same_date" (change)="samedatecheck($event)">Same date
           </mat-checkbox>
         </div>
         <div >
           <mat-checkbox formControlName="statement_rule" (change)="glnumbercheck($event)">Gl number
           </mat-checkbox>
         </div>
       </div>
      
      
   </div>
  </form>

 

  <!-- <div>
    <br />
  </div> -->
  <!-- <h3 style="margin-left:25px;">BANK STATEMENT RULE ENGINE</h3> -->
</div>
<!-- </div> -->
<div [formGroup]="form"  style="margin-top: 15px;">
  <ng-container formArrayName="lessons">
      <ng-container *ngFor="let lessonForm of lessons.controls; let i = index">
          <div class="lesson-form-row" [formGroup]="lessonForm">
            
            <mat-card class="custom_card"> 
              <div>
                <span style="font-weight: 600;font-size: 15px;">Rule number &nbsp;{{i+1}}</span>
               <span style=" display: flex;
               align-items: flex-start;
               justify-content: flex-end;margin-top: -24px;"> 
                <button type="button"  class="btn btn-danger refresh_status" style="border-radius: 100px;" ngbTooltip="Delete rule" (click)="deleterule(i)"><mat-icon>close_small</mat-icon>
                </button>
               </span>
               
              </div>
              <hr>
              <div class="row">
              <div class="col-md-6">
                <mat-card style="margin-left: 35px; height: auto; margin-top:20px; margin-bottom: 20px;">
                  <mat-card-title>
                    <div class="info">
                      <p class="title">File 1</p>
                    </div>
                  </mat-card-title>
                  <mat-card-actions>
                      <div class="right-end">
                        <!-- <div class="col-sm-6"></div> -->
                        <div>
                          <mat-checkbox  (change)="wisebincheckbox($event,i,lessonForm)"
                           >Select Full Column
                          </mat-checkbox>
                        </div>
                      </div>
                    
          
                      <div class="common-row">
                      
                        <div class="common-label">
                          <mat-label>Column </mat-label>
                        </div>
                        <div>
                          <mat-form-field>
                            <mat-select formControlName="fas_col_name">
                              <mat-option *ngFor="let type of wisefine_array" [value]="type">
                                {{ type }}
                              </mat-option>
                            </mat-select>
                      
                          </mat-form-field>
                        </div>
                      </div>
                      <div class="common-row">
                        <mat-checkbox  (change)="wisefinstartwith($event,i)">Start with
                        </mat-checkbox>
                      </div>
                      <div *ngIf="showstartwithwisefin[i]" >
                        <span> <mat-form-field>
                          <mat-label>character</mat-label>
                          <input matInput formControlName="fas_starts_with">
                        </mat-form-field>
                      </span>
                      <span style="margin-left: 20px;"> <mat-form-field>
                        <mat-label>number</mat-label>
                        <input matInput type="number" formControlName="fas_starts_with_number" class="custom-placeholder" placeholder="exclude with character">
                      </mat-form-field>
                    </span>
                      </div>
                      <div class="common-row" *ngIf="wisecheckboxkey[i] && showstartwithwisefin[i]==false">
                        <div class="common-label">
                          <mat-label>Delimiter</mat-label>
                        </div>
                        <div>
                          <mat-form-field>
                            <input matInput formControlName="fas_delimiter" placeholder="e.g/" />
                          </mat-form-field>
                        </div>
                      </div>
                      <div class="common-row" *ngIf="wisecheckboxkey[i] && showstartwithwisefin[i]==false">
                        <div class="common-label">
                          <mat-label>Occurance</mat-label>
                        </div>
          
                        <div>
                          <mat-form-field>
                            <input type="text" placeholder="E.g 5" formControlName="fas_occurencess" matInput
                              (keypress)="displaylimit($event,i)" (input)="displaylimit($event,i)" />
                          </mat-form-field>
                        </div>
                      </div>
          
                      <div class="flex-column">
                        <div class="common-row order" *ngIf="showlimit[i]">
                          <div>
                            <mat-radio-group name="same1" formControlName="fas_forward_backward">
                              <mat-radio-button value="limit" (click)="enableposition(i,1)">Limit</mat-radio-button>
                            </mat-radio-group>
                          </div>
                          <div>
                            <mat-radio-group name="same1" formControlName="fas_forward_backward">
                              <mat-radio-button value="no_limit" (click)="disableposition(i,1)">No Limit</mat-radio-button>
                            </mat-radio-group>
                          </div>
                        </div>
                      </div>
          
                    
                      <div class="common-row" *ngIf="wisecheckboxkey[i] && showstartwithwisefin[i]==false">
                        <div class="common-label">
                          <mat-label>Start Position</mat-label>
                        </div>
                        <div>
                          <mat-form-field>
                            <input matInput formControlName="fas_starting_position" type="number"  />
                          </mat-form-field>
                        </div>
                      </div>
          
                      <div class="common-row" *ngIf="wisecheckboxkey[i] && showstartwithwisefin[i]==false && nolimtfas[i]">
                        <div class="common-label">
                          <mat-label>End Position</mat-label>
                        </div>
                        <div>
                          <mat-form-field>
                            <input matInput formControlName="fas_ending_position" type="number" [readonly]="diableposition" />
                          </mat-form-field>
                        </div>
                      </div>
          
                  </mat-card-actions>
                </mat-card>
          
               
              </div>
              <div class="col-md-6">
          
                <mat-card style="margin-right: 15px; height: auto; margin-top:20px; margin-bottom: 20px;">
                  <mat-card-title>
                    <div class="info">
                      <p class="title">File 2</p>
          
                  
                    </div>
                  </mat-card-title>
          
                 
                  <mat-card-actions>
                    <div>
                      <div class="right-end">
                       
                        <div>
                          <mat-checkbox style="margin-top: 20px" (change)="Addcheckbox($event,i)"
                           >Select Full Column
                          </mat-checkbox>
                        </div>
                      </div>
                  
                      <div class="common-row">
                       
                        <div class="common-label">
                          <mat-label>Column </mat-label>
                        </div>
                        <div>
                          <mat-form-field>
                            <mat-select formControlName="cbs_col_name">
                              <mat-option *ngFor="let type of cbs_array" [value]="type">
                                {{ type }}
                              </mat-option>
                            </mat-select>
                          
                          </mat-form-field>
                        </div>
                      </div>

                      <div class="common-row">
                        <mat-checkbox  (change)="cbsstartwith($event,i)">Start with
                        </mat-checkbox>
                      </div>
                      <div *ngIf="showstartwithcbs[i]" >
                        <span> <mat-form-field>
                          <mat-label>character</mat-label>
                          <input matInput formControlName="cbs_starts_with">
                        </mat-form-field>
                      </span>
                      <span style="margin-left: 20px;"> <mat-form-field>
                        <mat-label>number</mat-label>
                        <input matInput type="number" formControlName="cbs_starts_with_number" class="custom-placeholder" placeholder="exclude with character">
                      </mat-form-field>
                    </span>
                      </div>
                      <div class="common-row" *ngIf="checkboxkey[i] && showstartwithcbs[i]==false">
                        <div class="common-label">
                          <mat-label>Delimiter</mat-label>
                        </div>
                        <div>
                          <mat-form-field>
                            <input matInput formControlName="cbs_delimiter" placeholder="e.g/" />
                          </mat-form-field>
                        </div>
                      </div>
                      <div class="common-row" *ngIf="checkboxkey[i] && showstartwithcbs[i]==false">
                        <div class="common-label">
                          <mat-label>Occurance</mat-label>
                        </div>
          
                        <div>
                          <mat-form-field>
                            <input type="number" placeholder="E.g 5" formControlName="cbs_occurencess" matInput
                              (keypress)="displaylimitcbs($event,i)" (input)="displaylimitcbs($event,i)" />
                          </mat-form-field>
                        </div>
                      </div>
          
                      <div class="common-row order" *ngIf="showlimit1[i]">
                        <div>
                          <mat-radio-group name="forward" formControlName="cbs_forward_backward">
                            <mat-radio-button value="limit" (click)="enableposition(i,2)">Limit</mat-radio-button>
                          </mat-radio-group>
                        </div>
                        <div>
                          <mat-radio-group name="forward" formControlName="cbs_forward_backward">
                            <mat-radio-button value="no_limit" (click)="disableposition(i,2)">No limit</mat-radio-button>
                          </mat-radio-group>
                        </div>
                      </div>
  
                      <div class="common-row" *ngIf="checkboxkey[i] && showstartwithcbs[i]==false">
                        <div class="common-label">
                          <mat-label>Start Position</mat-label>
                        </div>
                        <div>
                          <mat-form-field>
                            <input matInput formControlName="cbs_starting_position" type="number"/>
                          </mat-form-field>
                        </div>
                      </div>
                      <div class="common-row" *ngIf="checkboxkey[i] && showstartwithcbs[i]==false && nolimtcbs[i]">
                        <div class="common-label">
                          <mat-label>End Position</mat-label>
                        </div>
                        <div>
                          <mat-form-field>
                            <input matInput formControlName="cbs_ending_position" type="number" [readonly]="diableposition" />
                          </mat-form-field>
                        </div>
                      </div>
                     
                    </div>
                  </mat-card-actions>
          
              
          
                </mat-card>
              </div>
            </div></mat-card>
           
          </div>
      </ng-container>
  </ng-container>

</div> 