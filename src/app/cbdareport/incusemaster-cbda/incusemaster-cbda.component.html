<main style="padding: 20px">
  <div *ngIf="showincsummary === true">
    <!-- <form [formGroup]="incandexcForm2">
      <div class="search-auto-fit">
        <div id="matInput-size">
          <mat-form-field
            appearance="outline"
            style="width: 170px"
            (click)="ColumnDropData()"
          >
            <input
              #colinput
              placeholder="Column"
              matInput
              formControlName="columninput"
              [matAutocomplete]="columnvalue"
            />
            <mat-autocomplete
              #columnvalue="matAutocomplete"
              [displayWith]="displayColumn"
            >
              <ng-container>
                <mat-option *ngFor="let des of colList" [value]="des">
                  {{ des.column }}
                </mat-option>
              </ng-container>
            </mat-autocomplete>
          </mat-form-field>
        </div>
        <div id="matInput-size">
          <mat-form-field appearance="outline" style="width: 170px">
            <mat-label>Date</mat-label>
            <input
              matInput
              [matDatepicker]="startPicker"
              formControlName="dateinput"
            />
            <mat-datepicker-toggle
              matSuffix
              [for]="startPicker"
            ></mat-datepicker-toggle>
            <mat-datepicker #startPicker></mat-datepicker>
          </mat-form-field>
        </div>
        <div id="matInput-size">
          <mat-form-field appearance="outline">
            <mat-label>Include/Exclude</mat-label>
            <mat-select formControlName="in_ex_cludeControl">
              <mat-option
                *ngFor="let option of inc_Exc_datas"
                [value]="option.id"
              >
                {{ option.names }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div id="matInput-size">
          <mat-form-field appearance="outline">
            <mat-label>Branch/Product</mat-label>
            <mat-select formControlName="bran_prod_Control">
              <mat-option
                *ngFor="let option of bran_prod_datas"
                [value]="option.id"
                (click)="getshowchip(option)"
              >
                {{ option.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <button class="btn-fill fill-primary" (click)="searchincexc()">
          <mat-icon class="btn-icon">search</mat-icon>
        </button>
        <button class="btn-fill fill-secondary" (click)="refreshincexc()">
          <mat-icon class="btn-icon">refresh</mat-icon>
        </button>
        <button class="btn-fill fill-secondary" (click)="incexccreation()">
          <mat-icon class="btn-icon">add</mat-icon>
        </button>
      </div>
    </form>

    <div class="comp-table t-resposive">
      <table>
        <thead>
          <tr>
            <th>S.No</th>
            <th>Column</th>
            <th>Date</th>
            <th>Include/Exclude</th>
            <th>Branch/Product</th>
            <th>Delete</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let data of fileuploadlist">
            <td>{{ data.column }}</td>
            <td>{{ data.date }}</td>
            <td>{{ data.filename }}</td>
            <td>{{ data.status }}</td>
            <td><mat-icon>trash</mat-icon></td>
          </tr>
        </tbody>
      </table>
    </div> -->
    <lib-vs-search-cmp id="matInput-size" [SearchArr]="uploadsearch" [ButtonArr]="templatebutton"
      (dataoutput)="searchincexc($event)"></lib-vs-search-cmp>
    <lib-vs-cbox-summary [SummaryDetails]="SummarynewtemplateData"
      [SummaryApiObj]="SummaryApinewtempObjNew"></lib-vs-cbox-summary>
  </div>
  <div *ngIf="showincCreation === true">
    <form [formGroup]="incandexcForm">
      <div class="search-auto-fit">
        <button class="btn-fill fill-secondary" (click)="backtosum2()">
          <mat-icon class="btn-icon">arrow_back</mat-icon>
        </button>
        <div id="matInput-size">
          <!-- <mat-form-field appearance="outline" style="width: 170px" (click)="columnList()">
            <input #colinput placeholder="Column" matInput formControlName="columninput"
              [matAutocomplete]="columnvalue" />
            <mat-autocomplete #columnvalue="matAutocomplete" [displayWith]="displayColumn">
        
              <ng-container>
                <mat-option *ngFor="let des of colList" [value]="des">
                  {{ des.name }}
                </mat-option>
              </ng-container>
            </mat-autocomplete>
          </mat-form-field> -->
              <lib-vs-dynamicform-cmp [formGroup]="incandexcForm"
                    [InputFields]="ColumnObj"></lib-vs-dynamicform-cmp>
        </div>
        <!-- date -->
        <div id="matInput-size">
          <mat-form-field appearance="outline" style="width: 170px">
            <mat-label>Date</mat-label>
            <input matInput [matDatepicker]="startPicker" formControlName="dateinput" />
            <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
            <mat-datepicker #startPicker></mat-datepicker>
          </mat-form-field>
        </div>
        <div id="matInput-size">
          <!-- <mat-form-field appearance="outline">
            <mat-label>Include/Exclude</mat-label>
            <mat-select formControlName="in_ex_cludeControl">
              <mat-option *ngFor="let option of inc_Exc_datas" [value]="option.id">
                {{ option.names }}
              </mat-option>
            </mat-select>
          </mat-form-field> -->
          <lib-vs-optiondd-cmp [InputFields]="IncludeExclude" [formGroup]="incandexcForm"></lib-vs-optiondd-cmp>
        </div>
        <div id="matInput-size">
          <mat-form-field appearance="outline">
            <mat-label>Branch/Product</mat-label>
            <mat-select formControlName="bran_prod_Control">
              <mat-option *ngFor="let option of bran_prod_datas" [value]="option" (click)="getshowchip(option)">
                {{ option.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <!-- <lib-vs-optiondd-cmp [InputFields]="BranchProduct" [formGroup]="incandexcForm"></lib-vs-optiondd-cmp> -->

        </div>
        <div *ngIf="data_chipname !== ''">
          <div>
            <mat-form-field appearance="outline">
              <mat-label>{{ data_chipname }}</mat-label>
              <mat-chip-list #chipListEmp aria-label="Employee selection">
                <mat-chip *ngFor="
                    let emp of incandexcForm.get('chip_control')?.value;
                    let i = index
                  " [selectable]="true" [removable]="true" (removed)="removeEmployee(i)">
                  {{ emp.name || emp.no }}
                  <mat-icon matChipRemove>cancel</mat-icon>
                </mat-chip>
              </mat-chip-list>
              <input #employeeInput [matChipInputFor]="chipListEmp" [matAutocomplete]="autoEmpChip"
                [matChipInputSeparatorKeyCodes]="separatorKeysCodes" (matChipInputTokenEnd)="addEmployee($event)"
                (keyup)="filterEmployee(employeeInput.value)" />
              <mat-autocomplete #autoEmpChip="matAutocomplete" (optionSelected)="selectEmployee($event)">
                <mat-option *ngFor="let empOption of employeelist" [value]="empOption">
                  {{ empOption?.name || empOption?.no }}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
          </div>
        </div>
        <button class="btn-fill fill-primary" (click)="submit_fun()">
          Submit
        </button>
      </div>
    </form>
  </div>
</main>
<div [class]="PopupTriggerBool?'popup-open':'popup'">
  <div class="popup-container-lg">
    <div class="popup-head">
      <h3 class="popup-title">View Record</h3>
      <button type="button" class="close-popup" (click)="closePopup()">
        <mat-icon>close</mat-icon>
      </button>
    </div>
    <div class="popup-body">
      <div class="comp-table t-resposive">
        <table>
          <thead>
            <ng-container *ngFor="let data of ViewRecord?.columns">
              <th>{{data}}</th>
            </ng-container>
          </thead>
          <tbody>
            <tr *ngFor="let data of ViewRecord?.data">
              <ng-container *ngFor="let sub of ViewRecord?.columns">
                <td>{{data[sub]}}</td>
              </ng-container>
            </tr>
          </tbody>
        </table>
      </div>

    </div>
  </div>
</div>