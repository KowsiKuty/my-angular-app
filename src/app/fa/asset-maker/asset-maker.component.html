<div class="container" style="margin-left:0%">
    <div class="row">
        <div class="col-12">

            <div *ngIf="isassetcwipbuk">
                <div class="row col-12 col-md-12 col-sm-12">
                    <div class="col-6">
                        <h1
                            style="margin-left: 25px;font-size: large;margin-top:10px;font-size: 25px;font: outline;letter-spacing: .5px;font-family: Georgia, 'Times New Roman', Times, serif;font-size:25px;font-weight:bold;color:blue">
                            Asset Maker Summary </h1>
                    </div>
                    <!-- <div class="col-6" *ngIf="CheckShoenAlert">
                    <button type="button" class="btn btn-outline-danger des_n">Records Are Shown Based On Last Bucket Creation</button>
                    </div> -->
                    <hr>
                </div>
                <div style="margin-bottom: 5%;">
                    <form [formGroup]="assetmakerSearchForm" (ngSubmit)="assetmakercreateForm()">


                        <mat-form-field class="example-full-width" style="margin-left: 3%;">
                            <input class="toolbar-search" type="text" formControlName="invno" matInput
                                autocomplete="off">
                            <mat-placeholder>Invoice No</mat-placeholder>
                        </mat-form-field>

                        <mat-form-field style="margin-left: 5%;">
                            <mat-label>Invoice date</mat-label>
                            <input matInput  [matDatepicker]="picker1" assetmakerplaceholder="Start Date" autocomplete="off"
                                formControlName="invoicedate">
                            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                            <mat-datepicker #picker1></mat-datepicker>
                        </mat-form-field>
                        <mat-form-field class="example-full-width" style="margin-left: 3%;width:250px">
                            <input class="toolbar-search" type="text" formControlName="suppliername" matInput #supnameids
                                autocomplete="off" [matAutocomplete]="supname" >
                                <mat-autocomplete #supname="matAutocomplete" #supnames (opened)="autocompletecommodityScroll_product()">
                                    <mat-option *ngIf="isLoading">Loading..</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                       <mat-option *ngFor="let d of supnamelist" [value]="d.name" (focusout)="supnameid(d)">{{d.name}}</mat-option>
                                    </ng-container>
                                </mat-autocomplete>

                            <mat-placeholder>Supplier Name</mat-placeholder>
                        </mat-form-field>
                        <mat-form-field class="example-full-width" style="margin-left: 3%;">
                            <input class="toolbar-search" type="text" formControlName="crno" matInput
                                autocomplete="off">
                            <mat-placeholder>CR No</mat-placeholder>
                        </mat-form-field>

                        <button class="btn btn-outline-primary" type="submit" matTooltip="search"
                        
                            style="border-radius:40px;margin-left: 15px;" color="primary"><i class="fa fa-search"
                                aria-hidden="true"></i></button>
                        <button class="btn btn-outline-primary" (click)="reset()" type="button" matTooltip="clear"
                            style="border-radius:40px;margin-left: 15px;" color="primary">Reset</button>

                    </form>

                </div>
            </div>

            <div *ngIf="isassetregbuk">
                <div class="row col-12 col-md-12 col-sm-12">
                    <div class="col-6">
                        <h1
                            style="margin-left: 25px;font-size: large;margin-top:10px;font-size: 25px;font: outline;letter-spacing: .5px;font-family: Georgia, 'Times New Roman', Times, serif;font-size:25px;font-weight:bold;color:blue">
                            Asset Maker Summary </h1>
                    </div>
                    <!-- <div class="col-6" *ngIf="CheckShoenAlert">
                    <button type="button" class="btn btn-outline-danger des_n">Records Are Shown Based On Last Bucket Creation</button>
                    </div> -->
                    <hr>
                </div>
                <div style="margin-bottom: 5%;">
                    <form [formGroup]="assetmakerSearchForm" (ngSubmit)="assetmakerregcreateForm()">


                        <mat-form-field class="example-full-width" style="margin-left: 3%;">
                            <input class="toolbar-search" type="text" formControlName="invno" matInput
                                autocomplete="off">
                            <mat-placeholder>Invoice No</mat-placeholder>
                        </mat-form-field>

                        <mat-form-field style="margin-left: 5%;">
                            <mat-label>Invoice date</mat-label>
                            <input matInput  [matDatepicker]="picker1" placeholder="Start Date" autocomplete="off"
                                formControlName="invoicedate">
                            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                            <mat-datepicker #picker1></mat-datepicker>
                        </mat-form-field>
                        <mat-form-field class="example-full-width" style="margin-left: 3%;width:250px">
                            <input class="toolbar-search" type="text" formControlName="suppliername" matInput #supnameids
                                autocomplete="off" [matAutocomplete]="supname"  >
                                <mat-autocomplete #supname="matAutocomplete" #supnames (opened)="autocompletecommodityScroll_product()">
                                    <mat-option *ngIf="isLoading">Loading..</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                       <mat-option *ngFor="let d of supnamelist" [value]="d.name" (focusout)="supnameid(d)">{{d.name}}</mat-option>
                                    </ng-container>
                                </mat-autocomplete>

                            <mat-placeholder>Supplier Name</mat-placeholder>
                        </mat-form-field>
                        <mat-form-field class="example-full-width" style="margin-left: 3%;">
                            <input class="toolbar-search" type="text" formControlName="crno" matInput
                                autocomplete="off">
                            <mat-placeholder>CR No</mat-placeholder>
                        </mat-form-field>

                        <button class="btn btn-outline-primary" type="submit" matTooltip="search"
                            style="border-radius:40px;margin-left: 15px;" color="primary"><i class="fa fa-search"
                                aria-hidden="true"></i></button>
                        <button class="btn btn-outline-primary" (click)="resetss()" type="button" matTooltip="clear"
                            style="border-radius:40px;margin-left: 15px;" color="primary">Reset</button>

                    </form>

                </div>
            </div>
            <div *ngIf="isassetbucbuk">
                <div class="row col-12 col-md-12 col-sm-12">
                    <div class="col-6">
                        <h1
                            style="margin-left: 25px;font-size: large;margin-top:10px;font-size: 25px;font: outline;letter-spacing: .5px;font-family: Georgia, 'Times New Roman', Times, serif;font-size:25px;font-weight:bold;color:blue">
                            Asset Maker Summary </h1>
                    </div>
                    <!-- <div class="col-6" *ngIf="CheckShoenAlert">
                    <button type="button" class="btn btn-outline-danger des_n">Records Are Shown Based On Last Bucket Creation</button>
                    </div> -->
                    <hr>
                </div>
                <div style="margin-bottom: 5%;">
                    <form [formGroup]="assetmakerSearchForm" (ngSubmit)="assetmakerbuccreateForm()">


                        <mat-form-field class="example-full-width" style="margin-left: 3%;">
                            <input class="toolbar-search" type="text" formControlName="invno" matInput
                                autocomplete="off">
                            <mat-placeholder>Invoice No</mat-placeholder>
                        </mat-form-field>

                        <mat-form-field style="margin-left: 5%;">
                            <mat-label>Invoice date</mat-label>
                            <input matInput  [matDatepicker]="picker1" placeholder="Start Date"
                                formControlName="invoicedate" autocomplete="off">
                            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                            <mat-datepicker #picker1></mat-datepicker>
                        </mat-form-field>
                        <mat-form-field class="example-full-width" style="margin-left: 3%;width:250px">
                            <input class="toolbar-search" type="text" formControlName="suppliername" matInput #supnameids
                                autocomplete="off" [matAutocomplete]="supname" >
                                <mat-autocomplete #supname="matAutocomplete" #supnames (opened)="autocompletecommodityScroll_product()">
                                    <mat-option *ngIf="isLoading">Loading..</mat-option>
                                    <ng-container *ngIf="!isLoading">
                                       <mat-option *ngFor="let d of supnamelist" [value]="d.name" (focusout)="supnameid(d)">{{d.name}}</mat-option>
                                    </ng-container>
                                </mat-autocomplete>

                            <mat-placeholder>Supplier Name</mat-placeholder>
                        </mat-form-field>
                        <mat-form-field class="example-full-width" style="margin-left: 3%;">
                            <input class="toolbar-search" type="text" formControlName="crno" matInput
                                autocomplete="off">
                            <mat-placeholder>CR No</mat-placeholder>
                        </mat-form-field>

                        <button class="btn btn-outline-primary" type="submit" matTooltip="search"
                            style="border-radius:40px;margin-left: 15px;" color="primary"><i class="fa fa-search"
                                aria-hidden="true"></i></button>
                        <button class="btn btn-outline-primary" (click)="resets()" type="button" matTooltip="clear"
                            style="border-radius:40px;margin-left: 15px;" color="primary">Reset</button>

                    </form>

                </div>
            </div>
            <!-- <div> -->
                <div class="container"  *ngIf="isbuce" style="margin-top: -4%;">

                    <div class="example-container">
                        <mat-radio-group #group="matRadioGroup" [(ngModel)]="test" [(value)]="selectedValue"
                            (change)="onValueChange(group.value)">
                            <mat-radio-button value="REGULAR" [checked]="defaultSelected">REGULAR</mat-radio-button>

                            <mat-radio-button style="margin-left:10px" value="CWIP">CWIP</mat-radio-button>
                            <mat-radio-button style="margin-left:10px" value="BUC">BUC</mat-radio-button>
                        </mat-radio-group>
                    </div>
                    <!-- <div class="col-6" *ngIf="CheckShoenAlert">
                        <button style="float: right;" type="button" class="btn btn-outline-danger des_n">Records Are Shown Based On Last Bucket Creation</button>
                        </div> -->
                <!-- </div> -->


                <!-- <div class="container" style="margin-top: -50px;" *ngIf="isb">

                    <div class="example-container">
                        <mat-radio-group #group="matRadioGroup">
                            <mat-radio-button value="REGULAR">REGULAR</mat-radio-button>

                            <mat-radio-button style="margin-left:10px" value="CWIP">CWIP</mat-radio-button>
                            <mat-radio-button style="margin-left:10px" value="BUC">BUC</mat-radio-button>
                        </mat-radio-group>

                    </div>

                </div> -->
            </div>
        </div>
    </div>
</div>
 
    
<!-- <div class="row text-center"> -->

    <!-- <div class="nav nav-tabs" style="margin-left: 10px;">

        <a class="nav-item nav-link active" value="WB" data-toggle="tab" role="tab" (click)="withoutbucBtn()" style="border: none;">Without
            Bucket</a>
        <a class="nav-item nav-link" data-toggle="tab" role="tab" (click)="bucBtn()">Bucket</a> -->

    <!-- </div> -->

<!-- </div> -->
<!-- 
<div *ngIf="isassetbuk" style="margin-left: 30px;overflow: hidden;">
    <h1>Non group data</h1>

    <div class="Container" style="margin-left: 30px;overflow: hidden;">

        <div class="table-responsive" style="width:90%;margin-top: 1%;overflow: hidden;">
            <table class="table">
                <thead class="table_header">
                    <tr>
                        <th>S.No</th>
                        <th>Bucket name</th>

                        <th>Invoice Type</th>
                        <th>Invoice count</th>
                        <th>Invoice Amount</th>
                        <th>Tax amount</th>
                        <th>Inv total</th>
                        <th>Cap amount</th>
                        <th>Bal amount</th>
                        <th>Action</th>


                    </tr>
                </thead>
                <tbody>
                   
                </tbody>
            </table>
            <div class="row">
                <div class="col-sm-12" style="font-size: small;text-align: right;margin-bottom: 100px;">
                    <button mat-icon-button [disabled]="has_previousbuk === false" color="primary"
                        (click)=" bukpreviousClick()">
                        <mat-icon>arrow_back</mat-icon>
                    </button>
                    {{presentpagebuk}}
                    <button mat-icon-button [disabled]="has_nextbuk === false" color="primary"
                        (click)=" buknextClick()">
                        <mat-icon>arrow_forward</mat-icon>
                    </button>
                </div>
            </div>
        </div>
    </div>


</div> -->
<div class="row">
    <div class="col-md-9">
        <mat-tab-group style="font-weight: 500;font-size: 25px;font-family: Georgia, 'Times New Roman', Times, serif" mat-align-tabs="center" #tabref [(selectedIndex)]="selectIndex" (selectedTabChange)="withoutbucBtn(tabref.selectedIndex)" style="font-size: 20px;">
            <mat-tab label="Without Bucket" >
            </mat-tab>
            <mat-tab label="Bucket" > 
                </mat-tab>
            
        </mat-tab-group>
    </div>
    <div class="col-md-1">
        <button class="btn btn-outline-success" style="border-radius:25px;margin-top: 10px;" matTooltip="Report"
            data-toggle="modal" data-target="#reportdownload">
            <i class="fa fa-file-text"></i></button>
    </div>
    <div class="col-md-1">
        <button type="button" class="btn btn-outline-success" style="border-radius:30px;width:150px;margin-top:10%;margin-left:-15%;"
            [routerLink]='"/fa/bucketsummary"'>Bucket History</button>
    </div>
</div>
<div *ngIf="isassetcwipbuk" style="margin-left: 30px;overflow: hidden;">
    <h6 *ngIf="iswithbuk"
        style="font-weight: 500;font-size: 17px;font-family: Georgia, 'Times New Roman', Times, serif;margin-left:5% ;margin-top: 15px;">
        <b>Group Data's</b></h6>
        <h6 *ngIf="iswithoutbuk"
        style="font-weight: 500;font-size: 17px;font-family: Georgia, 'Times New Roman', Times, serif;margin-left:5% ;margin-top: 15px;">
       <b> Non-Group Data's</b></h6>


    <div class="Container" style="margin-left: 30px;overflow: hidden;">

        <div  style="width:95%;margin-top: .1%;overflow: hidden;text-align:center;font-size:15px">
            <table class="table table-bordered table-responsive table-hover" style="border-collapse: collapse;">
                <thead class="table_header">
                    <tr>
                        <th>S.No</th>
                        <th *ngIf="iswithoutbuk">CR No</th>
                        <th *ngIf="iswithbuk">Bucket Name</th>
                        <th>Invoice Type</th>
                        <th *ngIf="iswithoutbuk">Invoice No.</th>
                        <th *ngIf="iswithoutbuk">Invoice Date</th>
                        <th *ngIf="iswithbuk">Invoice Count</th>
                        <th *ngIf="iswithoutbuk">Supplier Name</th>
                        <th>Tax Amount</th>
                        <th>Taxable Amount</th>
                        <th>Invoice Total</th>
                        <th>Capitalised Amount</th>
                        <th>Balance Amount</th>


                        <th>Action</th>
                        <th *ngIf="iswithoutbuk">Select</th>
                        <th *ngIf="iswithbuk">Delete</th>
                        <!-- <th>Qty Change</th> -->


                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let assetcat of assetmakerwbcwlist; index as i">
                        <th scope="row">{{ (presentpagewbuk-1)*pageSize+i+1 }}</th>
                        <td *ngIf="iswithoutbuk">{{assetcat['details']['data'][0].ecfnum}}</td>
                        <td *ngIf="iswithbuk">{{assetcat.groupno}}</td>
                        <td>{{ assetcat.assettype}}</td>
                        <td *ngIf="iswithoutbuk">{{ assetcat['details']['data'][0].invoiceno}}</td>
                        <td *ngIf="iswithbuk">{{assetcat.invoicecount}}</td>
                        <td width="10%" *ngIf="iswithoutbuk">{{ assetcat['details']['data'][0].invoicedate |date:'dd-MMM-yy'}}</td>
                        <td *ngIf="iswithoutbuk">{{ assetcat['details']['data'][0].supplier_name}}</td>
                        <td>{{ assetcat.tottaxamount |  number:'1.1-1'}}</td>
                        <td>{{ assetcat.totinvoiceamount |  number:'1.2-2'}}</td>
                        <td>{{ assetcat.totamount |  number:'1.2-2'}}</td>
                        <td>{{ assetcat.capitalizedamount |  number:'1.2-2'}}</td>
                        <td>{{ assetcat.balanceamount | number:'1.2-2'}}</td>


                        <td style="cursor: pointer; color: #3684BF; " (click)="assetView(assetcat.id)">{{ view}}</td>
                        <td *ngIf="iswithoutbuk"> <input type="checkbox" id="vehicle1" name="vehicle1" value="Bike"
                                (change)="filterResults(assetcat, $event)" [(ngModel)]="checkedValuescwip[i]"></td>
                        <td *ngIf="iswithbuk">
                        
                            <!-- <mat-icon (click)="delete_bucket(assetcat)">delete</mat-icon> -->
                            <button type="button" class="btn btn-outline-danger" style="border-radius: 25px;" (click)="delete_bucket(assetcat)" [disabled]="assetcat?.capitalizedamount!=0"><i class="fa fa-trash"></i></button>
                        </td>
                        <!-- <td>
                            <mat-icon data-toggle="modal" data-target="#qtymodel" (click)="viewdata(assetcat)">visibility</mat-icon>
                        </td> -->

                    </tr>
                    <tr *ngIf="assetmakerwbcwlist.length ==0">
                        <td colspan="13">No Records Found</td>
                    </tr>
                </tbody>
            </table>
            <div class="row">
                <h3 style="text-decoration: underline;margin-left: 30px;" (click)="assettotalcount()" 
                [ngClass]="total_countsenb?'enb_pointercounttrue':'enb_pointercount'"
                matTooltip="Click To Show The Total Counts">Total Counts:<b style="text-decoration: none;">{{total_counts}}</b></h3>
                <div class="col-sm-12" style="font-size: small;text-align: right;margin-bottom: 100px;">
                    <button mat-icon-button [disabled]="!has_previousbuk " color="primary"
                        (click)=" wbukpreviousClickbuc()">
                        <mat-icon>arrow_back</mat-icon>
                    </button>
                    {{presentpagebuk}}
                    <button mat-icon-button [disabled]="!has_nextbuk " color="primary"
                        (click)=" wbuknextClickbuc()">
                        <mat-icon>arrow_forward</mat-icon>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div  style="margin-bottom: 20%;margin-top: -5%;margin-left: 30%;" *ngIf="!iswithbuk">

        <form [formGroup]="bucketnameform" (ngSubmit)="bucketnameCreateForm()">

            <div class="row">
                <div class="col-md-3">
                    <mat-form-field style="width: 175px;">
                        <mat-label>Bucket Name</mat-label>
                        <input placeholder="Select Bucket Name" matInput formControlName="bucketname"
                            [matAutocomplete]="bucket">
                        <mat-autocomplete #bucket="matAutocomplete" >
                            <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                            <ng-container *ngFor="let bucket of bucketnamelist">
                                <mat-option  *ngIf="bucket['doctype']==2" [value]="bucket.name" (focusout)="selectata(bucket)">{{bucket.name}}
                                </mat-option>
                            </ng-container>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>
            
                <div class="col-md-3">


                    <button type="button" class="fa fa-plus" class="btn btn-outline-success"  matTooltip="Bucket add" data-toggle="modal" [disabled]="add_btn_enb"
                        data-target="#exampleModals"
                        style="border-radius:40px; width:80px;height: 40px;">Add

                    </button>
                </div>
            </div>
            <div style="margin-left:5%;margin-top:5%;">
                <button type="submit" class="btn btn-success" [disabled]="add_btn_enb" matTooltip="move to bucket">Move to Bucket</button>

                <button type="button" routerLink="/fa/fa" class="btn btn-secondary" style="margin-left:3%;" matTooltip="Back">Back</button>
            </div>
        </form>
        <div class="modal fade" id="exampleModals" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content" style="width: 700px;">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel" style="font-size:1.2vw;font-weight: bolder;">
                            Depreciation setting</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">

                        <div>


                            <div>
                                <form [formGroup]="bucketform" (ngSubmit)="buccreateForm()">
                                    <table>
                                        <div>
                                            <tr>


                                                <td>
                                                    <mat-form-field style="width: 175px;margin-left: 10px;">
                                                        <mat-label>Bucket Name</mat-label>
                                                        <input matInput placeholder="Bucket Name" formControlName="name"
                                                            autocomplete="off" required>
                                                    </mat-form-field>
                                                </td>

                                                <td>

                                                    <mat-form-field>
                                                        <mat-label>Doctype</mat-label>

                                                        <mat-select formControlName="doctype">

                                                            <mat-option *ngFor="let bucket of bucketlist"
                                                                [value]="bucket.text">
                                                                {{bucket.text}}
                                                            </mat-option>
                                                        </mat-select>
                                                    </mat-form-field>

                                                </td>

                                            </tr>
                                        </div>
                                    </table>
                                    <div class="modal-footer">
                                        <button type="submit" class="btn btn-success" matTooltip="Submit">Submit</button>

                                        <button type="button" class="btn btn-secondary"
                                            data-dismiss="modal" matTooltip="Close">Close</button>

                                    </div>


                                </form>
                            </div>
                        </div>



                    </div>

                </div>
            </div>


        </div>
    </div>
</div>


<div *ngIf="isassetbucbuk" style="margin-left: 30px;overflow: hidden;">
    <h6 *ngIf="iswithbuk"
        style="font-weight: 500;font-size: 17px;font-family: Georgia, 'Times New Roman', Times, serif;margin-left:5% ;margin-top: 15px;">
        <b>Group Data's</b></h6>
        <h6 *ngIf="iswithoutbuk"
        style="font-weight: 500;font-size: 17px;font-family: Georgia, 'Times New Roman', Times, serif;margin-left:5% ;margin-top: 15px;">
        <b>Non-Group Data's</b></h6>


    <div class="Container" style="margin-left: 30px;overflow: hidden;">

        <div style="width:95%;margin-top: .1%;overflow: hidden;text-align:center;font-size:15">
            <table class="table table-responsive table-bordered table-hover">
                <thead class="table_header">
                    <tr>
                        <th>S.No</th>
                        <th *ngIf="iswithoutbuk">CR No</th>
                        <th *ngIf="iswithbuk">Bucket Name</th>
                        <th>Invoice Type</th>
                        <th *ngIf="iswithoutbuk">Invoice No.</th>
                        <th *ngIf="iswithoutbuk">Invoice Date</th>
                        <th *ngIf="iswithbuk">Invoice Count</th>
                        <th *ngIf="iswithoutbuk">Supplier Name</th>
                        <th>Tax Amount</th>
                        <th>Taxable Amount</th>
                        <th>Invoice Total</th>
                        <th>Capitalised Amount</th>
                        <th>Balance Amount</th>


                        <th>Action</th>
                        <th *ngIf="iswithoutbuk">Select</th>
                        <th *ngIf="iswithbuk">Delete</th>
                        <!-- <th>Qty Change</th> -->


                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let assetcat of assetmakerwbbuclist; index as i">
                        <th scope="row">{{ (presentpagewbuk-1)*pageSize+i+1 }}</th>
                        <td *ngIf="iswithoutbuk">{{assetcat['details']['data'][0].ecfnum}}</td>
                        <td *ngIf="iswithbuk">{{assetcat.groupno}}</td>
                        <td>{{ assetcat.assettype}}</td>
                        <td *ngIf="iswithoutbuk">{{ assetcat['details']['data'][0].invoiceno}}</td>
                        <td *ngIf="iswithbuk">{{assetcat.invoicecount}}</td>
                        <td width="10%" *ngIf="iswithoutbuk">{{ assetcat['details']['data'][0].invoicedate |date:'dd-MMM-yy'}}</td>
                        <td *ngIf="iswithoutbuk">{{ assetcat['details']['data'][0].supplier_name}}</td>
                        <td>{{ assetcat.tottaxamount | number:'1.1-1'}}</td>
                        <td>{{ assetcat.totinvoiceamount | number:'1.2-2'}}</td>
                        <td>{{ assetcat.totamount | number:'1.2-2'}}</td>
                       <td>{{ assetcat.capitalizedamount | number:'1.2-2'}}</td>
                        <td>{{ assetcat.balanceamount | number:'1.2-2'}}</td>


                        <td style="cursor: pointer; color: #3684BF; " (click)="assetView(assetcat.id)">{{ view}}</td>
                        <td *ngIf="iswithoutbuk"> <input type="checkbox" id="vehicle1" name="vehicle1" value="Bike"
                                (change)="filterResults_buc(assetcat, $event)" [(ngModel)]="checkedValuesbuc[i]"></td>
                        <td *ngIf="iswithbuk">
                        
                           <!-- <mat-icon  (click)="delete_bucket(assetcat)">delete</mat-icon></button>  -->
                           <button type="button"  class="btn btn-outline-danger" style="border-radius: 25px;"   (click)="delete_bucket(assetcat)"
                           ><i class="fa fa-trash"></i></button>
                        
                        </td>
                                <!-- <td>
                                    <mat-icon data-toggle="modal" data-target="#qtymodel" (click)="viewdata(assetcat)">visibility</mat-icon> [disabled]="assetcat?.capitalizedamount!=0"
                                </td> -->

                    </tr>
                    <tr *ngIf="assetmakerwbbuclist.length ==0">
                        <td colspan="13">No Records Found</td>
                    </tr>
                </tbody>
            </table>
            <div class="row">
                <h3 style="text-decoration: underline;margin-left: 30px;" [ngClass]="total_countsenb?'enb_pointercounttrue':'enb_pointercount'"
                 (click)="assettotalcount()" 
                matTooltip="Click To Show The Total Counts">Total Counts:<b style="text-decoration: none;">{{total_counts}}</b></h3>
                <div class="col-sm-12" style="font-size: small;text-align: right;margin-bottom: 100px;">
                    <button mat-icon-button [disabled]="!has_previousbuk" color="primary"
                        (click)=" wbukpreviousClickbucc()">
                        <mat-icon>arrow_back</mat-icon>
                    </button>
                    {{presentpagebuk}}
                    <button mat-icon-button [disabled]="!has_nextbuk" color="primary"
                        (click)=" wbuknextClickbucc()">
                        <mat-icon>arrow_forward</mat-icon>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div  style="margin-bottom: 20%;margin-top: -5%;margin-left: 30%;" *ngIf="!iswithbuk">

        <form [formGroup]="bucketnameform" (ngSubmit)="bucketnameCreateForm_buc()">
<!--[displayWith]="displayFnBuc"-->
            <div class="row">
                <div class="col-md-3">
                    <mat-form-field style="width: 175px;">
                        <mat-label>Bucket Name</mat-label>
                        <input placeholder="Select Bucket Name" matInput formControlName="bucketname"
                            [matAutocomplete]="bucket">
                        <mat-autocomplete #bucket="matAutocomplete" >
                            <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                            <ng-container *ngFor="let bucket of bucketnamelist">
                                <mat-option *ngIf="bucket['doctype']==3" [value]="bucket.name" (focusout)="selectata(bucket)">{{bucket.name}}
                                </mat-option>
                            </ng-container>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>
        
                <div class="col-md-3" >


                    <button type="button" class="fa fa-plus" class="btn btn-outline-success" data-toggle="modal"
                        data-target="#exampleModals"    matTooltip="Bucket Add"
                        style="border-radius:40px; width:80px;height: 40px;" [disabled]="add_atn_enb_buc" >Add

                    </button>
                </div>
            </div>
            <div style="margin-left:5%;margin-top:5%;margin-bottom: 5%;">
                <button type="submit" class="btn btn-success" [disabled]="add_atn_enb_buc" matTooltip="Move to Bucket">Move to Bucket</button>

                <button type="button" routerLink="/fa/fa" class="btn btn-secondary" style="margin-left:3%;" matTooltip="Back">Back</button>
            </div>

        </form>



        <div class="modal fade" id="exampleModals" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content" style="width: 700px;">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel" style="font-size:1.2vw;font-weight: bolder;">
                            Depreciation setting</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">

                        <div>


                            <div>
                                <form [formGroup]="bucketform" (ngSubmit)="buccreateForm()">
                                    <table>
                                        <div>
                                            <tr>


                                                <td>
                                                    <mat-form-field style="width: 175px;margin-left: 10px;">
                                                        <mat-label>Bucket Name</mat-label>
                                                        <input matInput placeholder="Bucket Name" formControlName="name"
                                                            autocomplete="off" required>
                                                    </mat-form-field>
                                                </td>

                                                <td>

                                                    <mat-form-field>
                                                        <mat-label>Doctype</mat-label>

                                                        <mat-select formControlName="doctype">

                                                            <mat-option *ngFor="let bucket of bucketlist"
                                                                [value]="bucket.text">
                                                                {{bucket.text}}
                                                            </mat-option>
                                                        </mat-select>
                                                    </mat-form-field>

                                                </td>

                                            </tr>
                                        </div>
                                    </table>
                                    <div class="modal-footer">
                                        <button type="submit" [disabled]="bucketform.invalid" class="btn btn-success" matTooltip="Submit">Submit</button>

                                        <button type="button" class="btn btn-secondary"
                                            data-dismiss="modal" matTooltip="close">Close</button>

                                    </div>


                                </form>
                            </div>
                        </div>



                    </div>

                </div>
            </div>




        </div>
    </div>

</div>




<div *ngIf="isassetregbuk" style="margin-left: 30px;overflow: hidden;">
    <h6  *ngIf="iswithbuk"
        style="font-weight: 500;font-size: 17px;font-family: Georgia, 'Times New Roman', Times, serif;margin-left:5% ;margin-top: 15px;">
       <b> Group Data's</b></h6>
        <h4 *ngIf="iswithoutbuk"
        style="font-weight: 500;font-size: 17px;font-family: Georgia, 'Times New Roman', Times, serif;margin-left:5% ;margin-top: 15px;">
       <b>Non-Group Data's</b></h4>



    <div class="Container" style="margin-left: 30px;overflow: hidden; text-align:center;font-size:15px">

        <div  style="width:95%;margin-top: .1%;overflow: hidden;">
            <table class="table table-responsive table-bordered table-hover">
                <thead class="table_header">
                    <tr>
                        <th>S.No</th>
                        <th *ngIf="iswithoutbuk">CR No</th>
                        <th *ngIf="iswithbuk">Bucket Name</th>
                        <th> Invoice Type</th>
                        <th *ngIf="iswithoutbuk">Invoice No.</th>
                        <th *ngIf="iswithoutbuk">Invoice Date</th>
                        <th *ngIf="iswithbuk">Invoice Count</th>
                        <th *ngIf="iswithoutbuk">Supplier Name</th>
                        <th>Tax Amount</th>
                        <th>Taxable Amount</th>
                        <th>Invoice Total</th>
                        <th>Capitalised Amount</th>
                        <th>Balance Amount</th>


                        <th>Action</th>
                        <th *ngIf="iswithoutbuk">Select</th>
                        <th>Invoice Qty Change</th>
                        <th *ngIf="iswithbuk">Delete</th>

                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let assetcat of assetmakerreglist; index as i">
                        <th scope="row">{{ (presentpagewbuk-1)*pageSize+i+1 }}</th>
                        <td *ngIf="iswithoutbuk">{{assetcat['details']['data'][0].ecfnum}}</td>
                        <td *ngIf="iswithbuk">{{assetcat.groupno}}</td>
                        <td>{{ assetcat.assettype}}</td>
                        <td *ngIf="iswithoutbuk">{{ assetcat['details']['data'][0].invoiceno}}</td>
                        <td *ngIf="iswithbuk">{{assetcat.invoicecount}}</td>
                        <td width="10%" *ngIf="iswithoutbuk">{{ assetcat['details']['data'][0].invoicedate |date:'dd-MMM-yy'}}</td>
                        <td *ngIf="iswithoutbuk">{{ assetcat['details']['data'][0].supplier_name}}</td>
                        <td>{{ assetcat.tottaxamount |  number:'1.1-1'}}</td>
                        <td>{{ assetcat.totinvoiceamount |  number:'1.2-2'}}</td>
                        <td>{{ assetcat.totamount |  number:'1.2-2'}}</td>
                        <td>{{ assetcat.capitalizedamount |  number:'1.2-2'}}</td>
                        <td>{{ assetcat.balanceamount | number:'1.2-2'}}</td>



                        <td style="cursor: pointer; color: #3684BF; " (click)="assetView(assetcat.id)">{{ view}}</td>
                        <td *ngIf="iswithoutbuk"> <input type="checkbox" id="vehicle1" name="vehicle1" value="Bike"
                                (change)="filterResults_reg(assetcat, $event)" [(ngModel)]="checkedValuesreg[i]"></td>
                                <td>
                                    <mat-icon data-toggle="modal" data-target="#qtymodel" (click)="viewdata(assetcat)">visibility</mat-icon>
                                </td>
                        <td *ngIf="iswithbuk">
                        
                            <!-- <mat-icon (click)="delete_bucket(assetcat)">delete</mat-icon> -->
                            <button type="button" [disabled]="assetcat?.capitalizedamount!=0" class="btn btn-outline-danger" style="border-radius: 25px;" (click)="delete_bucket(assetcat)"
                            matTooltip="Delete Bucket"><i class="fa fa-trash"></i></button>
                        
                        </td>
                    </tr>
                    <tr *ngIf="assetmakerreglist.length ==0">
                        <td colspan="13">No Records Found</td>
                    </tr>
                </tbody>
            </table>
            <div class="row">
                <h3 style="text-decoration: underline;margin-left: 30px;" (click)="assettotalcount()" [ngClass]="total_countsenb?'enb_pointercounttrue':'enb_pointercount'"
                matTooltip="Click To Show The Total Counts">Total Counts:<b style="text-decoration: none;">{{total_counts}}</b></h3>
                <div class="col-sm-12" style="font-size: small;text-align: right;margin-bottom: 100px;">
                    <button mat-icon-button [disabled]="!has_previouswbuk" color="primary"
                        (click)=" wbukpreviousClick()">
                        <mat-icon>arrow_back</mat-icon>
                    </button>
                    {{presentpagewbuk}}
                    <button mat-icon-button [disabled]="!has_nextwbuk" color="primary"
                        (click)=" wbuknextClick()">
                        <mat-icon>arrow_forward</mat-icon>
                    </button>
                    <!-- <mat-paginator
                                (page)="handlePageEvent_reg($event)"
                                [length]="length_reg"
                                [pageSize]="pageSize"
                                [showFirstLastButtons]="showFirstLastButtons"
                                [pageSizeOptions]="pageSizeOptions"
                                [pageIndex]="pageIndex_reg"
                                
                                aria-label="Select page">
                            </mat-paginator> -->
                </div>
            </div>
        </div>
    </div>

    <div  style="margin-bottom: 20%;margin-top: -10%;margin-left: 30%;"  *ngIf="!iswithbuk">
        <form [formGroup]="bucketnameform" (ngSubmit)="bucketnameCreateForm_reg()">
<!--[displayWith]="displayFnBuc"-->
            <div class="row">
                <div class="col-md-3">
                    <mat-form-field style="width: 175px;" >
                        <mat-label>Bucket Name</mat-label>
                        <input placeholder="Select Bucket Name" matInput formControlName="bucketname"
                            [matAutocomplete]="bucket">
                        <mat-autocomplete #bucket="matAutocomplete" >
                            <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                            <ng-container *ngFor="let bucket of bucketnamelist">
                                <mat-option  *ngIf="bucket['doctype']==1" [value]="bucket.name" (focusout)="selectata(bucket)">{{bucket.name}}
                                </mat-option>
                            </ng-container>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>
            


                <div class="col-md-3" >


                    <button type="button" class="fa fa-plus" class="btn btn-outline-success" data-toggle="modal"
                        data-target="#exampleModals"  matTooltip="Bucket Add"
                        style="border-radius:40px; width:80px;height: 40px;" [disabled]="add_btn_enb_reg">Add

                    </button>

                </div>
            </div>
            <div style="margin-left:5%;margin-top:5%;">
                <button type="submit" class="btn btn-success" [disabled]="add_btn_enb_reg" matTooltip="Move To BUcket">Move to Bucket</button>

                <button type="button" routerLink="/fa/fa" class="btn btn-secondary" style="margin-left:3%;" matTooltip="Back">Back</button>
            </div>
        </form>

        <div class="modal fade" id="exampleModals" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content" style="width: 700px;">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel" style="font-size:1.2vw;font-weight: bolder;">
                            Depreciation setting</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">

                        <div>


                            <div>
                                <form [formGroup]="bucketform" (ngSubmit)="buccreateForm()">
                                    <table>
                                        <div>
                                            <tr>


                                                <td>
                                                    <mat-form-field style="width: 175px;margin-left: 10px;">
                                                        <mat-label>Bucket Name</mat-label>
                                                        <input matInput placeholder="Bucket Name" formControlName="name"
                                                            autocomplete="off" required>
                                                    </mat-form-field>
                                                </td>

                                                <td>

                                                    <mat-form-field>
                                                        <mat-label>Doctype</mat-label>

                                                        <mat-select formControlName="doctype">

                                                            <mat-option *ngFor="let bucket of bucketlist"
                                                                [value]="bucket.text">
                                                                {{bucket.text}}
                                                            </mat-option>
                                                        </mat-select>
                                                    </mat-form-field>

                                                </td>


                                            </tr>
                                        </div>
                                    </table>
                                    <div class="modal-footer">
                                        <button type="submit" class="btn btn-success" matTooltip="Submit">Submit</button>

                                        <button type="button" class="btn btn-secondary"
                                            data-dismiss="modal" matTooltip="Close">Close</button>

                                    </div>


                                </form>
                            </div>
                        </div>



                    </div>

                </div>
            </div>
        </div>




    </div>
</div>
<div class="modal fade" id="qtymodel" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content">
        <div class="modal-header" style="background-color: #199a2dce;">
          <h2 class="modal-title" id="exampleModalLabel">Invoice Qty Change:<b>(</b>{{ecfnum?ecfnum:""}}<b>)</b></h2>
          <button type="button" #qtyclose class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <table style="width: 96%;border: none;">
                <tr >
                    <th style="text-align: start;">Total Amount</th>
                    <td style="text-align: left;">: {{qty_totaltaxableamount}}</td>
                    <th style="text-align: start;">Total Tax Amount</th>
                    <td style="text-align: left;">: {{qty_taxamount}}</td>
                    <th style="text-align: start;">Total Taxable Amount</th>
                    <td style="text-align: left;">: {{qty_totalamount}}</td>
                </tr>
                <tr >
                    <th style="text-align: start;">Invoice Count</th>
                    <td style="text-align: left;">: {{qty_invoicecoount}}</td>
                    <th style="text-align: start;">Capitalize Amount</th>
                    <td style="text-align: left;">: {{qty_capitalizeamount}}</td>
                    <th style="text-align: start;">Balance Amount</th>
                    <td style="text-align: left;">: {{qty_balanceamount}}</td>
                </tr>
            </table>
            <br>
            <form [formGroup]="qtyChangeArrayForm">
                <div class="table-responsive" style="height: 400px;overflow-y: scroll;overflow-x: scroll;">
                    <table class="table table-bordered">
                        <thead class="table_header">
                            <tr>
                                <th>S.No</th>
                                <th>Product Name</th>
                                <th>Taxable Amount</th>
                                <th>Tax Amount</th>
                                <th>Total Taxable Amount</th>
                                <th>Existing Qty</th>
                                <th>Existing Balance Qty</th>
                                <th>Qty</th>
                                <th>Balance Qty</th>
                                <th>Action</th>
                                
                            </tr>
                        </thead>
                        <tbody formArrayName="dataArray">
                            <tr *ngFor="let dts of qtyChangeArrayForm.controls.dataArray['controls'];let i=index" [formGroupName]="i">
                                <td>{{i+1}}</td>
                                <td style="text-align: left;">{{dts.get('productname').value }}</td>
                                <td style="text-align: right;">{{dts.get('taxableamount').value  | number:'1.0-3'}}</td>
                                <td style="text-align: right;">{{dts.get('taxamount').value | number:'1.0-3'}}</td>
                                <td style="text-align: right;">{{dts.get('totalamount').value | number:'1.0-3'}}</td>
                                <td style="text-align: right;">{{dts.get('availbale_qty').value}}</td>
                                <td style="text-align: right;">{{dts.get('existing_balanceqty').value}}</td>
                                <td>
                                    <mat-form-field appearance="outline" style="width: 100px;">
                                        <mat-label>Qty</mat-label>
                                        <input type="number" matInput formControlName="qty" min="1" [readonly]="dts.get('enb').value">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field appearance="outline">
                                        <mat-label>Balance Qty</mat-label>
                                        <input type="number" matInput readonly formControlName="balanceQty" min="1" [value]="qtyChangeArrayForm.controls.dataArray['controls'][i].get('qty').value">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <input type="checkbox" 
                                        (change)="qtyappend($event,dts)" [disabled]="dts.get('enb').value" [checked]="dts.get('select_enb').value" (change)="chenageStatus($event,i)"><!--[(ngModel)]="checkedValuesreg[i]"-->
                                </td>
                            </tr>
                        </tbody>

                    </table>
                </div>
            </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" (click)="quantitychangesubmit()" class="btn btn-primary">Submit</button>
        </div>
      </div>
    </div>
  </div>

<div class="modal fade bd-example-modal-lg" data-backdrop="static" data-keyboard="false" id="reportdownload"
    tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #DDEFDD;">
                <h2 class="modal-title" id="exampleModalLongTitle">Report Download</h2>
                <button type="button" class="close" #closebutton data-dismiss="modal" aria-label="Close" #closeaddpopup>
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form [formGroup]="reportform">
                    <div class="row">
                        <div class="col-md-3" style="margin-top: 20px;text-align:center">
                            <mat-label style="font-weight: bold;">1.FA-Maker Report</mat-label>

                        </div>

                        <div class="col-md-3">
                            <mat-form-field>
                                <mat-label>Select Doc type</mat-label>
                                <mat-select formControlName="maker_doctype">
                                    <mat-option value="1">Regular</mat-option>
                                    <mat-option value="2">Cwip</mat-option>
                                    <mat-option value="3">Buc</mat-option>
                                </mat-select>
                            </mat-form-field>

                        </div>
                        <div class="col-md-3">
                            <button  class="btn btn-outline-success" matTooltip="Download" style=" width: 50px;height:50px;margin-left:25px; 
                                                                                border-radius: 25px;" (click)="maker_reportdowload()">
                                <span class="fa fa-download"></span></button>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-md-3" style="margin-top: 20px;text-align:center">
                            <mat-label style="font-weight: bold;">2.FA-Bucket Report</mat-label>

                        </div>

                        <div class="col-md-3">
                            <mat-form-field>
                                <mat-label>Select Doc type</mat-label>
                                <mat-select formControlName="bucket_doctype">
                                    <mat-option value="1">Regular</mat-option>
                                    <mat-option value="2">Cwip</mat-option>
                                    <mat-option value="3">Buc</mat-option>
                                </mat-select>
                            </mat-form-field>

                        </div>
                        <div class="col-md-3">
                            <button  class="btn btn-outline-success" matTooltip="Download" style=" width: 50px;height:50px;margin-left:25px; 
                                                                                border-radius: 25px;" (click)="bucket_reportdowload()">
                                <span class="fa fa-download"></span></button>
                        </div>

                    </div>

                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger text-center" data-dismiss="modal" (click)="closereport()">Close</button>
                <!--  <button type="button" class="btn btn-success">Add</button>
                                </div> -->
            </div>
        </div>
    </div>
</div>

<ngx-spinner 
bdColor="rgba(51,51,51,0.8)"
size="medium"
color="#fff"
type="ball-scale-multiple"
> 
<p style="font-size: 20px; color: white">Loading...</p>
</ngx-spinner>  
