<mat-card>
  <mat-card-title><h3>Quotation Master</h3></mat-card-title>
  <mat-card-content>
    <form [formGroup]="quotationMasterSearch">
      <div class="row">
        <!-- <div class="col">
          <mat-form-field style="width: 200px" (click)="getSuppliersearch()">
            <mat-label>Vendor/ Supplier Name</mat-label>
            <input
              #suppliersearchInputt
              placeholder="Select supplier"
              matInput
              formControlName="supplier_code"
              [matAutocomplete]="suppliersearchh"
            />
            <mat-autocomplete
              #suppliersearchh="matAutocomplete"
              [displayWith]="displayFnsupp"
              (opened)="autocompletesuppliersearchScroll()"
            >
              <mat-option *ngIf="isLoading" class="is-loading"
                >Loading...</mat-option
              >
              <ng-container *ngIf="!isLoading">
                <mat-option
                  *ngFor="let supplier of suppliersearchList"
                  [value]="supplier"
                >
                  {{ supplier.name }}
                </mat-option>
              </ng-container>
            </mat-autocomplete>
          </mat-form-field>
        </div> -->
        <!-- <div class="col">
          <mat-form-field style="width: 150px">
            <mat-label>Quotation Request ID</mat-label>
            <input matInput formControlName="quotation_no" />
          </mat-form-field>
        </div> -->
        <!-- <div class="col">
          <mat-form-field (focus)="forQuotationDD()">
            <mat-label>Quotation For</mat-label>
            <input
              #qforInput
              placeholder="Select Quotation For"
              matInput
              formControlName="quotation_for_id"
              [matAutocomplete]="quotfor"
            />
            <mat-autocomplete
              #quotfor="matAutocomplete"
              [displayWith]="displayFnQuot"
              (opened)="autocompleterforScroll()"
            >
              <mat-option *ngIf="isLoading" class="is-loading"
                >Loading...</mat-option
              >
              <ng-container *ngIf="!isLoading">
                <mat-option *ngFor="let qf of forQuotationList" [value]="qf">
                  {{ qf.name }}
                </mat-option>
              </ng-container>
            </mat-autocomplete>
            <button
              type="button"
              matSuffix
              class="close"
              (focus)="resetDD('qfor', 'summ')"
            >
              x
            </button>
          </mat-form-field>
        </div> -->
        <!-- <div class="col">
          <mat-form-field>
            <mat-label>Product Type</mat-label>
            <mat-select formControlName="producttype_id">
              <mat-option *ngFor="let types of Lists" [value]="types.id" (click)="
                product_type = types?.id;">
                {{ types.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div> -->
        <!-- <div class="col">
          <mat-form-field (click)="getpproduct(0, 1)">
            <mat-label>Product Name</mat-label>
            <input
              #productInputt
              placeholder="Select Product"
              matInput
              formControlName="product_id"
              [matAutocomplete]="productcatt"
            />
            <mat-autocomplete
              #productcatt="matAutocomplete"
              [displayWith]="displayFnproductt"
              (opened)="autocompleteproductScroll()"
            >
              <mat-option *ngIf="isLoading" class="is-loading"
                >Loading...</mat-option
              >
              <ng-container *ngIf="!isLoading">
                <mat-option
                  *ngFor="let product of productList"
                  [value]="product"
                >
                  {{ product.name }}
                </mat-option>
              </ng-container>
            </mat-autocomplete>
            
          </mat-form-field>
        </div> -->
        <!-- <div class="col">
          <mat-form-field>
            <mat-label>Status</mat-label>
            <mat-select formControlName="quotation_status">
              <mat-option *ngFor="let types of StatusList" [value]="types.id">
                {{ types.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div> -->
        <div class="col mt-2">
          <!-- <button
            color="primary"
            class="btn btn-sm btn-outline-primary"
            title="Search Quotation"
            (focus)="getMasterQuotation(1)"
          >
            <i class="fa fa-search"></i>
          </button> -->
          &nbsp;&nbsp;
          <button
            color="primary"
            class="btn btn-sm btn-outline-secondary"
            title="Reset"
            (focus)="resetQuotation('master')"
          >
            <i class="fa fa-refresh"></i>
          </button>
          &nbsp;&nbsp;
          <button
            color="primary"
            class="btn btn-sm btn-outline-info"
            title="Add Quotation"
            id="modal1"
            data-toggle="modal"
            (click)="specList = []"
            data-target="#MasaddQuotation"
          >
            <i class="fa fa-plus"></i>
          </button>
        </div>
      </div>
      <!-- <div class="row"> -->

      <!-- </div> -->
    
    <br />
    <!-- <div class="table-responsive tableStyle" > -->
      <!-- <div
  class="table-responsive tableStyle"
  style="max-height: 500px; overflow-y: auto"
  (scroll)="onTableScroll($event)"> -->

  <!-- #scrollContainer
  class="tableFixHead"
  style="overflow-x: auto; max-height: 500px;"
  infiniteScroll
  [infiniteScrollDistance]="1" [infiniteScrollThrottle]="50"
  (scrolled)="onScroll()" 
  [scrollWindow]="false" MAX-->
  <div
  >

      <table class="table table-hover">
        <thead class="table_header">
          <tr>
            <th>S.No</th>
            <!-- <th>Quotation Request ID</th> -->
             <th>
        <div >
          <mat-form-field style="width: 150px;margin-bottom: -17px;">
            <mat-label>Quotation Request ID</mat-label>
            <input matInput formControlName="quotation_no" (keydown.enter)="onEnterKey($event)" />
          </mat-form-field>
        </div>
             </th>
            <!-- <th>Quotation For</th> -->
             <th>
                <div style="display: flex;">
          <mat-form-field (focus)="forQuotationDD()" style="margin-bottom: -17px;">
            <mat-label>Quotation For</mat-label>
            <input
              #qforInput
              placeholder="Select Quotation For"
              matInput
              formControlName="quotation_for_id"
              [matAutocomplete]="quotfor"
            />
            <mat-autocomplete
              #quotfor="matAutocomplete"
              [displayWith]="displayFnQuot"
              (opened)="autocompleterforScroll()"
            >
              <mat-option *ngIf="isLoading" class="is-loading"
                >Loading...</mat-option
              >
              <ng-container *ngIf="!isLoading">
                <mat-option *ngFor="let qf of forQuotationList" [value]="qf" (click)="getMasterQuotation(1)">
                  {{ qf.name }}
                </mat-option>
              </ng-container>
            </mat-autocomplete>
            <!-- <button
              type="button"
              matSuffix
              class="close"
              (focus)="resetDD('qfor', 'summ')"
            >
              x
            </button> -->
          </mat-form-field>
          <!-- <mat-form-field>
            <mat-label>Quotation For</mat-label>
            <input type="number" matInput formControlName="quotation_for_id" />
          </mat-form-field> -->
        </div>
             </th>
            <!-- <th>Quotation Number</th> -->
            <!-- <th>Vendor/ Supplier Name</th> -->
            <!-- <th>Product Type</th> -->
             <th>
              <div >
          <!-- <mat-form-field  style="margin-bottom: -17px;">
            <mat-label>Product Type</mat-label>
            <mat-select formControlName="producttype_id">
              <mat-option *ngFor="let types of Lists" [value]="types.id" 
              (click)="product_type = types?.id;getMasterQuotation(1)"> 
                {{ types.name }}
              </mat-option>
            </mat-select>
          </mat-form-field> -->
           <mat-form-field (click)="getProductTypes()" style="margin-bottom: -17px;">
            <mat-label>Product Type</mat-label>
            <input #productInputtype placeholder="Select Product type" matInput formControlName="producttype_id"
              [matAutocomplete]="productauto" (input)="input_getProductTypes()"/>
            <mat-autocomplete #productauto="matAutocomplete" [displayWith]="displayFnitem"
              (opened)="protype_autocompleteassetScroll()">
              <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
              <ng-container *ngIf="!isLoading">
                 <mat-option *ngFor="let types of prdTypes" [value]="types" (click)="product_type = types?.id;getMasterQuotation(1)">
                 {{ types.name }}
                </mat-option>
              </ng-container>
            </mat-autocomplete>
          </mat-form-field>

        </div>
             </th>
            <!-- <th>Product Name</th> -->
             <th>
               <div >
          <mat-form-field (click)="getpproduct(0, 1)"  style="margin-bottom: -17px;">
            <mat-label>Product Name</mat-label>
            <!-- <mat-label *ngIf="Services">Service Name</mat-label> -->

            <input
              #productInputt
              placeholder="Select Product"
              matInput
              formControlName="product_id"
              [matAutocomplete]="productcatt"
            />
            <mat-autocomplete
              #productcatt="matAutocomplete"
              [displayWith]="displayFnproductt"
              (opened)="autocompleteproductScroll()"
            >
              <mat-option *ngIf="isLoading" class="is-loading" 
                >Loading...</mat-option
              >
              <ng-container *ngIf="!isLoading">
                <mat-option
                  *ngFor="let product of productList"
                  [value]="product" (click)="getMasterQuotation(1)"
                >
                  {{ product.name }}
                </mat-option>
              </ng-container>
            </mat-autocomplete>
            <!-- <button
          type="button"
          matSuffix
          class="close"
          (click)="resetAfterProductChange('', 'removeProd')"
        >
        x
        </button> -->
          </mat-form-field>
        </div>
             </th>
            <!-- <th>Purpose</th> -->
            <!-- <th>Status</th> -->
             <th>
                <!-- <div class="col">
          <mat-form-field>
            <mat-label>Status</mat-label>
            <mat-select formControlName="quotation_status">
              <mat-option *ngFor="let types of StatusList" [value]="types.id" (click)="getMasterQuotation(1)">
                {{ types.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div> -->
        Status
             </th>
            <th>Action</th>
            <!-- <td>Make</td> -->
          </tr>
        </thead>
        <tbody *ngFor="let q of masterQuotationList; index as i">
        <!-- <tbody *ngFor="let q of overallarray[0]; index as i"> -->
          
          <tr
            (click)="getQdtl(q)"
            [ngClass]="{ 'selected-row': q.quotation_no == detailData }"
          >
            <td>{{(currentpage-1)*pageSize +i+1}}</td>
            <td>{{ q?.quotation_no }}</td>
            <td>{{ q?.quotation_for_name }}</td>
            <!-- <td>
              <ul *ngIf="q?.supplier?.length; else noSupplier">
                <li *ngFor="let sup of q.supplier">{{ sup }}</li>
              </ul>
              <ng-template #noSupplier>-</ng-template>
            </td> -->
            <td>{{ q?.producttype?.name }}</td>
            <!-- <td>
                {{ q?.product?.name }}
            </td> -->
            <td>
              {{ q?.product?.name }}
            </td>
            <!-- <td>{{ q?.purpose }}</td> -->
            <td>{{ q?.quotation_status == 1 ? "Fresh" : "Executed" }}</td>

            <td
              class="btn-link btn-sm"
              role="button"
              data-toggle="modal"
              data-target=".ViewQuotationn"
              (click)="DetailsQ(q)"
            >
              <mat-icon>visibility</mat-icon>
            </td>
            <!-- <td>{{ q.supplier_name }}</td> -->
            <!-- <td>{{ asset.model_name }}</td> -->
            <!-- <td>{{ asset.specification }}</td> -->
          </tr>
          <tr *ngIf="masterQuotationList.length == 0">
            <td colspan="7" class="text-center">No Data Found!</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div style="display: flex;align-items: center;justify-content: space-between;">
      <div style="font-weight: 700;">
Count : {{totalcount}}
      </div>
     <div>
       <!-- <button mat-icon-button [disabled]="has_previous === false" color="primary" (click)="isfirstpage()">
        <mat-icon>keyboard_double_arrow_left</mat-icon>
      </button> -->
      <button mat-icon-button [disabled]="has_previous === false" color="primary" (click)="previousClick()">
        <mat-icon>arrow_back</mat-icon>
      </button>
      {{currentpage}}
      <button mat-icon-button [disabled]="has_next === false" color="primary" (click)="hasnextClick()">
        <mat-icon>arrow_forward</mat-icon>
      </button>
      <!-- <button mat-icon-button [disabled]="has_next === false" color="primary" (click)="islastpage()">
        <mat-icon>keyboard_double_arrow_right</mat-icon>
      </button> -->
     </div>
    
    </div>
    <h4>
      <b>Note : </b>Click on any row to add or view quotation details below!
    </h4>
    <!-- <div class="col">

    </div> -->
    </form>
  </mat-card-content>
</mat-card>
<br />
<mat-card *ngIf="detailData">
  <mat-card-title><h3>Quotation Data</h3></mat-card-title>
  <mat-card-content>
    <form [formGroup]="quotationSearch">
      <div class="row">
        <!-- <div class="col">
          <mat-form-field style="width: 200px">
            <mat-label>Vendor/ Supplier Name</mat-label>
            <input
              #suppliersearchInputt
              placeholder="Select supplier"
              matInput
              formControlName="supplier_id"
              [matAutocomplete]="suppliersearchh"
            />
            <mat-autocomplete
              #suppliersearchh="matAutocomplete"
              [displayWith]="displayFnsupp"
              (opened)="autocompletesuppliersearchScroll()"
            >
              <mat-option *ngIf="isLoading" class="is-loading"
                >Loading...</mat-option
              >
              <ng-container *ngIf="!isLoading">
                <mat-option
                  *ngFor="let supplier of suppliersearchList"
                  [value]="supplier"
                >
                  {{ supplier.name }}
                </mat-option>
              </ng-container>
            </mat-autocomplete>
          </mat-form-field>
        </div> -->
        <!-- <div class="col">
          <mat-form-field>
            <mat-label>Quotation Reference</mat-label>
            <input matInput formControlName="supplier_quot_reference" />
          </mat-form-field>
        </div> -->
        <!-- <div class="col">
          <mat-form-field style="width: 11rem">
            <mat-label>Quotation Date</mat-label>
            <input
              matInput
              [matDatepicker]="pickerr"
              formControlName="quotation_date"
              autocomplete="off"
              [readonly]="View"
            />
            <mat-datepicker-toggle matSuffix [for]="pickerr" [disabled]="View">
              <mat-icon matDatepickerToggleIcon role="button"
                >keyboard_arrow_down</mat-icon
              >
            </mat-datepicker-toggle>
            <mat-datepicker [disabled]="View" #pickerr></mat-datepicker>
          </mat-form-field>
        </div> -->
        <!-- <div class="col">
          <mat-form-field>
            <mat-label>Product Type</mat-label>
            <mat-select formControlName="producttype_name">
              <mat-option *ngFor="let types of Lists" [value]="types.id">
                {{ types.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div> -->
        <!-- <div class="col">
          <mat-form-field (click)="getpproduct(0)">
            <mat-label>Product Name</mat-label>
            <input
              #productInput
              placeholder="Select Product"
              matInput
              formControlName="product_name"
              [matAutocomplete]="productcatt"
            />
            <mat-autocomplete
              #productcatt="matAutocomplete"
              [displayWith]="displayFnproductt"
              (opened)="autocompleteproductScrollP()"
            >
              <mat-option *ngIf="isLoading" class="is-loading"
                >Loading...</mat-option
              >
              <ng-container *ngIf="!isLoading">
                <mat-option
                  *ngFor="let product of productList"
                  [value]="product"
                  (click)="getOtherAttributes(product)"
                >
                  {{ product.name }}
                </mat-option>
              </ng-container>
            </mat-autocomplete>
            <button
          type="button"
          matSuffix
          class="close"
          (click)="resetAfterProductChange('', 'removeProd')"
        >
        x
        </button>
          </mat-form-field>
        </div> -->
        <!-- <div class="col">
          <mat-form-field>
            <mat-label>Active</mat-label>
            <mat-select formControlName="ref_status">
              <mat-option *ngFor="let types of activeList" [value]="types.id">
                {{ types.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div> -->
        <div class="col mt-2">
          <!-- <button
            color="primary"
            class="btn btn-sm btn-outline-primary"
            title="Search Quotation"
            (focus)="quotationData()"
          >
            <i class="fa fa-search"></i>
          </button>
          &nbsp;&nbsp; -->
          <button
            color="primary"
            class="btn btn-sm btn-outline-secondary"
            title="Reset"
            (focus)="resetQuotation('detail')"
          >
            <i class="fa fa-refresh"></i>
          </button>
          &nbsp;&nbsp;
          <button
            color="primary"
            class="btn btn-sm btn-outline-info"
            title="Add Quotation"
            (click)="addQuotationData()"
            data-toggle="modal"
            data-target="#addQuotationData"
          >
            <i class="fa fa-plus"></i>
          </button>
        </div>
      </div>
      <!-- <div class="row"> -->

      <!-- </div> -->
    
    <br />
    <div class="row">
      <div class="col ml-3 mb-2">
        <h3>Quotation Request ID : {{ quotation_no }}</h3>
      </div>
    </div>
    <!-- <div class="table-responsive tableStyle"> -->


      <!-- //detail table here -->

        <!-- class="tableFixHead"
  style="overflow-x: auto; max-height: 500px;"
  infiniteScroll
  [infiniteScrollDistance]="1" [infiniteScrollThrottle]="50"
  (scrolled)="onScrollchild()" 
  [scrollWindow]="false" MAX-->
       <div class="tableFixHead"
  style="overflow-x: auto; max-height: 500px;">
      <table class="table table-hover table-bordered">
        <thead class="table_header">
          <tr>
            <th>S.No</th>
            <!-- <th>Vendor/ Supplier Name</th> -->
             <th>
              <div class="col">
          <mat-form-field style="width: 200px;margin-bottom: -17px;">
            <mat-label>Vendor/ Supplier Name</mat-label>
            <input
              #suppliersearchInputt
              placeholder="Select supplier"
              matInput
              formControlName="supplier_id"
              [matAutocomplete]="suppliersearchh"
            />
            <mat-autocomplete
              #suppliersearchh="matAutocomplete"
              [displayWith]="displayFnsupp"
              (opened)="autocompletesuppliersearchScroll()"
            >
              <mat-option *ngIf="isLoading" class="is-loading"
                >Loading...</mat-option
              >
              <ng-container *ngIf="!isLoading">
                <mat-option
                  *ngFor="let supplier of suppliersearchList"
                  [value]="supplier"  (click)="quotationData()"
                >
                  {{ supplier.name }}
                </mat-option>
              </ng-container>
            </mat-autocomplete>
          </mat-form-field>
        </div>
             </th>
            <th>Add</th>
            <!-- <th>Quotation ID</th> -->
             <th>
               <div class="col">
          <mat-form-field style="margin-bottom: -17px;">
            <mat-label>Quotation ID</mat-label>
            <input matInput formControlName="supplier_quot"  (keydown.enter)="onEnterKeychild($event)"/>
          </mat-form-field>
        </div>
             </th>
            <!-- <th>Quotation Reference</th> -->
             
              <th>
                <div class="col">
          <mat-form-field style="margin-bottom: -17px;">
            <mat-label>Quotation Reference</mat-label>
            <input matInput formControlName="supplier_quot_reference"  (keydown.enter)="onEnterKeychild($event)"/>
          </mat-form-field>
        </div>
              </th>
            <!-- <th>Quotation Date</th> -->
             <!-- <th>Start Date</th>
             <th>End Date</th> -->
             <th>
  <div class="col">
    <mat-form-field style="width: 11rem;margin-bottom: -17px;">
      <mat-label>Quotation Date</mat-label>
      <input
        matInput
        [matDatepicker]="pickerr"
        formControlName="quotation_date"
        autocomplete="off"
        [readonly]="View"
        (keydown.enter)="onEnterKeychild($event)"
      />
      <mat-datepicker-toggle matSuffix [for]="pickerr" [disabled]="View">
        <mat-icon matDatepickerToggleIcon role="button">keyboard_arrow_down</mat-icon>
      </mat-datepicker-toggle>
      <mat-datepicker [disabled]="View" #pickerr></mat-datepicker>
    </mat-form-field>
  </div>
</th>

<th>
  <div class="col">
    <mat-form-field style="width: 11rem;margin-bottom: -17px;">
      <mat-label>Start Date</mat-label>
      <input
        matInput
        [matDatepicker]="pickerStart"
        formControlName="start_date"
        autocomplete="off"
        [readonly]="View"
        (keydown.enter)="onEnterKeychild($event)"
      />
      <mat-datepicker-toggle matSuffix [for]="pickerStart" [disabled]="View">
        <mat-icon matDatepickerToggleIcon role="button">keyboard_arrow_down</mat-icon>
      </mat-datepicker-toggle>
      <mat-datepicker [disabled]="View" #pickerStart></mat-datepicker>
    </mat-form-field>
  </div>
</th>

<th>
  <div class="col">
    <mat-form-field style="width: 11rem;margin-bottom: -17px;">
      <mat-label>End Date</mat-label>
      <input
        matInput
        [matDatepicker]="pickerEnd"
        formControlName="end_date"
        autocomplete="off"
        [readonly]="View"
        (keydown.enter)="onEnterKeychild($event)"
      />
      <mat-datepicker-toggle matSuffix [for]="pickerEnd" [disabled]="View">
        <mat-icon matDatepickerToggleIcon role="button">keyboard_arrow_down</mat-icon>
      </mat-datepicker-toggle>
      <mat-datepicker [disabled]="View" #pickerEnd></mat-datepicker>
    </mat-form-field>
  </div>
</th>

            <!-- <th>Product</th> -->
             
              <th>
               <div class="col" style="display: flex;">
          <mat-form-field style="margin-bottom: -17px;">
            <mat-label>Product Name</mat-label>

            <input
              #productInputt
              placeholder="Select Product"
              matInput
              formControlName="product_name"
              [matAutocomplete]="productcatt"
            />
            <mat-autocomplete
              #productcatt="matAutocomplete"
              [displayWith]="displayFnproductt"
              (opened)="autocompleteproductScroll()"
            >
              <mat-option *ngIf="isLoading" class="is-loading" 
                >Loading...</mat-option
              >
              <ng-container *ngIf="!isLoading">
                <mat-option
                  *ngFor="let product of productList"
                  [value]="product" (click)="quotationData()"
                >
                  {{ product.name }}
                </mat-option>
              </ng-container>
            </mat-autocomplete>
           
          </mat-form-field>
                       <button
          type="button"
          matSuffix
          class="close"
          (click)="resetAfterPRODUCTChange()"
        >
        x
        </button>
        </div>
            
             </th>
            <!-- <th>Make</th> --> 
             <th>
                   <div  class="col-md-3">
                  <!-- <mat-form-field (click)="getitemFK()"> -->
                    <mat-form-field (click)="quotationSearch.get('make_name').enabled ? getitemFK() : $event.stopPropagation()" style="margin-bottom: -17px;">
                    <mat-label>Make</mat-label>
                    <input
                      #itemInput
                      placeholder="Select Make"
                      matInput
                      [readonly]="View"
                      formControlName="make_name"
                      [matAutocomplete]="item"
                    />
                    <mat-autocomplete
                      #item="matAutocomplete"
                      [displayWith]="displayFnitem"
                      (opened)="autocompleteitemScroll()"
                    >
                      <mat-option *ngIf="isLoading" class="is-loading"
                        >Loading...</mat-option
                      >
                      <ng-container *ngIf="!isLoading">
                        <mat-option
                          *ngFor="let item of itemList"
                          [value]="item" (click)="quotationData()"
                          (onSelectionChange)="makeCheck(item)"
                        >
                          {{ item.name }}
                        </mat-option>
                      </ng-container>
                    </mat-autocomplete>
                    <button
          type="button"
          matSuffix
          class="close"
          (click)="resetAfterMAKEChange()"
        >
        x
        </button>
                  </mat-form-field>
                </div>
                </th>
            <!-- <th>Model</th> -->
             <th>
              <div *ngIf="!Services" class="col-md-3">
                  <!-- <mat-form-field (click)="getmodall()"> -->
                    <mat-form-field  (click)="quotationSearch.get('model_name').enabled ? getmodall() : $event.stopPropagation()" style="margin-bottom: -17px;">
                    <mat-label>Model</mat-label>
                    <input
                      #modelInput
                      [readonly]="View"
                      placeholder="Select Model"
                      matInput
                      formControlName="model_name"
                      [matAutocomplete]="model"
                    />
                    <mat-autocomplete
                      #model="matAutocomplete"
                      [displayWith]="displayFnmodel"
                      (opened)="autocompletemodelScroll()"
                    >
                      <mat-option *ngIf="isLoading" class="is-loading"
                        >Loading...</mat-option
                      >
                      <ng-container *ngIf="!isLoading">
                        <mat-option
                          *ngFor="let model of modelList"
                          [value]="model" (click)="quotationData()"
                        >
                          {{ model.name }}
                        </mat-option>
                      </ng-container>
                    </mat-autocomplete>
                    <button
          type="button"
          matSuffix
          class="close"
          (click)="resetAfterModelChange()"
        >
        x
        </button>
                  </mat-form-field>
                </div>
             </th>
            <!-- <th>Configuration</th> -->
             <th>
              <div class="col-md-3 text-center">
                  <mat-form-field style="margin-bottom: -17px;">
                    <mat-label>Specification</mat-label>
                    <input
                      matInput                                                                                                
                      formControlName="specification"  (keydown.enter)="onEnterKeychild($event)"/>
                  </mat-form-field>
                </div>
             </th>
            <!-- <th>Unit Type</th> -->
             <div class="col-md-3">
                <mat-form-field style="width: 200px;margin-bottom: -17px;display: flex;padding: 10px;" (click)="getbruom()">
                  <mat-label>Unit Type</mat-label>
                  <input
                    #uomInput
                    placeholder="Unit Type"
                    matInput
                    formControlName="uom"
                    [matAutocomplete]="uom"
                  />
                  <mat-autocomplete
                    [panelWidth]="250"
                    #uom="matAutocomplete"
                    [displayWith]="displayFnuom"
                    (opened)="uomScroll()"
                  >
                    <mat-option *ngIf="isLoading" class="is-loading"
                      >Loading...
                    </mat-option>
                    <ng-container *ngIf="!isLoading">
                      <mat-option
                        *ngFor="let uom of uomlist"
                        [value]="uom.name"  (click)="quotationData()"
                      >
                        {{ uom.name }}
                      </mat-option>
                    </ng-container>
                  </mat-autocomplete>
                </mat-form-field>
              </div>

            <!-- <th>Unit Price</th> -->
                          <th>
               <div class="col-md-3">
                  <mat-form-field style="margin-bottom: -17px;">
                    <mat-label>Unit Price</mat-label>
                    <input
                      matInput                                                                                                
                      [readonly]="View"
                      type="text"                       
                      [value]="quotationSearch.get('price').value | amountPipeCustom" 

                      formControlName="price"  (keydown.enter)="onEnterKeychild($event)"
                    (input)="onAmountInput($event, quotationSearch,'price')" (keypress)="omit_special_num($event)"

                    />
                  </mat-form-field>
                </div>

             </th>
            <!-- <th>Quantity</th> -->
              <div class="col">
          <mat-form-field style="margin-bottom: -17px;">
            <mat-label>
              Quantity
            </mat-label>
            <input matInput formControlName="qty"  (keydown.enter)="onEnterKeychild($event)"/>
          </mat-form-field>
        </div>
            <th>Attachments</th>
            <!-- <th>Quotation Version</th> -->
            <!-- <th>Active</th> -->
             <th>
              <div class="col">
          <mat-form-field style="margin-bottom: -17px;">
            <mat-label>Active</mat-label>
            <mat-select formControlName="ref_status">
              <mat-option *ngFor="let types of activeList" [value]="types.id" (click)="quotationData()">
                {{ types.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
             </th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let qr of splitmainArray(QuotationList); index as i">
            <ng-container *ngIf="qr?.sup_array?.length > 0; else noData">
              <tr *ngFor="let q of splitArray(qr?.sup_array); index as j">
                <td *ngIf="j === 0" [attr.rowspan]="qr?.sup_array?.length">
                  {{(outerpage-1)*pageSize +i+1}}
                </td>
                <td *ngIf="j === 0" [attr.rowspan]="qr?.sup_array?.length">
                  {{ qr?.supplier_name }}
                </td>
                <!-- <td *ngIf="j === 0" [attr.rowspan]="qr?.sup_array?.length">
                  <button class="btn btn-sm btn-outline-secondary" data-toggle="modal" data-target="#addQuotationData" (click)="ViewQuotation(qr,q)">
                    <i class="fa fa-plus"></i>
                  </button>
                </td> -->
                <td *ngIf="j === 0" [attr.rowspan]="qr?.sup_array?.length">
                  <button
                    class="btn btn-sm btn-outline-secondary"
                    data-toggle="modal"
                    data-target="#addQuotationData"
                    (click)="
                      ViewQuotation(qr, qr?.sup_array[qr?.sup_array.length - 1])
                    "
                  >
                    <i class="fa fa-plus"></i>
                  </button>
                </td>
                <td>{{ q?.supplier_quot }}</td>
                <td>{{ q?.supplier_quot_reference }}</td>
                <td>{{ q?.quot_date }}</td>
                <td>{{ q?.start_date }}</td>
                <td>{{ q?.end_date }}</td>
                <td>{{ q?.product?.name }}</td>
                <td>{{ q?.make?.name }}</td>
                <td>{{ q?.model?.name }}</td>
                <td>{{ q?.spec_config?.specification }}</td>
                <td>{{ q?.uom }}</td>
                <td>{{ q?.price | amountPipeCustom}}</td>
                <td>{{ q?.qty }}</td>
                <td>
                  <div *ngIf="q?.file_data?.length > 0; else empty" class="ml-3 ">
                    <ul style="list-style: none; padding-left: 0; margin-bottom: 0;">
                      <li *ngFor="let file of q?.file_data; let i = index" data-toggle="modal" data-target="#my-modalpreview"  (click)="fileview(file)" style="cursor: pointer;color:blue;">
                        📄 {{ file.name || file?.file_name }}
                      </li>
                    </ul>
                  </div>
                  <ng-template #empty>--</ng-template>

                </td>
                <!-- <td>{{ q?.version }}</td> -->
                <td>
                  <mat-slide-toggle
                    [checked]="q?.ref_status?.id == 2"
                    (change)="activeCheck(q, $event.checked)"
                  >
                  </mat-slide-toggle>
                </td>
                <div>

                </div>
              </tr>
              <tr *ngIf="qr?.sup_array?.length > 10">
      <td [attr.colspan]="17">
        <div
          style="
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            font-weight: 600;
          "
        >
          <div>Count : {{ qr?.sup_array?.length }}</div>
          <div>
            <button
              mat-icon-button
              [disabled]="innerpage === 1"
              color="primary"
              (click)="prevPage()"
            >
              <mat-icon>arrow_back</mat-icon>
            </button>
            {{ innerpage }}
            <button
              mat-icon-button
              [disabled]="qr?.sup_array?.length < 10"
              color="primary"
              (click)="nextPage()"
            >
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </div>
        </div>
      </td>
    </tr>
            </ng-container>

          </ng-container>

          
          <ng-template #noData>
            <tr>
              <td colspan="16" class="text-center">No Data Found!</td>
            </tr>
          </ng-template>
        </tbody>
      </table>
    </div>
     <div
          style="
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            font-weight: 600;
          "
        >
          <div>Count : {{ QuotationList?.length }}</div>
          <div>
            <button
              mat-icon-button
              [disabled]="outerpage === 1"
              color="primary"
              (click)="mainprevPage()"
            >
              <mat-icon>arrow_back</mat-icon>
            </button>
            {{ outerpage }}
            <button
              mat-icon-button
              [disabled]="QuotationList?.length < 10"
              color="primary"
              (click)="mainnextPage()"
            >
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </div>
        </div>
    </form>
  </mat-card-content>
</mat-card>

<div
  class="modal fade"
  tabindex="-1"
  role="dialog"
  id="MasaddQuotation"
  aria-labelledby="DeactivateModalLabel"
  aria-hidden="true"
  data-backdrop="static"
  data-keyboard="false"
>
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h3
          *ngIf="!View"
          class="modal-title w-100 font-weight-bold"
          id="DeactivateModalLabel"
        >
          Add Quotation Master Details
        </h3>
        <!-- <h3 *ngIf="View"
        class="modal-title w-100 font-weight-bold"
        id="DeactivateModalLabel"
      >
        Quotation Details
      </h3> -->
        <button
          type="button"
          #closebtn
          class="close"
          data-dismiss="modal"
          aria-label="Close"
          (click)="closereset()"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <mat-card class="quotation-card">
          <mat-card-title><h3>Create Quotation Master</h3></mat-card-title>
          <mat-card-content>
            <form [formGroup]="masterForm" (ngSubmit)="MasquotationSubmit()">
              <!-- Vendor Details -->
              <div class="row">
                <!-- <div class="col">
                  <mat-form-field (click)="getSuppliersearch()">
                    <mat-label>Vendor/ Supplier Name</mat-label>
                    <input
                      #suppliersearchInput
                      placeholder="Select supplier"
                      matInput
                      [readonly]="View"
                      formControlName="supplier"
                      [matAutocomplete]="suppliersearch"
                    />
                    <mat-autocomplete
                      #suppliersearch="matAutocomplete"
                      [displayWith]="displayFnsupplier"
                      (opened)="autocompletesuppliersearchScroll()"
                    >
                      <mat-option *ngIf="isLoading" class="is-loading"
                        >Loading...</mat-option
                      >
                      <ng-container *ngIf="!isLoading">
                        <mat-option
                          *ngFor="let supplier of suppliersearchList"
                          [value]="supplier"
                        >
                          {{ supplier.name }}
                        </mat-option>
                      </ng-container>
                    </mat-autocomplete>
                  </mat-form-field>
                </div> -->

                <!-- <mat-form-field >
          <mat-label>Vendor Name</mat-label>
          <input matInput formControlName="vendorName" />
        </mat-form-field> -->

                <!-- Quotation Details -->
                <!-- <div class="col">
        <mat-form-field>
          <mat-label>Quotation Code</mat-label>
          <input matInput formControlName="quotationCode" />
        </mat-form-field>
</div> -->
                <div class="col">
                  <mat-form-field (focus)="forQuotationDD()">
                    <mat-label>Quotation For</mat-label>
                    <input
                      #qforInput
                      placeholder="Select Quotation For"
                      matInput
                      formControlName="quotation_for_id"
                      [matAutocomplete]="quotforr"
                    />
                    <mat-autocomplete
                      #quotforr="matAutocomplete"
                      [displayWith]="displayFnQuot"
                      (opened)="autocompleterforScroll()"
                    >
                      <mat-option *ngIf="isLoading" class="is-loading"
                        >Loading...</mat-option
                      >
                      <ng-container *ngIf="!isLoading">
                        <mat-option
                          *ngFor="let qf of forQuotationList"
                          [value]="qf"
                        >
                          {{ qf.name }}
                        </mat-option>
                      </ng-container>
                    </mat-autocomplete>
                    <button
                      type="button"
                      matSuffix
                      class="close"
                      (focus)="resetDD('qfor', 'summ')"
                    >
                      x
                    </button>
                  </mat-form-field>
                  <!-- <mat-form-field>
                    <mat-label>Quotation For</mat-label>
                    <input matInput type="text" formControlName="quot_number" />
                  </mat-form-field> -->
                </div>
                <div class="col">
                  <mat-form-field>
                    <mat-label>Purpose</mat-label>
                    <input matInput type="text" formControlName="purpose" />
                  </mat-form-field>
                </div>

                <!-- Product Details -->
                <!-- <div class="form-group">
         -->
                <div class="col">
                  <!-- <mat-form-field>
                    <mat-label>Product Type</mat-label>
                    <mat-select formControlName="producttype">
                      <mat-option
                        *ngFor="let types of Lists"
                        [value]="types"
                        (click)="
                          product_type = types?.id;
                          Services = types.name == 'Service' || types.name == 'IT Related Services' ? true : false;
                          resetfieldss()
                        "
                      >
                        {{ types.name }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field> -->
                    <mat-form-field (click)="getProductTypes()" >
            <mat-label>Product Type</mat-label>
            <input #productInput1 placeholder="Select Product type" matInput formControlName="producttype"
              [matAutocomplete]="productauto1" (input)="input_getProductTypes1()"/>
            <mat-autocomplete #productauto1="matAutocomplete" [displayWith]="displayFnitem"
              (opened)="protype_autocompleteassetScroll1()">
              <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
              <ng-container *ngIf="!isLoading">
                 <mat-option *ngFor="let types of prdTypes" [value]="types"  (click)="resetfieldss(types)">
                 {{ types.name }}
                </mat-option>
              </ng-container>
            </mat-autocomplete>
          </mat-form-field>
                </div>
                <div class="col">
                  <mat-form-field (click)="getpproduct(0, 2)">
                    <mat-label>Product Name</mat-label>
                    <!-- <mat-label *ngIf="Services">Service Name</mat-label> -->

                    <input
                      #productInput
                      placeholder="Select Product"
                      matInput
                      [readonly]="View"
                      formControlName="product"
                      [matAutocomplete]="producct"
                    />
                    <mat-autocomplete
                      #producct="matAutocomplete"
                      [displayWith]="displayFnproduct"
                      (opened)="autocompleteproductScrollP()"
                    >
                      <mat-option *ngIf="isLoading" class="is-loading"
                        >Loading...</mat-option
                      >
                      <ng-container *ngIf="!isLoading">
                        <mat-option
                          *ngFor="let product of productList"
                          [value]="product"
                          (click)="getOtherAttributes(product); resetfields()"
                        >
                          {{ product.name }}
                        </mat-option>
                      </ng-container>
                    </mat-autocomplete>
                    <!-- <button
            type="button"
            matSuffix
            class="close"
            (click)="resetAfterProductChange('', 'removeProd')"
          >
          x
          </button> -->
                  </mat-form-field>
                </div>
              </div>
              <div class="row">
                <div *ngIf="!Services" class="col-md-3">
                  <mat-form-field (click)="getitemFK()">
                    <mat-label>Make</mat-label>
                    <input
                      #itemInput
                      placeholder="Select Make"
                      matInput
                      [readonly]="View"
                      formControlName="make"
                      [matAutocomplete]="item"
                    />
                    <mat-autocomplete
                      #item="matAutocomplete"
                      [displayWith]="displayFnitem"
                      (opened)="autocompleteitemScroll()"
                    >
                      <mat-option *ngIf="isLoading" class="is-loading"
                        >Loading...</mat-option
                      >
                      <ng-container *ngIf="!isLoading">
                        <mat-option
                          *ngFor="let item of itemList"
                          [value]="item"
                          (onSelectionChange)="makeCheck(item)"
                        >
                          {{ item.name }}
                        </mat-option>
                      </ng-container>
                    </mat-autocomplete>
                    <!-- <button
          type="button"
          matSuffix
          class="close"
          (click)="resetAfterItemChange()"
        >
        x
        </button> -->
                  </mat-form-field>
                </div>
                <div *ngIf="!Services" class="col-md-3">
                  <mat-form-field (click)="getmodall()">
                    <mat-label>Model</mat-label>
                    <input
                      #modelInput
                      [readonly]="View"
                      placeholder="Select Model"
                      matInput
                      formControlName="model"
                      [matAutocomplete]="model"
                    />
                    <mat-autocomplete
                      #model="matAutocomplete"
                      [displayWith]="displayFnmodel"
                      (opened)="autocompletemodelScroll()"
                    >
                      <mat-option *ngIf="isLoading" class="is-loading"
                        >Loading...</mat-option
                      >
                      <ng-container *ngIf="!isLoading">
                        <mat-option
                          *ngFor="let model of modelList"
                          [value]="model"
                        >
                          {{ model.name }}
                        </mat-option>
                      </ng-container>
                    </mat-autocomplete>
                    <!-- <button
          type="button"
          matSuffix
          class="close"
          (click)="resetAfterModelChange()"
        >
        x
        </button> -->
                  </mat-form-field>
                </div>
                <div class="col-md-3">
                  <mat-form-field>
                    <mat-label>Quantity</mat-label>
                    <input matInput type="number" formControlName="qty" />
                  </mat-form-field>
                </div>
                <div class="col-md-3">
                  <mat-form-field>
                    <mat-label>Unit Price</mat-label>
                    <input
                      matInput
                      type="text"
                      formControlName="unit_price" here
                      [value]="masterForm.get('unit_price').value | amountPipeCustom" 
                      (input)="AmountCalculation($event, masterForm,'unit_price')" 
                    />
                  </mat-form-field>
                </div>
              </div>
              <!-- (keypress)="omit_special_num($event)" -->
              


              <!-- <div class="fo"> -->
              <!-- <mat-form-field appearance="outline">
          <mat-label>Model</mat-label>
          <input matInput formControlName="model" />
        </mat-form-field>
 -->
              <!-- <mat-form-field appearance="outline">
          <mat-label>Specification Combination</mat-label>
          <input matInput formControlName="specificationCombination" />
        </mat-form-field> -->
              <div class="row mt-2 text-center" *ngIf="showCard">
                <div class="card ml-4 mr-4 w-100">
                  <div class="card-body">
                    <div class="row">
                      <!-- Loop over specList and ensure each occupies col-md-3 -->
                      <div
                        class="col-md-6"
                        *ngFor="let spec of specList; let i = index"
                      >
                        <div class="chip-container">
                          <mat-chip-list
                            formControlName="spec_config"
                            class="chip-list"
                          >
                            <mat-chip>{{ spec?.specification }}</mat-chip>
                            <mat-form-field class="conf-field">
                              <ng-container  *ngIf="spec.specification?.toLowerCase() === 'amc begin date'; else notBeginnewDate">
                                <input
                                  matInput
                                  [readonly]="View"
                                  [matDatepicker]="picker11"
                                  formControlName="amc_start_date"
                                  autocomplete="off"
                                />
                                <mat-datepicker-toggle
                                  matSuffix
                                  [for]="picker11"
                                  [disabled]="View"
                                >
                                  <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                                </mat-datepicker-toggle>
                                <mat-datepicker #picker11 [disabled]="View"></mat-datepicker>
                              </ng-container>
                              <ng-template #notBeginnewDate>
                                <ng-container  *ngIf="spec.specification?.toLowerCase() ==='amc end date'; else normaldetailInput">
                                  <input
                                    matInput
                                    [readonly]="View"
                                    [matDatepicker]="picker12"
                                    formControlName="amc_end_date"
                                    autocomplete="off"
                                  />
                                  <mat-datepicker-toggle
                                    matSuffix
                                    [for]="picker12"
                                    [disabled]="View"
                                  >
                                    <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                                  </mat-datepicker-toggle>
                                  <mat-datepicker #picker12 [disabled]="View"></mat-datepicker>
                                </ng-container>
                              </ng-template>
                              <ng-template #normaldetailInput>
                              <input
                                matInput
                                [readonly]="View"
                                placeholder="Select Configuration"
                                [matAutocomplete]="auto"
                                (click)="getConf(spec?.specification)"
                                (input)="
                                  onInputChange($event.target.value, spec)
                                "
                              />
                              <!-- (focus)="getConf(spec?.specification)" -->

                              <mat-autocomplete #auto="matAutocomplete">
                                <mat-option
                                  *ngFor="let conf of specsList"
                                  [value]="
                                    conf.product_fullname || conf?.configuration
                                  "
                                  (click)="
                                    addSpecConfig(
                                      spec.id,
                                      spec.specification,
                                      conf?.configuration || conf?.name,
                                      masterForm
                                    )
                                  "
                                >
                                  {{
                                    conf?.product_fullname ||
                                      conf?.configuration
                                  }}
                                </mat-option>
                              </mat-autocomplete>
                              </ng-template>
                            </mat-form-field>


                            <!-- Master Dropdown Menu -->
                          </mat-chip-list>
                          <!-- <mat-icon *ngIf="conf_for"
                          [matMenuTriggerFor]="configMenu"
                          (click)="currentSpecIndex = i"
                          class="config-icon"
                        >
                          arrow_drop_down_circle
                        </mat-icon> -->
                          <!-- <mat-icon
                            *ngIf="spec.specification === 'IT Spare For'"
                            [matMenuTriggerFor]="configMenu"
                            (click)="currentSpecIndex = i"
                            class="config-icon"
                          >
                            arrow_drop_down_circle
                          </mat-icon> -->

                          <mat-menu
                            #configMenu="matMenu"
                            class="custom-scroll-menu"
                          >
                            <ng-container *ngFor="let brand of configList">
                              <button class="menu"
                                mat-menu-item
                                [matMenuTriggerFor]="modelMenuMap.get(brand.id)"
                              >
                                {{ brand.make_name }}
                              </button>
                            </ng-container>
                          </mat-menu>

                          <!-- Submenus for each brand -->
                          <ng-container *ngFor="let brand of configList">
                            <mat-menu
                              #menuRef="matMenu"
                              [overlapTrigger]="false"
                            >
                              <button class="menu"
                                mat-menu-item
                                *ngFor="let model of brand.model"
                                (click)="
                                  selectModel(brand.make_name, model.name, brand)
                                "
                              >
                                {{ model.name }}
                              </button>
                            </mat-menu>

                            <!-- Dynamically bind menu reference to brand.id -->
                            <ng-container
                              *ngIf="setModelMenuMap(brand.id, menuRef)"
                            ></ng-container>
                          </ng-container>

                          <div class="make-model-text" *ngIf="selectedMakeModelMap[i]">
                            <strong>Make:</strong> {{ selectedMakeModelMap[i].make }},
                            <strong>Model:</strong> {{ selectedMakeModelMap[i].model }}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="row mt-3 ml-1">
                  <span class="header_file">Attachments</span>
                  <input
                    type="file"
                    multiple
                    [readonly]="View"
                    #takeInput
                    (change)="onFileSelect($event)"
                    class="file"
                  />
                  <div *ngIf="selectedFile?.length > 0" class="ml-3 file-preview">
                    <ul style="list-style: none; padding-left: 0; margin-bottom: 0;">
                      <li *ngFor="let file of selectedFile; let i = index" data-toggle="modal" data-target="#my-modalpreview"  (click)="fileview(file)" style="cursor: pointer;color:blue;">
                        📄 {{ file?.name  }}
                      </li>
                    </ul>
                  </div>
                 
                </div>
              </div>

              <mat-accordion *ngIf="assetDetails">
                <mat-expansion-panel [expanded]="true">
                  <mat-expansion-panel-header>
                    <mat-panel-title> Asset Details </mat-panel-title>
                    <!-- <mat-panel-description>
                        Type your name and age
                      </mat-panel-description> -->
                  </mat-expansion-panel-header>
                  <!-- <form [formGroup]="assetForm"> -->

                  <div class="row">
                    <div class="col-md-3">
                      <mat-form-field
                        appearance="outline"
                        style="width: 250px"
                        (click)="getAssetId()"
                      >
                        <mat-label>Asset ID</mat-label>
                        <div class="input-wrapper">
                          <input
                            #assetInput
                            placeholder="Select Asset ID"
                            matInput
                            formControlName="asset_id"
                            [matAutocomplete]="assetDD"
                          />
                          <mat-autocomplete
                            #assetDD="matAutocomplete"
                            [displayWith]="displayFnAsset"
                            (opened)="autocompleteAssetScroll()"
                          >
                            <mat-option *ngIf="isLoading" class="is-loading"
                              >Loading...</mat-option
                            >
                            <ng-container *ngIf="!isLoading">
                              <mat-option
                                *ngFor="let item of assetList"
                                [value]="item"
                                (click)="asset_id = item.assetid"
                              >
                                {{ item.assetid }}
                              </mat-option>
                            </ng-container>
                          </mat-autocomplete>
                          <!-- <i
                      class="fa fa-times-circle cancel"
                      role="button"
                      (click)="resetAfterProductChange('', 'asset')"
                      ></i> -->
                        </div>
                      </mat-form-field>

                      <!-- <mat-form-field appearance="outline" class="width">
                        <mat-label>Asset ID</mat-label>
                        <div class="input-wrapper">
                          <input
                            matInput
                            type="text"
                            formControlName="asset_id"
                            placeholder="Enter an Asset ID"
                            (input)="toUpperCase($event)"
                          />
                          <i
                            class="fa fa-times-circle cancel"
                            role="button"
                            (click)="resetAsset()"
                          ></i>
                        </div>
                      </mat-form-field> -->
                    </div>
                    <div class="col-md-3 text-right mt-2">
                      <button
                        class="btn btn-outline-success"
                        (click)="addAsset()"
                      >
                        <span class="fa fa-plus"></span>
                      </button>
                    </div>
                  </div>
                  <!-- </form> -->

                  <div class="table-responsive tableStyle">
                    <table class="table table-hover">
                      <thead class="table_header">
                        <tr>
                          <td>S.No</td>
                          <td>Asset ID</td>
                          <td>Serial No</td>
                          <td>Product</td>
                          <td>Make</td>
                          <td>Model</td>
                          <td>Specification</td>
                          <td>Status</td>
                          <td>Action</td>
                        </tr>
                      </thead>
                      <tbody *ngFor="let a of assetArray; index as i">
                        <tr *ngIf="a.status !== 0">
                          <td>{{ i + 1 }}</td>
                          <td>{{ a.assetid }}</td>
                          <td>{{ a.serial_no }}</td>
                          <td>{{ a.product_name }}</td>
                          <td>{{ a.item_name }}</td>
                          <td>{{ a.model_name }}</td>
                          <td>
                            <ng-container
                              *ngIf="
                                a.specification && a.specification !== '--';
                                else showEmpty
                              "
                            >
                              <ng-container
                                *ngFor="
                                  let specKey of getSpecificationKeys(
                                    a.specification
                                  )
                                "
                              >
                                {{ specKey }}: {{ a.specification[specKey]
                                }}<br />
                              </ng-container>
                            </ng-container>
                            <!-- Template to display "--" if specification is empty -->
                            <ng-template #showEmpty>{{
                              a.specification
                            }}</ng-template>
                          </td>
                          <td>{{ a?.assetdetails_status }}</td>
                          <td>
                            <mat-icon
                              role="button"
                              class="gray"
                              (click)="deleteAsset(a, i)"
                              >delete</mat-icon
                            >
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </mat-expansion-panel>
              </mat-accordion>

              <div class="row">
                <div class="col-md-12 p-4">
                  <div class="card">
                    <div class="card-header">
                      <h4>Quotation Note</h4>
                    </div>
                    <div
                      [ngxSummernote]="config"
                      formControlName="quotation_note"
                      [disabled]="View"
                    ></div>
                  </div>
                </div>
              </div>
            </form>
          </mat-card-content>
        </mat-card>
      </div>

      <div class="modal-footer" style="margin-left: 10px">
        <button
          type="button"
          style="border-radius: 40px; margin-left: 10px"
          class="btn btn-outline-primary"
          data-dismiss="modal"
        >
          Cancel
        </button>

        <button
          type="submit"
          style="border-radius: 40px; margin-left: 10px"
          class="btn btn-outline-info"
          (focus)="MasquotationSubmit()"
        >
          Submit
        </button>
        <button
          type="button"
          class="d-none"
          id="assetmodal"
          data-dismiss="modal"
        >
          Save
        </button>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade"
  tabindex="-1"
  role="dialog"
  id="addQuotationData"
  aria-labelledby="DeactivateModalLabel"
  aria-hidden="true"
  data-backdrop="static"
  data-keyboard="false"
>
  <div class="modal-dialog modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h3
          class="modal-title w-100 font-weight-bold"
          id="DeactivateModalLabel"
        >
          Add Quotation Data Details
        </h3>
        <!-- <h3 *ngIf="View"
        class="modal-title w-100 font-weight-bold"
        id="DeactivateModalLabel"
      >
        Create Quotation Data Details
      </h3> -->
        <button
          type="button"
          #closebtn
          class="close"
          data-dismiss="modal"
          aria-label="Close"
          (click)="closeresett()"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <mat-card class="quotation-card">
          <mat-card-title><h3>Create Quotation Data</h3></mat-card-title>
          <mat-card-content>
            <form [formGroup]="quotationForm" (ngSubmit)="quotationSubmit()">
              <!-- Vendor Details -->
              <div class="row">
                <div class="col" *ngIf="readonly">
                  <mat-form-field>
                    <mat-label>Vendor/ Supplier Name</mat-label>
                    <input matInput formControlName="supplier" readonly />
                  </mat-form-field>
                </div>
                <div class="col" *ngIf="!readonly">
                  <mat-form-field (click)="getSupplier()">
                    <mat-label>Vendor/ Supplier Name</mat-label>
                    <input
                      #suppliersearchInput
                      placeholder="Select supplier"
                      matInput
                      [readonly]="View"
                      formControlName="supplier"
                      [matAutocomplete]="suppliersearch"
                    />
                    <mat-autocomplete
                      #suppliersearch="matAutocomplete"
                      [displayWith]="displayFnsupplier"
                      (opened)="autocompletesuppliersearchScroll()"
                    >
                      <mat-option *ngIf="isLoading" class="is-loading"
                        >Loading...</mat-option
                      >
                      <ng-container *ngIf="!isLoading">
                        <mat-option
                          *ngFor="let supplier of suppliersearchList"
                          [value]="supplier"
                        >
                          {{ supplier.name }}
                        </mat-option>
                      </ng-container>
                    </mat-autocomplete>
                  </mat-form-field>
                </div>

                <!-- <mat-form-field >
          <mat-label>Vendor Name</mat-label>
          <input matInput formControlName="vendorName" />
        </mat-form-field> -->

                <!-- Quotation Details -->
                <!-- <div class="col">
        <mat-form-field>
          <mat-label>Quotation Code</mat-label>
          <input matInput formControlName="quotationCode" />
        </mat-form-field>
</div> -->
                <div class="col">
                  <mat-form-field>
                    <mat-label>Quotation Reference</mat-label>
                    <input
                      matInput
                      type="text"
                      formControlName="supplier_quot_reference"
                    />
                  </mat-form-field>
                </div>

                <div class="col">
                  <mat-form-field style="width: 11rem">
                    <mat-label>Quotation Date</mat-label>
                    <input
                      matInput
                      [matDatepicker]="pickers"
                      formControlName="quotation_date"
                      autocomplete="off"
                      [readonly]="View"
                    />
                    <mat-datepicker-toggle
                      matSuffix
                      [for]="pickers"
                      [disabled]="View"
                    >
                      <mat-icon matDatepickerToggleIcon role="button"
                        >keyboard_arrow_down</mat-icon
                      >
                    </mat-datepicker-toggle>
                    <mat-datepicker [disabled]="View" #pickers></mat-datepicker>
                  </mat-form-field>
                </div>

                <div class="col">
                  <mat-form-field style="width: 11rem">
                    <mat-label>Validity Start Date</mat-label>
                    <input
                      [readonly]="View"
                      matInput
                      [matDatepicker]="picker1"
                      formControlName="start_date"
                      autocomplete="off"
                    />
                    <mat-datepicker-toggle
                      matSuffix
                      [for]="picker1"
                      [disabled]="View"
                    >
                      <mat-icon matDatepickerToggleIcon
                        >keyboard_arrow_down</mat-icon
                      >
                    </mat-datepicker-toggle>
                    <mat-datepicker #picker1 [disabled]="View"></mat-datepicker>
                  </mat-form-field>
                </div>
                <div class="col">
                  <mat-form-field style="width: 11rem">
                    <mat-label>Validity End Date</mat-label>
                    <input
                      matInput
                      [readonly]="View"
                      [matDatepicker]="picker2"
                      formControlName="end_date"
                      autocomplete="off"
                    />
                    <mat-datepicker-toggle
                      matSuffix
                      [for]="picker2"
                      [disabled]="View"
                    >
                      <mat-icon matDatepickerToggleIcon
                        >keyboard_arrow_down</mat-icon
                      >
                    </mat-datepicker-toggle>
                    <mat-datepicker #picker2 [disabled]="View"></mat-datepicker>
                  </mat-form-field>
                </div>
                <div class="col">
                  <mat-form-field>
                    <mat-label>Product Type</mat-label>
                    <mat-select formControlName="producttype" disabled>
                      <mat-option
                        *ngFor="let types of Lists"
                        [value]="types"
                        (click)="gettype(types)"
                      >
                        {{ types.name }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div class="col">
                  <!-- (click)="getpproduct(0, 3)" -->
                  <mat-form-field>
                    <mat-label>Product Name</mat-label>
                    <input
                      #productInputt
                      readonly
                      placeholder="Select Product"
                      matInput
                      formControlName="product"
                      [matAutocomplete]="prd"
                    />
                    <mat-autocomplete
                      #prd="matAutocomplete"
                      [displayWith]="displayFnproductt"
                      (opened)="autocompleteproductScrollP()"
                    >
                      <mat-option *ngIf="isLoading" class="is-loading"
                        >Loading...</mat-option
                      >
                      <ng-container *ngIf="!isLoading">
                        <mat-option
                          *ngFor="let product of productList"
                          [value]="product"
                          (click)="
                            getOtherAttributes(product); resetfields()
                          "
                        >
                          {{ product.name }}
                        </mat-option>
                      </ng-container>
                    </mat-autocomplete>
                    <!-- <button
                      type="button"
                      matSuffix
                      class="close"
                      (click)="resetAfterProductChange('', 'removeProd')"
                    >
                      x
                    </button> -->
                  </mat-form-field>
                </div>
                <div *ngIf="!servicekey" class="col">
                  <mat-form-field (click)="getitemFK()">
                    <mat-label>Make</mat-label>
                    <input
                      #itemInput
                      placeholder="Select Make"
                      matInput
                      formControlName="make"
                      [matAutocomplete]="item"
                    />
                    <mat-autocomplete
                      #item="matAutocomplete"
                      [displayWith]="displayFnitem"
                      (opened)="autocompleteitemScroll()"
                    >
                      <mat-option *ngIf="isLoading" class="is-loading"
                        >Loading...</mat-option
                      >
                      <ng-container *ngIf="!isLoading">
                        <mat-option
                          *ngFor="let item of itemList"
                          [value]="item"
                          (onSelectionChange)="makeCheck(item)"
                        >
                          {{ item.name }}
                        </mat-option>
                      </ng-container>
                    </mat-autocomplete>
                    <!-- <button
  type="button"
  matSuffix
  class="close"
  (click)="resetAfterItemChange()"
>
x
</button> -->
                  </mat-form-field>
                </div>
                <div *ngIf="!servicekey" class="col">
                  <mat-form-field (click)="getmodall()">
                    <mat-label>Model</mat-label>
                    <input
                      #modelInput
                      placeholder="Select Model"
                      matInput
                      formControlName="model"
                      [matAutocomplete]="model"
                    />
                    <mat-autocomplete
                      #model="matAutocomplete"
                      [displayWith]="displayFnmodel"
                      (opened)="autocompletemodelScroll()"
                    >
                      <mat-option *ngIf="isLoading" class="is-loading"
                        >Loading...</mat-option
                      >
                      <ng-container *ngIf="!isLoading">
                        <mat-option
                          *ngFor="let model of modelList"
                          [value]="model"
                        >
                          {{ model.name }}
                        </mat-option>
                      </ng-container>
                    </mat-autocomplete>
                    <!-- <button
  type="button"
  matSuffix
  class="close"
  (click)="resetAfterModelChange()"
>
x
</button> -->
                  </mat-form-field>
                </div>
                <!-- </div>
       
        <div class="row"> -->
                <div class="col">
                  <mat-form-field style="width: 200px" (click)="getbruom()">
                    <mat-label>UOM</mat-label>
                    <input
                      #uomInput
                      placeholder="UOM"
                      matInput
                      formControlName="uom"
                      [matAutocomplete]="uom"
                    />
                    <mat-autocomplete
                      [panelWidth]="250"
                      #uom="matAutocomplete"
                      [displayWith]="displayFnuom"
                      (opened)="uomScroll()"
                    >
                      <mat-option *ngIf="isLoading" class="is-loading"
                        >Loading...
                      </mat-option>
                      <ng-container *ngIf="!isLoading">
                        <mat-option
                          *ngFor="let uom of uomlist"
                          [value]="uom.name"
                        >
                          {{ uom.name }}
                        </mat-option>
                      </ng-container>
                    </mat-autocomplete>
                  </mat-form-field>
                </div>
                <div class="col-md-2">
                  <mat-form-field>
                    <mat-label>Quantity</mat-label>
                    <input matInput type="number" formControlName="qty" />
                  </mat-form-field>
                </div>
                <div class="col-md-3 text-center">
                  <mat-form-field>
                    <mat-label>Unit Price</mat-label>
                    <input
                      matInput
                      [readonly]="View"
                      type="text"
                      formControlName="unit_price"
                      [value]="quotationForm.get('unit_price').value | amountPipeCustom"
                     (input)="AmountCalculation($event,quotationForm,'unit_price')"
                    />
                  </mat-form-field>
                   <!-- (input)="onAmountInput($event, quotationForm,'unit_price')" (keypress)="omit_special_num($event)" -->


                  
                </div>
              </div>

              <div class="row mt-2 text-center" *ngIf="showCard">
                <div class="card ml-4 mr-4 w-100">
                  <div class="card-body">
                    <div class="row">
                      <!-- Loop over specList and ensure each occupies col-md-3 -->
                      <div class="col-md-6" *ngFor="let spec of specList">
                        <div class="chip-container">
                          <mat-chip-list
                            formControlName="spec_config"
                            class="chip-list"
                          >
                            <mat-chip>{{ spec?.specification }}</mat-chip>
                            <div class="specifications-row">
                            <mat-form-field class="conf-field">
                              <ng-container  *ngIf="spec.specification?.toLowerCase() === 'amc begin date'; else notBeginDate">
                                <input
                                  matInput
                                  [readonly]="View"
                                  [matDatepicker]="picker11"
                                  formControlName="amc_start_date"
                                  autocomplete="off"
                                />
                                <mat-datepicker-toggle
                                  matSuffix
                                  [for]="picker11"
                                  [disabled]="View"
                                >
                                  <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                                </mat-datepicker-toggle>
                                <mat-datepicker #picker11 [disabled]="View"></mat-datepicker>
                              </ng-container>
                              <ng-template #notBeginDate>
                                <ng-container  *ngIf="spec.specification?.toLowerCase() ==='amc end date'; else normalInput">
                                  <input
                                    matInput
                                    [readonly]="View"
                                    [matDatepicker]="picker12"
                                    formControlName="amc_end_date"
                                    autocomplete="off"
                                  />
                                  <mat-datepicker-toggle
                                    matSuffix
                                    [for]="picker12"
                                    [disabled]="View"
                                  >
                                    <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                                  </mat-datepicker-toggle>
                                  <mat-datepicker #picker12 [disabled]="View"></mat-datepicker>
                                </ng-container>
                              </ng-template>
                            
                              <!-- Normal Input Field -->
                              <ng-template #normalInput>
                                <input
                                  matInput
                                  [readonly]="View"
                                  placeholder="Select Configuration"
                                  [matAutocomplete]="auto"
                                  (click)="getConf(spec?.specification)"
                                />
                                <mat-autocomplete #auto="matAutocomplete">
                                  <mat-option
                                    *ngFor="let conf of specsList"
                                    [value]="conf.product_fullname || conf?.configuration"
                                    (click)="
                                      addSpecConfig(
                                        spec.id,
                                        spec.specification,
                                        conf.configuration,
                                        quotationForm
                                      )"
                                  >
                                  {{conf?.product_fullname || conf?.configuration}}
                                  </mat-option>
                                </mat-autocomplete>
                              </ng-template>
                            </mat-form-field>
                            </div>
                          </mat-chip-list>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6">
                  <span class="header_file">Supporting Documents</span>
                  <!-- <input type="file" (change)="onFileSelect($event)" /> -->

                  <input
                    type="file"
                    multiple
                    [readonly]="View"
                    #takeInput
                    (change)="onFileSelect($event)"
                    class="file"
                  />
                  <div *ngIf="selectedFile?.length > 0" class="ml-3 file-preview">
                    <ul style="list-style: none; padding-left: 0; margin-bottom: 0;">
                      <li *ngFor="let file of selectedFile; let i = index" data-toggle="modal" data-target="#my-modalpreview"  (click)="fileview(file)" style="cursor: pointer;color:blue;">
                        📄 {{ file.name || file?.file_name }}
                      </li>
                    </ul>
                  </div>
                  <!-- <mat-icon
                    style="color: gray; margin-top: 24px; font-size: 18px"
                    aria-label="Delete"
                    >delete
                  </mat-icon> -->
                </div>
              </div>
              <!-- <div class="fo"> -->
              <!-- <mat-form-field appearance="outline">
          <mat-label>Model</mat-label>
          <input matInput formControlName="model" />
        </mat-form-field>
 -->
              <!-- <mat-form-field appearance="outline">
          <mat-label>Specification Combination</mat-label>
          <input matInput formControlName="specificationCombination" />
        </mat-form-field> -->
              <!-- <div class="row mt-2 text-center" *ngIf="showCard">
                <div class="card ml-4 mr-4 w-100">
                  <div class="card-body">
                    <div class="row">
                      <div class="col">
                        <div class="scroll-container">
                          <div class="chip-container">
                            <mat-chip-list formControlName="spec_config"
                              *ngFor="let spec of specList"
                              class="chip-list"
                            >
                              <mat-chip>{{ spec?.specification }}</mat-chip>
                              <mat-form-field class="conf-field">
                                <input
                                  matInput
                                  [readonly]="View"
                                  placeholder="Select Configuration"
                                  [matAutocomplete]="auto"
                                  (focus)="getConf(spec?.specification)"
                                />
                                <mat-autocomplete #auto="matAutocomplete">
                                  <mat-option
                                    *ngFor="let conf of specsList"
                                    [value]="conf.configuration"
                                    (click)="
                                      addSpecConfig(
                                        spec.id,
                                        spec.specification,
                                        conf.configuration
                                      )
                                    "
                                  >
                                    {{ conf.configuration }}
                                  </mat-option>
                                </mat-autocomplete>
                              </mat-form-field>
                            </mat-chip-list>
                          </div> -->

              <!-- <div class="chip-container">
                  <mat-chip-list *ngFor="let item of specList" class="chip-list">
                    <mat-chip>{{ item.specification }}</mat-chip>
                
                    <mat-form-field style="width: 200px" class="conf-field" (click)="getConf(item?.specification)">
                      <input
                        placeholder="Select Configuration"
                        matInput
                        [value]="specsList[item.specification]"
                        (optionSelected)="onSelectConfig($event, item)"
                        [matAutocomplete]="spec"
                      />
                      <mat-autocomplete #spec="matAutocomplete">
                        <mat-option *ngFor="let spec of specsList" [value]="spec">
                          {{ spec.configuration }}
                        </mat-option>
                      </mat-autocomplete>
                    </mat-form-field>
                  </mat-chip-list>
                </div>
                 -->
              <!-- </div> -->
              <!-- </div> -->
              <!-- </div> -->
              <!-- </div> -->
              <!-- </div> -->
              <!-- </div> -->
              <!-- </div> -->

              <!-- <div class="row">
       
      </div> -->

              <!-- <mat-card-actions>
        <button mat-raised-button color="primary" type="submit">Submit</button>
      </mat-card-actions> -->
              <!-- </div> -->
              <div class="row">
                <div class="col-md-12 p-4">
                  <div class="card">
                    <div class="card-header">
                      <h4>Quotation Note</h4>
                    </div>
                    <div
                      [ngxSummernote]="config"
                      formControlName="remarks"
                      [disabled]="View"
                    ></div>
                  </div>
                </div>
              </div>
            </form>
          </mat-card-content>
        </mat-card>
      </div>

      <div class="modal-footer" style="margin-left: 10px">
        <button
          type="button"
          style="border-radius: 40px; margin-left: 10px"
          class="btn btn-outline-primary"
          data-dismiss="modal"
          (click)="closereset()"

        >
          Cancel
        </button>

        <button
          *ngIf="!View"
          type="button"
          style="border-radius: 40px; margin-left: 10px"
          class="btn btn-outline-info"
          (focus)="quotationSubmit()"
        >
          Submit
        </button>
        <button
          type="button"
          class="d-none"
          id="assetmodall"
          data-dismiss="modal"
        >
          Save
        </button>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade ViewQuotationn"
  tabindex="-1"
  role="dialog"
  aria-labelledby="myExtraLargeModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header" style="background: #ddefdd">
        <h2 class="modal-title" id="exampleModalLongTitle">
          Quotation Master Details
        </h2>

        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <br />
      <div class="modal-body">
        <!-- <mat-tab-group
[(selectedIndex)]="selectedVersion"
[(ngModel)]="selectedVersion"
(selectedIndexChange)="changeTab($event)"
>
<mat-tab label="Version"></mat-tab>
<mat-tab label="History"></mat-tab>
</mat-tab-group>
<br> -->

        <div class="table-responsive tableStyle">
          <table class="table table-hover">
            <thead class="table_header">
              <tr>
                <th>S.No</th>
                <th>Quotation Request ID</th>
                <th>Quotation For</th>
                <!-- <th>Quotation Number</th> -->
                <th>Vendor/ Supplier Name</th>
                <!-- <th>Quotation Reference</th> -->
                <!-- <th>Quotation For</th> -->
                <!-- <th>Start Date</th>
      <th>End Date</th> -->
                <th>Product Type</th>
                <th>Product</th>
                <th>Make</th>
                <th>Model</th>
                <th>Configuration</th>
                <!-- <th>Unit Type</th> -->
                <th>Unit Price</th>
                <th>Quantity</th>
                <th>Purpose</th>
                <th>Attachments</th>
                <!-- <th>Quotation Version</th> -->
                <!-- <th>Active</th> -->
                <!-- <td>Make</td> -->
              </tr>
            </thead>
            <tbody *ngFor="let q of detailsArr; index as i">
              <tr>
                <td>{{ i + 1 }}</td>
                <td>{{ q?.quotation_no }}</td>
                <td>{{ q?.quotation_for_name }}</td>
                <!-- <td>{{ q?.supplier_name }}</td> -->
                <td>
                  <ul *ngIf="q?.supplier?.length; else noSupplier">
                    <li *ngFor="let sup of q.supplier">{{ sup }}</li>
                  </ul>
                  <ng-template #noSupplier>-</ng-template>
                </td>
                <!-- <td>{{ q?.supplier_quot_reference }}</td> -->
                <!-- <td>{{ q?.start_date }}</td>
      <td>{{ q?.end_date }}</td> -->
                <td>{{ q?.producttype?.name }}</td>

                <td>{{ q?.product?.name }}</td>
                <td>{{ q?.make?.name }}</td>
                <td>{{ q?.model?.name }}</td>
                <td>{{ q?.spec_config?.specification }}</td>
                <!-- <td>{{ q?.uom }}</td> -->
                <td>{{ q?.unitprice | amountPipeCustom }}</td>

                <td>{{ q?.qty }}</td>

                <td>{{ q?.purpose }}</td>
                <td>
                  <div *ngIf="q?.file_data?.length > 0; else empty" class="ml-3">
                    <ul style="list-style: none; padding-left: 0; margin-bottom: 0;">
                      <li *ngFor="let file of q?.file_data; let i = index" data-toggle="modal" data-target="#my-modalpreview"  (click)="fileview(file)" style="cursor: pointer;color:blue;">
                        📄 {{ file.name || file?.file_name }}
                      </li>
                    </ul>
                  </div>
                  <ng-template #empty>--</ng-template>
                </td>
                <!-- <td class="btn-link" data-toggle="modal" data-target="#addQuotation" (click)="ViewQuotation(q)">
        <mat-icon>visibility</mat-icon>
      </td> -->
                <!-- <td>{{ asset.model_name }}</td> -->
                <!-- <td>{{ asset.specification }}</td> -->
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <br />
  </div>
</div>
<div *ngIf="showimageHeaderPreviewPDF" id="my-modalpreview" class="modal fade" aria-labelledby="my-modalLabel"
aria-hidden="true" tabindex="-1" role="dialog">
<div class="modal-dialog modal-lg">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">PDF View</h2>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <pdf-viewer [src]="pdfurl" [render-text]="true" [original-size]="false"
            style="display: block;width: 800px; height: 800px;"></pdf-viewer>
    </div>
</div>
</div>
<div *ngIf="showimageHeaderPreview" id="my-modalpreview" class="modal fade" aria-labelledby="my-modalLabel"
aria-hidden="true" tabindex="-1" role="dialog">
<div class="modal-dialog modal-xl" data-dismiss="modal" style="width: 60%;height: 80%;">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title">View File</h2>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            </div>
        <div class="modal-body">
            <img [src]="jpgUrls" class="img-responsive" style="width: 100%;">
        </div>
       
    </div>
</div>
</div>