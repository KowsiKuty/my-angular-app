<div class="container" style="max-width: 1301px;">
    <div *ngIf="showinvoicediv">
    <div class="col-md-12">
        <h2 style="margin-left: 1px;font-family:'Times New Roman';font-weight:bold;">AP Invoice Header</h2>
        <form [formGroup]="frmInvHdr">      
        <div class=" row col-md-12">
            <div class="col-md-3">
                <mat-form-field style="margin-left: 5%;width:220px">
                    <input type="text" matInput formControlName="rsrCode" readonly placeholder="Raisor Code">
                    <mat-label>Raisor Code</mat-label>
                </mat-form-field>
            </div>
            <div class="col-md-3">
                <mat-form-field style="margin-left: 5%;width:220px">
                    <input type="text" matInput formControlName="rsrEmp" readonly placeholder="Raisor Employee">
                    <mat-label>Raisor Employee</mat-label>
                </mat-form-field>
            </div>
            <div class="col-md-3">
                <mat-label> GST Applicable</mat-label>
                 <mat-radio-group formControlName="gst" readonly  [disabled]="true">
                                    <mat-radio-button *ngFor="let n of yesorno" [value]="n.value"
                                        style="margin-left: 10px;" readonly>
                                        {{n.display}}
                                    </mat-radio-button>
                </mat-radio-group>
            </div>
        </div>    
        <div class=" row col-md-12" >
            <div class="col-md-3">
                <mat-form-field style="margin-left: 5%;width:220px">
                    <input type="text" matInput formControlName="supCode" readonly placeholder="Supplier Code">
                    <mat-label>Supplier Code</mat-label>
                </mat-form-field>
            </div>
            <div class="col-md-3">
                <mat-form-field style="margin-left: 5%;width:220px">
                    <input type="text" matInput formControlName="supName" readonly placeholder="Supplier Name">
                    <mat-label>Supplier Name</mat-label>
                </mat-form-field>
            </div>
           
            <div class="col-md-3">
                <mat-form-field style="margin-left: 5%;width:220px">
                    <input type="text" matInput formControlName="supGST" readonly placeholder="Supplier GST">
                    <mat-label>Supplier GST</mat-label>
                    <!-- {{invHdr.supplier.gstno}} -->
                </mat-form-field>
            </div> 
            <div class="col-md-3">
                <mat-form-field style="margin-left: 5%;width:220px">
                    <input type="text" matInput formControlName="invNo" readonly placeholder="Invoice No">
                    <mat-label>Invoice No</mat-label>
                </mat-form-field>
            </div> 
        </div>
        <div class=" row col-md-12" >
            
            <div class="col-md-3">
                <mat-form-field style="margin-left: 5%;width:220px">
                    <input type="text" matInput formControlName="invDate" readonly placeholder="Invoice Date">
                    <mat-label>Invoice Date</mat-label>
                </mat-form-field>
            </div>
            <div class="col-md-3">
                <mat-form-field style="margin-left: 5%;width:220px">
                    <input type="text" matInput formControlName="taxableAmt" readonly placeholder="Taxable Amount">
                    <mat-label>Taxable Amount</mat-label>
                </mat-form-field>
            </div>
            <div class="col-md-3">
                <mat-form-field style="margin-left: 5%;width:220px">
                    <input type="text" matInput formControlName="invAmt" readonly placeholder="Invoice Amount">
                    <mat-label>Invoice Amount</mat-label>
                    <!-- {{invHdr.supplier.gstno}} -->
                </mat-form-field>
            </div>      
        </div>     
        </form>   
    </div>

    <div class=" row col-md-12" style="margin-left: 40%;">
        <div class="col-md-3">  
            <button type="button" class="btn btn-outline-primary" style="border-radius:40px;height: 44px; margin-top: 12px;"
                data-toggle="modal" data-target="#ccbsModal" (click)="getquestion()"  ><i class="fa fa-arrow-up" aria-hidden="true">Audit Checklist</i>
            </button> 
        </div> 
        <div class="col-md-3">                
            <button type="button" class="btn btn-outline-primary" style="border-radius:40px;height: 44px; margin-top: 12px;"
                 data-toggle="modal" data-target="#data" (click)="getdedup()"><i class="fa fa-arrow-up" aria-hidden="true">Dedupe Check</i>
            </button>   
        </div>  
    </div> 

    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true" id="data">
    <div class="modal-dialog modal-xl" style="width:80%;height:200%;">
        <div class="modal-content">
            <div class="modal-header" style="background:rgba(23, 204, 23, 0.288);color:rgb(31, 29, 29)">
            <h2 class="modal-title" style="text-align:center;margin-left:45%">Dedupe</h2>
            <button class="close" type="button" data-dismiss="modal">x</button>                
            </div>
            <div class="modal-body">
                <pre>EXACT_MATCH</pre>
                <div class="table-responsive" class="tablescroll" style="margin-top: 10px;width: 100%;margin-left: 10px;overflow: auto;">
                    <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                        <thead class="table_header " fixed-header>
                            <tr>
                                <th>S.No</th> 
                                <th>Invoice Number</th>                             
                                <th>Invoice Header Amount</th>
                                <th>Status</th>          
                                <th>CR Number</th>                
                                <th>Supplier Name</th>
                                <th>Branch Name</th>             
                                <th>Employee Name</th>                                      
                            </tr>
                        </thead>
                        <tbody>                    
                            <tr *ngFor="let value of exactList; index as i;">
                                <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                <td>{{value.invoiceno}}</td>
                                <td>{{value.invoiceamount}}</td>     
                                <td>{{value['status'].text}}</td>
                                <td>{{value.crno}}</td>                         
                                <td>{{value['supplier'].name}}</td>
                                <td>{{value['branch'].name}}</td>
                                <td>{{value.raised_empname}}</td>    
                            </tr>
                        </tbody>
                    </table>
                </div>
                <br>

                <pre>WITHOUT_SUPPLIER</pre>
                <div class="table-responsive" class="tablescroll" style="margin-top: 10px;width: 100%;margin-left: 10px;overflow: auto;">
                    <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                        <thead class="table_header " fixed-header>
                            <tr>
                                <th>S.No</th> 
                                <th>Invoice Number</th>                             
                                <th>Invoice Header Amount</th>
                                <th>Status</th>          
                                <th>CR Number</th>                
                                <th>Supplier Name</th>
                                <th>Branch Name</th>             
                                <th>Employee Name</th>                                      
                            </tr>
                        </thead>
                        <tbody>                    
                            <tr *ngFor="let value of withoutSuppList; index as i;">
                                <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                <td>{{value.invoiceno}}</td>
                                <td>{{value.invoiceamount}}</td>     
                                <td>{{value['status'].text}}</td>
                                <td>{{value.crno}}</td>                         
                                <td>{{value['supplier'].name}}</td>
                                <td>{{value['branch'].name}}</td>
                                <td>{{value.raised_empname}}</td>    
                            </tr>
                        </tbody>
                    </table>
                </div>
                <br>

                <pre>WITHOUT_INVOICE_AMOUNT</pre>
                <div class="table-responsive" class="tablescroll" style="margin-top: 10px;width: 100%;margin-left: 10px;overflow: auto;">
                    <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                        <thead class="table_header " fixed-header>
                            <tr>
                                <th>S.No</th> 
                                <th>Invoice Number</th>                             
                                <th>Invoice Header Amount</th>
                                <th>Status</th>          
                                <th>CR Number</th>                
                                <th>Supplier Name</th>
                                <th>Branch Name</th>             
                                <th>Employee Name</th>                                      
                            </tr>
                        </thead>
                        <tbody>                    
                            <tr *ngFor="let value of withoutInvAmtList; index as i;">
                                <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                <td>{{value.invoiceno}}</td>
                                <td>{{value.invoiceamount}}</td>     
                                <td>{{value['status'].text}}</td>
                                <td>{{value.crno}}</td>                         
                                <td>{{value['supplier'].name}}</td>
                                <td>{{value['branch'].name}}</td>
                                <td>{{value.raised_empname}}</td>    
                            </tr>
                        </tbody>
                    </table>
                </div>
                <br>

                <pre>WITHOUT_INVOICE_NUMBER</pre>
                <div class="table-responsive" class="tablescroll" style="margin-top: 10px;width: 100%;margin-left: 10px;overflow: auto;">
                    <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                        <thead class="table_header " fixed-header>
                            <tr>
                                <th>S.No</th> 
                                <th>Invoice Number</th>                             
                                <th>Invoice Header Amount</th>
                                <th>Status</th>          
                                <th>CR Number</th>                
                                <th>Supplier Name</th>
                                <th>Branch Name</th>             
                                <th>Employee Name</th>                                      
                            </tr>
                        </thead>
                        <tbody>                    
                            <tr *ngFor="let value of withoutInvNoList; index as i;">
                                <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                <td>{{value.invoiceno}}</td>
                                <td>{{value.invoiceamount}}</td>     
                                <td>{{value['status'].text}}</td>
                                <td>{{value.crno}}</td>                         
                                <td>{{value['supplier'].name}}</td>
                                <td>{{value['branch'].name}}</td>
                                <td>{{value.raised_empname}}</td>    
                            </tr>
                        </tbody>
                    </table>
                </div>
                <br>

                <pre>WITHOUT_INVOICE_DATE</pre>
                <div class="table-responsive" class="tablescroll" style="margin-top: 10px;width: 100%;margin-left: 10px;overflow: auto;">
                    <table class="table table scrolltable table-bordered" style="width: 99%; margin-top: 10px;">
                        <thead class="table_header " fixed-header>
                            <tr>
                                <th>S.No</th> 
                                <th>Invoice Number</th>                             
                                <th>Invoice Header Amount</th>
                                <th>Status</th>          
                                <th>CR Number</th>                
                                <th>Supplier Name</th>
                                <th>Branch Name</th>             
                                <th>Employee Name</th>                                      
                            </tr>
                        </thead>
                        <tbody>                    
                            <tr *ngFor="let value of withoutInvDtList; index as i;">
                                <td style="text-align:center;"> {{(presentpage - 1)*identificationSize +i+1 }} </td>
                                <td>{{value.invoiceno}}</td>
                                <td>{{value.invoiceamount}}</td>     
                                <td>{{value['status'].text}}</td>
                                <td>{{value.crno}}</td>                         
                                <td>{{value['supplier'].name}}</td>
                                <td>{{value['branch'].name}}</td>
                                <td>{{value.raised_empname}}</td>    
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer"  class="col-md-12 text-center" style="margin-bottom: 2%;">
                <button type="button" class="btn btn-outline-primary" style="border-radius:40px;height: 44px; margin-top: 12px;text-align:center ;" data-dismiss="modal" >Back</button>
            </div>

        </div>
    </div>

    </div>
     <!-- Auditchecklist -->
     <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
     id="ccbsModal">
     <div class="modal-dialog modal-xl " style="width: 85%;">
         <div class="modal-content">
             <div class="modal-header" style="background:rgba(23, 204, 23, 0.288);color:rgb(31, 29, 29);text-align:center">
                 <h2 class="modal-title" style="text-align:center;margin-left:36%">Audit Checklist</h2>
                 <button type="button" class="close" #auditclose data-dismiss="modal" aria-label="Close">
                     <span aria-hidden="true">&times;</span>
                 </button>
             </div>
             <div>
                 <table class="table table-bordered" style="width: 100%;text-align: center;">
                     <thead class="table_header">
                     <tr>
                         <th>S.NO</th>
                         <th>Question</th>
                         <th>Ok/Not.Ok</th>
                     </tr>
                     </thead>
                     <tr *ngFor="let dt of data;let i=index">
                     <td>{{i+1}}</td>
                     <td>{{dt.question}}</td>
                     <td>  <div class="btn-group btn-group-toggle" data-toggle="buttons"  >
                         <label class="btn btn-outline-success">
                           <input type="radio" name="options" id="option1" autocomplete="off"  (click)="ok(i,dt)" > Ok
                           </label>
                         <label class="btn btn-outline-danger ">
                           <input type="radio" name="options" id="option2" autocomplete="off" checked   (click)="notok(i,dt)"> Not-OK
                         </label>
                         <label class="btn btn-outline-secondary">
                           <input type="radio" name="options" id="option3"  autocomplete="off"  (click)="nap(i,dt)"> N/A
                         </label>
                       </div> </td>
                       <!-- <td>
                        <mat-button-toggle-group [formControl]="fontStylefun" aria-label="Font Style" (change)="ok(i,$event.value,dt)" color="primary">
                         <mat-button-toggle value="1" color="primary">OK</mat-button-toggle>
                         <mat-button-toggle class="active" color="warm" value="2">NOT-OK</mat-button-toggle>
                         <mat-button-toggle value="3" color="accent">N/A</mat-button-toggle>
                       </mat-button-toggle-group>
                     </td> -->
                 </tr>
                 </table>
             </div>
             <div>
             <mat-form-field style="width: 20rem;margin-left: 30px; ">
                 <mat-label>Remarks</mat-label>
                 <input matInput [formControl]="rem" autocomplete="off" required>
             </mat-form-field>
             <button type="submit" [disabled]="((rem.invalid==true) || (cli==true))" class="btn btn-success" style="margin-left: 100px;" (click)="bounce()">Bounce</button>        </div>
         <div >    
         <button  mat-raised-button class="btn btn-success btn-lg float-right" [disabled] = "disables()" style="margin-right: 10px;" (click)="submitted()">Submit</button>
         <button  mat-raised-button data-dismiss="modal" class="btn-lg float-right" style="margin-right: 20px;">Back</button> 
          </div>
     </div>
     </div>
     </div>
     

     <!-- ----------Debit detail if aptype other than advance--------- -->

     <div *ngIf="this.aptypeid == 4">
        <h2 style="margin-left: 4px;font-family:'Times New Roman';font-weight:bold;">Debit Details</h2>
        
        <button type="button" class="btn btn-outline-success" matTooltip="Add debit details"
            style="border-radius:30px;margin-left:5px;margin-right:1014px" (click)="adddebitSection()">
            <span class="fa fa-plus"></span>
        </button>

        <div>
            <form [formGroup]="DebitDetailForm">

                <div class="table-responsive" id="styleScroll"
                    style="margin-top: 1%;width: 95%;margin-left: 25px;">
                    <table class="table scrolltable table-bordered" fixed-header>
                        <thead class="table_header" style='font-family:"Times New Roman";font-size:15px'>
                            <tr>

                                <th>S.No</th>
                                <th>Category</th>
                                <th>SubCategory </th>
                                <th>GL Number</th>
                                <th>Amount</th>
                                <th>Adjust Amount</th>
                                <th>Debit Amount</th>
                                <!-- <th>Remove</th> -->
                                <th>Action</th>
                                <th>View CCBS</th>

                            </tr>
                        </thead>
                        <ng-container formArrayName="debitdtl"
                            *ngFor="let section of getDebitSections(DebitDetailForm); let i = index">
                            <tr [formGroupName]="i">
                                <!-- <td *ngIf="showaltslno == false">{{creditslno}}</td>
                                <td *ngIf="showaltslno == true">{{creditslnos}}</td> -->
                                <td>{{i+1}}</td>

                                <td>
                                    <mat-form-field
                                        style="width:200px;font-family: 'Times New Roman', Times, serif;font-size:15px"
                                        (click)="getcat('')">
                                        <mat-label>Category</mat-label>
                                        <input #categoryInput placeholder="Category" matInput [readonly]="this.readonlydebit[i]"
                                            formControlName="category_code" [matAutocomplete]="cattype"
                                            required>
                                        <mat-autocomplete #cattype="matAutocomplete"
                                            [displayWith]="displaycatFn" (opened)="categoryScroll()">
                                            <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                            </mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let categoryname of categoryNameData"
                                                    (click)="cid(categoryname)" [value]="categoryname">
                                                    {{categoryname.code}}
                                                </mat-option>
                                            </ng-container>
                                        </mat-autocomplete>
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field
                                        style="width: 200px;font-family: 'Times New Roman', Times, serif;font-size:15px">
                                        <mat-label>Sub Category</mat-label>
                                        <input #subcategoryInput placeholder="Sub Category" matInput [readonly]="this.readonlydebit[i]"
                                            formControlName="subcategory_code"
                                            [matAutocomplete]="subcategorytype" required>
                                        <mat-autocomplete #subcategorytype="matAutocomplete"
                                            [displayWith]="displaysubcatFn" (opened)="subcategoryScroll()">
                                            <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                            </mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let subcategoryname of subcategoryNameData"
                                                    [value]="subcategoryname"
                                                    (focusout)="getGLNumber(subcategoryname,i)">
                                                    {{subcategoryname.code}}
                                                </mat-option>
                                            </ng-container>
                                        </mat-autocomplete>
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field
                                        style="width:90px;font-family: 'Times New Roman', Times, serif;font-size:15px">

                                        <input matInput placeholder="GL Number" type="text" [readonly]="this.readonlydebit[i]"
                                            formControlName="debitglno" autocomplete="off"
                                            (keypress)="only_numalpha($event)" [readonly]="true">
                                    </mat-form-field>
                                </td>
                                <td>

                                    <mat-form-field
                                        style="width:65px;font-family: 'Times New Roman', Times, serif;font-size:15px">

                                        <input matInput placeholder="Amount" type="text" autocomplete="off" [readonly]="this.readonlydebit[i]"
                                            (keypress)="numberOnlyandDot($event)" formControlName="amount">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field
                                        style="width:40px;font-family: 'Times New Roman', Times, serif;font-size:15px">

                                        <input matInput placeholder="Adjust" type="text" [readonly]="this.readonlydebit[i]"
                                            formControlName="deductionamount" autocomplete="off" [value]="0"
                                            (keypress)="numberOnlyandDot($event)">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field
                                        style="width:50px;font-family: 'Times New Roman', Times, serif;font-size:15px">

                                        <input matInput placeholder="Debit" type="text" autocomplete="off" [readonly]="this.readonlydebit[i]"
                                            (keypress)="numberOnlyandDot($event)" formControlName="amount"
                                            readonly>

                                    </mat-form-field>
                                </td>
                                <td>
                                    <button mat-icon-button type="button" [disabled]="this.readonlydebit[i]">
                                        <mat-icon style="color: green;" aria-label="Edit"
                                            (click)="deletedebitdetail(section,i)">
                                            delete</mat-icon>
                                    </button>
                                </td>
                                <td>
                                   <button #ccbsOpen type="button" class="btn btn-outline-primary"
                                       matTooltip="Add CCBS" [disabled]="this.readonlydebit[i]"
                                       (click)="addccbs(section,DebitDetailForm.value,i)"
                                       style="border-radius:40px;margin-left:5px;color: mediumblue;"
                                       data-toggle="modal" data-target="#createccbsdetails"><span
                                           class="fa fa-arrow-right"></span></button> 
                               </td>
                            </tr>
                        </ng-container>
                        <tr>
                            <td class="totaldisplay" colspan="7"
                                style="font-family: 'Times New Roman', Times, serif;;font-size:15px">Net Amount:
                            </td>
                            <td>{{debitsum | currency:'INR'}}</td>
                        </tr>
                    </table>
                </div>
                <tr>
                    <td>
                        <button type="button" style="border-radius:40px;margin-left: 450px;"
                            class="btn btn-outline-primary" (click)="debitform()" [disabled]="debitsaved">
                            Save
                        </button>
                    </td>
                    <td>
                        <button type="button" #debitclose
                            style="border-radius:40px;margin-left:15px;font-family: 'Times New Roman', Times, serif;"
                            class="btn btn-outline-primary" (click)="debitbacks()">
                            Back</button>
                    </td>
                </tr>
            </form>
        </div>
    </div>
     <!-- -------------- -->
    
        <form [formGroup]="InvoiceDetailForm">
            <!-- ----------Invoice detail if aptype other than advance--------- -->

            <div *ngIf="this.aptypeid !=4">
               <h2 style="margin-left: 1px;font-family:'Times New Roman';font-weight:bold;">Invoice Details</h2>
                <button type="button" class="btn btn-outline-success" matTooltip="Add invoice details"
                        style="border-radius:40px;margin-left:15px" (click)="addinvdtlSection()">
                        <span class="fa fa-plus"></span>
                </button>
                <div class="table-responsive" id="styleScroll" style="margin-top: 1%;width: 95%;margin-left: 5px;">
                    <table class="table scrolltable table-bordered" fixed-header>
                        <thead class="table_header" style='font-family:"Times New Roman";'>
                            <tr>
                                <th>S.No</th> 
                                <th>Particulars</th>                           
                                <th>Product Name</th>
                                <th>UOM</th>
                                <th>HSN Code</th>  
                                <th>HSN %</th>          
                                <th>Unit Price</th>                
                                <th>Quantity</th>
                                <th>Amount</th>             
                                <th>CGST</th>
                                <th>SGST</th>                
                                <th>IGST</th>
                                <th>Tax Amount</th>
                                <th>Discount</th>                
                                <th>Total Amount</th>  
                                <th>Remove</th>
                                <th>Action</th>
                                <th>View Debit</th>      
                            </tr>
                        </thead>
                        <ng-container formArrayName="invoicedtls"
                                *ngFor="let section of InvoiceDetailForm.controls.invoicedtls['controls']; let invdtlindex = index">
                                <tr [formGroupName]="invdtlindex">
                                    <td>{{invdtlindex+1}}</td>
                                    <td>
                                        <mat-form-field 
                                            style="width:75px;font-family: 'Times New Roman', Times, serif;">
                                            <input matInput formControlName="description"
                                                autocomplete="off">
                                            <mat-label>Particulars</mat-label>
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field 
                                        style="width:160px;font-family: 'Times New Roman', Times, serif;">

                                        <mat-label>Product</mat-label>
                                        <input #productInput placeholder="Product" matInput formControlName="productname"
                                            [matAutocomplete]="prodAutocom" (click)="getindex(invdtlindex)">
                                        <mat-autocomplete #prodAutocom="matAutocomplete" [displayWith]="displayFnProduct">
                                            <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                            </mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let prod of prodList" [value]="prod"
                                                    (click)="getUOMname(prod.uom_id,invdtlindex)">

                                                    {{prod.name}}
                                                </mat-option>
                                            </ng-container>
                                        </mat-autocomplete>
                                    </mat-form-field>
                                        <!-- <mat-form-field 
                                            style="width: 75px;font-family: 'Times New Roman', Times, serif;">
                                            <input matInput formControlName="productname"
                                                autocomplete="off">
                                        </mat-form-field> -->
                                    </td>

                                    <td>
                                        <mat-form-field 
                                            style="width: 75px;font-family: 'Times New Roman', Times, serif;">
                                            <input matInput formControlName="uom"
                                                autocomplete="off">
                                        </mat-form-field>

                                        <!-- <mat-form-field (click)="getuom('')"
                                        style="width:100px;font-family: 'Times New Roman', Times, serif;">
    
                                        <mat-label>UOM</mat-label>
                                        <input #uomInput placeholder="UoM" matInput formControlName="uom"
                                            [matAutocomplete]="uomtype">
                                        <mat-autocomplete #uomtype="matAutocomplete" [displayWith]="displayFnuom"
                                            (opened)="uomScroll()">
                                            <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                            </mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let uom of uomList" [value]="uom">
    
                                                    {{uom.name}}
                                                </mat-option>
                                            </ng-container>
                                        </mat-autocomplete>
                                    </mat-form-field> -->
                                    </td>


                                    <td >
                                        <mat-form-field (click)="gethsn('')"
                                            style="width:160px;font-family: 'Times New Roman', Times, serif;">

                                            <mat-label>HSN Code</mat-label>
                                            <input #hsnInput placeholder="HSN" matInput formControlName="hsn"
                                                [matAutocomplete]="hsntype" (click)="getindex(invdtlindex)">
                                            <mat-autocomplete #hsntype="matAutocomplete" [displayWith]="displayFnhsn"
                                                (opened)="hsnScroll()" (optionSelected)="getgst($event,invdtlindex)">
                                                <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                                </mat-option>
                                                <ng-container *ngIf="!isLoading">
                                                    <mat-option *ngFor="let hsn of hsnList" [value]="hsn"
                                                        (click)="gethsncode(hsn.igstrate,hsn.code,invdtlindex)">

                                                        {{hsn.code}}
                                                    </mat-option>
                                                </ng-container>
                                            </mat-autocomplete>
                                        </mat-form-field>
                                        <!-- </ng-container> -->
                                    </td>
                                    <td>
                                        <mat-form-field 
                                            style="width: 75px;font-family: 'Times New Roman', Times, serif;">
                                            <input matInput formControlName="hsn_percentage"
                                                autocomplete="off">
                                        </mat-form-field>
                                    </td>
                                   
                                    <td>
                                        <mat-form-field
                                            style="width:75px;font-family: 'Times New Roman', Times, serif;">
                                            <input matInput placeholder="UnitPrice" formControlName="unitprice"
                                                autocomplete="off" (ngModelChange)="getgst($event,invdtlindex)"
                                                (keypress)="numberOnlyandDot($event)" min=1 required>
                                            <!-- (click)="indexvalueOninvdetails(invdtlindex)" -->
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field
                                            style="width:60px;font-family: 'Times New Roman', Times, serif;">


                                            <input matInput placeholder="Qty" type="number" formControlName="quantity"
                                                #quantity autocomplete="off"
                                                (ngModelChange)="getgst($event,invdtlindex)"
                                                (keypress)="only_numalpha($event)" required>

                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field
                                            style="width:75px;font-family: 'Times New Roman', Times, serif;">
                                            <input matInput placeholder="Amount" formControlName="amount" autocomplete="off" (keypress)="numberOnlyandDot($event)" >
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field
                                            style="width:30px;font-family: 'Times New Roman', Times, serif;">
                                            <input matInput placeholder="CGST" formControlName="cgst" 
                                                autocomplete="off" (keypress)="numberOnlyandDot($event)">
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field
                                            style="width:30px;font-family: 'Times New Roman', Times, serif;">
                                            <input matInput placeholder="SGST" formControlName="sgst" 
                                                autocomplete="off" (keypress)="numberOnlyandDot($event)">
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field
                                            style="width:30px;font-family: 'Times New Roman', Times, serif;">
                                            <input matInput placeholder="IGST" formControlName="igst" 
                                                autocomplete="off" (keypress)="numberOnlyandDot($event)">
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field
                                            style="width:70px;font-family: 'Times New Roman', Times, serif;">
                                            <input matInput placeholder="Tax" formControlName="taxamount"
                                                autocomplete="off" (keypress)="numberOnlyandDot($event)" >
                                            <!-- [value]="totoTax" -->
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field
                                            style="width:70px;font-family: 'Times New Roman', Times, serif;">
                                            <input matInput placeholder="Discount" formControlName="discount"
                                                autocomplete="off" (keypress)="numberOnlyandDot($event)" >
                                            <!-- [value]="totoTax" -->
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field
                                            style="width:75px;font-family: 'Times New Roman', Times, serif;">
                                            <input matInput placeholder="Total" type="number"
                                                formControlName="totalamount" autocomplete="off"
                                                (click)="INVdatasums()" (keypress)="numberOnlyandDot($event)" >
                                        </mat-form-field>
                                        <!-- (click)="INVdatasums()" -->
                                    </td>
                                    <td>
                                        <!-- <span (click)="addinvdtlSection()" class="material-icons"> note_add</span> -->
                                        <!-- *ngIf="getinvdtlSections(InvoiceDetailForm).length > 1" -->

                                        <span (click)="removeinvdtlSection(invdtlindex)"
                                            class="material-icons">remove</span>
                                    </td>

                                    <td>
                                        <button mat-icon-button type="button">
                                            <mat-icon style="color: green;" aria-label="Edit"
                                                (click)="deleteinvdetail(section,invdtlindex)">
                                                delete</mat-icon>
                                        </button>
                                    </td>

                                    <td>

                                         <!-- <button *ngIf="showadddebits" type="button" class="btn btn-outline-primary"
                                            matTooltip="Add Debit"
                                            (click)="adddebits(section,InvoiceDetailForm.value,invdtlindex)"
                                            style="border-radius:40px;margin-left:5px;color: mediumblue"
                                            data-toggle="modal" data-target="#createdebitdetails"><span
                                                class="fa fa-arrow-right"></span></button> -->


                                        <button type="button" class="btn btn-outline-primary"
                                            matTooltip="Add Debit"
                                            (click)="adddebit(section,InvoiceDetailForm.value,invdtlindex)"
                                            style="border-radius:40px;margin-left:5px;color: mediumblue;">


                                            <!-- data-toggle="modal" data-target="#createdebitdetails"> -->
                                            
                                            <span
                                                class="fa fa-arrow-right"></span></button>


                                    </td>
                                </tr>



                            </ng-container>
                           
                            <tr >
                                <td class="totaldisplay" colspan="14"
                                    style="font-family: 'Times New Roman', Times, serif;">
                                    Net Amount:</td>
                                <td>{{INVsum | currency:'INR'}}</td>


                            </tr>
                        </table>
                        <tr>
                            <td>
                                <button type="button" style="border-radius:40px;margin-left: 450px;"
                                    class="btn btn-outline-primary" (click)="submitinvoicedtl()" [disabled]="invdtlsaved">


                                    Save
                                </button>
                                <!-- [disabled]="invdtlsave" -->
                            </td>
                        </tr>
                </div>
            </div>
          
       
        <!-- ----------credit detail --------- -->

        <br><br>
        <h2 style="margin-left: 1px;font-family:'Times New Roman';font-weight:bold;">Credit Details</h2>
        <form [formGroup]="creditdetForm">            
        <div>
            <div class=" row col-md-12">
                <div class="col-md-3">
                    <mat-form-field style="margin-left: 5%;width:220px">
                        <input type="text" formControlName="supName" matInput readonly placeholder="Supplier Name">
                        <mat-label>Supplier Name</mat-label>
                    </mat-form-field>
                </div>
                <div class="col-md-3">
                    <mat-form-field style="margin-left: 5%;width:220px">
                        <input type="text" formControlName="isexcempted" matInput readonly placeholder="Is Exempted">
                        <mat-label>Is Exempted</mat-label>
                    </mat-form-field>
                </div>
                <div class="col-md-3" *ngIf="showthreshold">
                    <mat-form-field style="margin-left: 5%;width:220px">
                        <input type="text" formControlName="TDSSection" matInput readonly placeholder="TDS Section">
                        <mat-label>TDS Section</mat-label>
                    </mat-form-field>
                </div>
                <div class="col-md-3" *ngIf="showthreshold">
                    <mat-form-field style="margin-left: 5%;width:220px">
                        <input type="text" formControlName="TDSRate" matInput readonly placeholder="TDS Rate">
                        <mat-label>TDS Rate</mat-label>
                    </mat-form-field>
                </div>
            </div>    
            <div class=" row col-md-12" >
                <div class="col-md-3" *ngIf="showthreshold">
                    <mat-form-field style="margin-left: 5%;width:220px">
                        <input type="text" formControlName="thresholdValue" matInput readonly placeholder="Threshold Value">
                        <mat-label>Threshold Value</mat-label>
                    </mat-form-field>
                </div>
                <div class="col-md-3" *ngIf="showthreshold">
                    <mat-form-field style="margin-left: 5%;width:220px">
                        <input type="text" matInput formControlName="amountPaid" readonly placeholder="Amount Paid">
                        <mat-label>Amount Paid</mat-label>
                    </mat-form-field>
                </div>
                <div class="col-md-3" *ngIf="showthreshold">
                    <mat-form-field style="margin-left: 5%;width:220px">
                        <input type="text" matInput formControlName="normaltdsRate" readonly placeholder="Normal TDS Rate">
                        <mat-label>Normal TDS Rate</mat-label>
                    </mat-form-field>
                </div>
                <div class="col-md-3">
                    <mat-form-field (click)="getdebbank()"
                                        style="width:160px;font-family: 'Times New Roman', Times, serif;">

                                        <mat-label>Debit Bank</mat-label>
                                        <input #debbankInput placeholder="Debit Bank" matInput formControlName="bankdetails_id"
                                            [matAutocomplete]="debbank" >
                                        <mat-autocomplete #debbank="matAutocomplete" [displayWith]="displaydebbank">
                                            <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                            </mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let bank of debbankList" [value]="bank" (click)="getbankdetailsid(bank)">
                                                    {{bank.account_no}}
                                                </mat-option>
                                            </ng-container>
                                        </mat-autocomplete>
                    </mat-form-field>
                </div>    
                <div class="col-md-3">
                    <button type="button" class="btn btn-outline-success" matTooltip="Add credit details"
                        style="border-radius:40px;margin-left:15px" (click)="addcreditSection()">
                        <span class="fa fa-plus"></span>
                    </button>
                </div>
            </div>
        </div>
        </form>
            <div class="table-responsive" id="styleScroll" style="margin-top: 2%;width: 95%;margin-left: 5px;">
                    <table class="table scrolltable table-bordered" fixed-header>
                        <thead class="table_header" style='font-family:"Times New Roman"'>
                            <tr>
                                <th>S.No</th>
                                <!-- <th>Debit Bank </th> -->
                                <th>Paymode</th>
                                <th>Account Detail</th>
                                <th>Transaction Branch</th>
                                <th>Refno</th>
                                <th>Bank Name</th>
                                <th>Branch Name</th>
                                <th>IFSC Code</th>
                                <th>Beneficiary Name</th>
                                <th>Tax Type</th>
                                <th>Tax Rate</th>
                                <th>TDS Excempt</th>
                                <th>Taxable Amount</th>
                                <th>GL No</th>
                                <th>Amount</th>
                                <th>Amount change</th>
                                <!-- <th>Remove</th> -->
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <ng-container formArrayName="creditdtl"
                                *ngFor="let section of getCreditSections(InvoiceDetailForm); let creditindex = index">
                                <tr [formGroupName]="creditindex">
                                    <td>{{creditindex+1}}</td>
                                    <td>
                                        <mat-form-field (click)="getPaymode()"
                                        style="width:160px;font-family: 'Times New Roman', Times, serif;">

                                        <mat-label>Paymode</mat-label>
                                        <input #paymodeInput placeholder="Paymode" matInput formControlName="paymode_id"
                                            [matAutocomplete]="paymode" >
                                        <mat-autocomplete #paymode="matAutocomplete" [displayWith]="displayPaymode">
                                            <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                            </mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let pay of PaymodeList" [value]="pay"
                                                (click)="CreditDessss(credit,pay,creditindex)" data-toggle="modal"
                                                    data-target="#createmodalforpopup" required>
                                                    {{pay.name}}
                                                </mat-option>
                                            </ng-container>
                                        </mat-autocomplete>
                                    </mat-form-field>
                                    </td>
                                    <td *ngIf="showaccno[creditindex]===true">
                                        <mat-form-field
                                            style="width: 200px;font-family: 'Times New Roman', Times, serif;">
                                            <mat-label>Acc no</mat-label>
                                            <mat-select formControlName="accno" [(ngModel)]="accdata" required>
                                                <mat-option *ngFor="let acc of accList" [value]="acc.id"
                                                    (click)="getacc(acc.account_no,creditindex)">
                                                    {{acc.account_no}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </td>

                                    <td
                                        *ngIf="showaccno[creditindex]===false && this.paymodeid != 4 && this.paymodeid != 1">
                                        -</td>

                                    <td *ngIf="this.showeraacc[creditindex]== true">
                                        <mat-form-field
                                            style="width:100px;font-family: 'Times New Roman', Times, serif;">

                                            <input matInput placeholder="Acc No" formControlName="creditrefno"
                                                autocomplete="off">
                                        </mat-form-field>

                                    </td>


                                    <td *ngIf="showtranspay[creditindex]===true">
                                        <mat-form-field
                                            style="width: 200px;font-family: 'Times New Roman', Times, serif;">
                                            <mat-label>Payable Branch</mat-label>
                                            <mat-select required>
                                                <mat-option *ngFor="let data of creditbrnchList" [value]="data.id">
                                                    {{data.text}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>

                                        <mat-form-field
                                            style="width: 200px;font-family: 'Times New Roman', Times, serif;">
                                            <mat-label>Transaction Branch</mat-label>
                                            <mat-select required>
                                                <mat-option *ngFor="let tran of credittranList" [value]="tran.id">
                                                    {{tran.text}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </td>
                                    <td *ngIf="showtranspay[creditindex]===false">-</td>

                                    <td>
                                        <mat-form-field
                                            style="width:150px;font-family: 'Times New Roman', Times, serif;">

                                            <input matInput placeholder="Ref No" formControlName="creditrefno"
                                                autocomplete="off" readonly>
                                        </mat-form-field>
                                    </td>



                                    <td>
                                        <mat-form-field
                                            style="width:100px;font-family: 'Times New Roman', Times, serif;">

                                            <input matInput placeholder="Bank Name" formControlName="bank"
                                                autocomplete="off" readonly>
                                        </mat-form-field>

                                    </td>

                                    <td>
                                        <mat-form-field
                                            style="width:75px;font-family: 'Times New Roman', Times, serif;">

                                            <input matInput placeholder="Branch Name" formControlName="branch"
                                                autocomplete="off" readonly>
                                        </mat-form-field>
                                    </td>

                                    <td>
                                        <mat-form-field
                                            style="width:75px;font-family: 'Times New Roman', Times, serif;">

                                            <input matInput placeholder="IFSC Code" formControlName="ifsccode"
                                                autocomplete="off" readonly>
                                        </mat-form-field>
                                    </td>


                                    <td>
                                        <mat-form-field
                                            style="width:75px;font-family: 'Times New Roman', Times, serif;">

                                            <input matInput placeholder="Benificiary" formControlName="benificiary"
                                                autocomplete="off" readonly>
                                        </mat-form-field>
                                    </td>
                                    <td *ngIf="showtaxtype[creditindex]===true">
                                        <mat-form-field
                                            style="width:150px;font-family: 'Times New Roman', Times, serif;">
                                            <input #taxtypeInput placeholder="Tax type" matInput
                                                formControlName="suppliertaxtype" [matAutocomplete]="taxtype">
                                            <mat-autocomplete #taxtype="matAutocomplete"
                                                [displayWith]="displayFnFilter">
                                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                                <ng-container *ngIf="!isLoading">
                                                    <mat-optgroup label="Maintained Tax Type">
                                                        <mat-option *ngFor="let tax of maintaintaxlist" [value]="tax"
                                                            (click)="gettaxid(tax)">
                                                            {{tax.subtax_type}}

                                                        </mat-option>
                                                    </mat-optgroup>
                                                    <mat-optgroup>
                                                        --------------------------------
                                                    </mat-optgroup>
                                                    <mat-optgroup label="Other Tax Type">
                                                        <mat-option *ngFor="let tax of othertaxlist" [value]="tax"
                                                            (click)="gettaxid(tax)">
                                                            {{tax.subtax_type}}

                                                        </mat-option>

                                                    </mat-optgroup>
                                                </ng-container>
                                            </mat-autocomplete>
                                        </mat-form-field>
                                    </td>


                                    <td *ngIf="showtaxtypes[creditindex] === true">
                                        <mat-form-field
                                            style="width:130px;font-family: 'Times New Roman', Times, serif;">
                                            <input matInput placeholder="Tax type" formControlName="suppliertaxtype"
                                                autocomplete="off" (click)="choosetype(creditindex)">
                                        </mat-form-field>
                                    </td>
                                    <td *ngIf="showtaxrates[creditindex] === true">
                                        <mat-form-field
                                            style="width:65px;font-family: 'Times New Roman', Times, serif;">
                                            <input matInput placeholder="Tax Rate" formControlName="suppliertaxrate"
                                                autocomplete="off" (click)="chooserate(creditindex)">
                                        </mat-form-field>
                                    </td>
                                    <!-- <td *ngIf="showtaxtypes[creditindex]===false">-</td> -->
                                    <td *ngIf="showtaxrate[creditindex]===true">
                                        <mat-form-field
                                            style="width: 65px;font-family: 'Times New Roman', Times, serif;">
                                            <mat-label>Tax Rate</mat-label>
                                            <mat-select formControlName="suppliertaxrate"
                                                (selectionChange)="gettaxcalc(InvoiceDetailForm.value,creditindex)">
                                                <mat-optgroup label="Maintained Tax Rate">
                                                    <mat-option *ngFor="let taxrate of maintaintaxratelist"
                                                        [value]="taxrate.rate">
                                                        {{taxrate.rate}} - {{taxrate.rate_name}}
                                                    </mat-option>
                                                </mat-optgroup>
                                                <mat-optgroup>
                                                    --------------------------------
                                                </mat-optgroup>
                                                <mat-optgroup label="Other Tax Rate">
                                                    <mat-option *ngFor="let taxrate of othertaxratelist"
                                                        [value]="taxrate.rate">
                                                        {{taxrate.rate}} - {{taxrate.rate_name}}
                                                    </mat-option>
                                                </mat-optgroup>
                                            </mat-select>
                                        </mat-form-field>
                                    </td>
                                    <!-- <td *ngIf="showtaxrates[creditindex]===false">-</td> -->

                                    <td>N</td>
                                    <td>
                                        <mat-form-field
                                            style="width:75px;font-family: 'Times New Roman', Times, serif;">

                                            <input matInput placeholder="Taxable amount" formControlName="taxableamount"
                                                (ngModelChange)="gettaxcalc(InvoiceDetailForm.value,creditindex)"
                                                autocomplete="off">
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field
                                            style="width:80px;font-family: 'Times New Roman', Times, serif;">

                                            <input matInput placeholder="Credit gl" formControlName="creditglno"
                                                autocomplete="off" readonly>
                                        </mat-form-field>
                                    </td>
                                    <td>
                                        <mat-form-field
                                            style="width:75px;font-family: 'Times New Roman', Times, serif;">

                                            <input matInput placeholder="Amount" type="number" formControlName="amount"
                                                autocomplete="off" [value]="totalamount" readonly>
                                        </mat-form-field>
                                    </td>

                                    <td>
                                        <mat-form-field
                                            style="width:50px;font-family: 'Times New Roman', Times, serif;">

                                            <input matInput placeholder="Amount" type="number"
                                                formControlName="amountchange" autocomplete="off"
                                                (ngModelChange)="addoncreditindex(creditindex,$event)"
                                                (keypress)="numberOnlyandDot($event)">
                                        </mat-form-field>
                                    </td>
                                    <!-- <td> -->
                                        <!-- <span (click)="addcreditSection(creditindex)" class="material-icons">
                                            note_add</span> -->
                                        <!-- *ngIf="getCreditSections(InvoiceDetailForm).length > 1" -->
                                        <!-- <span (click)="removecreditSection(creditindex)"
                                            class="material-icons">remove</span> -->
                                    <!-- </td> -->

                                    <td>
                                        <button mat-icon-button type="button">
                                            <mat-icon style="color: green;" aria-label="Edit"
                                                (click)="deletecreditdetail(section,creditindex)">
                                                delete</mat-icon>
                                        </button>
                                    </td>


                                </tr>
                            </ng-container>
                        </tbody>

                            <tr>
                                <td class="totaldisplay" colspan="14"
                                    style="font-family: 'Times New Roman', Times, serif;">
                                    Net Amount:</td>
                                <td>{{cdtsum | currency:'INR'}}</td>
                            </tr>
                    </table>
                    <tr>
                        <td>
                            <button type="button" style="border-radius:40px;;margin-left: 450px;  margin-bottom: 15%;"
                                class="btn btn-outline-primary" (click)="submitcredit()" [disabled]="creditsaved">
                                    Save</button>
                        </td>
                    </tr>
                </div>
                <!-- -------------- -->
        </form>
    
    
    <!-- ---submit overall form------  -->


    <div>
        <form [formGroup]="SubmitoverallForm" style="margin-left:2%;margin-bottom: 5%;">
            <tr>

                <td *ngIf="fromecf">
                    <mat-form-field style="width: 200px;font-family: 'Times New Roman', Times, serif;">
                        <mat-label>TDS Applicability</mat-label>
                        <mat-select formControlName="tds" required readonly>
                            <mat-option *ngFor="let tds of tdsList" [value]="tds.id" >
                                {{tds.text}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </td>
                <td *ngIf="fromecf">
                    <mat-form-field
                        style="width: 250px;margin-left:50px;font-family: 'Times New Roman', Times, serif;">
                        <input matInput placeholder="TDS/Payment Instruction" formControlName="remarks"
                            autocomplete="off" required readonly>
                    </mat-form-field>
                </td>
                <td *ngIf="!fromecf">
                    <mat-form-field
                        style="width: 250px;margin-left:50px;font-family: 'Times New Roman', Times, serif;">
                        <input matInput placeholder="Remarks" formControlName="remarks"
                            autocomplete="off" required>
                    </mat-form-field>
                </td>
                <td *ngIf="fromecf">
                    <mat-form-field
                        style="width:250px;font-family: 'Times New Roman', Times, serif;">

                        <mat-label>Approver Branch</mat-label>
                        <input #branchInput placeholder="Select branch" matInput formControlName="approver_branch"
                            [matAutocomplete]="branchtype" readonly>
                        <mat-autocomplete #branchtype="matAutocomplete" [displayWith]="displayFnbranch"
                            (opened)="branchScroll()">
                            <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                            <ng-container *ngIf="!isLoading">
                                <mat-option *ngFor="let branch of Branchlist" [value]="branch">
                                    {{branch.name}}
                            </mat-option>
                            </ng-container>
                        </mat-autocomplete>
                    </mat-form-field>
                </td>
                <td *ngIf="fromecf">
                    <mat-form-field
                        style="width:250px;font-family: 'Times New Roman', Times, serif;margin-left: 50px;">

                        <mat-label>Choose Approver</mat-label>
                        <input #approverInput placeholder="Choose Approver" formControlName="approved_by" matInput
                            [matAutocomplete]="approvertype" required readonly>
                        <mat-autocomplete #approvertype="matAutocomplete" [displayWith]="displayFnapprover"
                            (opened)="approverScroll()">
                            <mat-option *ngIf="isLoading" class="is-loading">Loading...
                            </mat-option>
                            <ng-container *ngIf="!isLoading">
                                <mat-option *ngFor="let approver of Approverlist" [value]="approver"
                                    (click)="approverid(approver)">
                                    {{approver.full_name}}
                                </mat-option>
                            </ng-container>
                        </mat-autocomplete>
                    </mat-form-field>
                </td>
            </tr>

            <tr>
                <td>
                    <button type="button" style="border-radius:40px;margin-left: 30px;"
                        class="btn btn-outline-primary" (click)="OverallFormSubmit()" [disabled]="submitoverallbtn">

                        Submit
                    </button>
                </td>
                <td>
                    <button type="button" style="border-radius:40px;margin-left: 10px;"
                        class="btn btn-outline-primary" (click)="overallback()">
                        Back</button>
                </td>

            </tr>
            <!-- <tr>
                <td>
                    <div *ngFor="let upload of uploadList;index as i" class="btn-link">
                        {{ upload}}
                        <button mat-icon-button type="button">
                            <mat-icon style="color: gray;" aria-label="Edit" (click)="deleteUpload(upload, i)">
                                delete</mat-icon>
                        </button>

                    </div>

                </td>
            </tr> -->
        </form>
   
    </div>
    </div>

<!-- Debit Div starts---- -->
    <div *ngIf="showdebitdiv">
        <h2 style="margin-left: 4px;font-family:'Times New Roman';font-weight:bold;">Debit Details</h2>
        <br>
        <h2 style="margin-left: 8px;font-family:'Times New Roman';font-size:17px ;">Total Amount :
            {{invtotamount}}</h2>

        <!-- &nbsp;&nbsp;&nbsp;&nbsp; -->

        <button type="button" class="btn btn-outline-success" matTooltip="Add debit details"
            style="border-radius:30px;margin-left:5px;margin-right:1014px" (click)="adddebitSection()">
            <span class="fa fa-plus"></span>
        </button>

        <div>
            <form [formGroup]="DebitDetailForm">

                <div class="table-responsive" id="styleScroll"
                    style="margin-top: 1%;width: 95%;margin-left: 25px;">
                    <table class="table scrolltable table-bordered" fixed-header>
                        <thead class="table_header" style='font-family:"Times New Roman";font-size:15px'>
                            <tr>

                                <th>S.No</th>
                                <th>Category</th>
                                <th>SubCategory </th>
                                <th>GL Number</th>
                                <th>Amount</th>
                                <th>Adjust Amount</th>
                                <th>Split</th>
                                <th>Debit Amount</th>
                                <!-- <th>Remove</th> -->
                                <th>Action</th>
                                <th>View CCBS</th>

                            </tr>
                        </thead>
                        <ng-container formArrayName="debitdtl"
                            *ngFor="let section of getDebitSections(DebitDetailForm); let i = index">
                            <tr [formGroupName]="i">
                                <!-- <td *ngIf="showaltslno == false">{{creditslno}}</td>
                                <td *ngIf="showaltslno == true">{{creditslnos}}</td> -->
                                <td>{{i+1}}</td>

                                <td>
                                    <mat-form-field
                                        style="width:200px;font-family: 'Times New Roman', Times, serif;font-size:15px"
                                        (click)="getcat('')">
                                        <mat-label>Category</mat-label>
                                        <input #categoryInput placeholder="Category" matInput [readonly]="this.readonlydebit[i]"
                                            formControlName="category_code" [matAutocomplete]="cattype"
                                            required>
                                        <mat-autocomplete #cattype="matAutocomplete"
                                            [displayWith]="displaycatFn" (opened)="categoryScroll()">
                                            <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                            </mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let categoryname of categoryNameData"
                                                    (click)="cid(categoryname)" [value]="categoryname">
                                                    {{categoryname.code}}
                                                </mat-option>
                                            </ng-container>
                                        </mat-autocomplete>
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field
                                        style="width: 200px;font-family: 'Times New Roman', Times, serif;font-size:15px"
                                    >

                                        <mat-label>Sub Category</mat-label>
                                        <input #subcategoryInput placeholder="Sub Category" matInput
                                            formControlName="subcategory_code" [readonly]="this.readonlydebit[i]"
                                            [matAutocomplete]="subcategorytype" required>
                                        <mat-autocomplete #subcategorytype="matAutocomplete"
                                            [displayWith]="displaysubcatFn" (opened)="subcategoryScroll()">
                                            <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                            </mat-option>
                                            <ng-container *ngIf="!isLoading">
                                                <mat-option *ngFor="let subcategoryname of subcategoryNameData"
                                                    [value]="subcategoryname"
                                                    (focusout)="getGLNumber(subcategoryname,i)">
                                                    {{subcategoryname.code}}
                                                </mat-option>
                                            </ng-container>
                                        </mat-autocomplete>
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field
                                        style="width:90px;font-family: 'Times New Roman', Times, serif;font-size:15px">

                                        <input matInput placeholder="GL Number" type="text" [readonly]="this.readonlydebit[i]"
                                            formControlName="debitglno" autocomplete="off"
                                            (keypress)="only_numalpha($event)" [readonly]="true">
                                    </mat-form-field>
                                </td>
                                <td>

                                    <mat-form-field
                                        style="width:65px;font-family: 'Times New Roman', Times, serif;font-size:15px">

                                        <input matInput placeholder="Amount" type="text" autocomplete="off" [readonly]="this.readonlydebit[i]"
                                            (keypress)="numberOnlyandDot($event)" formControlName="amount">
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field
                                        style="width:40px;font-family: 'Times New Roman', Times, serif;font-size:15px">

                                        <input matInput placeholder="Adjust" type="text" [readonly]="this.readonlydebit[i]"
                                            formControlName="deductionamount" autocomplete="off" [value]="0"
                                            (keypress)="numberOnlyandDot($event)">
                                    </mat-form-field>
                                </td>
                                <td *ngIf="this.readonlydebit[i]==false">
                                    <span (click)="adddsplit(section, i)" class="material-icons"> call_split</span>
                                    <span *ngIf="getDebitSections(DebitDetailForm).length > 1"
                                        (click)="removedebitSection(i)" class="material-icons">remove</span>
                                </td>
                                <td *ngIf="this.readonlydebit[i]==true">                                    
                                </td>
                                <td>
                                    <mat-form-field
                                        style="width:50px;font-family: 'Times New Roman', Times, serif;font-size:15px">
                                        <input matInput placeholder="Debit" type="text" autocomplete="off"
                                            (keypress)="numberOnlyandDot($event)" formControlName="amount"
                                            readonly>
                                    </mat-form-field>
                                </td>
                                <td *ngIf="this.readonlydebit[i]==false">
                                    <button mat-icon-button type="button">
                                        <mat-icon style="color: green;" aria-label="Edit"
                                            (click)="deletedebitdetail(section,i)">
                                            delete</mat-icon>
                                    </button>
                                </td>
                                <td *ngIf="this.readonlydebit[i]==true">                                    
                                </td>
                               <td *ngIf="this.readonlydebit[i]==false">
                                   <button #ccbsOpen type="button" class="btn btn-outline-primary"
                                       matTooltip="Add CCBS" 
                                       (click)="addccbs(section,DebitDetailForm.value,i)"
                                       style="border-radius:40px;margin-left:5px;color: mediumblue;"
                                       data-toggle="modal" data-target="#createccbsdetails"><span
                                           class="fa fa-arrow-right"></span></button> 
                               </td>
                               <td *ngIf="this.readonlydebit[i]==true">                                    
                                </td>
                            </tr>




                        </ng-container>
                        <tr>
                            <td class="totaldisplay" colspan="7"
                                style="font-family: 'Times New Roman', Times, serif;;font-size:15px">Net Amount:
                            </td>
                            <td>{{debitsum | currency:'INR'}}</td>


                        </tr>
                    </table>
                </div>
                <tr>
                    <td>
                        <button type="button" style="border-radius:40px;margin-left: 450px;"
                            class="btn btn-outline-primary" (click)="debitform()" [disabled]="debitsaved">
                            <!-- [disabled]="submitdebitdtlbtn" -->

                            Save
                        </button>
                    </td>
                    <td>
                        <button type="button" #debitclose
                            style="border-radius:40px;margin-left:15px;font-family: 'Times New Roman', Times, serif;"
                            class="btn btn-outline-primary" (click)="debitbacks()">
                            Back</button>
                    </td>
                </tr>
            </form>
        </div>

    </div>   


 
<!-- Debit div ends -->
</div>

        
<!-- -------Debitform------ -->
<!-- 
<div *ngIf="showdebitpopup">
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
        id="createdebitdetails">
        <div class="modal-dialog modal-xl " style="width: 85%;">
            <div class="modal-content">
                <div class="modal-header" style="background:rgba(23, 204, 23, 0.288);">

                    <button type="button" class="close" #closebutton data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <h2 style="margin-left: 4px;font-family:'Times New Roman';font-weight:bold;">Debit Details</h2>
                <br>
                <h2 style="margin-left: 8px;font-family:'Times New Roman';font-size:17px ;">Total Amount :
                    {{invdtltotamount}}</h2>

                &nbsp;&nbsp;&nbsp;&nbsp; 

                <button type="button" class="btn btn-outline-success" matTooltip="Add debit details"
                    style="border-radius:30px;margin-left:5px;margin-right:1014px" (click)="adddebitSection()">
                    <span class="fa fa-plus"></span>
                </button>

                <div>
                    <form [formGroup]="DebitDetailForm">

                        <div class="table-responsive" id="styleScroll"
                            style="margin-top: 1%;width: 95%;margin-left: 25px;">
                            <table class="table scrolltable table-bordered" fixed-header>
                                <thead class="table_header" style='font-family:"Times New Roman";font-size:15px'>
                                    <tr>

                                        <th>S.No</th>
                                        <th>Category</th>
                                        <th>SubCategory </th>
                                        <th>GL Number</th>
                                        <th>Amount</th>
                                        <th>Adjust Amount</th>
                                        <th>Split</th>
                                        <th>Debit Amount</th>
                                        <th>Remove</th>
                                        <th>Action</th>
                                        <th>View CCBS</th>

                                    </tr>
                                </thead>
                                <ng-container formArrayName="debitdtl"
                                    *ngFor="let section of getDebitSections(DebitDetailForm); let i = index">
                                    <tr [formGroupName]="i">
                                        <!-- <td *ngIf="showaltslno == false">{{creditslno}}</td>
                                        <td *ngIf="showaltslno == true">{{creditslnos}}</td> 
                                        <td>{{i+1}}</td>

                                        <td>
                                            <mat-form-field
                                                style="width:200px;font-family: 'Times New Roman', Times, serif;font-size:15px"
                                                (click)="getcat('')">
                                                <mat-label>Category</mat-label>
                                                <input #categoryInput placeholder="Category" matInput
                                                    formControlName="category_code" [matAutocomplete]="cattype"
                                                    required>
                                                <mat-autocomplete #cattype="matAutocomplete"
                                                    [displayWith]="displaycatFn" (opened)="categoryScroll()">
                                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                                    </mat-option>
                                                    <ng-container *ngIf="!isLoading">
                                                        <mat-option *ngFor="let categoryname of categoryNameData"
                                                            (click)="cid(categoryname)" [value]="categoryname">
                                                            {{categoryname.code}}
                                                        </mat-option>
                                                    </ng-container>
                                                </mat-autocomplete>
                                            </mat-form-field>
                                        </td>
                                        <td>
                                            <mat-form-field
                                                style="width: 200px;font-family: 'Times New Roman', Times, serif;font-size:15px"
                                            >

                                                <mat-label>Sub Category</mat-label>
                                                <input #subcategoryInput placeholder="Sub Category" matInput
                                                    formControlName="subcategory_code"
                                                    [matAutocomplete]="subcategorytype" required>
                                                <mat-autocomplete #subcategorytype="matAutocomplete"
                                                    [displayWith]="displaysubcatFn" (opened)="subcategoryScroll()">
                                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                                    </mat-option>
                                                    <ng-container *ngIf="!isLoading">
                                                        <mat-option *ngFor="let subcategoryname of subcategoryNameData"
                                                            [value]="subcategoryname"
                                                            (focusout)="getGLNumber(subcategoryname,i)">
                                                            {{subcategoryname.code}}
                                                        </mat-option>
                                                    </ng-container>
                                                </mat-autocomplete>
                                            </mat-form-field>
                                        </td>
                                        <td>
                                            <mat-form-field
                                                style="width:90px;font-family: 'Times New Roman', Times, serif;font-size:15px">

                                                <input matInput placeholder="GL Number" type="text"
                                                    formControlName="debitglno" autocomplete="off"
                                                    (keypress)="only_numalpha($event)" [readonly]="true">
                                            </mat-form-field>
                                        </td>
                                        <!-- <td>
                                            <mat-form-field
                                                style="width:150px;font-family: 'Times New Roman', Times, serif;font-size:15px"
                                                (click)="getbs('')">


                                                <mat-label>BS</mat-label>

                                                <input #bsInput placeholder="BS" matInput formControlName="bs"
                                                    [matAutocomplete]="bstype" required>
                                                <mat-autocomplete #bstype="matAutocomplete" [displayWith]="displaybsFn"
                                                    (opened)="bsScroll()">
                                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                                    </mat-option>
                                                    <ng-container *ngIf="!isLoading">
                                                        <mat-option *ngFor="let bsname of bsNameData" [value]="bsname"
                                                            (click)="bsid(bsname,bsname.code)">
                                                            {{bsname.name}}
                                                        </mat-option>
                                                    </ng-container>
                                                </mat-autocomplete>


                                            </mat-form-field>
                                        </td>
                                        <td>
                                            <mat-form-field
                                                style="width:150px;font-family: 'Times New Roman', Times, serif;font-size:15px"
                                               >



                                                <mat-label>CC</mat-label>
                                                <input #ccinput placeholder="CC" matInput formControlName="cc"
                                                    [matAutocomplete]="cctype" required>
                                                <mat-autocomplete #cctype="matAutocomplete" [displayWith]="displayccFn"
                                                    (opened)="ccScroll()">
                                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                                    </mat-option>
                                                    <ng-container *ngIf="!isLoading">
                                                        <mat-option *ngFor="let ccname of ccNameData" [value]="ccname"
                                                            (click)="getccdata(ccname.code,ccname.id)">
                                                            {{ccname.name}}
                                                        </mat-option>
                                                    </ng-container>
                                                </mat-autocomplete>

                                            </mat-form-field>
                                        </td>
                                        <td>
                                            <mat-form-field
                                                style="width:50px;font-family: 'Times New Roman', Times, serif;font-size:15px">
                                                <input matInput placeholder="Desc" formControlName="remarks"  (keypress)="characterOnly($event)"
                                                    autocomplete="off">

                                            </mat-form-field>
                                        </td>
                                        <td>

                                            <mat-form-field
                                                style="width:65px;font-family: 'Times New Roman', Times, serif;font-size:15px">

                                                <input matInput placeholder="Amount" type="text" autocomplete="off"
                                                    (keypress)="numberOnlyandDot($event)" formControlName="amount">
                                            </mat-form-field>
                                        </td>
                                        <td>
                                            <mat-form-field
                                                style="width:40px;font-family: 'Times New Roman', Times, serif;font-size:15px">

                                                <input matInput placeholder="Adjust" type="text"
                                                    formControlName="deductionamount" autocomplete="off" [value]="0"
                                                    (keypress)="numberOnlyandDot($event)">
                                            </mat-form-field>
                                        </td>
                                        <td>
                                            <span (click)="adddsplit(i)" class="material-icons"> call_split</span>
                                            <span *ngIf="getDebitSections(DebitDetailForm).length > 1"
                                                (click)="removedebitSection(i)" class="material-icons">remove</span>
                                        </td>
                                        <td>
                                            <mat-form-field
                                                style="width:50px;font-family: 'Times New Roman', Times, serif;font-size:15px">

                                                <input matInput placeholder="Debit" type="text" autocomplete="off"
                                                    (keypress)="numberOnlyandDot($event)" formControlName="amount"
                                                    readonly>

                                            </mat-form-field>

                                        </td>

                                        <!-- <td>
                                            <mat-form-field
                                                style="width:38px;font-family: 'Times New Roman', Times, serif;font-size:15px">

                                                <input matInput placeholder="%" formControlName="ccbspercentage"
                                                    autocomplete="off" (keypress)="only_numalpha($event)"
                                                    (click)="addondebitindex(i)">
                                            </mat-form-field>
                                        </td> -->
                                        <!-- <td> -->
                                            <!-- <span (click)="adddebitSection()" class="material-icons"> note_add</span> -->
                                            <!-- *ngIf="getDebitSections(DebitDetailForm).length > 1" -->
                                            <!-- <span (click)="removedebitSection(i)" class="material-icons">remove</span> -->
                                        <!-- </td> 

                                        <td>
                                            <button mat-icon-button type="button">
                                                <mat-icon style="color: green;" aria-label="Edit"
                                                    (click)="deletedebitdetail(section,i)">
                                                    delete</mat-icon>
                                            </button>
                                        </td>
                                        <td>
                                           <button #ccbsOpen type="button" class="btn btn-outline-primary"
                                               matTooltip="Add CCBS"
                                               (click)="addccbs(section,DebitDetailForm.value,i)"
                                               style="border-radius:40px;margin-left:5px;color: mediumblue;"
                                               data-toggle="modal" data-target="#createccbsdetails"><span
                                                   class="fa fa-arrow-right"></span></button> 
   
                                       </td>


                                    </tr>




                                </ng-container>
                                <tr>
                                    <th class="totaldisplay" colspan="7"
                                        style="font-family: 'Times New Roman', Times, serif;;font-size:15px">Net Amount:
                                    </th>
                                    <td>{{debitsum | currency:'INR'}}</td>


                                </tr>
                            </table>
                        </div>
                        <tr>
                            <td>
                                <button type="button" style="border-radius:40px;margin-left: 450px;"
                                    class="btn btn-outline-primary" (click)="debitform()" [disabled]="debitsaved">
                                    <!-- [disabled]="submitdebitdtlbtn" 

                                    Save
                                </button>
                            </td>
                            <td>
                                <button type="button"
                                    style="border-radius:40px;margin-left:15px;font-family: 'Times New Roman', Times, serif;"
                                    class="btn btn-outline-primary" (click)="debitbacks()">
                                    Back</button>
                            </td>
                        </tr>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div> -->


<!-- -----gl popup------ -->



<div *ngIf="showglpopup">

    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
        id="createmodalforpopup">
        <div class="modal-dialog modal-xl" style="width: 50%;">

            <div class="modal-content">
                <div class="modal-header" style="background:rgba(23, 204, 23, 0.288);">
                    <h2 class="modal-title" style="color:black ;">Credit GL</h2>
                    <button type="button" #closebuttons class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div style="margin-left: 70px;margin-right: 80%;margin-top: 2%; width: 80%;">


                    <form [formGroup]="creditglForm">
                        <table>
                            <div>

                                <tr>
                                    <td>
                                        <mat-form-field
                                            style="width:150px;font-family: 'Times New Roman', Times, serif;">
                                            <input matInput placeholder="Paymode Name" formControlName="name"
                                                autocomplete="off" readonly>
                                        </mat-form-field>
                                    </td>&nbsp;&nbsp;
                                    <td>
                                        <mat-form-field style="width: 150px;margin-left: 20px;">
                                            <mat-label>Credit Gl</mat-label>
                                            <mat-select formControlName="glnum">
                                                <mat-option *ngFor="let gl of glList" [value]="gl.id"
                                                    (click)="getgl(gl.glno)">
                                                    {{gl.glno}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </td>

                                </tr>

                            </div>
                        </table>
                        <tr>
                            <div style="margin-bottom: 5%;">
                                <button type="submit" style="border-radius: 40px;margin-left: 80px;"
                                    class="btn btn-outline-primary" (click)="glsubmitForm()">Submit</button>

                            </div>
                        </tr>
                    </form>


                </div>

            </div>
        </div>
    </div>


</div>
<!-- ---------- -->
<!-- -------ppx popup------ -->



<div *ngIf="showppxmodal">
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
        id="createmodalforpopup">
        <div class="modal-dialog modal-xl " style="width: 70%;">
            <div class="modal-content">
                <div class="modal-header" style="background:rgba(23, 204, 23, 0.288);">
                    <h2 class="modal-title" style="color:black ;text-align: center;">PPX Details</h2>
                    <button type="button" class="close" #closebutton data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div style="margin-left: 50px;margin-right: 80%;margin-top: 2%; width: 80%;">
                    <div class="container">
                        <div class="row">
                            <div class="table-responsive">
                                <table class="table table-bordered" fixed-header
                                    style="width: 95%;margin-top: 10px;margin-left:30px;overflow-x: hidden;">
                                    <thead class="table_header" style="text-align: left;">
                                        <tr>
                                            <th style="text-align: center;">S.No</th>
                                            <th style="text-align: center;">Received by</th>
                                            <th style="text-align: center;">Ref no</th>
                                            <th style="text-align: center;">Invoice no</th>
                                            <th style="text-align: center;">Branch Name</th>
                                            <th style="text-align: center;">Branch Code</th>
                                            <th style="text-align: center;">Initial Amount</th>
                                            <th style="text-align: center;">Balance GL</th>
                                            <th style="text-align: center;">Amount in ECF</th>
                                            <th style="text-align: center;">Liquidate</th>
                                            <th style="text-align: center;">Select</th>


                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let attach of attachmentlist; index as i">
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                    </tbody>
                                </table>

                            </div>
                            <tr>
                                <td>
                                    <button type="button" style="border-radius:40px;margin-left: 450px;"
                                        class="btn btn-outline-primary">


                                        Submit
                                    </button>
                                </td>
                                <td>
                                    <button type="button"
                                        style="border-radius:40px;margin-left:15px;font-family: 'Times New Roman', Times, serif;"
                                        class="btn btn-outline-primary">
                                        Back</button>
                                </td>
                        </div>
                    </div>


                </div>
            </div>
        </div>
    </div>
</div>

<!-- -------CCBS form------ -->

<div *ngIf="showccbspopup">
    <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true"
        id="createccbsdetails">
        <div class="modal-dialog modal-xl " style="width: 85%;">
            <div class="modal-content">
                <div class="modal-header" style="background:rgba(23, 204, 23, 0.288);">

                    <button type="button" class="close" #ccbsclose data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <h2 style="margin-left: 4px;font-family:'Times New Roman';font-weight:bold;">CCBS Details</h2>
                <br>
                <h2 style="margin-left: 8px;font-family:'Times New Roman';font-size:17px ;">Total Amount :
                    {{debitamount}}</h2>

                <!-- &nbsp;&nbsp;&nbsp;&nbsp; -->

                <button type="button" class="btn btn-outline-success" matTooltip="Add CCBS details"
                    style="border-radius:30px;margin-left:5px;margin-right:1014px" (click)="addccbsSection()">
                    <span class="fa fa-plus"></span>
                </button>

                <div>
                    <form [formGroup]="ccbsForm">

                        <div class="table-responsive" id="styleScroll"
                            style="margin-top: 1%;width: 95%;margin-left: 25px;">
                            <table class="table scrolltable table-bordered" fixed-header>
                                <thead class="table_header" style='font-family:"Times New Roman";font-size:15px'>
                                    <tr>

                                        <th>S.No</th>
                                        <th>CC Code</th>
                                        <th>BS Code </th>
                                        <!-- <th>Code</th> -->
                                        <!-- <th>GL No.</th> -->
                                        <th>Remarks</th>
                                        <th>CCBS Percentage</th>
                                        <th>Amount</th>                                       
                                        <!-- <th>Remove</th> -->
                                        <th>Action</th>

                                    </tr>
                                </thead>
                                <ng-container formArrayName="ccbsdtl"
                                    *ngFor="let section of getccbsSections(ccbsForm); let i = index">
                                    <tr [formGroupName]="i">
                                        <!-- <td *ngIf="showaltslno == false">{{creditslno}}</td>
                                        <td *ngIf="showaltslno == true">{{creditslnos}}</td> -->
                                        <td>{{i+1}}</td>
                                        <td>
                                            <mat-form-field
                                                style="width:150px;font-family: 'Times New Roman', Times, serif;font-size:15px"
                                                (click)="getbsdropdown()">


                                                <mat-label>BS</mat-label>

                                                <input #bsInput placeholder="BS" matInput formControlName="bs_code"
                                                    [matAutocomplete]="bstype" required>
                                                <mat-autocomplete #bstype="matAutocomplete" [displayWith]="displaybsFn"
                                                    (opened)="bsScroll()">
                                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                                    </mat-option>
                                                    <ng-container *ngIf="!isLoading">
                                                        <mat-option *ngFor="let bsname of bsNameData" [value]="bsname"
                                                            (click)="bsid(bsname,bsname.code)">
                                                            {{bsname.name}}
                                                        </mat-option>
                                                    </ng-container>
                                                </mat-autocomplete>


                                            </mat-form-field>
                                        </td>                                      
                                       <td>
                                            <mat-form-field
                                                style="width:150px;font-family: 'Times New Roman', Times, serif;font-size:15px">
                                                <mat-label>CC</mat-label>
                                                <input #ccinput placeholder="CC" matInput formControlName="cc_code"
                                                    [matAutocomplete]="cctype" required>
                                                <mat-autocomplete #cctype="matAutocomplete" [displayWith]="displayccFn"
                                                    (opened)="ccScroll()">
                                                    <mat-option *ngIf="isLoading" class="is-loading">Loading...
                                                    </mat-option>
                                                    <ng-container *ngIf="!isLoading">
                                                        <mat-option *ngFor="let ccname of ccNameData" [value]="ccname"
                                                            (click)="getccdata(ccname.code,ccname.id)">
                                                            {{ccname.name}}
                                                        </mat-option>
                                                    </ng-container>
                                                </mat-autocomplete>

                                            </mat-form-field>
                                        </td>
                                        <!-- <td>
                                            <mat-form-field
                                                style="width:90px;font-family: 'Times New Roman', Times, serif;font-size:15px">

                                                <input matInput placeholder="GL Number" type="text"
                                                    formControlName="glno" autocomplete="off"
                                                    (keypress)="only_numalpha($event)" [readonly]="true">
                                            </mat-form-field>
                                        </td>
                                        -->
                                        <td>
                                            <mat-form-field
                                                style="width:50px;font-family: 'Times New Roman', Times, serif;font-size:15px">
                                                <input matInput placeholder="Desc" formControlName="remarks"  (keypress)="characterOnly($event)"
                                                    autocomplete="off">

                                            </mat-form-field>
                                        </td>
                                        <td>
                                            <mat-form-field
                                                style="width:38px;font-family: 'Times New Roman', Times, serif;font-size:15px">

                                                <input matInput placeholder="%" formControlName="ccbspercentage"
                                                    autocomplete="off" (keypress)="only_numalpha($event)"
                                                    (click)="addonccbsindex(i)">
                                            </mat-form-field>
                                        </td>                                       
                                        <td>

                                            <mat-form-field
                                                style="width:65px;font-family: 'Times New Roman', Times, serif;font-size:15px">

                                                <input matInput placeholder="Amount" type="text" autocomplete="off"
                                                    (keypress)="numberOnlyandDot($event)" formControlName="amount" >
                                        </mat-form-field>
                                        </td>
                                        <td>
                                            <button mat-icon-button type="button">
                                                <mat-icon style="color: green;" aria-label="Edit"
                                                    (click)="deleteccbs(section,i)">
                                                    delete</mat-icon>
                                            </button>
                                        </td>
                                    </tr>
                                </ng-container>
                                <tr>
                                    <td class="totaldisplay" colspan="5"
                                        style="font-family: 'Times New Roman', Times, serif;;font-size:15px">Net Amount:
                                    </td>
                                    <td>{{ccbsssum | currency:'INR'}}</td>


                                </tr>
                            </table>
                        </div>
                        <tr>
                            <td>
                                <button type="button" style="border-radius:40px;margin-left: 450px;"
                                    class="btn btn-outline-primary" (click)="ccbsform()" [disabled]="ccbssaved">
                                    <!-- [disabled]="submitccbsbtn" -->

                                    Save
                                </button>
                            </td>
                            <td>
                                <button type="button"
                                    style="border-radius:40px;margin-left:15px;font-family: 'Times New Roman', Times, serif;"
                                    class="btn btn-outline-primary" data-dismiss="modal" (click)="ccbsbacks()">
                                    Back</button>
                            </td>
                        </tr>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- ----------- -->

<!-- ----Supplier -------- -->

<!-- <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabels" aria-hidden="true"
    id="supplierdetailpopup">
    <div class="modal-dialog modal-xl" style="width: 90%;">

        <div class="modal-content">
            <div class="modal-header" style="background:rgba(23, 204, 23, 0.288);">
                <h2 class="modal-title" style="color:black ;text-align: center;">Supplier Details</h2>
                <button type="button" #closebuttons class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div style="margin-left: 70px;margin-right: 80%;margin-top: 2%; width: 80%;">


                <form [formGroup]="SupplierDetailForm">
                    <table>
                        <div>

                            <tr>
                                <td>
                                    <mat-form-field style="width:200px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="Supplier Name" formControlName="supplier_name"
                                            autocomplete="off" required>
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field
                                        style="width:200px;margin-left:50px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="Supplier Pin-Code" formControlName="pincode"
                                            autocomplete="off" required>
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field
                                        style="width:200px;margin-left:50px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="Supplier Gst-No" formControlName="suppliergst"
                                            autocomplete="off" required>
                                    </mat-form-field>
                                </td>
                                <td>
                                    <mat-form-field
                                        style="width:200px;margin-left:50px;font-family: 'Times New Roman', Times, serif;">
                                        <input matInput placeholder="Invoice No" formControlName="invoiceno"
                                            autocomplete="off" required>
                                    </mat-form-field>
                                </td>

                            </tr>
                            <tr>

                                <td>
                                    <mat-form-field style="width:200px;font-family: 'Times New Roman', Times, serif;">
                                        <mat-label>Date</mat-label>
                                        <input matInput [matDatepicker]="picker1" placeholder="Date"
                                            formControlName="invoicedate" [max]="tomorrow" required>
                                        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                        <mat-datepicker #picker1></mat-datepicker>
                                    </mat-form-field>
                                </td>

                            </tr>

                        </div>
                    </table>
                    <tr>
                        <div style="margin-bottom: 5%;">
                            <button type="submit" style="border-radius: 410px;margin-left: 410px;"
                                class="btn btn-outline-primary" (click)="supplierbackform()">Close</button>
                            <button type="submit" style="border-radius: 410px;margin-left: 10px;"
                                class="btn btn-outline-primary" (click)="suppliersubmitForm()">Submit</button>

                        </div>
                    </tr>
                </form>


            </div>

        </div>
    </div>
</div> -->



<!-- <pre>{{InvoiceDetailForm.value | json}}</pre> -->